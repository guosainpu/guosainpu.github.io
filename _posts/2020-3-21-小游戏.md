---
layout:     post
title:      ä»0åˆ°1æ„å»ºè®¡ç®—æœº(11/12)--åœ¨Hackä¸Šè¿è¡Œå°æ¸¸æˆ
date:       2020-03-21
author:     "guosai"
tags:
    - è®¡ç®—æœºåŸºç¡€
    - ä»0åˆ°1æ„å»ºè®¡ç®—æœº
---


ç»è¿‡äº†å‰é¢10ç« æ¼«é•¿çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬ç»ˆäºè¦è¾¾æˆæˆ‘ä»¬çš„ç›®æ ‡äº†ï¼š**åœ¨ä¸€ä¸ªå®Œå…¨ç”±è‡ªå·±å®ç°çš„è®¡ç®—æœºå¹³å°ä¸Šè¿è¡Œä¸€ä¸ªå°æ¸¸æˆ**ã€‚è¿™ä¸ªå°æ¸¸æˆè¦ç»è¿‡ç¼–å†™ã€ç¼–è¯‘ã€è½¬æ¢è™šæ‹Ÿæœºå­—èŠ‚ç ã€æ±‡ç¼–ã€ç”Ÿæˆæœºå™¨ä»£ç ç­‰æ­¥éª¤ï¼Œæœ€ç»ˆè¿è¡Œåœ¨è‡ªå·±æ­å»ºçš„è™šæ‹Ÿè®¡ç®—æœºä¸Šã€‚åœ¨æ¸¸æˆçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤éƒ½æ˜¯æˆ‘ä»¬äº²æ‰‹ç¼–å†™ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚æˆ‘ä»¬éƒ½äº†å¦‚æŒ‡æŒï¼Œæ˜¯æˆ‘ä»¬å®Œå®Œå…¨å…¨åœ°åˆ›é€ äº†å®ƒï¼ˆè™½ç„¶éœ€è¦åŸºäºä¸€ä¸ªç¡¬ä»¶è™šæ‹Ÿæœºï¼‰ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä»¶éå¸¸æœ‰æ„æ€çš„äº‹æƒ…ã€‚

### éª‘æ‰‹å¿«è·‘

æˆ‘è¿™é‡Œç¼–å†™äº†ä¸€ä¸ªéå¸¸ç®€å•çš„å°æ¸¸æˆï¼šéª‘æ‰‹å¿«è·‘ã€‚åœ¨å±å¹•ä¸Šä¼šä½ç½®éšæœºåœ°å‡ºç°**é£Ÿç‰©**å’Œ**æˆ¿å­**ï¼Œæˆ‘ä»¬æ‰®æ¼”éª‘æ‰‹ï¼Œé€šè¿‡ä¸Šä¸‹å·¦å³é”®æ§åˆ¶éª‘æ‰‹çš„è¡ŒåŠ¨ã€‚éª‘æ‰‹éœ€è¦å…ˆå–åˆ°é£Ÿç‰©è£…åˆ°è½¦ä¸Šï¼Œç„¶åè¿é€åˆ°æˆ¿å­å¤„å¹¶é¢†å–å¥–åŠ±é‡‘ï¼Œå®Œæˆé…é€åéª‘æ‰‹åˆå¯ä»¥ç»§ç»­é…é€ä¸‹ä¸€å•ï¼Œå½“å¥–åŠ±é‡‘è¾¾åˆ°ä¸€å®šæ•°é¢åæ¸¸æˆé€šå…³ğŸ™„ã€‚

<center><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd1tl5zrv9j30tc0gga9v.jpg" width="500"></center>
<center><figcaption>éª‘æ‰‹å–è´§ä¸­</figcaption></center>

<center><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd1tn7ycv5j30tg0gkglf.jpg" width="500"></center>
<center><figcaption>éª‘æ‰‹å–åˆ°è´§</figcaption></center>

<center><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd1tplj00dj30tg0gsglf.jpg" width="500"></center>
<center><figcaption>éª‘æ‰‹é…é€ä¸­</figcaption></center>

<center><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd1tv6zcbrj30tg0guglf.jpg" width="500"></center>
<center><figcaption>é…é€ä¸‹ä¸€å•</figcaption></center>

<center><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd1to4ylhsj30tc0giq2r.jpg" width="500"></center>
<center><figcaption>å¥–åŠ±é‡‘è¾¾æ ‡ï¼Œé€šå…³</figcaption></center>


### å®ç°

main() å…ˆåˆ›å»ºæ¸¸æˆå®ä¾‹ï¼Œç„¶åè¿è¡Œæ¸¸æˆï¼Œæ¸¸æˆç»“æŸåè°ƒç”¨ dispose() å›æ”¶å†…å­˜

```java
class Main {

    function void main() {
        var RunnerGame game;
        do RunnerGame.newInstance();
        let game = RunnerGame.getInstance();

        do game.run();
        do game.dispose();

        return;
    }
}
```

RunnerGameç±»æ˜¯æ¸¸æˆçš„æ ¸å¿ƒæ§åˆ¶ç±»ã€‚è´Ÿè´£åˆ›å»ºéª‘æ‰‹ã€é£Ÿç‰©ã€æˆ¿å­ç­‰å¯¹è±¡ï¼›ç„¶åç›‘å¬ç”¨æˆ·é”®ç›˜è¾“å…¥ã€æ§åˆ¶æ¸¸æˆé€»è¾‘ã€è°ƒæ•´æ¸¸æˆçŠ¶æ€ã€æ§åˆ¶å±å¹•åˆ·æ–°ã€‚

```java
class RunnerGame {

    static RunnerGame instance;    // æ¸¸æˆå•ä¾‹

    field  Runner     runner;             // éª‘æ‰‹
    field  Food       food;               // é£Ÿç‰©
    field  House      house;              // é…é€åœ°ç‚¹
    
    field  int        runnerX, runnerY;   // éª‘æ‰‹å½“å‰ä½ç½®
    field  int        foodX, foodY;       // é£Ÿç‰©å½“å‰ä½ç½®
    field  int        houseX, houseY;     // æˆ¿å±‹å½“å‰ä½ç½®
    field  boolean    picked;             // æ˜¯å¦å–åˆ°è´§
    field  int        score;              // æŒ£åˆ°çš„é’±

    field  boolean    exit;               // æ¸¸æˆç»“æŸ

    constructor RunnerGame new() {
	    do Screen.clearScreen();

	    let runnerX = 230;
	    let runnerY = 120;
	    let foodX = 100;
	    let foodY = 200;
	    let houseX = 400;
	    let houseY = 50;

	    let runner = Runner.new(runnerX, runnerY);
	    let house = House.new(houseX, houseY);
	    let food = Food.new(foodX, foodY);

	    let picked = false;
	    let score = 0;
	    let exit = false;

	    // åº•éƒ¨åˆ†æ•°åˆ†æ•°è®°å½•åŒº
        do Screen.drawRectangle(0, 238, 511, 240);
	    do Output.moveCursor(22,0);
	    do Output.printString("money: 0");
	
        return this;
    }

    method void dispose() {
        do runner.dispose();
	    do food.dispose();
	    do house.dispose();
        do Memory.deAlloc(this);

        return;
    }

    function void newInstance() {
        let instance = RunnerGame.new();
        return;
    }
    
    function RunnerGame getInstance() {
        return instance;
    }

    // å¼€å§‹æ¸¸æˆã€‚ç”¨é”®ç›˜æ§åˆ¶éª‘æ‰‹ä½ç½®ï¼Œå…ˆå–è´§ï¼Œå†é€è´§ï¼Œç„¶åè·å¾—å¥–åŠ±
    method void run() {
        var char key;
        while (~exit) {
            // ç­‰å¾…æŒ‰ä¸‹æŒ‰é”®
            while ((key = 0) & (~exit)) {
                let key = Keyboard.keyPressed();
                do Sys.wait(50);
            }

            do moveRunner(key);

            // ç­‰å¾…æŒ‰é”®æ¾å¼€
            while ((~(key = 0)) & (~exit)) {
                let key = Keyboard.keyPressed();
                do Sys.wait(50);
            }

            do updateStatus();
            do reDraw();
        }

	    if (exit) {
            do Output.moveCursor(1,23);
            do Output.printString("Congratulations!");
	    }
            
        return;
    }

    method void moveRunner(int key) {
        // å·¦ = 130ï¼Œä¸Š = 131ï¼Œå³ = 132ï¼Œä¸‹ = 133
        if (key = 130) { 
        	let runnerX = runnerX - 20;
        } else {
            if (key = 131) { 
            	let runnerY = runnerY - 20;
            } else {
                if (key = 132) {
                	let runnerX = runnerX + 20;
                } else {
                	if (key = 133) {
                		let runnerY = runnerY + 20;
                	}
                }
	        }
        }

        // é˜²æ­¢è¶Šç•Œ
        if (runnerX > 490) {
        	let runnerX = 490;
        }
        if (runnerX < 0) {
        	let runnerX = 0;
        }

        if (runnerY > 236) {
        	let runnerY = 236;
        }
        if (runnerY < 0) {
        	let runnerY = 0;
        }

        do runner.moveTo(runnerX, runnerY);

        return;
    }

    method void updateStatus() {
    	// å–åˆ°é£Ÿç‰©
    	if ((Math.abs(foodX - runnerX) < 20) & (Math.abs(foodY - runnerY) < 20)) {
    		let picked = true;
    		do runner.setPicked(picked);
    	}

    	// é€åˆ°é£Ÿç‰©
    	if (picked & ((Math.abs(houseX - runnerX) < 20) & (Math.abs(houseY - runnerY) < 20))) {
    		let score = score + 30;
    		if (score > 100) {
    			let exit = true;
    		}

    		let picked = false;
    		do runner.setPicked(picked);

    		do newRound();
    	}

    	return;
    }

    // å®Œæˆä¸€æ¬¡é…é€ï¼Œæ›´æ–°é£Ÿç‰©å’Œæˆ¿å±‹çš„ä½ç½®
    method void newRound() {
    	// æ›´æ–°ä½ç½®
    	let foodX = mod(foodX + houseX , 490);
    	let foodY = mod(foodY + houseY , 236);
    	let houseX = mod(foodY + houseX , 490);
    	let houseY = mod(houseX + foodY , 236);

    	do food.moveTo(foodX, foodY);
    	do house.moveTo(houseX, houseY);

    	return;
    }

    // é‡æ–°ç»˜åˆ¶
    method void reDraw() {
    	do runner.show();
    	do house.show();
    	if (picked) {
            do food.hide();    		
    	} else {
            do food.show();   		
    	}

    	do Output.moveCursor(22,7);
        do Output.printInt(score);

        return;
    }

    // è¡¥å……ä¸€ä¸ªå–æ¨¡çš„æ–¹æ³•
    method int mod(int x, int y) {
        var int q;
        let q = Math.divide(x, y);
        return x - (q*y);
    }
}
```

Runnerï¼ŒHouseï¼ŒFoodç±»è´Ÿè´£è¡¨ç¤ºä¸ªå­—çš„å¯¹è±¡ï¼Œç»´æŠ¤å¯¹è±¡ä½ç½®ä¿¡æ¯ï¼ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¹¶è´Ÿè´£ç»˜åˆ¶è‡ªå·±çš„å›¾å½¢ã€‚

```java
class Runner {

    field int x, y;           // éª‘æ‰‹ä½ç½®
    field int width, height;  // éª‘æ‰‹å®½é«˜ 20*20
    field boolen picked;          // æ˜¯å¦å·²å–è´§

    // æ–°åˆ›å»ºä¸€ä¸ªéª‘æ‰‹
    constructor Runner new(int Ax, int Ay) {
        let x = Ax;
        let y = Ay;
        let width = 20;
        let height = 20;
        let picked = false;

        do show();

        return this;
    }

    method void dispose() {
        do Memory.deAlloc(this);
        return;
    }

    // åœ¨screenä¸Šå±•ç¤ºéª‘æ‰‹
    method void show() {
        do Screen.setColor(true);
        do draw();
        return;
    }

    // æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„éª‘æ‰‹
    method void hide() {
        do Screen.setColor(false);
        do draw();
        return;
    }

    /** ç»˜åˆ¶æˆ¿å±‹ */
    method void draw() {
        do Screen.drawRectangle(x, y + 9, x + 19, y + 10);
        do Screen.drawCircle(x + 5,  y + 15, 4);
        do Screen.drawCircle(x + 15, y + 15, 4);
        do Screen.drawLine(x + 15, y + 9, x + 15, y + 4);
        do Screen.drawLine(x + 11, y + 4, x + 19, y + 4);

        if (picked) {
            do Screen.drawCircle(x + 4, y + 4, 3);
        }

        return;
    }

    method void setPicked(boolean Apicked) {
        let picked = Apicked;
        return;
    }

    method void moveTo(int Ax, int Ay) {
        do hide();  //å…ˆæŠ¹æ‰å½“å‰éª‘æ‰‹

        let x = Ax;
        let y = Ay;
        do draw();   // é‡æ–°ç”»éª‘æ‰‹

        return;
    }
}

class Food {

    field int x, y;           // é£Ÿç‰©ä½ç½®
    field int width, height;  // é£Ÿç‰©å®½é«˜ 15*15

    // æ–°åˆ›å»ºä¸€ä¸ªé£Ÿç‰©
    constructor Food new(int Ax, int Ay) {
        let x = Ax;
        let y = Ay;
        let width = 15;
        let height = 15;

        do show();

        return this;
    }

    method void dispose() {
    	...
    }

    // åœ¨screenä¸Šå±•ç¤ºé£Ÿç‰©
    method void show() {
    	...
    }

    // æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„é£Ÿç‰©
    method void hide() {
    	...
    }

    /** ç»˜åˆ¶é£Ÿç‰© */
    method void draw() {
    	...
    }

    method void moveTo(int Ax, int Ay) {
    	...
    }
}

class House {

    field int x, y;           // æˆ¿å±‹ä½ç½®
    field int width, height;  // æˆ¿å±‹å®½é«˜ 20*20

    // æ–°åˆ›å»ºä¸€ä¸ªæˆ¿å±‹
    constructor House new(int Ax, int Ay) {
        let x = Ax;
        let y = Ay;
        let width = 20;
        let height = 20;

        do show();

        return this;
    }

    method void dispose() {
    	...
    }

    // åœ¨screenä¸Šå±•ç¤ºæˆ¿å±‹
    method void show() {
    	...
    }

    // æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„æˆ¿å±‹
    method void hide() {
    	...
    }

    /** ç»˜åˆ¶æˆ¿å±‹ */
    method void draw() {
    	...
    }

    method void moveTo(int Ax, int Ay) {
    	...
    }
}

```

### å¹¿å‘Š

<center><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd1u99ll6aj31j60qcx0l.jpg" width="800"></center>
<center><figcaption><h2>å½“ç¾å›¢éª‘æ‰‹ï¼Œåšæœ‰ä¸ºé’å¹´</h2></figcaption></center>
