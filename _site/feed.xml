<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.6">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2020-03-25T17:06:57+08:00</updated><id>/feed.xml</id><title type="html">ä¸€åªè‰å±¥è™«</title><subtitle>Your Site Description
</subtitle><author><name>Your Name</name></author><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(12/12)â€“æ”¶è·å’Œæ€»ç»“</title><link href="/2020/03/22/%E6%94%B6%E8%8E%B7%E5%92%8C%E6%80%BB%E7%BB%93.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(12/12)--æ”¶è·å’Œæ€»ç»“" /><published>2020-03-22T00:00:00+08:00</published><updated>2020-03-22T00:00:00+08:00</updated><id>/2020/03/22/%E6%94%B6%E8%8E%B7%E5%92%8C%E6%80%BB%E7%BB%93</id><content type="html" xml:base="/2020/03/22/%E6%94%B6%E8%8E%B7%E5%92%8C%E6%80%BB%E7%BB%93.html">&lt;p&gt;å®ŒæˆNand2Tetrisè¿™é—¨è¯¾ï¼Œæˆ‘å¤§æ¦‚ç”¨äº†4ä¸ªå¤šæœˆçš„æ—¶é—´ï¼›å®Œæˆä»0åˆ°1æ„å»ºè®¡ç®—æœºç³»åˆ—åšå®¢ï¼Œå¤§æ¦‚ç”¨äº†5ä¸ªå¤šæœˆçš„æ—¶é—´ï¼ˆè¯¾ç¨‹å’Œåšå®¢æ—¶é—´ä¸Šæœ‰äº¤é›†ï¼‰ã€‚æœŸé—´ä¹Ÿå› ä¸ºå·¥ä½œè¾ƒå¿™çš„åŸå› ï¼ŒæŒ‚èµ·è¿‡è‹¥å¹²æ¬¡ï¼Œå¾ˆé«˜å…´æœ€åè¿˜æ˜¯åšæŒå®Œæˆäº†ã€‚æœ€ååœ¨è¿™é‡Œå†æ¬¡åšä¸€äº›æ€»ç»“ï¼Œç®—æ˜¯å¯¹è¿™æ®µå­¦ä¹ è¿‡ç¨‹çš„ä¸€ä¸ªæš‚æ—¶çš„æ”¶å°¾ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥è¯´æ˜¯æš‚æ—¶çš„æ”¶å°¾ï¼Œæ˜¯å› ä¸ºæˆ‘è§‰å¾—è¯¾ç¨‹ä¸­å¾ˆå¤šçŸ¥è¯†ç‚¹è‡ªå·±ç†è§£å¾—è¿˜ä¸åˆ°ä½ï¼Œå¾ˆå¤šç²¾åçš„æ€æƒ³ä¹Ÿæ²¡æœ‰å®Œå…¨getåˆ°ã€‚è¿™é—¨è¯¾ç¨‹æ˜¯ä¸€é—¨åŸºç¡€æ€§çš„è¯¾ç¨‹ï¼Œä¹Ÿæ˜¯ä¸€é—¨å¸¸è¯»å¸¸æ–°çš„è¯¾ç¨‹ï¼Œå€¼å¾—ç»å¸¸å›é¡¾å’Œæ€è€ƒã€‚è¿™é—¨è¯¾ç¨‹ä¹Ÿæ˜¯ä¸€é—¨å¾ˆå¥½çš„å…¥é—¨è¯¾ç¨‹ã€æ¡†æ¶è¯¾ç¨‹ï¼ˆå“ˆä½›å¤§å­¦çš„å­¦ç”ŸæŠŠå®ƒæˆç§°ä¸ºè®¡ç®—æœºä¸“ä¸š101è¯¾ç¨‹ï¼‰ï¼Œå®ƒè®©æˆ‘ä»¬å¯¹è®¡ç®—æœºç§‘å­¦çŸ¥è¯†ä½“ç³»æœ‰äº†ä¸€ä¸ªå¾ˆç›´è§‚çš„æ„Ÿå—å’Œå®è·µï¼ˆè‡³å°‘æ˜¯æˆ‘ä½œä¸ºä¸€ä¸ªiOSç¨‹åºå‘˜èƒ½å¤Ÿæ¥è§¦åˆ°çš„çŸ¥è¯†ä½“ç³»ï¼‰ã€‚å¸ˆå‚…é¢†è¿›é—¨ï¼Œå¦‚æœåç»­æˆ‘ä»¬å¯¹å…¶ä¸­çš„æŸäº›æ–¹å‘æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå¯ä»¥å†å»æ·±å…¥åœ°å±•å¼€å­¦ä¹ å’Œç ”ç©¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;çŸ¥è¯†ä¸Šçš„æ”¶è·&quot;&gt;çŸ¥è¯†ä¸Šçš„æ”¶è·&lt;/h3&gt;

&lt;h4 id=&quot;è®¡ç®—æœºæ¶æ„ç¡¬ä»¶&quot;&gt;è®¡ç®—æœºæ¶æ„&amp;amp;ç¡¬ä»¶&lt;/h4&gt;

&lt;p&gt;è™½ç„¶åœ¨å­¦æ ¡çš„æ—¶å€™ä¿®è¿‡è®¡ç®—æœºç»„æˆåŸç†ç­‰è¯¾ç¨‹ï¼Œå¯¹è®¡ç®—æœºçš„æ¶æ„å’Œç¡¬ä»¶çš„å·¥ä½œåŸç†æœ‰è¿‡ä¸€å®šäº†è§£ï¼Œä½†åŸºæœ¬æ˜¯åœç•™åœ¨ç†è®ºä¸Šï¼Œç†è§£å¹¶ä¸æ·±å…¥ã€‚é€šè¿‡è¿™æ¬¡äº²æ‰‹å®è·µï¼Œå¯¹è¿™äº›çŸ¥è¯†æœ‰äº†æ›´ç›´è§‚çš„å°è±¡å’Œç†è§£ã€‚ä¾‹å¦‚ï¼Œæ—¶åºèŠ¯ç‰‡å¦‚ä½•è®°å½•æ•°å€¼çŠ¶æ€ï¼ŒALUå¦‚ä½•æ”¯æŒå„ç§æ“ä½œï¼ŒCPUå¦‚ä½•è§£ææŒ‡ä»¤å¹¶æ‰§è¡Œï¼Œç¨‹åºæŠ€è®¡æ•°å™¨å¦‚ä½•å·¥ä½œï¼ŒCPUå’Œå†…å­˜é€šè¿‡å“ªäº›çº¿è¿æ¥ç­‰ç­‰ã€‚è™½ç„¶æˆ‘ä»¬å¹³æ—¶çš„å·¥ä½œå¯èƒ½ä¸ä¼šæ¥è§¦åˆ°è¿™äº›ç»†èŠ‚ï¼Œä½†å­¦ä¹ è¿™äº›çŸ¥è¯†ï¼Œæˆ‘äº†è§£åˆ°äº†æˆ‘æ¯å¤©å·¥ä½œæ—¶é¢å¯¹çš„è®¡ç®—æœºåˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¦åˆ™æ€»ä¼šæœ‰ä¸€ç§å¿ƒè™šçš„æ„Ÿè§‰ã€‚ä¹å±‚ä¹‹å°ï¼Œèµ·äºç´¯åœŸï¼Œæˆ‘è§‰å¾—äº†è§£è¿™äº›çŸ¥è¯†å¯¹æˆ‘çš„æ„ä¹‰åœ¨äºï¼Œå®ƒç»™äº†æˆ‘ç»§ç»­å­¦ä¹ å’Œç ”ç©¶è®¡ç®—æœºä¸Šå±‚çŸ¥è¯†æ—¶å†…å¿ƒçš„è¸å®æ„Ÿã€‚&lt;/p&gt;

&lt;h4 id=&quot;å‡½æ•°è°ƒç”¨è¿‡ç¨‹&quot;&gt;å‡½æ•°è°ƒç”¨è¿‡ç¨‹&lt;/h4&gt;

&lt;p&gt;å¯¹å‡½æ•°è°ƒç”¨è¿‡ç¨‹æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ã€‚è™½ç„¶Hackä¸æ”¯æŒç›´æ¥å¯¹æ ˆçš„æŒ‡é’ˆæ“ä½œæŒ‡ä»¤ï¼Œç”¨è™šæ‹Ÿæœºè¿›è¡Œäº†æ¨¡æ‹Ÿï¼Œä½†æ€»ä½“åŸç†æ˜¯ä¸€è‡´çš„ã€‚ä¾‹å¦‚æ ˆå¸§çš„å¼€è¾Ÿå’Œå›æ”¶ï¼Œå±€éƒ¨å˜é‡å†…å­˜çš„åˆ†é…ï¼Œå¯„å­˜å™¨çš„ä¿å­˜ï¼Œå‡½æ•°è¿”å›åœ°å€ï¼Œå…¥å‚&amp;amp;å›å‚ç­‰ã€‚ç†è§£å‡½æ•°è°ƒç”¨è¿‡ç¨‹å¯¹æˆ‘ä»¬æ˜¯æœ‰å®é™…æ„ä¹‰çš„ï¼Œä¾‹å¦‚å¯¹æˆ‘ä»¬é˜…è¯»æ±‡ç¼–è¯­è¨€ï¼Œæé«˜debugèƒ½åŠ›ï¼Œå†™å‡ºæ•ˆç‡æ›´é«˜çš„ä»£ç ï¼Œå­¦ä¹ ä¸€é—¨æ–°è¯­è¨€ç­‰éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç¼–è¯‘åŸç†&quot;&gt;ç¼–è¯‘åŸç†&lt;/h4&gt;

&lt;p&gt;å¯èƒ½ç»å¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸ä¼šæœ‰æœºä¼šå»ä»0åˆ°1åœ°ç¼–å†™ä¸€æ¬¾ç¼–è¯‘å™¨ã€‚è™½ç„¶Jackç¼–è¯‘å™¨å‡ ä¹æ˜¯ä¸€æ¬¾æœ€ç®€å•çš„ç¼–è¯‘å™¨ï¼Œä½†æˆ‘ä»¬ä»ä¸­ä»èƒ½äº†è§£åˆ°ç¼–è¯‘å™¨å·¥ä½œçš„åŸºæœ¬åŸç†ï¼Œå…¶ä¸­å¾ˆå¤šçš„ä¼˜ç§€æ€æƒ³ä¹Ÿèƒ½è¢«æˆ‘ä»¬åº”ç”¨åˆ°æ—¥å¸¸çš„å·¥ä½œå½“ä¸­ã€‚åŒä¸Šé¢è¯´åˆ°çš„å­¦ä¹ å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸€æ ·ï¼Œç†è§£ç¼–è¯‘åŸç†ä¹Ÿæ˜¯ååˆ†å¯Œæœ‰å®é™…æ„ä¹‰çš„ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¿«æ›´å¥½çš„å­¦ä¹ ç†è§£å…¶ä»–çŸ¥è¯†ã€‚å†µä¸”è‡ªå·±å®ç°ä¸€æ¬¾ç¼–è¯‘å™¨æœ¬èº«å°±æ˜¯ä¸€ä»¶æœ‰è¶£ä¸”æœ‰æŒ‘æˆ˜çš„äº‹æƒ…ï¼Œæˆ‘ä»¬åªè¦èŠ±ä¸€ç‚¹ç‚¹ç²¾åŠ›å’Œè€å¿ƒå°±å¯ä»¥å¼€å‘ä¸€æ¬¾å±äºè‡ªå·±çš„ç¼–è¯‘å™¨äº†ï¼Œä½œä¸ºç¨‹åºå‘˜ä½ å¿ƒåŠ¨äº†å—ï¼Ÿ&lt;/p&gt;

&lt;h4 id=&quot;å†…å­˜ç®¡ç†å’Œioç®¡ç†&quot;&gt;å†…å­˜ç®¡ç†å’ŒI/Oç®¡ç†&lt;/h4&gt;

&lt;p&gt;ä»Hackçš„æ“ä½œç³»ç»Ÿçš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å­¦åˆ°äº†æœ€åŸºæœ¬çš„å†…å­˜åˆ†é…ã€å›æ”¶ç®¡ç†æ–¹å¼ï¼Œä¸ºæˆ‘ä»¬ç»§ç»­å­¦ä¹ å…¶ä»–æ›´é«˜çº§çš„å†…å­˜ç®¡ç†æ“ä½œå¼€äº†ä¸€ä¸ªå¤´ã€‚æˆ‘ä»¬ä¹Ÿå­¦åˆ°äº†æ“ä½œç³»ç»Ÿå¦‚ä½•ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œå¦‚ä½•åœ¨å±å¹•ä¸Šç»˜åˆ¶æ–‡å­—å’Œå›¾æ¡ˆã€‚åªæœ‰å…ˆæŒæ¡äº†å±å¹•ç»˜åˆ¶çš„æœ€åŸºæœ¬çš„åŸç†ï¼Œç„¶åå†é€æ¸æŒæ¡ä¸€äº›GPUåŸç†ã€openGLã€è®¡ç®—æœºå›¾å½¢å­¦ã€ç‰¹å®šå¹³å°çš„æ¸²æŸ“æ¡†æ¶ç­‰ç›¸å…³çš„çŸ¥è¯†åï¼Œæˆ‘ä»¬å†åšç•Œé¢æ¸²æŸ“çš„æ€§èƒ½ä¼˜åŒ–æ—¶æ‰èƒ½åšåˆ°æœ‰æ³•å¯ä¾ï¼Œç”šè‡³åšåˆ°æŠ€æœ¯åˆ›æ–°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‰ç«¯&amp;amp;å®¢æˆ·ç«¯ç¨‹åºå‘˜é€šå‘é«˜é˜¶ç¨‹åºå‘˜çš„å¿…ç»ä¹‹è·¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…³äºå­¦ä¹ ä¸æé«˜çš„æ€è€ƒ&quot;&gt;å…³äºå­¦ä¹ ä¸æé«˜çš„æ€è€ƒ&lt;/h3&gt;

&lt;h4 id=&quot;ç»ƒä¹ åŸºæœ¬åŠŸçš„æ„ä¹‰&quot;&gt;ç»ƒä¹ åŸºæœ¬åŠŸçš„æ„ä¹‰&lt;/h4&gt;

&lt;p&gt;å·¥ä½œåè®°å¾—è‡ªå·±å‘è¿‡ä¸€æ¡æœ‹å‹åœˆï¼šâ€å¹´å°‘ä¸å­¦Cï¼Œè€å¤§å¾’ä¼¤æ‚²â€œğŸ˜‚ã€‚è™½ç„¶æˆ‘æ˜¯è½¯ä»¶å·¥ç¨‹ä¸“ä¸šå‡ºèº«ï¼Œä½†æ˜¯åœ¨å­¦æ ¡æ—¶å¹¶æ²¡æœ‰æ„è¯†åˆ°è®¡ç®—æœºåŸºç¡€è¯¾ç¨‹çš„é‡è¦æ€§ï¼Œåè€ŒæŠŠç²¾åŠ›æ”¾åˆ°å¦‚ä½•èƒ½å†™å‡ºä¸€ä¸ªAndroidå°ç¨‹åºï¼Œå¦‚ä½•å¤šåˆ·ä¸¤é“LeetCodeä¸Šï¼Œå¦‚æœåœ¨å­¦æ ¡æ—¶å°±èƒ½é‡åˆ°è¿™é—¨è¯¾ç¨‹è¯¥å¤šå¥½~~ã€‚å›å¤´æƒ³æƒ³ï¼Œæˆ‘ä¼šæŠŠä¸€åŠçš„é”…æ¨ç»™å¤§å­¦ï¼Œè€å¸ˆåªçŸ¥é“ç…§æœ¬å®£ç§‘ï¼Œå…¶å®å¹¶æ²¡æœ‰æŠŠå¿ƒæ€æ”¾åœ¨æ•™å­¦ä¸ŠğŸ˜ï¼Œå’Œæœ¬è¯¾ç¨‹çš„ä¸¤ä½ä½œè€…å½¢æˆé²œæ˜å¯¹æ¯”ï¼ˆåæ§½å®Œæ¯•ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å·¥ä½œä»¥åä¹Ÿå¹¶æ²¡é©¬ä¸Šæ„è¯†åˆ°åŸºæœ¬åŠŸçš„é‡è¦æ€§ï¼ŒåˆæŠŠå¾ˆå¤šç²¾åŠ›æŠ•å…¥åˆ°é˜…è¯»iOSå¹³å°æºç ï¼Œå­¦ä¹ ä¸€äº›é»‘é­”æ³•ä¸Šï¼Œå­¦å¾—å³ç‰‡é¢åˆä¸æˆä½“ç³»ï¼Œå¯¼è‡´æˆ‘æ€»è§‰å¾—å­¦ä»€ä¹ˆä¹Ÿå­¦ä¸é€ï¼Œå­¦ä¸ç²¾ã€‚å·¥ä¸šçº§çš„è®¡ç®—æœºæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„ç³»ç»Ÿï¼Œä¸€å±‚å±‚çš„å°è£…ç»“æ„æŠŠè®¡ç®—æœºçš„å·¥ä½œåŸç†åŸ‹è—çš„å¾ˆæ·±ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜ä¹Ÿå¾€å¾€æ˜¯çŸ¥å…¶ç„¶ï¼Œè€Œä¸å¤ªçŸ¥å…¶æ‰€ä»¥ç„¶ï¼ˆæˆ–è€…ç†è§£äº†é”™è¯¯çš„æ‰€ä»¥ç„¶ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªèƒ½åº”ä»˜æ—¥å¸¸çš„å·¥ä½œï¼Œä¸€æ—¦é‡åˆ°éœ€è¦æ·±å…¥ç ”ç©¶ï¼Œéœ€è¦åˆ›æ–°çš„å·¥ä½œæ—¶ï¼Œå°±æ— èƒ½ä¸ºåŠ›çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘åœ¨åšAPPçš„æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œä¸€èˆ¬å°±æ˜¯ç…§è‘«èŠ¦ç”»ç“¢ï¼Œçœ‹çœ‹å…¬å¸å†…æˆ–ä¸šç•Œæœ‰ä»€ä¹ˆæ–¹æ¡ˆï¼Œå€Ÿé‰´åˆ°è¿‡æ¥ï¼Œæˆ–è€…å°±æ˜¯å•çº¯åœ°ä»ä¸šåŠ¡ç‰¹ç‚¹å‡ºå‘ï¼Œåšä¸€äº›åŠ›æ‰€èƒ½åŠçš„ä¼˜åŒ–ã€‚ä¸èƒ½å¤Ÿäº§å‡ºè‡ªå·±çš„åˆ›æ–°æ–¹æ¡ˆï¼Œè¯´åˆ°åº•è¿˜æ˜¯å¯¹è®¡ç®—æœºåº•å±‚è¿è¡Œçš„ç»†èŠ‚ä¸å¤Ÿäº†è§£ï¼Œè‡ªç„¶ä¹Ÿéš¾ä»¥äº§å‡ºæœ‰é’ˆå¯¹æ€§çš„æ–¹æ¡ˆï¼Œä¸çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŸç†ï¼Œåˆæ€ä¹ˆèƒ½è®©è½¦å­è·‘çš„æ›´å¿«å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;è®¡ç®—æœºå‘å±•çš„è¿™ä¹ˆå¿«ï¼Œä½†æœ€åŸºæœ¬çš„åŸç†ä»æ²¡æœ‰å˜ã€‚æŒæ¡äº†æ‰å®çš„åŸºæœ¬åŠŸï¼Œèƒ½è®©æˆ‘ä»¬æ›´å¿«æ›´å¥½çš„å­¦ä¹ å…¶ä»–æŠ€èƒ½ï¼Œä¸€é€šç™¾é€šï¼Œä»¥ä¸å˜åº”ä¸‡å˜ï¼Œæ›´å¥½çš„åœ¨è¿™ä¸ªå¿«é€Ÿå‘å±•çš„è¡Œä¸šä¸­ç«‹è¶³ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æ‰¾åˆ°è‡ªå·±çš„å­¦ä¹ è·¯å¾„&quot;&gt;æ‰¾åˆ°è‡ªå·±çš„å­¦ä¹ è·¯å¾„&lt;/h4&gt;

&lt;h4 id=&quot;èµ„æºåœ¨å“ªé‡Œ&quot;&gt;èµ„æºåœ¨å“ªé‡Œ&lt;/h4&gt;

&lt;h3 id=&quot;åç»­è§„åˆ’&quot;&gt;åç»­è§„åˆ’&lt;/h3&gt;

&lt;h4 id=&quot;æ·±å…¥å­¦ä¹ cè¯­è¨€&quot;&gt;æ·±å…¥å­¦ä¹ Cè¯­è¨€&lt;/h4&gt;

&lt;p&gt;ç°ä»£å¸¸ç”¨è¯­è¨€é›†åˆä¸­ï¼ŒCè¯­è¨€ç›¸è¾ƒäºå…¶ä»–è¯­è¨€ï¼Œæ˜¯æ›´â€åŸºæœ¬â€œçš„è¯­è¨€ã€‚æŒæ¡å¥½Cè¯­è¨€èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç†è§£å†…å­˜ã€æŒ‡é’ˆç­‰ä¸»é¢˜ï¼Œå¯¹å­¦ä¹ å…¶ä»–è¯­è¨€ä¹Ÿå¾ˆæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚ï¼ŒObjective-Cå°±æ˜¯åŸºäºå¯¹Cè¯­è¨€çš„æ‰©å±•ï¼Œruntimeç­‰åº•å±‚åŸºç¡€åº“éƒ½æ˜¯ç”¨Cå®ç°ï¼Œæ‰€ä»¥æƒ³è¦æ·±å…¥æŒæ¡OCçš„å‰æå°±æ˜¯æ·±å…¥æŒæ¡Cè¯­è¨€ã€‚æˆ–è€…ä½ æƒ³è¦é˜…è¯»æŸä¸ªæ“ä½œç³»ç»Ÿçš„æºç ï¼ˆä¾‹å¦‚Linuxï¼‰ï¼Œä¹Ÿéœ€è¦å…ˆå¯¹Cè¯­è¨€å¾ˆç†Ÿæ‚‰ã€‚æ‰€ä»¥Cè¯­è¨€æ˜¯ä¸€é—¨å¾ˆé‡è¦çš„åŸºæœ¬åŠŸï¼Œæ˜¯æˆ‘ä»¬æƒ³è¦æŒæ¡å¥½å…¶ä»–æŠ€èƒ½çš„å‰ææ¡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;é™„å¸¦æ¡ä»¶ï¼šéœ€è¦ä¸€å®šç¨‹åº¦çš„æŒæ¡æ±‡ç¼–è¯­è¨€ï¼Œæœ€å¥½èƒ½è¾¾åˆ°å¯ä»¥é˜…è¯»ç†è§£è¾ƒå¤æ‚çš„æ±‡ç¼–ä»£ç çš„ç¨‹åº¦ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å‰–æä¸€é—¨ç®€å•çš„æ“ä½œç³»ç»Ÿ&quot;&gt;å‰–æä¸€é—¨ç®€å•çš„æ“ä½œç³»ç»Ÿ&lt;/h4&gt;

&lt;p&gt;Hackçš„æ“ä½œç³»ç»Ÿæ˜¯åœ¨è¿‡äºç®€å•ï¼Œå’Œç°ä»£æ“ä½œç³»ç»Ÿç›¸å»ç”šè¿œã€‚ä¾‹å¦‚ï¼Œå®ƒä¸æ”¯æŒå¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹ï¼Œä¸æ”¯æŒæ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿä¸æ”¯æŒç½‘ç»œã€‚æˆ‘éœ€è¦åœ¨æ‰¾ä¸€é—¨ç®€å•ä½†ç”±ä¸é‚£ä¹ˆç®€å•çš„æ“ä½œç³»ç»Ÿæ¥ç»§ç»­æé«˜ä¸€ä¸‹ï¼Œç›®çš„ä¸»è¦æ˜¯åŠ å¼ºè‡ªå·±å¯¹å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„äº†è§£ï¼Œå¹¶åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å­¦åˆ°ä¸€äº›ç»å…¸çš„æ¨¡å¼å’Œç®—æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç•Œé¢æ¸²æŸ“åŸç†&quot;&gt;ç•Œé¢æ¸²æŸ“åŸç†&lt;/h4&gt;

&lt;p&gt;ä½œä¸ºä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åºå‘˜ï¼Œç†è§£ç°ä»£è®¡ç®—æœºçš„ç•Œé¢æ¸²æŸ“åŸç†æ˜¯ååˆ†å¿…è¦çš„ã€‚åœ¨è¿™æ–¹é¢æˆ‘è¿˜å¾ˆæ¸£ï¼Œè€Œä¸”ç›®å‰è¿˜æ²¡æœ‰è¾ƒå¥½çš„å­¦ä¹ æ€è·¯ï¼Œå¦‚æœæœ‰åŒå­¦åœ¨è¿™æ–¹é¢æ¯”è¾ƒæœ‰ç»éªŒçš„è¯ï¼Œæ¬¢è¿ç»™æˆ‘ä¸€äº›æŒ‡å¯¼ğŸ™ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç®—æ³•çš„æ„ä¹‰&quot;&gt;ç®—æ³•çš„æ„ä¹‰&lt;/h4&gt;

&lt;p&gt;æˆ‘è‡ªå·±å¹³æ—¶çš„å·¥ä½œå¾ˆå°‘ä¼šéœ€è¦ç”¨åˆ°ç®—æ¥è§£å†³é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿˜çœŸçš„æ˜¯æ¬ç –ã€‚æˆ‘ä¸ªäººè§‰å¾—ä¸æ˜¯ç®—æ³•ä¸é‡è¦ï¼Œè€Œæ˜¯æˆ‘ä»¬çš„å·¥ä½œå¤ªç®€å•äº†ï¼Œä»¥è‡³äºæ ¹æœ¬ä¸å‡ºè¦ç®—æ³•è¿™ä½å¤§ä½¬å‡ºé¢ã€‚ä½†é€šè¿‡å®è·µè¿™é—¨è¯¾ç¨‹ï¼Œæˆ‘è¿˜æ˜¯å‘ç°äº†å¾ˆå¤šåœ°æ–¹æ˜¯éœ€è¦ç”¨åˆ°ç®—æ³•ï¼Œéœ€è¦ç”¨åˆ°ä¼˜ç§€çš„è®¾è®¡æ¨¡å¼çš„ï¼Œè€Œä¸”è¶Šæ˜¯é‡è¦ï¼Œè¶Šæ˜¯æ ¸å¿ƒçš„åœ°æ–¹ï¼Œè¶Šéœ€è¦æˆ‘ä»¬ç”¨ç®—æ³•å’Œè®¾è®¡æ¥ä¼˜åŒ–ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è¦æ‘†è„±æ¬ç –ï¼Œå‘æ›´é«˜çº§çš„ç¨‹åºå‘˜è¿›å‘ï¼Œç®—æ³•å’Œè®¾è®¡æ¨¡å¼éƒ½æ˜¯å¾ˆé‡è¦çš„è¯¾é¢˜ã€‚è€Œå­¦ä¹ ç®—æ³•ä¹Ÿä¸ä»…ä»…æ˜¯åˆ·åˆ·LeetCodeè¿™ä¹ˆç®€å•ï¼Œéœ€è¦ç³»ç»Ÿåœ°å­¦ä¹ ï¼Œä»ç†è®ºåˆ°å®è·µï¼Œæœ€ç»ˆèƒ½æŠŠç®—æ³•åº”ç”¨åˆ°å·¥ä½œä¸­ï¼Œåº”ç”¨åˆ°è§£å†³å®é™…é—®é¢˜ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚è‹¦ç»ƒåŸºæœ¬åŠŸä¹‹è·¯æ‰åˆšåˆšå¼€å§‹ã€‚&lt;/strong&gt;ğŸ’ªğŸ’ªğŸ’ª&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">å®ŒæˆNand2Tetrisè¿™é—¨è¯¾ï¼Œæˆ‘å¤§æ¦‚ç”¨äº†4ä¸ªå¤šæœˆçš„æ—¶é—´ï¼›å®Œæˆä»0åˆ°1æ„å»ºè®¡ç®—æœºç³»åˆ—åšå®¢ï¼Œå¤§æ¦‚ç”¨äº†5ä¸ªå¤šæœˆçš„æ—¶é—´ï¼ˆè¯¾ç¨‹å’Œåšå®¢æ—¶é—´ä¸Šæœ‰äº¤é›†ï¼‰ã€‚æœŸé—´ä¹Ÿå› ä¸ºå·¥ä½œè¾ƒå¿™çš„åŸå› ï¼ŒæŒ‚èµ·è¿‡è‹¥å¹²æ¬¡ï¼Œå¾ˆé«˜å…´æœ€åè¿˜æ˜¯åšæŒå®Œæˆäº†ã€‚æœ€ååœ¨è¿™é‡Œå†æ¬¡åšä¸€äº›æ€»ç»“ï¼Œç®—æ˜¯å¯¹è¿™æ®µå­¦ä¹ è¿‡ç¨‹çš„ä¸€ä¸ªæš‚æ—¶çš„æ”¶å°¾ã€‚ ä¹‹æ‰€ä»¥è¯´æ˜¯æš‚æ—¶çš„æ”¶å°¾ï¼Œæ˜¯å› ä¸ºæˆ‘è§‰å¾—è¯¾ç¨‹ä¸­å¾ˆå¤šçŸ¥è¯†ç‚¹è‡ªå·±ç†è§£å¾—è¿˜ä¸åˆ°ä½ï¼Œå¾ˆå¤šç²¾åçš„æ€æƒ³ä¹Ÿæ²¡æœ‰å®Œå…¨getåˆ°ã€‚è¿™é—¨è¯¾ç¨‹æ˜¯ä¸€é—¨åŸºç¡€æ€§çš„è¯¾ç¨‹ï¼Œä¹Ÿæ˜¯ä¸€é—¨å¸¸è¯»å¸¸æ–°çš„è¯¾ç¨‹ï¼Œå€¼å¾—ç»å¸¸å›é¡¾å’Œæ€è€ƒã€‚è¿™é—¨è¯¾ç¨‹ä¹Ÿæ˜¯ä¸€é—¨å¾ˆå¥½çš„å…¥é—¨è¯¾ç¨‹ã€æ¡†æ¶è¯¾ç¨‹ï¼ˆå“ˆä½›å¤§å­¦çš„å­¦ç”ŸæŠŠå®ƒæˆç§°ä¸ºè®¡ç®—æœºä¸“ä¸š101è¯¾ç¨‹ï¼‰ï¼Œå®ƒè®©æˆ‘ä»¬å¯¹è®¡ç®—æœºç§‘å­¦çŸ¥è¯†ä½“ç³»æœ‰äº†ä¸€ä¸ªå¾ˆç›´è§‚çš„æ„Ÿå—å’Œå®è·µï¼ˆè‡³å°‘æ˜¯æˆ‘ä½œä¸ºä¸€ä¸ªiOSç¨‹åºå‘˜èƒ½å¤Ÿæ¥è§¦åˆ°çš„çŸ¥è¯†ä½“ç³»ï¼‰ã€‚å¸ˆå‚…é¢†è¿›é—¨ï¼Œå¦‚æœåç»­æˆ‘ä»¬å¯¹å…¶ä¸­çš„æŸäº›æ–¹å‘æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå¯ä»¥å†å»æ·±å…¥åœ°å±•å¼€å­¦ä¹ å’Œç ”ç©¶ã€‚ çŸ¥è¯†ä¸Šçš„æ”¶è· è®¡ç®—æœºæ¶æ„&amp;amp;ç¡¬ä»¶ è™½ç„¶åœ¨å­¦æ ¡çš„æ—¶å€™ä¿®è¿‡è®¡ç®—æœºç»„æˆåŸç†ç­‰è¯¾ç¨‹ï¼Œå¯¹è®¡ç®—æœºçš„æ¶æ„å’Œç¡¬ä»¶çš„å·¥ä½œåŸç†æœ‰è¿‡ä¸€å®šäº†è§£ï¼Œä½†åŸºæœ¬æ˜¯åœç•™åœ¨ç†è®ºä¸Šï¼Œç†è§£å¹¶ä¸æ·±å…¥ã€‚é€šè¿‡è¿™æ¬¡äº²æ‰‹å®è·µï¼Œå¯¹è¿™äº›çŸ¥è¯†æœ‰äº†æ›´ç›´è§‚çš„å°è±¡å’Œç†è§£ã€‚ä¾‹å¦‚ï¼Œæ—¶åºèŠ¯ç‰‡å¦‚ä½•è®°å½•æ•°å€¼çŠ¶æ€ï¼ŒALUå¦‚ä½•æ”¯æŒå„ç§æ“ä½œï¼ŒCPUå¦‚ä½•è§£ææŒ‡ä»¤å¹¶æ‰§è¡Œï¼Œç¨‹åºæŠ€è®¡æ•°å™¨å¦‚ä½•å·¥ä½œï¼ŒCPUå’Œå†…å­˜é€šè¿‡å“ªäº›çº¿è¿æ¥ç­‰ç­‰ã€‚è™½ç„¶æˆ‘ä»¬å¹³æ—¶çš„å·¥ä½œå¯èƒ½ä¸ä¼šæ¥è§¦åˆ°è¿™äº›ç»†èŠ‚ï¼Œä½†å­¦ä¹ è¿™äº›çŸ¥è¯†ï¼Œæˆ‘äº†è§£åˆ°äº†æˆ‘æ¯å¤©å·¥ä½œæ—¶é¢å¯¹çš„è®¡ç®—æœºåˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¦åˆ™æ€»ä¼šæœ‰ä¸€ç§å¿ƒè™šçš„æ„Ÿè§‰ã€‚ä¹å±‚ä¹‹å°ï¼Œèµ·äºç´¯åœŸï¼Œæˆ‘è§‰å¾—äº†è§£è¿™äº›çŸ¥è¯†å¯¹æˆ‘çš„æ„ä¹‰åœ¨äºï¼Œå®ƒç»™äº†æˆ‘ç»§ç»­å­¦ä¹ å’Œç ”ç©¶è®¡ç®—æœºä¸Šå±‚çŸ¥è¯†æ—¶å†…å¿ƒçš„è¸å®æ„Ÿã€‚ å‡½æ•°è°ƒç”¨è¿‡ç¨‹ å¯¹å‡½æ•°è°ƒç”¨è¿‡ç¨‹æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ã€‚è™½ç„¶Hackä¸æ”¯æŒç›´æ¥å¯¹æ ˆçš„æŒ‡é’ˆæ“ä½œæŒ‡ä»¤ï¼Œç”¨è™šæ‹Ÿæœºè¿›è¡Œäº†æ¨¡æ‹Ÿï¼Œä½†æ€»ä½“åŸç†æ˜¯ä¸€è‡´çš„ã€‚ä¾‹å¦‚æ ˆå¸§çš„å¼€è¾Ÿå’Œå›æ”¶ï¼Œå±€éƒ¨å˜é‡å†…å­˜çš„åˆ†é…ï¼Œå¯„å­˜å™¨çš„ä¿å­˜ï¼Œå‡½æ•°è¿”å›åœ°å€ï¼Œå…¥å‚&amp;amp;å›å‚ç­‰ã€‚ç†è§£å‡½æ•°è°ƒç”¨è¿‡ç¨‹å¯¹æˆ‘ä»¬æ˜¯æœ‰å®é™…æ„ä¹‰çš„ï¼Œä¾‹å¦‚å¯¹æˆ‘ä»¬é˜…è¯»æ±‡ç¼–è¯­è¨€ï¼Œæé«˜debugèƒ½åŠ›ï¼Œå†™å‡ºæ•ˆç‡æ›´é«˜çš„ä»£ç ï¼Œå­¦ä¹ ä¸€é—¨æ–°è¯­è¨€ç­‰éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ ç¼–è¯‘åŸç† å¯èƒ½ç»å¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸ä¼šæœ‰æœºä¼šå»ä»0åˆ°1åœ°ç¼–å†™ä¸€æ¬¾ç¼–è¯‘å™¨ã€‚è™½ç„¶Jackç¼–è¯‘å™¨å‡ ä¹æ˜¯ä¸€æ¬¾æœ€ç®€å•çš„ç¼–è¯‘å™¨ï¼Œä½†æˆ‘ä»¬ä»ä¸­ä»èƒ½äº†è§£åˆ°ç¼–è¯‘å™¨å·¥ä½œçš„åŸºæœ¬åŸç†ï¼Œå…¶ä¸­å¾ˆå¤šçš„ä¼˜ç§€æ€æƒ³ä¹Ÿèƒ½è¢«æˆ‘ä»¬åº”ç”¨åˆ°æ—¥å¸¸çš„å·¥ä½œå½“ä¸­ã€‚åŒä¸Šé¢è¯´åˆ°çš„å­¦ä¹ å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸€æ ·ï¼Œç†è§£ç¼–è¯‘åŸç†ä¹Ÿæ˜¯ååˆ†å¯Œæœ‰å®é™…æ„ä¹‰çš„ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¿«æ›´å¥½çš„å­¦ä¹ ç†è§£å…¶ä»–çŸ¥è¯†ã€‚å†µä¸”è‡ªå·±å®ç°ä¸€æ¬¾ç¼–è¯‘å™¨æœ¬èº«å°±æ˜¯ä¸€ä»¶æœ‰è¶£ä¸”æœ‰æŒ‘æˆ˜çš„äº‹æƒ…ï¼Œæˆ‘ä»¬åªè¦èŠ±ä¸€ç‚¹ç‚¹ç²¾åŠ›å’Œè€å¿ƒå°±å¯ä»¥å¼€å‘ä¸€æ¬¾å±äºè‡ªå·±çš„ç¼–è¯‘å™¨äº†ï¼Œä½œä¸ºç¨‹åºå‘˜ä½ å¿ƒåŠ¨äº†å—ï¼Ÿ å†…å­˜ç®¡ç†å’ŒI/Oç®¡ç† ä»Hackçš„æ“ä½œç³»ç»Ÿçš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å­¦åˆ°äº†æœ€åŸºæœ¬çš„å†…å­˜åˆ†é…ã€å›æ”¶ç®¡ç†æ–¹å¼ï¼Œä¸ºæˆ‘ä»¬ç»§ç»­å­¦ä¹ å…¶ä»–æ›´é«˜çº§çš„å†…å­˜ç®¡ç†æ“ä½œå¼€äº†ä¸€ä¸ªå¤´ã€‚æˆ‘ä»¬ä¹Ÿå­¦åˆ°äº†æ“ä½œç³»ç»Ÿå¦‚ä½•ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œå¦‚ä½•åœ¨å±å¹•ä¸Šç»˜åˆ¶æ–‡å­—å’Œå›¾æ¡ˆã€‚åªæœ‰å…ˆæŒæ¡äº†å±å¹•ç»˜åˆ¶çš„æœ€åŸºæœ¬çš„åŸç†ï¼Œç„¶åå†é€æ¸æŒæ¡ä¸€äº›GPUåŸç†ã€openGLã€è®¡ç®—æœºå›¾å½¢å­¦ã€ç‰¹å®šå¹³å°çš„æ¸²æŸ“æ¡†æ¶ç­‰ç›¸å…³çš„çŸ¥è¯†åï¼Œæˆ‘ä»¬å†åšç•Œé¢æ¸²æŸ“çš„æ€§èƒ½ä¼˜åŒ–æ—¶æ‰èƒ½åšåˆ°æœ‰æ³•å¯ä¾ï¼Œç”šè‡³åšåˆ°æŠ€æœ¯åˆ›æ–°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‰ç«¯&amp;amp;å®¢æˆ·ç«¯ç¨‹åºå‘˜é€šå‘é«˜é˜¶ç¨‹åºå‘˜çš„å¿…ç»ä¹‹è·¯ã€‚ å…³äºå­¦ä¹ ä¸æé«˜çš„æ€è€ƒ ç»ƒä¹ åŸºæœ¬åŠŸçš„æ„ä¹‰ å·¥ä½œåè®°å¾—è‡ªå·±å‘è¿‡ä¸€æ¡æœ‹å‹åœˆï¼šâ€å¹´å°‘ä¸å­¦Cï¼Œè€å¤§å¾’ä¼¤æ‚²â€œğŸ˜‚ã€‚è™½ç„¶æˆ‘æ˜¯è½¯ä»¶å·¥ç¨‹ä¸“ä¸šå‡ºèº«ï¼Œä½†æ˜¯åœ¨å­¦æ ¡æ—¶å¹¶æ²¡æœ‰æ„è¯†åˆ°è®¡ç®—æœºåŸºç¡€è¯¾ç¨‹çš„é‡è¦æ€§ï¼Œåè€ŒæŠŠç²¾åŠ›æ”¾åˆ°å¦‚ä½•èƒ½å†™å‡ºä¸€ä¸ªAndroidå°ç¨‹åºï¼Œå¦‚ä½•å¤šåˆ·ä¸¤é“LeetCodeä¸Šï¼Œå¦‚æœåœ¨å­¦æ ¡æ—¶å°±èƒ½é‡åˆ°è¿™é—¨è¯¾ç¨‹è¯¥å¤šå¥½~~ã€‚å›å¤´æƒ³æƒ³ï¼Œæˆ‘ä¼šæŠŠä¸€åŠçš„é”…æ¨ç»™å¤§å­¦ï¼Œè€å¸ˆåªçŸ¥é“ç…§æœ¬å®£ç§‘ï¼Œå…¶å®å¹¶æ²¡æœ‰æŠŠå¿ƒæ€æ”¾åœ¨æ•™å­¦ä¸ŠğŸ˜ï¼Œå’Œæœ¬è¯¾ç¨‹çš„ä¸¤ä½ä½œè€…å½¢æˆé²œæ˜å¯¹æ¯”ï¼ˆåæ§½å®Œæ¯•ï¼‰ã€‚ å·¥ä½œä»¥åä¹Ÿå¹¶æ²¡é©¬ä¸Šæ„è¯†åˆ°åŸºæœ¬åŠŸçš„é‡è¦æ€§ï¼ŒåˆæŠŠå¾ˆå¤šç²¾åŠ›æŠ•å…¥åˆ°é˜…è¯»iOSå¹³å°æºç ï¼Œå­¦ä¹ ä¸€äº›é»‘é­”æ³•ä¸Šï¼Œå­¦å¾—å³ç‰‡é¢åˆä¸æˆä½“ç³»ï¼Œå¯¼è‡´æˆ‘æ€»è§‰å¾—å­¦ä»€ä¹ˆä¹Ÿå­¦ä¸é€ï¼Œå­¦ä¸ç²¾ã€‚å·¥ä¸šçº§çš„è®¡ç®—æœºæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„ç³»ç»Ÿï¼Œä¸€å±‚å±‚çš„å°è£…ç»“æ„æŠŠè®¡ç®—æœºçš„å·¥ä½œåŸç†åŸ‹è—çš„å¾ˆæ·±ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜ä¹Ÿå¾€å¾€æ˜¯çŸ¥å…¶ç„¶ï¼Œè€Œä¸å¤ªçŸ¥å…¶æ‰€ä»¥ç„¶ï¼ˆæˆ–è€…ç†è§£äº†é”™è¯¯çš„æ‰€ä»¥ç„¶ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªèƒ½åº”ä»˜æ—¥å¸¸çš„å·¥ä½œï¼Œä¸€æ—¦é‡åˆ°éœ€è¦æ·±å…¥ç ”ç©¶ï¼Œéœ€è¦åˆ›æ–°çš„å·¥ä½œæ—¶ï¼Œå°±æ— èƒ½ä¸ºåŠ›çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘åœ¨åšAPPçš„æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œä¸€èˆ¬å°±æ˜¯ç…§è‘«èŠ¦ç”»ç“¢ï¼Œçœ‹çœ‹å…¬å¸å†…æˆ–ä¸šç•Œæœ‰ä»€ä¹ˆæ–¹æ¡ˆï¼Œå€Ÿé‰´åˆ°è¿‡æ¥ï¼Œæˆ–è€…å°±æ˜¯å•çº¯åœ°ä»ä¸šåŠ¡ç‰¹ç‚¹å‡ºå‘ï¼Œåšä¸€äº›åŠ›æ‰€èƒ½åŠçš„ä¼˜åŒ–ã€‚ä¸èƒ½å¤Ÿäº§å‡ºè‡ªå·±çš„åˆ›æ–°æ–¹æ¡ˆï¼Œè¯´åˆ°åº•è¿˜æ˜¯å¯¹è®¡ç®—æœºåº•å±‚è¿è¡Œçš„ç»†èŠ‚ä¸å¤Ÿäº†è§£ï¼Œè‡ªç„¶ä¹Ÿéš¾ä»¥äº§å‡ºæœ‰é’ˆå¯¹æ€§çš„æ–¹æ¡ˆï¼Œä¸çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŸç†ï¼Œåˆæ€ä¹ˆèƒ½è®©è½¦å­è·‘çš„æ›´å¿«å‘¢ï¼Ÿ è®¡ç®—æœºå‘å±•çš„è¿™ä¹ˆå¿«ï¼Œä½†æœ€åŸºæœ¬çš„åŸç†ä»æ²¡æœ‰å˜ã€‚æŒæ¡äº†æ‰å®çš„åŸºæœ¬åŠŸï¼Œèƒ½è®©æˆ‘ä»¬æ›´å¿«æ›´å¥½çš„å­¦ä¹ å…¶ä»–æŠ€èƒ½ï¼Œä¸€é€šç™¾é€šï¼Œä»¥ä¸å˜åº”ä¸‡å˜ï¼Œæ›´å¥½çš„åœ¨è¿™ä¸ªå¿«é€Ÿå‘å±•çš„è¡Œä¸šä¸­ç«‹è¶³ã€‚ æ‰¾åˆ°è‡ªå·±çš„å­¦ä¹ è·¯å¾„ èµ„æºåœ¨å“ªé‡Œ åç»­è§„åˆ’ æ·±å…¥å­¦ä¹ Cè¯­è¨€ ç°ä»£å¸¸ç”¨è¯­è¨€é›†åˆä¸­ï¼ŒCè¯­è¨€ç›¸è¾ƒäºå…¶ä»–è¯­è¨€ï¼Œæ˜¯æ›´â€åŸºæœ¬â€œçš„è¯­è¨€ã€‚æŒæ¡å¥½Cè¯­è¨€èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç†è§£å†…å­˜ã€æŒ‡é’ˆç­‰ä¸»é¢˜ï¼Œå¯¹å­¦ä¹ å…¶ä»–è¯­è¨€ä¹Ÿå¾ˆæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚ï¼ŒObjective-Cå°±æ˜¯åŸºäºå¯¹Cè¯­è¨€çš„æ‰©å±•ï¼Œruntimeç­‰åº•å±‚åŸºç¡€åº“éƒ½æ˜¯ç”¨Cå®ç°ï¼Œæ‰€ä»¥æƒ³è¦æ·±å…¥æŒæ¡OCçš„å‰æå°±æ˜¯æ·±å…¥æŒæ¡Cè¯­è¨€ã€‚æˆ–è€…ä½ æƒ³è¦é˜…è¯»æŸä¸ªæ“ä½œç³»ç»Ÿçš„æºç ï¼ˆä¾‹å¦‚Linuxï¼‰ï¼Œä¹Ÿéœ€è¦å…ˆå¯¹Cè¯­è¨€å¾ˆç†Ÿæ‚‰ã€‚æ‰€ä»¥Cè¯­è¨€æ˜¯ä¸€é—¨å¾ˆé‡è¦çš„åŸºæœ¬åŠŸï¼Œæ˜¯æˆ‘ä»¬æƒ³è¦æŒæ¡å¥½å…¶ä»–æŠ€èƒ½çš„å‰ææ¡ä»¶ã€‚ é™„å¸¦æ¡ä»¶ï¼šéœ€è¦ä¸€å®šç¨‹åº¦çš„æŒæ¡æ±‡ç¼–è¯­è¨€ï¼Œæœ€å¥½èƒ½è¾¾åˆ°å¯ä»¥é˜…è¯»ç†è§£è¾ƒå¤æ‚çš„æ±‡ç¼–ä»£ç çš„ç¨‹åº¦ã€‚ å‰–æä¸€é—¨ç®€å•çš„æ“ä½œç³»ç»Ÿ Hackçš„æ“ä½œç³»ç»Ÿæ˜¯åœ¨è¿‡äºç®€å•ï¼Œå’Œç°ä»£æ“ä½œç³»ç»Ÿç›¸å»ç”šè¿œã€‚ä¾‹å¦‚ï¼Œå®ƒä¸æ”¯æŒå¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹ï¼Œä¸æ”¯æŒæ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿä¸æ”¯æŒç½‘ç»œã€‚æˆ‘éœ€è¦åœ¨æ‰¾ä¸€é—¨ç®€å•ä½†ç”±ä¸é‚£ä¹ˆç®€å•çš„æ“ä½œç³»ç»Ÿæ¥ç»§ç»­æé«˜ä¸€ä¸‹ï¼Œç›®çš„ä¸»è¦æ˜¯åŠ å¼ºè‡ªå·±å¯¹å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„äº†è§£ï¼Œå¹¶åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å­¦åˆ°ä¸€äº›ç»å…¸çš„æ¨¡å¼å’Œç®—æ³•ã€‚ ç•Œé¢æ¸²æŸ“åŸç† ä½œä¸ºä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åºå‘˜ï¼Œç†è§£ç°ä»£è®¡ç®—æœºçš„ç•Œé¢æ¸²æŸ“åŸç†æ˜¯ååˆ†å¿…è¦çš„ã€‚åœ¨è¿™æ–¹é¢æˆ‘è¿˜å¾ˆæ¸£ï¼Œè€Œä¸”ç›®å‰è¿˜æ²¡æœ‰è¾ƒå¥½çš„å­¦ä¹ æ€è·¯ï¼Œå¦‚æœæœ‰åŒå­¦åœ¨è¿™æ–¹é¢æ¯”è¾ƒæœ‰ç»éªŒçš„è¯ï¼Œæ¬¢è¿ç»™æˆ‘ä¸€äº›æŒ‡å¯¼ğŸ™ã€‚ ç®—æ³•çš„æ„ä¹‰ æˆ‘è‡ªå·±å¹³æ—¶çš„å·¥ä½œå¾ˆå°‘ä¼šéœ€è¦ç”¨åˆ°ç®—æ¥è§£å†³é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿˜çœŸçš„æ˜¯æ¬ç –ã€‚æˆ‘ä¸ªäººè§‰å¾—ä¸æ˜¯ç®—æ³•ä¸é‡è¦ï¼Œè€Œæ˜¯æˆ‘ä»¬çš„å·¥ä½œå¤ªç®€å•äº†ï¼Œä»¥è‡³äºæ ¹æœ¬ä¸å‡ºè¦ç®—æ³•è¿™ä½å¤§ä½¬å‡ºé¢ã€‚ä½†é€šè¿‡å®è·µè¿™é—¨è¯¾ç¨‹ï¼Œæˆ‘è¿˜æ˜¯å‘ç°äº†å¾ˆå¤šåœ°æ–¹æ˜¯éœ€è¦ç”¨åˆ°ç®—æ³•ï¼Œéœ€è¦ç”¨åˆ°ä¼˜ç§€çš„è®¾è®¡æ¨¡å¼çš„ï¼Œè€Œä¸”è¶Šæ˜¯é‡è¦ï¼Œè¶Šæ˜¯æ ¸å¿ƒçš„åœ°æ–¹ï¼Œè¶Šéœ€è¦æˆ‘ä»¬ç”¨ç®—æ³•å’Œè®¾è®¡æ¥ä¼˜åŒ–ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è¦æ‘†è„±æ¬ç –ï¼Œå‘æ›´é«˜çº§çš„ç¨‹åºå‘˜è¿›å‘ï¼Œç®—æ³•å’Œè®¾è®¡æ¨¡å¼éƒ½æ˜¯å¾ˆé‡è¦çš„è¯¾é¢˜ã€‚è€Œå­¦ä¹ ç®—æ³•ä¹Ÿä¸ä»…ä»…æ˜¯åˆ·åˆ·LeetCodeè¿™ä¹ˆç®€å•ï¼Œéœ€è¦ç³»ç»Ÿåœ°å­¦ä¹ ï¼Œä»ç†è®ºåˆ°å®è·µï¼Œæœ€ç»ˆèƒ½æŠŠç®—æ³•åº”ç”¨åˆ°å·¥ä½œä¸­ï¼Œåº”ç”¨åˆ°è§£å†³å®é™…é—®é¢˜ä¸Šã€‚ åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚è‹¦ç»ƒåŸºæœ¬åŠŸä¹‹è·¯æ‰åˆšåˆšå¼€å§‹ã€‚ğŸ’ªğŸ’ªğŸ’ª</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(11/12)â€“åœ¨Hackä¸Šè¿è¡Œå°æ¸¸æˆ</title><link href="/2020/03/21/%E5%B0%8F%E6%B8%B8%E6%88%8F.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(11/12)--åœ¨Hackä¸Šè¿è¡Œå°æ¸¸æˆ" /><published>2020-03-21T00:00:00+08:00</published><updated>2020-03-21T00:00:00+08:00</updated><id>/2020/03/21/%E5%B0%8F%E6%B8%B8%E6%88%8F</id><content type="html" xml:base="/2020/03/21/%E5%B0%8F%E6%B8%B8%E6%88%8F.html">&lt;p&gt;ç»è¿‡äº†å‰é¢10ç« æ¼«é•¿çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬ç»ˆäºè¦è¾¾æˆæˆ‘ä»¬çš„ç›®æ ‡äº†ï¼š&lt;strong&gt;åœ¨ä¸€ä¸ªå®Œå…¨ç”±è‡ªå·±å®ç°çš„è®¡ç®—æœºå¹³å°ä¸Šè¿è¡Œä¸€ä¸ªå°æ¸¸æˆ&lt;/strong&gt;ã€‚è¿™ä¸ªå°æ¸¸æˆè¦ç»è¿‡ç¼–å†™ã€ç¼–è¯‘ã€è½¬æ¢è™šæ‹Ÿæœºå­—èŠ‚ç ã€æ±‡ç¼–ã€ç”Ÿæˆæœºå™¨ä»£ç ç­‰æ­¥éª¤ï¼Œæœ€ç»ˆè¿è¡Œåœ¨è‡ªå·±æ­å»ºçš„è™šæ‹Ÿè®¡ç®—æœºä¸Šã€‚åœ¨æ¸¸æˆçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤éƒ½æ˜¯æˆ‘ä»¬äº²æ‰‹ç¼–å†™ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚æˆ‘ä»¬éƒ½äº†å¦‚æŒ‡æŒï¼Œæ˜¯æˆ‘ä»¬å®Œå®Œå…¨å…¨åœ°åˆ›é€ äº†å®ƒï¼ˆè™½ç„¶éœ€è¦åŸºäºä¸€ä¸ªç¡¬ä»¶è™šæ‹Ÿæœºï¼‰ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä»¶éå¸¸æœ‰æ„æ€çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;h3 id=&quot;éª‘æ‰‹å¿«è·‘&quot;&gt;éª‘æ‰‹å¿«è·‘&lt;/h3&gt;

&lt;p&gt;æˆ‘è¿™é‡Œç¼–å†™äº†ä¸€ä¸ªéå¸¸ç®€å•çš„å°æ¸¸æˆï¼šéª‘æ‰‹å¿«è·‘ã€‚åœ¨å±å¹•ä¸Šä¼šä½ç½®éšæœºåœ°å‡ºç°&lt;strong&gt;é£Ÿç‰©&lt;/strong&gt;å’Œ&lt;strong&gt;æˆ¿å­&lt;/strong&gt;ï¼Œæˆ‘ä»¬æ‰®æ¼”éª‘æ‰‹ï¼Œé€šè¿‡ä¸Šä¸‹å·¦å³é”®æ§åˆ¶éª‘æ‰‹çš„è¡ŒåŠ¨ã€‚éª‘æ‰‹éœ€è¦å…ˆå–åˆ°é£Ÿç‰©è£…åˆ°è½¦ä¸Šï¼Œç„¶åè¿é€åˆ°æˆ¿å­å¤„å¹¶é¢†å–å¥–åŠ±é‡‘ï¼Œå®Œæˆé…é€åéª‘æ‰‹åˆå¯ä»¥ç»§ç»­é…é€ä¸‹ä¸€å•ï¼Œå½“å¥–åŠ±é‡‘è¾¾åˆ°ä¸€å®šæ•°é¢åæ¸¸æˆé€šå…³ğŸ™„ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1tl5zrv9j30tc0gga9v.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;éª‘æ‰‹å–è´§ä¸­&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1tn7ycv5j30tg0gkglf.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;éª‘æ‰‹å–åˆ°è´§&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1tplj00dj30tg0gsglf.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;éª‘æ‰‹é…é€ä¸­&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1tv6zcbrj30tg0guglf.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;é…é€ä¸‹ä¸€å•&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1to4ylhsj30tc0giq2r.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;å¥–åŠ±é‡‘è¾¾æ ‡ï¼Œé€šå…³&lt;/figcaption&gt;&lt;/center&gt;

&lt;h3 id=&quot;å®ç°&quot;&gt;å®ç°&lt;/h3&gt;

&lt;p&gt;main() å…ˆåˆ›å»ºæ¸¸æˆå®ä¾‹ï¼Œç„¶åè¿è¡Œæ¸¸æˆï¼Œæ¸¸æˆç»“æŸåè°ƒç”¨ dispose() å›æ”¶å†…å­˜&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;game&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;game&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;game&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;game&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;RunnerGameç±»æ˜¯æ¸¸æˆçš„æ ¸å¿ƒæ§åˆ¶ç±»ã€‚è´Ÿè´£åˆ›å»ºéª‘æ‰‹ã€é£Ÿç‰©ã€æˆ¿å­ç­‰å¯¹è±¡ï¼›ç„¶åç›‘å¬ç”¨æˆ·é”®ç›˜è¾“å…¥ã€æ§åˆ¶æ¸¸æˆé€»è¾‘ã€è°ƒæ•´æ¸¸æˆçŠ¶æ€ã€æ§åˆ¶å±å¹•åˆ·æ–°ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// æ¸¸æˆå•ä¾‹&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;nc&quot;&gt;Runner&lt;/span&gt;     &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;// éª‘æ‰‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt;       &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// é£Ÿç‰©&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;nc&quot;&gt;House&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;house&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;              &lt;span class=&quot;c1&quot;&gt;// é…é€åœ°ç‚¹&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// éª‘æ‰‹å½“å‰ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// é£Ÿç‰©å½“å‰ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// æˆ¿å±‹å½“å‰ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;// æ˜¯å¦å–åˆ°è´§&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;              &lt;span class=&quot;c1&quot;&gt;// æŒ£åˆ°çš„é’±&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// æ¸¸æˆç»“æŸ&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;clearScreen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;230&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;house&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;House&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

	    &lt;span class=&quot;c1&quot;&gt;// åº•éƒ¨åˆ†æ•°åˆ†æ•°è®°å½•åŒº&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawRectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;238&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;511&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;240&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;moveCursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;money: 0&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;house&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;deAlloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunnerGame&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å¼€å§‹æ¸¸æˆã€‚ç”¨é”®ç›˜æ§åˆ¶éª‘æ‰‹ä½ç½®ï¼Œå…ˆå–è´§ï¼Œå†é€è´§ï¼Œç„¶åè·å¾—å¥–åŠ±&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// ç­‰å¾…æŒ‰ä¸‹æŒ‰é”®&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keyPressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;moveRunner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

            &lt;span class=&quot;c1&quot;&gt;// ç­‰å¾…æŒ‰é”®æ¾å¼€&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keyPressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reDraw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

	    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;moveCursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Congratulations!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;moveRunner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// å·¦ = 130ï¼Œä¸Š = 131ï¼Œå³ = 132ï¼Œä¸‹ = 133&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; 
        	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;131&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; 
            	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;132&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;133&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                		&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// é˜²æ­¢è¶Šç•Œ&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;490&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;490&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;236&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;236&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;moveTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;c1&quot;&gt;// å–åˆ°é£Ÿç‰©&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    		&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    		&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setPicked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    	&lt;span class=&quot;c1&quot;&gt;// é€åˆ°é£Ÿç‰©&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runnerY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    		&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    			&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    		&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    		&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setPicked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    		&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;newRound&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å®Œæˆä¸€æ¬¡é…é€ï¼Œæ›´æ–°é£Ÿç‰©å’Œæˆ¿å±‹çš„ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;newRound&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;c1&quot;&gt;// æ›´æ–°ä½ç½®&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;490&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;236&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;490&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;236&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    	&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;moveTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;foodX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foodY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;house&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;moveTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;houseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;houseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// é‡æ–°ç»˜åˆ¶&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reDraw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;house&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;    		
    	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;   		
    	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    	&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;moveCursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è¡¥å……ä¸€ä¸ªå–æ¨¡çš„æ–¹æ³•&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Runnerï¼ŒHouseï¼ŒFoodç±»è´Ÿè´£è¡¨ç¤ºä¸ªå­—çš„å¯¹è±¡ï¼Œç»´æŠ¤å¯¹è±¡ä½ç½®ä¿¡æ¯ï¼ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¹¶è´Ÿè´£ç»˜åˆ¶è‡ªå·±çš„å›¾å½¢ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Runner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// éª‘æ‰‹ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// éª‘æ‰‹å®½é«˜ 20*20&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;boolen&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// æ˜¯å¦å·²å–è´§&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æ–°åˆ›å»ºä¸€ä¸ªéª‘æ‰‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Runner&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;deAlloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// åœ¨screenä¸Šå±•ç¤ºéª‘æ‰‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„éª‘æ‰‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** ç»˜åˆ¶æˆ¿å±‹ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawRectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawCircle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawCircle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawCircle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setPicked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Apicked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;picked&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Apicked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;moveTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//å…ˆæŠ¹æ‰å½“å‰éª‘æ‰‹&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// é‡æ–°ç”»éª‘æ‰‹&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// é£Ÿç‰©ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// é£Ÿç‰©å®½é«˜ 15*15&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æ–°åˆ›å»ºä¸€ä¸ªé£Ÿç‰©&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Food&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// åœ¨screenä¸Šå±•ç¤ºé£Ÿç‰©&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„é£Ÿç‰©&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** ç»˜åˆ¶é£Ÿç‰© */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;moveTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;House&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// æˆ¿å±‹ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// æˆ¿å±‹å®½é«˜ 20*20&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æ–°åˆ›å»ºä¸€ä¸ªæˆ¿å±‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;House&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// åœ¨screenä¸Šå±•ç¤ºæˆ¿å±‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„æˆ¿å±‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** ç»˜åˆ¶æˆ¿å±‹ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;moveTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å¹¿å‘Š&quot;&gt;å¹¿å‘Š&lt;/h3&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1u99ll6aj31j60qcx0l.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;&lt;h2&gt;å½“ç¾å›¢éª‘æ‰‹ï¼Œåšæœ‰ä¸ºé’å¹´&lt;/h2&gt;&lt;/figcaption&gt;&lt;/center&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">ç»è¿‡äº†å‰é¢10ç« æ¼«é•¿çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬ç»ˆäºè¦è¾¾æˆæˆ‘ä»¬çš„ç›®æ ‡äº†ï¼šåœ¨ä¸€ä¸ªå®Œå…¨ç”±è‡ªå·±å®ç°çš„è®¡ç®—æœºå¹³å°ä¸Šè¿è¡Œä¸€ä¸ªå°æ¸¸æˆã€‚è¿™ä¸ªå°æ¸¸æˆè¦ç»è¿‡ç¼–å†™ã€ç¼–è¯‘ã€è½¬æ¢è™šæ‹Ÿæœºå­—èŠ‚ç ã€æ±‡ç¼–ã€ç”Ÿæˆæœºå™¨ä»£ç ç­‰æ­¥éª¤ï¼Œæœ€ç»ˆè¿è¡Œåœ¨è‡ªå·±æ­å»ºçš„è™šæ‹Ÿè®¡ç®—æœºä¸Šã€‚åœ¨æ¸¸æˆçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤éƒ½æ˜¯æˆ‘ä»¬äº²æ‰‹ç¼–å†™ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚æˆ‘ä»¬éƒ½äº†å¦‚æŒ‡æŒï¼Œæ˜¯æˆ‘ä»¬å®Œå®Œå…¨å…¨åœ°åˆ›é€ äº†å®ƒï¼ˆè™½ç„¶éœ€è¦åŸºäºä¸€ä¸ªç¡¬ä»¶è™šæ‹Ÿæœºï¼‰ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä»¶éå¸¸æœ‰æ„æ€çš„äº‹æƒ…ã€‚ éª‘æ‰‹å¿«è·‘ æˆ‘è¿™é‡Œç¼–å†™äº†ä¸€ä¸ªéå¸¸ç®€å•çš„å°æ¸¸æˆï¼šéª‘æ‰‹å¿«è·‘ã€‚åœ¨å±å¹•ä¸Šä¼šä½ç½®éšæœºåœ°å‡ºç°é£Ÿç‰©å’Œæˆ¿å­ï¼Œæˆ‘ä»¬æ‰®æ¼”éª‘æ‰‹ï¼Œé€šè¿‡ä¸Šä¸‹å·¦å³é”®æ§åˆ¶éª‘æ‰‹çš„è¡ŒåŠ¨ã€‚éª‘æ‰‹éœ€è¦å…ˆå–åˆ°é£Ÿç‰©è£…åˆ°è½¦ä¸Šï¼Œç„¶åè¿é€åˆ°æˆ¿å­å¤„å¹¶é¢†å–å¥–åŠ±é‡‘ï¼Œå®Œæˆé…é€åéª‘æ‰‹åˆå¯ä»¥ç»§ç»­é…é€ä¸‹ä¸€å•ï¼Œå½“å¥–åŠ±é‡‘è¾¾åˆ°ä¸€å®šæ•°é¢åæ¸¸æˆé€šå…³ğŸ™„ã€‚ éª‘æ‰‹å–è´§ä¸­ éª‘æ‰‹å–åˆ°è´§ éª‘æ‰‹é…é€ä¸­ é…é€ä¸‹ä¸€å• å¥–åŠ±é‡‘è¾¾æ ‡ï¼Œé€šå…³ å®ç° main() å…ˆåˆ›å»ºæ¸¸æˆå®ä¾‹ï¼Œç„¶åè¿è¡Œæ¸¸æˆï¼Œæ¸¸æˆç»“æŸåè°ƒç”¨ dispose() å›æ”¶å†…å­˜ class Main { function void main() { var RunnerGame game; do RunnerGame.newInstance(); let game = RunnerGame.getInstance(); do game.run(); do game.dispose(); return; } } RunnerGameç±»æ˜¯æ¸¸æˆçš„æ ¸å¿ƒæ§åˆ¶ç±»ã€‚è´Ÿè´£åˆ›å»ºéª‘æ‰‹ã€é£Ÿç‰©ã€æˆ¿å­ç­‰å¯¹è±¡ï¼›ç„¶åç›‘å¬ç”¨æˆ·é”®ç›˜è¾“å…¥ã€æ§åˆ¶æ¸¸æˆé€»è¾‘ã€è°ƒæ•´æ¸¸æˆçŠ¶æ€ã€æ§åˆ¶å±å¹•åˆ·æ–°ã€‚ class RunnerGame { static RunnerGame instance; // æ¸¸æˆå•ä¾‹ field Runner runner; // éª‘æ‰‹ field Food food; // é£Ÿç‰© field House house; // é…é€åœ°ç‚¹ field int runnerX, runnerY; // éª‘æ‰‹å½“å‰ä½ç½® field int foodX, foodY; // é£Ÿç‰©å½“å‰ä½ç½® field int houseX, houseY; // æˆ¿å±‹å½“å‰ä½ç½® field boolean picked; // æ˜¯å¦å–åˆ°è´§ field int score; // æŒ£åˆ°çš„é’± field boolean exit; // æ¸¸æˆç»“æŸ constructor RunnerGame new() { do Screen.clearScreen(); let runnerX = 230; let runnerY = 120; let foodX = 100; let foodY = 200; let houseX = 400; let houseY = 50; let runner = Runner.new(runnerX, runnerY); let house = House.new(houseX, houseY); let food = Food.new(foodX, foodY); let picked = false; let score = 0; let exit = false; // åº•éƒ¨åˆ†æ•°åˆ†æ•°è®°å½•åŒº do Screen.drawRectangle(0, 238, 511, 240); do Output.moveCursor(22,0); do Output.printString(&quot;money: 0&quot;); return this; } method void dispose() { do runner.dispose(); do food.dispose(); do house.dispose(); do Memory.deAlloc(this); return; } function void newInstance() { let instance = RunnerGame.new(); return; } function RunnerGame getInstance() { return instance; } // å¼€å§‹æ¸¸æˆã€‚ç”¨é”®ç›˜æ§åˆ¶éª‘æ‰‹ä½ç½®ï¼Œå…ˆå–è´§ï¼Œå†é€è´§ï¼Œç„¶åè·å¾—å¥–åŠ± method void run() { var char key; while (~exit) { // ç­‰å¾…æŒ‰ä¸‹æŒ‰é”® while ((key = 0) &amp;amp; (~exit)) { let key = Keyboard.keyPressed(); do Sys.wait(50); } do moveRunner(key); // ç­‰å¾…æŒ‰é”®æ¾å¼€ while ((~(key = 0)) &amp;amp; (~exit)) { let key = Keyboard.keyPressed(); do Sys.wait(50); } do updateStatus(); do reDraw(); } if (exit) { do Output.moveCursor(1,23); do Output.printString(&quot;Congratulations!&quot;); } return; } method void moveRunner(int key) { // å·¦ = 130ï¼Œä¸Š = 131ï¼Œå³ = 132ï¼Œä¸‹ = 133 if (key = 130) { let runnerX = runnerX - 20; } else { if (key = 131) { let runnerY = runnerY - 20; } else { if (key = 132) { let runnerX = runnerX + 20; } else { if (key = 133) { let runnerY = runnerY + 20; } } } } // é˜²æ­¢è¶Šç•Œ if (runnerX &amp;gt; 490) { let runnerX = 490; } if (runnerX &amp;lt; 0) { let runnerX = 0; } if (runnerY &amp;gt; 236) { let runnerY = 236; } if (runnerY &amp;lt; 0) { let runnerY = 0; } do runner.moveTo(runnerX, runnerY); return; } method void updateStatus() { // å–åˆ°é£Ÿç‰© if ((Math.abs(foodX - runnerX) &amp;lt; 20) &amp;amp; (Math.abs(foodY - runnerY) &amp;lt; 20)) { let picked = true; do runner.setPicked(picked); } // é€åˆ°é£Ÿç‰© if (picked &amp;amp; ((Math.abs(houseX - runnerX) &amp;lt; 20) &amp;amp; (Math.abs(houseY - runnerY) &amp;lt; 20))) { let score = score + 30; if (score &amp;gt; 100) { let exit = true; } let picked = false; do runner.setPicked(picked); do newRound(); } return; } // å®Œæˆä¸€æ¬¡é…é€ï¼Œæ›´æ–°é£Ÿç‰©å’Œæˆ¿å±‹çš„ä½ç½® method void newRound() { // æ›´æ–°ä½ç½® let foodX = mod(foodX + houseX , 490); let foodY = mod(foodY + houseY , 236); let houseX = mod(foodY + houseX , 490); let houseY = mod(houseX + foodY , 236); do food.moveTo(foodX, foodY); do house.moveTo(houseX, houseY); return; } // é‡æ–°ç»˜åˆ¶ method void reDraw() { do runner.show(); do house.show(); if (picked) { do food.hide(); } else { do food.show(); } do Output.moveCursor(22,7); do Output.printInt(score); return; } // è¡¥å……ä¸€ä¸ªå–æ¨¡çš„æ–¹æ³• method int mod(int x, int y) { var int q; let q = Math.divide(x, y); return x - (q*y); } } Runnerï¼ŒHouseï¼ŒFoodç±»è´Ÿè´£è¡¨ç¤ºä¸ªå­—çš„å¯¹è±¡ï¼Œç»´æŠ¤å¯¹è±¡ä½ç½®ä¿¡æ¯ï¼ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¹¶è´Ÿè´£ç»˜åˆ¶è‡ªå·±çš„å›¾å½¢ã€‚ class Runner { field int x, y; // éª‘æ‰‹ä½ç½® field int width, height; // éª‘æ‰‹å®½é«˜ 20*20 field boolen picked; // æ˜¯å¦å·²å–è´§ // æ–°åˆ›å»ºä¸€ä¸ªéª‘æ‰‹ constructor Runner new(int Ax, int Ay) { let x = Ax; let y = Ay; let width = 20; let height = 20; let picked = false; do show(); return this; } method void dispose() { do Memory.deAlloc(this); return; } // åœ¨screenä¸Šå±•ç¤ºéª‘æ‰‹ method void show() { do Screen.setColor(true); do draw(); return; } // æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„éª‘æ‰‹ method void hide() { do Screen.setColor(false); do draw(); return; } /** ç»˜åˆ¶æˆ¿å±‹ */ method void draw() { do Screen.drawRectangle(x, y + 9, x + 19, y + 10); do Screen.drawCircle(x + 5, y + 15, 4); do Screen.drawCircle(x + 15, y + 15, 4); do Screen.drawLine(x + 15, y + 9, x + 15, y + 4); do Screen.drawLine(x + 11, y + 4, x + 19, y + 4); if (picked) { do Screen.drawCircle(x + 4, y + 4, 3); } return; } method void setPicked(boolean Apicked) { let picked = Apicked; return; } method void moveTo(int Ax, int Ay) { do hide(); //å…ˆæŠ¹æ‰å½“å‰éª‘æ‰‹ let x = Ax; let y = Ay; do draw(); // é‡æ–°ç”»éª‘æ‰‹ return; } } class Food { field int x, y; // é£Ÿç‰©ä½ç½® field int width, height; // é£Ÿç‰©å®½é«˜ 15*15 // æ–°åˆ›å»ºä¸€ä¸ªé£Ÿç‰© constructor Food new(int Ax, int Ay) { let x = Ax; let y = Ay; let width = 15; let height = 15; do show(); return this; } method void dispose() { ... } // åœ¨screenä¸Šå±•ç¤ºé£Ÿç‰© method void show() { ... } // æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„é£Ÿç‰© method void hide() { ... } /** ç»˜åˆ¶é£Ÿç‰© */ method void draw() { ... } method void moveTo(int Ax, int Ay) { ... } } class House { field int x, y; // æˆ¿å±‹ä½ç½® field int width, height; // æˆ¿å±‹å®½é«˜ 20*20 // æ–°åˆ›å»ºä¸€ä¸ªæˆ¿å±‹ constructor House new(int Ax, int Ay) { let x = Ax; let y = Ay; let width = 20; let height = 20; do show(); return this; } method void dispose() { ... } // åœ¨screenä¸Šå±•ç¤ºæˆ¿å±‹ method void show() { ... } // æŠ¹æ‰å½“å‰åœ¨screenä¸Šå±•ç¤ºçš„æˆ¿å±‹ method void hide() { ... } /** ç»˜åˆ¶æˆ¿å±‹ */ method void draw() { ... } method void moveTo(int Ax, int Ay) { ... } } å¹¿å‘Š å½“ç¾å›¢éª‘æ‰‹ï¼Œåšæœ‰ä¸ºé’å¹´</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(10/12)â€“ç®€å•çš„æ“ä½œç³»ç»Ÿ</title><link href="/2020/02/29/%E7%AE%80%E5%8D%95%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(10/12)--ç®€å•çš„æ“ä½œç³»ç»Ÿ" /><published>2020-02-29T00:00:00+08:00</published><updated>2020-02-29T00:00:00+08:00</updated><id>/2020/02/29/%E7%AE%80%E5%8D%95%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F</id><content type="html" xml:base="/2020/02/29/%E7%AE%80%E5%8D%95%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html">&lt;p&gt;ä¸Šä¸€ç¯‡æˆ‘ä»¬å®Œæˆäº†Jackçš„ç¼–è¯‘å™¨ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°åœ¨Hackä¸Šç¼–å†™Jackç¨‹åºäº†ã€‚ä½†æ˜¯ä»¥Jackç›®å‰çš„èƒ½åŠ›ï¼Œå³ä½¿æ˜¯æƒ³å®Œæˆä¸€äº›ç®€å•çš„æ“ä½œä¹Ÿè¦ç¼–å†™éå¸¸å¤æ‚çš„ä»£ç ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦åœ¨å±å¹•ä¸Šè¾“å‡ºâ€œHello Workd!â€ï¼Œå°±å¿…é¡»åœ¨å±å¹•ä¸Šç‰¹å®šä½ç½®ç»˜åˆ¶ä¸Šå‡ ç™¾ä¸ªåƒç´ ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç®€å•çš„æ“ä½œç³»ç»Ÿæ¥è®©äº‹æƒ…å˜å¾—æ›´ç®€å•ä¸€äº›ã€‚&lt;/p&gt;

&lt;p&gt;æ“ä½œç³»ç»Ÿå°±æ˜¯ç”¨æ¥è¡”æ¥è®¡ç®—æœºçš„ç¡¬ä»¶ç³»ç»Ÿå’Œè½¯ä»¶ç³»ç»Ÿçš„ï¼Œä»¥ä½¿å¾—è®¡ç®—æœºå¯¹ç¨‹åºå‘˜å’Œç”¨æˆ·è€Œè¨€æ›´å®¹æ˜“ä½¿ç”¨ã€‚æœ¬ç¯‡çš„æ“ä½œç³»ç»ŸåŒ…å«äº†ä¸€ä¸ªæœ€å°è§„æ¨¡çš„æ“ä½œç³»ç»Ÿï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªJackæ ‡å‡†åº“çš„é›†åˆï¼‰ï¼Œä¸»è¦åŒ…æ‹¬ï¼šæ•°å­¦è¿ç®—ã€å­—ç¬¦ä¸²æ“ä½œã€å†…å­˜ç®¡ç†ã€æ–‡æœ¬å’Œå›¾å½¢è¾“å‡ºåˆ°å±å¹•ã€é”®ç›˜è¾“å…¥å¤„ç†ç­‰åŠŸèƒ½ï¼Œä¸åŒ…æ‹¬ï¼šè¿›ç¨‹ç®¡ç†ã€ç£ç›˜ç®¡ç†ã€é€šä¿¡ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ•°å­¦æ“ä½œ&quot;&gt;æ•°å­¦æ“ä½œ&lt;/h3&gt;

&lt;p&gt;ç›®å‰Hackåœ¨ç¡¬ä»¶ä¸Šåªæ”¯æŒåŠ æ³•å’Œå‡æ³•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è½¯ä»¶å±‚é¢å®Œå–„Hackçš„æ•°å­¦æ“ä½œï¼ŒåŒ…æ‹¬ï¼šä¹˜æ³•ã€é™¤æ³•ã€ç»å¯¹å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¼€å¹³æ–¹æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ•ˆç‡ç¬¬ä¸€&lt;/strong&gt;ï¼Œåœ¨åŠ å‡æ³•çš„åŸºç¡€ä¸Šå®ç°è¿™äº›æ•°å­¦æ“ä½œçš„æ–¹å¼å¯èƒ½æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„æ˜¯æ‰§è¡Œçš„æ•ˆç‡ï¼Œå› ä¸ºæ•°å­¦æ“ä½œæ˜¯è®¡ç®—æœºå·¥ä½œæ—¶æœ€å¸¸åšçš„åŸºæœ¬æ“ä½œä¹‹ä¸€ï¼Œæœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–æ•°å­¦æ“ä½œæ˜¯ä¼˜åŒ–è®¡ç®—æœºæ€§èƒ½çš„é‡è¦ä¸»é¢˜ã€‚ä¾‹å¦‚CPUä¼šä¸“é—¨ä¸ºæµ®ç‚¹æ•°è®¾è®¡æµ®ç‚¹æ•°è®¡ç®—å•å…ƒï¼Œæ›´æ“…é•¿æ•°å­¦è¿ç®—çš„GPUä¹Ÿè¢«è®¾è®¡å‡ºæ¥ç”¨äºè¾…åŠ©è®¡ç®—æœºçš„æ•°å­¦è¿ç®—ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ä¹˜æ³•&quot;&gt;ä¹˜æ³•&lt;/h4&gt;

&lt;p&gt;å¯¹äºä¹˜æ³• sum=x*yï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯æŠŠ sum=sum+x é‡å¤è¿ç®— y æ¬¡ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯æ¨¡æ‹Ÿå°å­¦è¿ç®—ä¹˜æ³•çš„ç«–å¼æ–¹å¼ï¼šç”¨ shiftedx å»ä¹˜ y çš„æ¯ä¸€ä½ï¼Œå¦‚æœ y çš„è¿™ä½ä¸º1ï¼Œåˆ™æŠŠç»“æœåŠ åˆ° sum ä¸­ï¼Œå¦‚æœä¸º0åˆ™èˆå¼ƒï¼›å¤„ç†å®Œ y çš„å½“å‰ä½åï¼Œå¤„ç† y çš„ä¸‹ä¸€ä½ï¼Œæ­¤æ—¶éœ€è¦æ“ä½œ shiftedx=shiftedx*2ï¼ˆæ­¤æ“ä½œå¯ä»¥é€šè¿‡åŠ æ³•å®ç°ï¼Œæˆ–è€…é€šè¿‡ç§»ä½å®ç°ï¼Œç§»ä½æ•ˆç‡æ›´é«˜ï¼Œè™½ç„¶Hackä¸æ”¯æŒç§»ä½æ“ä½œï¼‰ã€‚ç¬¬äºŒç§æ–¹å¼æ•ˆç‡æ›´é«˜ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log2(n))ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcq3caoxlhj30ra09mq2w.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcq2u7z2gtj31220bijrp.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;å®ç°ï¼š&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8192&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16384&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16384&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16384&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åˆ¤æ–­xçš„ç¬¬nä½æ˜¯å¦ä¸º1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;multiply&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftedX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftedX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// 16-bit numbers&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftedX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftedX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftedX&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftedX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;é™¤æ³•&quot;&gt;é™¤æ³•&lt;/h4&gt;

&lt;p&gt;å¯¹äºé™¤æ³• d=x/yï¼Œå®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯é‡å¤è®¡ç®— x=x-yï¼Œæ¯è®¡ç®—ä¸€æ¬¡å d=d+1ï¼Œç›´è‡³ x-y&amp;lt;0 ä¸ºæ­¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åçš„æƒ…å†µæ˜¯ y=1 çš„æƒ…å†µï¼Œæ­¤æ—¶çš„æ­¥é•¿æœ€çŸ­ï¼Œéœ€è¦é‡å¤è®¡ç®—xæ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(x)ã€‚æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¢åŠ æ­¥é•¿ï¼Œæ¯æ¬¡ä¸æ˜¯å‡å»yï¼Œè€Œæ˜¯å‡å»2yï¼Œè€Œä¸”æ˜¯é€’å½’çš„è¿›è¡Œä¸‹å»ï¼Œç›´è‡³ x&amp;lt;y æ—¶è¿”å›ï¼Œæ­¤æ—¶æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º O(log2(n))ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcq7h7f8ezj311m0bk3yt.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg_x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg_y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;å¼€å¹³æ–¹&quot;&gt;å¼€å¹³æ–¹&lt;/h4&gt;

&lt;p&gt;è¿™ä¸ªå¼€å¹³æ–¹å‡½æ•°è¿”å›å…¥å‚ x å¼€å¹³æ–¹åç»“æœçš„æ•´æ•°éƒ¨åˆ†ã€‚ç®—æ³•å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼ï¼Œæ‰¾åˆ° $y^2\leq x&amp;lt;(y+1)^2$ å³å¯ã€‚è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log2(n))ï¼Œä½†ç”±äºæˆ‘ä»¬è®¡ç®—çš„ x å¤§å°æœ‰ä¸Šé™ï¼ˆ$2^{16}-1$ï¼‰ï¼Œæ‰€ä»¥çœŸå®æ‰§è¡Œæ—¶å¾ªç¯çš„æ¬¡æ•°æ˜¯å›ºå®šçš„ n/2 (n=16)ï¼Œå¤æ‚åº¦æ˜¯O(n/2)ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;ä¼ªä»£ç ï¼š&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)^&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx_squared&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// = #bits / 2 - 1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;powers_of_two&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx_squared&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;approx_squared&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;approx_squared&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// in case of overflow&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;approx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;ç»å¯¹å€¼æœ€å¤§å€¼æœ€å°å€¼å–æ¨¡&quot;&gt;ç»å¯¹å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€å–æ¨¡&lt;/h4&gt;

&lt;p&gt;è¿™äº›è¿ç®—å°±æ¯”è¾ƒç®€å•äº†&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å­—ç¬¦ä¸²&quot;&gt;å­—ç¬¦ä¸²&lt;/h3&gt;

&lt;p&gt;å­—ç¬¦ä¸²çš„é€»è¾‘æ¯”è¾ƒç®€å•ã€‚åœ¨Jackä¸­ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨å†…å®¹ä¸€ä¸²asciiç¼–ç ï¼ˆä¸”ä¸éœ€è¦ä»¥\0ç»“å°¾ï¼‰ã€‚æˆ‘ä»¬ç”¨Stringç±»æ¥å®ç°ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªæ–¹æ³•æ˜¯æ„é€ å‡½æ•° new(int length) å’Œ appendChar(char c)ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ”¯æŒä¸€ä¸ªä¸€ä¸ªåœ°è¿½åŠ å­—ç¬¦ï¼Œä¸æ”¯æŒç›´æ¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ğŸ˜‚ã€‚é™„ä¸Š&lt;a href=&quot;https://zh.wikipedia.org/wiki/ASCII&quot;&gt;asciiç¼–ç è¡¨ï¼š&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer_len&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxLength&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxLength&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxLength&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxLength&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxLength&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setCharAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

     &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;  &lt;span class=&quot;nc&quot;&gt;Returns&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*/&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;appendChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eraseLastChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** è¿”å›å­—ç¬¦ä¸²ä»£è¡¨çš„æ•´æ•°å€¼ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;intValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;int_val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;int_val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// '-'&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;is_digit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;int_val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int_val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;digit_val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;neg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int_val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;int_val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;is_digit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;57&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;digit_val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;digit_char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¿å­˜æ•´æ•° */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str_len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// Clear string&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;appendChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// leading '-'&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;do_set_int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;do_set_int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;digit_char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;appendChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;do_set_int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;appendChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;newLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;backSpace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;129&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** åŒå¼•å· */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doubleQuote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å†…å­˜ç®¡ç†&quot;&gt;å†…å­˜ç®¡ç†&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨é«˜çº§è¯­è¨€ï¼Œæœ€å¤§çš„æ–¹ä¾¿ä¹‹ä¸€å°±æ˜¯å¼€å‘è€…å‡ ä¹ä¸ç”¨å…³æ³¨å†…å­˜ç®¡ç†çš„ç»†èŠ‚ï¼Œæ‰€æœ‰å¤æ‚çç¢çš„å·¥ä½œéƒ½åˆæ“ä½œç³»ç»Ÿï¼Œç¼–è¯‘å™¨ï¼Œè™šæ‹Ÿæœºï¼Œæ±‡ç¼–å™¨ç­‰åº•å±‚æ¥è´Ÿè´£å®ç°ã€‚ä¸åŒå˜é‡ç±»å‹çš„å†…å­˜åœ¨ç¨‹åºå£°æ˜å‘¨æœŸä¸­çš„ä¸åŒæ—¶åˆ»è¢«åˆ†é…ï¼Œä¾‹å¦‚ï¼Œé™æ€å˜é‡åœ¨ç¼–è¯‘æœŸç”±ç¼–è¯‘å™¨ä¸ºå…¶åˆ†é…å†…å­˜ï¼›å±€éƒ¨å˜é‡åˆ™åœ¨æ¯ä¸ªå‡½æ•°è¿è¡Œçš„æ—¶å€™åˆ†é…åœ¨æ ˆå†…å­˜ä¸Šï¼›å…¶ä»–å†…å­˜åˆ™æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«åŠ¨æ€åœ°åˆ†é…åœ¨å †å†…å­˜ä¸Šï¼Œè¿™äº›å†…å­˜å°±éœ€è¦å€ŸåŠ©æ“ä½œç³»ç»Ÿæ¥ç®¡ç†äº†ã€‚æ“ä½œç³»ç»Ÿå¯èƒ½ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥ç®¡ç†å†…å­˜çš„åˆ†é…å’Œå›æ”¶ï¼Œé€šå¸¸éƒ½æ˜¯ç”¨alloc()å’ŒdeAlloc()è¿™ä¸¤ä¸ªå‡½æ•°ä¸­å®ç°çš„ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æœ€ç®€å•çš„å†…å­˜ç®¡ç†ç®—æ³•&quot;&gt;æœ€ç®€å•çš„å†…å­˜ç®¡ç†ç®—æ³•&lt;/h4&gt;

&lt;p&gt;ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„æŒ‡é’ˆ free æŒ‡å‘è¿˜æœªä½¿ç”¨è¿‡çš„å†…å­˜çš„åŸºåœ°å€ã€‚è¿™ç§æ–¹å¼åªæ˜¯ç®€å•çš„å‘å‰åˆ†é…å†…å­˜ï¼Œä¸è´Ÿè´£å›æ”¶å†…å­˜ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ä¼ªä»£ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;initialize&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;free&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;heapBase&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åˆ†é…ä¸€å—å¤§å°ä¸º size çš„å†…å­˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pointer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;free&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;free&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;free&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pointer&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å›æ”¶objectçš„å†…å­˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;deAlloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nothing&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// ä¸åšå†…å­˜å›æ”¶å¤„ç†&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;ç®—æ³•æ”¹è¿›&quot;&gt;ç®—æ³•æ”¹è¿›&lt;/h4&gt;

&lt;p&gt;ç»å…¸çš„ç®—æ³•æ˜¯å¯ä»¥ä½¿ç”¨é“¾è¡¨æ¥ç®¡ç†å†…å­˜ã€‚è¯¥ç®—æ³•ç®¡ç†ä¸€ä¸ªfreeListé“¾è¡¨ï¼Œé“¾è¡¨çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå†…å­˜æ®µï¼Œè°ƒç”¨è€…ç”³è¯·åˆ†é…å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿä»å¯ç”¨å†…å­˜æ®µä¸­æŒ‘é€‰ä¸€ä¸ªåˆé€‚çš„å†…å­˜æ®µï¼ˆå†…å­˜æ®µå†…å­˜å¤§äºç”³è¯·çš„å†…å­˜ï¼‰ï¼Œå°†å…¶ï¼ˆå†…å­˜æ®µçš„å…¨éƒ¨å†…å­˜æˆ–éƒ¨åˆ†å†…å­˜ï¼‰è¿”å›ç»™è°ƒç”¨è€…ï¼Œç„¶åæ›´æ–°é“¾è¡¨ã€‚è°ƒç”¨è€…ç”³è¯·å›æ”¶å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»ŸæŠŠéœ€è¦å›æ”¶çš„è¿™æ®µå†…å­˜åŠ å…¥freeListé“¾è¡¨ã€‚&lt;/p&gt;

&lt;p&gt;æ¯ä¸ªå†…å­˜æ®µçš„ç¬¬ä¸€ä¸ªä½ç½®ç”¨äºä¿å­˜è¯¥å†…å­˜æ®µçš„é•¿åº¦ï¼Œç¬¬äºŒä¸ªä½ç½®ç”¨äºæŒ‡å‘ Next å†…å­˜æ®µã€‚å½“æ“ä½œç³»ç»ŸæŸ¥æ‰¾åˆé€‚çš„å†…å­˜æ®µæ—¶å¯ä»¥ä½¿ç”¨&lt;strong&gt;æœ€ä¼˜é€‚åº”ç®—æ³•&lt;/strong&gt;ï¼Œå³æŸ¥æ‰¾æ•´ä¸ªé“¾è¡¨ä¸­å¤§å°æœ€åŒ¹é…å˜é‡çš„å†…å­˜æ®µï¼›æˆ–è€…&lt;strong&gt;æœ€å…ˆé€‚åº”ç®—æ³•&lt;/strong&gt;ï¼Œå³æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³å˜é‡éœ€æ±‚çš„å†…å­˜æ®µã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå½“å‰çš„freeListçŠ¶æ€å¦‚å·¦å›¾æ‰€ç¤ºï¼Œæœ‰ä¸‰å—å†…å­˜ï¼Œå…¶å†…å­˜æ®µå¤§å°åˆ†åˆ«æ˜¯4ã€9ã€5ï¼ˆå¯ç”¨å¤§å°æ˜¯2ã€7ã€3ï¼‰ã€‚å½“è°ƒç”¨è€…æ‰§è¡Œalloc(5)æ—¶ï¼Œä»£è¡¨è°ƒç”¨è€…éœ€è¦å¤§å°ä¸º5çš„å†…å­˜ï¼Œæ­¤æ—¶ä¸‰å—å†…å­˜ä¸­åªæœ‰å¤§å°ä¸º9çš„å†…å­˜å—æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬ä¸­å–å‡ºå6ä½å†…å­˜è¿”å›ç»™è°ƒç”¨è€…ï¼ˆå¤šçš„ä¸€ä½ç”¨æ¥æ ‡è¯†è¯¥å˜é‡å ç”¨å†…å­˜å¤§å°ï¼Œåç»­ç”¨äºå†…å­˜å›æ”¶æ—¶ä½¿ç”¨ï¼‰ï¼Œç„¶åå¤§å°ä¸º9çš„å†…å­˜å—å°±è¿˜å‰©3äº†ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcuxvnsui0j31dq0lq0t3.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ä¼ªä»£ç &lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;Initialize:&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;heap&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;heapLength&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åˆ†é…å†…å­˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;):&lt;/span&gt;
	&lt;span class=&quot;err&quot;&gt;åˆ©ç”¨â€œæœ€ä¼˜é€‚åº”ç®—æ³•â€æˆ–è€…â€œæœ€å…ˆé€‚åº”ç®—æ³•â€æ‰¾åˆ°åˆé€‚çš„å†…å­˜æ®µï¼ˆæ»¡è¶³æ¡ä»¶&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;segement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼‰&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ‰¾ä¸åˆ°&lt;/span&gt;
	  &lt;span class=&quot;err&quot;&gt;è¿”å›&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fail&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æˆ–è€…å°è¯•æ•´åˆå†…å­˜ç¢ç‰‡&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
	  &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ä»å†…å­˜æ®µä¸­å–å‡ºä¸€æ®µå†…å­˜ï¼Œå¤§å°ä¸º&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼ˆå¦‚æœå–å‡ºåï¼Œè¯¥å†…å­˜æ®µå‰©ä½™å¤ªå°ï¼Œåˆ™ç›´æ¥æ˜¯è¿™æ•´ä¸ªå†…å­˜æ®µå°±å¥½ï¼Œé˜²æ­¢å°ç¢ç‰‡å‡ºç°ï¼‰&lt;/span&gt;
	  &lt;span class=&quot;err&quot;&gt;æ›´æ–°é€‰ä¸­çš„å†…å­˜çš„å‰©ä½™æƒ…å†µ&lt;/span&gt;
	  &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼Œæ ‡è¯†å˜é‡ç”³è¯·çš„å ç”¨å†…å­˜å¤§å°ï¼Œåç»­ç”¨äºå†…å­˜å›æ”¶æ—¶ä½¿ç”¨&lt;/span&gt;
	  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å›æ”¶å†…å­˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;deAlloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;segement&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼Œè¯¥æ®µå†…å­˜çš„åŸºåœ°å€&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;segement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼Œå˜é‡å ç”¨å†…å­˜çš„å¤§å°&lt;/span&gt;
	&lt;span class=&quot;err&quot;&gt;å°†&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segement&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;æ’å…¥&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ç”¨jackå®ç°&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NO_BLOCK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// freeListé•¿åº¦åœ¨segementä¸Šçš„indexï¼Œå€¼ä¸ºä¸º0&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// freeListnextæŒ‡é’ˆåœ¨segementä¸Šçš„ndexï¼Œå€¼ä¸ºä¸º1&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ALLOC_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// åˆ†é…çš„blockçš„sizeï¼Œåœ¨blockä¸Šçš„indexï¼Œå€¼ä¸º-1&lt;/span&gt;
    
    &lt;span class=&quot;cm&quot;&gt;/** åˆå§‹åŒ– */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// heapåŸºåœ°å€&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NO_BLOCK&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16384&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;   
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ALLOC_SIZE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16384&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//åˆå§‹åŒ–freeListï¼Œæ­¤æ—¶freeçš„å†…å­˜ä¸ºæ•´ä¸ªheap&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** è¿”å›åœ°å€ä¸ºaddressçš„å†…å­˜å•å…ƒçš„å†…å®¹ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** æŠŠæ•°å€¼valueå­˜å‚¨åˆ°åœ°å€ä¸ºaddressçš„å†…å­˜å•å…ƒä¸­ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;poke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** ä»å¯ç”¨å†…å­˜ä¸­å¯»æ‰¾ä¸€å—åˆé€‚çš„å†…å­˜å—ï¼Œè¿”å›å†…å­˜å—çš„åŸºåœ°å€ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;best_fit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// prev_block æ˜¯ç›®æ ‡ block çš„å‰ä¸€ä¸ªblock&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NO_BLOCK&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// æœªæ‰¾åˆ°&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// ç›®æ ‡ block æ˜¯ freeList çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;do_alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// åˆ†é…å†…å­˜ï¼Œå¹¶æ›´æ–°freeList&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;do_alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// åˆ†é…å†…å­˜ï¼Œå¹¶æ›´æ–°freeList&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;cm&quot;&gt;/** æœ€ä¼˜åŒ¹é…ç®—æ³• */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;best_fit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NO_BLOCK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16384&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;// éå†freeListï¼Œæ‰¾åˆ°å¯ç”¨å†…å­˜å¤§äºsieï¼Œä¸”å…¶ä¸­æœ€å°çš„block&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;best_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// è¿”å›æœ€ä¼˜blockçš„å‰ä¸€ä¸ªblock&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** åˆ†é…å†…å­˜ï¼Œå¹¶å¡«å……block headerçš„å€¼ï¼ˆå€¼ä¸ºblockçš„é•¿åº¦ï¼‰*/&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;do_alloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// blockå†…å­˜å¤§äºç”³è¯·å†…å†…å­˜ï¼Œåˆ†é…blockçš„ä¸€éƒ¨åˆ†&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// next_blockçš„ä½ç½®&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// next_blocké‡ç½®blockä¿¡æ¯&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// found_blocké‡ç½®blockä¿¡æ¯&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ALLOC_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;            
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;                                               &lt;span class=&quot;c1&quot;&gt;// æŠŠæ•´å—å†…å­˜éƒ½åˆ†é…ç»™ç”³è¯·è€…&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// found_blocké‡ç½®blockä¿¡æ¯&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;found_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ALLOC_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** é‡Šæ”¾å†…å­˜ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deAlloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ALLOC_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;find_prev_free&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// æ‰¾åˆ°prev_block&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;// objectæˆä¸ºæ–°çš„é¦–èŠ‚ç‚¹&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// å¦‚æœ prev_block å’Œ object ç›¸è¿ï¼Œåˆ™åˆå¹¶ä¸¤ä¸ªblock&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// é“¾æ¥ä¸¤ä¸ªblock&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alloc_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å°è¯•åˆå¹¶prev_blockå’Œnext_block&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_LENGTH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;    
    
    &lt;span class=&quot;cm&quot;&gt;/** è¿”å›blockçš„prev_block */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;find_prev_free&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FL_NEXT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;io&quot;&gt;I/O&lt;/h3&gt;

&lt;p&gt;è®¡ç®—æœºä¸€èˆ¬ä¼šè¿æ¥ä¸€äº›è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œä¾‹å¦‚ï¼šæ˜¾ç¤ºå™¨ã€é¼ æ ‡ã€é”®ç›˜ã€ç¡¬ç›˜ã€ç½‘å¡ç­‰ï¼Œè¿™äº›I/Oè®¾å¤‡éƒ½æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œåœ¨è¿™äº›è®¾å¤‡ä¸Šè¿›è¡Œè¯»å†™æ“ä½œä¹Ÿæ˜¯å¾ˆå¤æ‚çš„ï¼Œä½†å¯¹äºç¨‹åºå‘˜è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œç³»ç»Ÿæ¥æ“ä½œå®ƒä»¬ï¼Œæ“ä½œç³»ç»Ÿä½¿ç”¨ä¸€ç»„é©±åŠ¨ç¨‹åºæ¥å¤„ç†å„ä¸ªI/Oè®¾å¤‡çš„æ“ä½œç»†èŠ‚ï¼Œç„¶åå‘ä¸Šæä¾›ä¸€ç»„å°è£…å¥½çš„APIæ¥å£ã€‚&lt;/p&gt;

&lt;p&gt;I/Oè®¾å¤‡å¯¹äºCPUå’Œæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå…¶å®æ˜¯ä¸€æ®µå†…å­˜å’Œä¸€ç»„BIOSé©±åŠ¨ç¨‹åºï¼ˆåœ¨Hackä¸­æ²¡æœ‰è¿™äº›é©±åŠ¨ç¨‹åºï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å†™ï¼‰ï¼Œå½“æ“ä½œç³»ç»Ÿæƒ³è¦å’ŒI/Oè®¾å¤‡äº¤äº’æ—¶ï¼Œå°±é€šè¿‡è¿™äº›ç¨‹åºä»ç›¸åº”çš„å†…å­˜ä¸­è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚åœ¨Hackä¸­ï¼Œæˆ‘ä»¬åªæœ‰ä¸¤ä¸ªI/Oè®¾å¤‡ï¼šæ˜¾ç¤ºå™¨å’Œé”®ç›˜ï¼Œ
æ˜¾ç¤ºå™¨çš„å†…å­˜æ˜ å°„æ˜¯ä»16384å¼€å§‹çš„è¿ç»­çš„ 8K åœ°å€ç©ºé—´ï¼ˆè¯¥æ˜¾ç¤ºå™¨çš„åˆ†è¾¨ç‡æ˜¯ï¼š512*256ï¼‰ï¼›é”®ç›˜æ›´ç®€å•ï¼Œå®ƒåªæ˜ å°„24576è¿™ä¸€ä¸ªåœ°å€å•å…ƒçš„åœ°å€ç©ºé—´ï¼ˆå› ä¸ºè¶³ä»¥å®¹çº³æ‰€æœ‰è‹±æ–‡å­—ç¬¦å’Œç¬¦å·ï¼‰&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcycyqes1sj30ww0p4jsi.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;é”®ç›˜&quot;&gt;é”®ç›˜&lt;/h3&gt;

&lt;p&gt;å½“æˆ‘ä»¬æ•²å‡»é”®ç›˜æ—¶ï¼Œæ•²å‡»çš„å­—ç¬¦çš„saciiç ä¼šå†™å…¥åˆ°åœ°å€ä¸º24576çš„å†…å­˜ä¸­ã€‚æˆ‘ä»¬çš„é©±åŠ¨ç¨‹åºè¦åšçš„äº‹æƒ…å°±æ˜¯ï¼Œå®Œæˆä¸€ç»„ç‰¹å®šçš„APIï¼Œä»–ä»¬å¯ä»¥ä»24576å·åœ°å€ä¸­è¯»å–å­—ç¬¦ï¼ˆè¯»å–å•ä¸ªå­—ç¬¦æˆ–è€…å…ˆç»„åˆæˆå­—ç¬¦ä¸²ï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcycyp9d74j315i0f6dgw.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;ç›‘æµ‹é”®ç›˜è¾“å…¥&quot;&gt;ç›‘æµ‹é”®ç›˜è¾“å…¥&lt;/h4&gt;

&lt;p&gt;ç¬¬ä¸€ä»¶äº‹éœ€è¦åšçš„æ˜¯ï¼Œç›‘æµ‹åˆ°é”®ç›˜çš„è¾“å…¥ã€‚è¯¥æ–¹æ³•çš„æ ¸å¿ƒå°±æ˜¯ä»é”®ç›˜çš„å†…å­˜æ˜ åƒä¸­è¯»å‡ºå½“å‰æŒ‰ä¸‹çš„å­—ç¬¦çš„asciiç ï¼Œå½“è¯»å–çš„å€¼ä¸ä¸º0çš„æ—¶å€™ï¼Œä»£è¡¨æœ‰å­—ç¬¦è¾“å…¥ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// keyPress() ä¼ªä»£ç &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æœ‰æŒ‰é”®æŒ‰ä¸‹&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;è¯¥é”®çš„&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sacii&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ç &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Jackå®ç°&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;è¯»å–å•ä¸ªå­—ç¬¦&quot;&gt;è¯»å–å•ä¸ªå­—ç¬¦&lt;/h4&gt;

&lt;p&gt;è¯»å–å•ä¸ªå­—ç¬¦æ—¶æˆ‘ä»¬éœ€è¦é¢å¯¹ä¸¤ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ä¸ªï¼Œä»€ä¹ˆæƒ…å†µä¸‹æ‰å«ç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªå•ä¸ªå­—ç¬¦å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å®šä¹‰ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é”®ï¼Œç„¶åæ¾å¼€æŒ‰é”®ï¼Œè¿™è¿‡ç¨‹ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼ˆå³ä½¿é•¿æ—¶é—´æŒ‰ä½å†æ¾å¼€ä¹Ÿæ˜¯è¾“å…¥ä¸€ä¸ªï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…æ˜¯ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œç„¶åè®°å½•æ•°å€¼ï¼Œç„¶åç­‰å¾…ç”¨æˆ·æ¾å¼€ï¼Œå®Œæˆæœ¬æ¬¡å•ä¸ªå­—ç¬¦è¯»å–ã€‚ç¬¬äºŒä¸ªï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå¯è§†åŒ–åé¦ˆï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå­—ç¬¦åï¼Œéœ€è¦åœ¨å±å¹•ä¸Šå›æ˜¾å‡ºæ¥ï¼Œå¹¶ä¸”è¾…åŠ©ä»¥å…‰æ ‡æç¤ºï¼ˆè™½ç„¶è¿™ä¸ªæ“ä½œçœ‹ä¼¼ç†æ‰€å½“ç„¶ï¼Œä½†å…¶ä¸­ç»è¿‡çš„è¿‡ç¨‹å¹¶ä¸ç®€å•ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// readChar() ä¼ªä»£ç &lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ²¡æœ‰ä»»ä½•æŒ‰é”®æŒ‰ä¸‹&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;ç­‰å¾…&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ç›´åˆ°æœ‰æŒ‰é”®æŒ‰ä¸‹&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å½“å‰æŒ‰ä¸‹çš„æŒ‰é”®å€¼&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å½“å‰æŒ‰é”®è¿˜å¤„äºæŒ‰ä¸‹çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;ç­‰å¾…&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ç›´åˆ°æŒ‰é”®æ¾å¼€&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æŠŠå­—ç¬¦å›æ˜¾åˆ°å±å¹•ä¸Š&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;å°†å…‰æ ‡å³ç§»ä¸€æ ¼&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// jackå®ç°&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;readChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keyPressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keyPressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keyPressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;è¯»å–ä¸€è¡Œå­—ç¬¦&quot;&gt;è¯»å–ä¸€è¡Œå­—ç¬¦&lt;/h4&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬åœ¨ readChar() çš„åŸºç¡€ä¸Šæ‰©å±•å‡º readLine()ï¼ŒreadLine()éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ä¸ªï¼ŒæŠŠè¯»å–çš„å•ä¸ªå­—ç¬¦å†™å…¥å­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œç›´åˆ°è¾“å…¥æ¢è¡Œç¬¦æ—¶ç»“æŸã€‚ç¬¬äºŒä¸ªï¼Œå…è®¸ç”¨æˆ·åœ¨è¾“å…¥è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ é™¤é”®åˆ é™¤&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// readLine() ä¼ªä»£ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ç©ºå­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;repeat&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ¢è¡Œç¬¦&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ¢è¡Œç¬¦&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;é€€æ ¼é”®&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦&lt;/span&gt;
        &lt;span class=&quot;err&quot;&gt;å…‰æ ‡å·¦ç§»ä¸€æ ¼&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Jackå®ç°&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;readLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// max length&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;readChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;backSpace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;eraseLastChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;backSpace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;appendChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;readChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;   
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œé”®ç›˜è¾“å…¥çš„è®¾è®¡å®ç°è¿˜æ˜¯åŸºäºä¸€ç³»åˆ—çº§è”çš„åˆ†å±‚æŠ½è±¡ã€‚é«˜çº§ç¨‹åºreadLine()ä¾èµ–readChar()ï¼ŒreadChar()ä¾èµ–äºkeyPress()ï¼ŒkeyPress()ä¾èµ–äºç¡¬ä»¶ã€‚å¯è§åˆ†å±‚æŠ½è±¡çš„è®¾è®¡æ¨¡å¼è´¯ç©¿äº†æ•´ä¸ªè®¡ç®—æœºçš„å®è§‚æ¶æ„å’Œå¾®è§‚å®ç°ï¼Œå¯ä»¥è¯´æ˜¯è®¡ç®—æœºç§‘å­¦çš„ç²¾åæ€æƒ³ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å›¾å½¢æ˜¾ç¤º&quot;&gt;å›¾å½¢æ˜¾ç¤º&lt;/h3&gt;

&lt;p&gt;ç°ä»£è®¡ç®—æœºå¤§å¤šä½¿ç”¨ä½å›¾ï¼ˆbitmapï¼‰æˆ–ç§°å…‰æ …ï¼ˆrasterï¼‰çš„æŠ€æœ¯æ¥æ˜¾ç¤ºå›¾å½¢æˆ–æ–‡å­—ã€‚å±å¹•ç”±ä¸€ç»„äºŒç»´çš„å¹³é¢ç‚¹ç»„æˆï¼Œæ¯ä¸ªç‚¹æ˜¯ä¸€ä¸ªåƒç´ ï¼ˆpixelï¼‰ï¼Œæ¯ä¸ªåƒç´ ç‚¹å¯¹åº”åˆ°æ˜¾å­˜ä¸­çš„æŸä¸ªåœ°å€ï¼Œè®¡ç®—æœºè¦åšçš„å°±æ˜¯ç»™æ¯ä¸ªåƒç´ ç‚¹èµ‹ä¸Šä¸€ä¸ªé¢œè‰²çš„å€¼ï¼ŒHackåªæ”¯æŒé»‘å’Œç™½ï¼Œå› æ­¤åªå 1bitï¼Œå¦‚æœæ˜¾ç¤ºå™¨æ”¯æŒå½©è‰²æ˜¾ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªåƒç´ å°±ä¼šå ç”¨æ›´å¤šbitçš„å†…å­˜ã€‚&lt;/p&gt;

&lt;p&gt;Hackçš„å±å¹•åˆ†è¾¨ç‡æ˜¯512*256ï¼Œå³å±å¹•ä¸Šæœ‰131072ä¸ªåƒç´ ç‚¹ã€‚åƒç´ ç‚¹å’Œæ˜¾å­˜çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼šç°å­˜ä¸­æ¯ä¸ªBitå¯¹åº”ä¸€ä¸ªåƒç´ ç‚¹ï¼ˆ1ä»£è¡¨é»‘è‰²ï¼Œ0ä»£è¡¨ç™½è‰²ï¼‰ï¼Œä¸€è¡Œ512ä¸ªåƒç´ éœ€è¦å¯¹åº” 32*16bitï¼ˆä¸€ä¸ªwordï¼‰ï¼Œ32word/è¡Œ*256è¡Œ=8192wordï¼Œæ­£å¥½æ˜¯8Kåœ°å€ç©ºé—´ã€‚å› æ­¤å­˜åœ¨å¯¹åº”å…³ç³»ï¼šç¬¬rè¡Œç¬¬cåˆ—çš„åƒç´ ç‚¹ï¼Œå¯¹åº”åœ°å€ä¸º Screen[r*32+c/16] çš„wordçš„ç¬¬ c%16 çš„bitã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcz4oayk2sj30tq0dg74b.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;ç‚¹&quot;&gt;ç‚¹&lt;/h4&gt;

&lt;p&gt;äº†è§£äº†ä¸Šé¢åƒç´ ç‚¹å’Œå†…å­˜bitçš„å¯¹åº”å…³ç³»åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºç»™å•ä¸€åƒç´ ç‚¹èµ‹å€¼çš„æ–¹æ³•äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** ç»˜åˆ¶åƒç´ ç‚¹ (x, y) */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawPixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// å…ˆæ‰¾åˆ°ç¬¬å‡ ä¸ªword&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;two_to_the&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// å†æ‰¾åˆ°è¯¥wordçš„ç¬¬å‡ ä¸ªbitï¼Œå¹¶è½¬æˆæ©ç çš„å½¢å¼ã€‚ä¾‹å¦‚ç¬¬4ä¸ªbitï¼Œå¯¹åº”0000000000000100&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_colour&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** æ¸…é™¤å±å¹• */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;clearScreen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8192&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** è®¾ç½®å°†è¦ä½¿ç”¨çš„color white = false, black = true. */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_colour&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;çº¿&quot;&gt;çº¿&lt;/h4&gt;

&lt;p&gt;ç‚¹å¾ˆå®¹æ˜“ç»˜åˆ¶ï¼Œçº¿åˆ™å¤æ‚å¾ˆå¤šã€‚ç”±äºåƒç´ ç‚¹æ˜¯ä¸€ä¸ªä¸ªçŸ©å½¢çš„å°æ–¹å—ï¼Œæ‰€ä»¥é™¤äº†æ¨ªçº¿å’Œç«–çº¿ï¼Œæˆ‘ä»¬æ— æ³•ç»˜åˆ¶å‡ºå®Œå…¨ç¬”ç›´çš„çº¿ï¼ˆæ–œçº¿éƒ½æ˜¯å¸¦é”¯é½¿æ¯›è¾¹çš„ï¼‰ï¼Œå½“ç„¶é€šè¿‡ç¼©å°åƒç´ ç‚¹çš„å¤§å°æˆ‘ä»¬å¯ä»¥æ— é™é€¼è¿‘ç¬”ç›´ï¼ˆå½“åƒç´ ç‚¹å°åˆ°äººçœ¼æ— æ³•åˆ†è¾¨æ—¶å°±å¯ä»¥äº†ï¼Œå³æ‰€è°“çš„è§†ç½‘è†œå±å¹•ï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcz5056jtyj30j00cyq2x.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨ç»˜åˆ¶çº¿çš„æ—¶å€™ï¼Œåˆ†ä¸º3ç§åœºæ™¯ï¼šæ¨ªçº¿ã€ç«–çº¿å’Œæ–œçº¿ã€‚å…¶ä¸­æ¨ªçº¿å’Œç«–çº¿éƒ½æ¯”è¾ƒå®¹æ˜“å®ç°ï¼Œç»˜åˆ¶æ–œçº¿åˆ™å¤æ‚ä¸€äº›ï¼Œéœ€è¦å€ŸåŠ©ç‰¹å®šçš„ç®—æ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** ä» (x1, y1) åˆ° (x2, y2) ç»˜åˆ¶ä¸€æ¡çº¿ */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// ä¿è¯ x1 &amp;lt;= x2&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawVerticalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawHorizontalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawDiagonalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;ç«–çº¿&quot;&gt;ç«–çº¿&lt;/h5&gt;

&lt;p&gt;ç»˜åˆ¶ç«–çº¿è¾ƒå®¹æ˜“ï¼Œè°ƒç”¨ drawPixel() æ–¹æ³•ï¼Œä» y1 ç»˜åˆ¶åˆ° y2 å³å¯ï¼ˆy1&amp;lt;=y2ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawVerticalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// ä¿è¯ y1 &amp;lt;= y2&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawPixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;æ¨ªçº¿&quot;&gt;æ¨ªçº¿&lt;/h5&gt;

&lt;p&gt;æ¨ªçº¿çš„å®ç°æ–¹å¼å¯ä»¥å’Œç«–çº¿ä¸€æ ·ï¼Œä¸€ä¸ªä¸ªåƒç´ çš„ç»˜åˆ¶å®Œå³å¯ã€‚ä½†è¿™é‡Œæˆ‘ä»¬åšä¸€ä¸ªå°ä¼˜åŒ–ï¼Œä¸€æ¡æ¨ªçº¿ä¼šæ¨ªè·¨nä¸ªwordï¼Œé™¤äº†å¤´å’Œå°¾ï¼Œä¸­é—´çš„wordéƒ½æ˜¯è¿ç»­çš„ï¼Œæ‰€æœ‰æˆ‘ä»¬å¯ä»¥ä¸ºè¿™äº›wordä¸€æ¬¡æ€§èµ‹å€¼16ä¸ªbitï¼Œè¿™æ ·å¾ªç¯çš„æ¬¡æ•°ä¼šç¼©çŸ­16å€ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawHorizontalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_addr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1mod16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2mod16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1mod16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// çº¿åœ¨ä¸€ä¸ªwordå†…çš„åç§»é‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2mod16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;               &lt;span class=&quot;c1&quot;&gt;// çº¿åœ¨æœ€åä¸€ä¸ªwordå†…çš„åç§»é‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x2mod16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// çº¿çš„é•¿åº¦åœ¨ä¸€ä¸ªwordå†…&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;draw_short_horizontal_line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1mod16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// çº¿åœ¨ç¬¬ä¸€ä¸ªWordå†…çš„ä¸€å°æ®µ&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;draw_short_horizontal_line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1mod16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x2mod16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// çº¿åœ¨æœ€åä¸ªWordå†…çš„ä¸€å°æ®µ&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;draw_short_horizontal_line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x2mod16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end_addr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// ä¸­é—´çš„è‹¥å¹²æ®µword&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur_colour&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw_short_horizontal_line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawPixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;æ–œçº¿&quot;&gt;æ–œçº¿&lt;/h5&gt;

&lt;p&gt;æ–œçº¿çš„ç»˜åˆ¶æ³•æ¯”ç›´çº¿å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç»˜åˆ¶åƒç´ ç‚¹çš„æ—¶å€™åªèƒ½å‘ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ç»˜åˆ¶ï¼Œè€Œä¸èƒ½æ–œç€ç»˜åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½å°½é‡è®©æˆ‘ä»¬çš„æ–œçº¿å’Œç›®æ ‡æ–œçº¿è¿‘ä¼¼ã€‚ä¸ºäº†å®Œæˆç»˜åˆ¶æ–œçº¿ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ–œç‡æ¥è¾…åŠ©ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ç»˜åˆ¶æ–œçº¿æ—¶ï¼Œæ–°ç»˜åˆ¶çš„åƒç´ ç‚¹çš„è¿åŠ¨ä½ç½®æ˜¯åƒè›‡ä¸€æ ·å·¦å³èœ¿èœ’å‰è¿›çš„ï¼Œæˆ‘ä»¬çš„ç®—æ³•çš„ç›®çš„å°±æ˜¯åˆ«è®©è¿™æ¡è›‡è·‘åï¼Œå½“å‰æ–œç‡å°äºç›®æ ‡æ–œç‡æ—¶ï¼Œæˆ‘ä»¬å°±å‘ä¸Šç»˜åˆ¶åƒç´ ç‚¹ä»¥å¢å¤§æ–œç‡ï¼›å½“å‰æ–œç‡å¤§äºç›®æ ‡æ–œç‡æ—¶ï¼Œæˆ‘ä»¬å°±å‘å³ç»˜åˆ¶åƒç´ ç‚¹ä»¥å‡å°æ–œç‡ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gczghjqsrsj314m0fqgmc.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ç®—æ³•æ€æƒ³å¦‚ä¸Šè¿°ï¼Œæˆ‘ä»¬ä¸‹é¢è¦åšçš„å°±æ˜¯å®ç°å®ƒçš„æ™®éé€‚ç”¨ç‰ˆæœ¬ï¼ˆä¸åŒæ–¹å‘çš„æ–œçº¿ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawDiagonalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// æ–œçº¿æ–¹å‘&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// æ˜¯å¦ç»˜åˆ¶åˆ°äº†ç»ˆç‚¹&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawPixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæ–œç‡åå¤§ï¼Œå‘å³ç»˜åˆ¶&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;                   &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæ–œç‡åå°ï¼Œå‘ä¸Šï¼ˆä¸‹ï¼‰ç»˜åˆ¶&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y_incr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;adyMinusbdx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;çŸ©å½¢&quot;&gt;çŸ©å½¢&lt;/h4&gt;

&lt;p&gt;çŸ©å½¢çš„ç»˜åˆ¶æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ç»˜åˆ¶næ¡æ¨ªçº¿å³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawRectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawHorizontalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;åœ†&quot;&gt;åœ†&lt;/h4&gt;

&lt;p&gt;åœ†ä¹Ÿæœ‰ä¸€ä¸ªç®€å•çš„ç»˜åˆ¶ç®—æ³•ï¼šä»ä¸Šåˆ°ä¸‹ä¸€è¡Œè¡Œçš„ç»˜åˆ¶ï¼Œä¸€ç§æ¯ä¸€è¡Œçš„é•¿åº¦éƒ½å¯ä»¥æ ¹æ®åŠå¾„rå’Œåç§»é‡dyè®¡ç®—å‡ºæ¥ï¼ˆæ¶‰åŠåˆ°å¹³æ–¹å’Œå¼€å‘è¿ç®—ï¼Œæˆ‘ä»¬åœ¨Mathç±»æ±‡ä¸­å·²ç»å®ç°ï¼‰&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gczk5m3xerj30xo0kg0tb.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawCircle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r_squared&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r_squared&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r_squared&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawHorizontalLine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ–‡å­—æ˜¾ç¤º&quot;&gt;æ–‡å­—æ˜¾ç¤º&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†åœ¨å±å¹•ä¸Šè¾“å‡ºæ–‡å­—ï¼Œæˆ‘ä»¬æŠŠ512*256çš„å±å¹•åˆ’åˆ†æˆè‹¥å¹²ä¸ª8*11å¤§å°çš„çš„æ–¹æ ¼å­ï¼ˆæ€»å…±åˆ’åˆ†äº†64*23ä¸ªï¼‰ï¼Œåœ¨æ¯ä¸ªæ–¹æ ¼å­ä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨88ä¸ªåƒç´ ç‚¹æ¥ç»˜åˆ¶æ–‡å­—ï¼Œä»¥ä¸‹å›¾çš„ä¸ºä¾‹ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gd1gzswkhoj30ja0pumxb.jpg&quot; width=&quot;300&quot; /&gt;&lt;/center&gt;

&lt;p&gt;å®ç°æ–‡å­—ç»˜åˆ¶çš„é€»è¾‘ä¹Ÿæ˜¯æ¯”ç®€å•çš„ï¼Œæœ€é‡è¦çš„æ˜¯è¦å…ˆè®¾è®¡å‡ºå­—ç¬¦çš„bitMapï¼ˆå­—ç¬¦çš„bitMapå†³å®šäº†å­—ç¬¦çš„å­—å½¢å’Œå­—ä½“ï¼‰ï¼ŒHackæ”¯æŒ127ä¸­å­—ç¬¦çš„å±•ç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬åˆ—å‡ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// é»‘è‰²æ–¹å—                                          &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å„ä¸ªå­—ç¬¦çš„ bitmap&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// !&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// &quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;58&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// :&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;59&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// ;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// &amp;lt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;65&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// A&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;66&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// B&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;67&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// C&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;91&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// [&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;92&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// \&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;93&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// ]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;97&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// a&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;98&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// b&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;99&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// c&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;123&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// {&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;124&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// |&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;125&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// }&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åˆ›å»ºä¸€ä¸ª8*11çš„bitMap, å…¶ä¸­ a,b,c ä»£è¡¨å…¶ä¸­æŸä¸€è¡Œçš„bitMapæƒ…å†µ&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;charMaps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é™¤äº†å­—ç¬¦ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡å…‰æ ‡æ¥è¾…åŠ©æŒ‡ç¤ºå½“å‰å­—ç¬¦æ˜¾ç¤ºçš„ä½ç½®ï¼ŒåŒ…æ‹¬å‘å‰ã€å‘åç§»åŠ¨ï¼Œæ¢è¡Œï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** ç§»åŠ¨å…‰æ ‡ä½ç½® */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;moveCursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** åœ¨å±å¹•ä¸Šæ¢è¡Œ */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;scroll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** å±å¹•ç¿»é¡µ */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scroll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** é€€æ ¼ */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;backSpace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ€åæ˜¯åœ¨å…‰æ ‡çš„ä½ç½®æ‰“å°ä¸€ä¸ªå­—ç¬¦ï¼ˆæˆ–ä¸€ä¸²å­—ç¬¦ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ï¼šå…ˆæ ¹æ®å…‰æ ‡çš„ä½ç½®è®¡ç®—å‡ºå­—ç¬¦åº”è¯¥å ç”¨çš„å†…å­˜çš„ä½ç½®ï¼Œç„¶åæŠŠå­—ç¬¦çš„ bitMap å¡«å……åˆ°è¿™å—å†…å­˜çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** åœ¨å±å¹•ä¸Šæ‰“å°å­—ç¬¦ï¼Œå¹¶å°†å…‰æ ‡ä½ç½®å‘å‰ç§»åŠ¨ä¸€æ ¼ */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// è·å–å­—ç¬¦çš„bitMapï¼Œåœ°å€é”šç‚¹åˆ°å½“å‰å…‰æ ‡ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cursor_y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// æŠŠbitMapçš„å€¼ï¼Œå¡«å……åˆ°é”šç‚¹åˆ°çš„å†…å­˜ï¼ˆ11*8çš„æ–¹å—ï¼‰&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;charMasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mask&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// ç§»åŠ¨å…‰æ ‡ä½ç½®&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** åœ¨å±å¹•ä¸Šæ‰“å°ä¸€ä¸ªå­—ç¬¦ */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/** åœ¨å±å¹•ä¸Šæ‰“å°ä¸€ä¸ªæ•°å­— */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;system&quot;&gt;System&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å®Œæˆäº†ä¸€ç³»åˆ—çš„Jackæ“ä½œç³»ç»Ÿçš„åŸºç¡€åº“ï¼Œå®ƒä»¬æé«˜äº†æˆ‘ä»¬ä½¿ç”¨Jackç¼–å†™ç¨‹åºçš„æ•ˆç‡ï¼Œæ‹“å±•äº†ç¨‹åºçš„äººæœºäº¤äº’èƒ½åŠ›ã€‚æœ€åæˆ‘ä»¬éœ€è¦å†å†™ä¸€ä¸ªSystemç±»ï¼ŒæŠŠè¿™äº›åº“æ•´åˆèµ·æ¥ï¼Œå½¢æˆJackæ“ä½œç³»ç»Ÿã€‚é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºï¼Œå½“è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œé¦–å…ˆè¢«æ‰§è¡Œçš„ç¨‹åºå°±æ˜¯æ“ä½œç³»ç»Ÿï¼ˆå‡†ç¡®çš„è¯´å…ˆæ‰§è¡Œå¼•å¯¼ç¨‹åºï¼Œå¼•å¯¼æ‰§è¡Œæ“ä½œç³»ç»Ÿç¨‹åºï¼‰ã€‚Jackæ“ä½œç³»ç»Ÿä¼šå…ˆæ‰§è¡Œä¸€ç³»åˆ—æ ‡å‡†åº“åˆå§‹åŒ–å·¥ä½œï¼Œç„¶åå†æŠŠæ‰§è¡Œäº¤ç»™ä¸»ç¨‹åºï¼Œä¸»ç¨‹åºæ‰§è¡Œå®Œåï¼ˆå¦‚æœä¸»ç¨‹åºä¸æ˜¯ä»¥æ— é™å¾ªç¯çš„æ–¹å¼æ‰§è¡Œçš„è¯ï¼‰ï¼Œæ“ä½œç³»ç»ŸæŠŠè®¡ç®—æœºæŒ‚èµ·ï¼ˆæ— é™å¾ªç¯çš„æ–¹å¼ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// ç³»ç»Ÿåº“åˆå§‹åŒ–&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Screen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Keyboard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// æ‰§è¡Œä¸»ç¨‹åº&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;halt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// å®Œæˆä¸»ç¨‹åºåï¼ŒæŒ‚èµ·&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** æŒ‚èµ·ï¼šæ— é™å¾ªç¯ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;halt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** Wait ä¸€å°æ®µæ—¶é—´ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;duration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** æ‰“å°é”™è¯¯ä¿¡æ¯ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorCode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Err&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errorCode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;halt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;å¯ä»¥è¯´æˆ‘ä»¬æœ¬ç¯‡å®ç°çš„æ“ä½œç³»ç»Ÿå®Œå…¨ç®—ä¸ä¸Šä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿï¼Œæœ€ç»ˆè¿™ä¸ªæ“ä½œç³»ç»Ÿå’Œæˆ‘ä»¬çš„ä¸»ç¨‹åºä¼šè¢«ä¸€èµ·ç¼–è¯‘ï¼Œç”Ÿæˆä¸€ä¸ªé™æ€ç¨‹åºã€‚æœ€ç»ˆHackæ‰§è¡Œçš„æ˜¯è¿™ä¸ªç›®æ ‡ç¨‹åºï¼Œè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿï¼ŒJackæ“ä½œç³»ç»Ÿå®Œå…¨æ²¡æœ‰èµ·åˆ°ç®¡ç†ç¨‹åºçš„ä½œç”¨ã€‚ä½†è¿™ä¸å¦¨ç¢æˆ‘ä»¬ä»ä¸­çª¥åˆ°æ“ä½œç³»ç»Ÿä¸­çš„ä¸€äº›åº•å±‚æ“ä½œçš„å·¥ä½œåŸç†ï¼ˆä¸»è¦æ˜¯å†…å­˜ç®¡ç†å’ŒI/0ç®¡ç†ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¹Ÿå®Œå…¨å¯ä»¥å¯¹å®ƒè¿›è¡Œæ‰©å±•ï¼Œä¾‹å¦‚å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿä¸­é›†æˆè¿›100ä¸ªå°æ¸¸æˆï¼Œå¯åŠ¨ååœ¨å±å¹•ä¸Šå±•ç¤ºæ‰€æœ‰æ¸¸æˆçš„å›¾æ ‡ï¼Œç”¨æˆ·é€‰æ‹©æ¸¸æˆåï¼Œæ“ä½œç³»ç»Ÿåˆ‡æ¢åˆ°ç›¸åº”çš„æ¸¸æˆç¨‹åºæ‰§è¡Œã€‚è¿™æ ·æˆ‘ä»¬å°±æŠŠHackå˜æˆäº†ä¸€ä¸ªå°éœ¸ç‹æ¸¸æˆæœºğŸ˜…ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ç¯‡å®Œæ•´å®ç°æ”¾åœ¨äº†:&lt;a href=&quot;https://github.com/guosainpu/Nand2Tetris&quot;&gt;github&lt;/a&gt;&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">ä¸Šä¸€ç¯‡æˆ‘ä»¬å®Œæˆäº†Jackçš„ç¼–è¯‘å™¨ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°åœ¨Hackä¸Šç¼–å†™Jackç¨‹åºäº†ã€‚ä½†æ˜¯ä»¥Jackç›®å‰çš„èƒ½åŠ›ï¼Œå³ä½¿æ˜¯æƒ³å®Œæˆä¸€äº›ç®€å•çš„æ“ä½œä¹Ÿè¦ç¼–å†™éå¸¸å¤æ‚çš„ä»£ç ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦åœ¨å±å¹•ä¸Šè¾“å‡ºâ€œHello Workd!â€ï¼Œå°±å¿…é¡»åœ¨å±å¹•ä¸Šç‰¹å®šä½ç½®ç»˜åˆ¶ä¸Šå‡ ç™¾ä¸ªåƒç´ ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç®€å•çš„æ“ä½œç³»ç»Ÿæ¥è®©äº‹æƒ…å˜å¾—æ›´ç®€å•ä¸€äº›ã€‚ æ“ä½œç³»ç»Ÿå°±æ˜¯ç”¨æ¥è¡”æ¥è®¡ç®—æœºçš„ç¡¬ä»¶ç³»ç»Ÿå’Œè½¯ä»¶ç³»ç»Ÿçš„ï¼Œä»¥ä½¿å¾—è®¡ç®—æœºå¯¹ç¨‹åºå‘˜å’Œç”¨æˆ·è€Œè¨€æ›´å®¹æ˜“ä½¿ç”¨ã€‚æœ¬ç¯‡çš„æ“ä½œç³»ç»ŸåŒ…å«äº†ä¸€ä¸ªæœ€å°è§„æ¨¡çš„æ“ä½œç³»ç»Ÿï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªJackæ ‡å‡†åº“çš„é›†åˆï¼‰ï¼Œä¸»è¦åŒ…æ‹¬ï¼šæ•°å­¦è¿ç®—ã€å­—ç¬¦ä¸²æ“ä½œã€å†…å­˜ç®¡ç†ã€æ–‡æœ¬å’Œå›¾å½¢è¾“å‡ºåˆ°å±å¹•ã€é”®ç›˜è¾“å…¥å¤„ç†ç­‰åŠŸèƒ½ï¼Œä¸åŒ…æ‹¬ï¼šè¿›ç¨‹ç®¡ç†ã€ç£ç›˜ç®¡ç†ã€é€šä¿¡ç­‰åŠŸèƒ½ã€‚ æ•°å­¦æ“ä½œ ç›®å‰Hackåœ¨ç¡¬ä»¶ä¸Šåªæ”¯æŒåŠ æ³•å’Œå‡æ³•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è½¯ä»¶å±‚é¢å®Œå–„Hackçš„æ•°å­¦æ“ä½œï¼ŒåŒ…æ‹¬ï¼šä¹˜æ³•ã€é™¤æ³•ã€ç»å¯¹å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¼€å¹³æ–¹æ“ä½œã€‚ æ•ˆç‡ç¬¬ä¸€ï¼Œåœ¨åŠ å‡æ³•çš„åŸºç¡€ä¸Šå®ç°è¿™äº›æ•°å­¦æ“ä½œçš„æ–¹å¼å¯èƒ½æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„æ˜¯æ‰§è¡Œçš„æ•ˆç‡ï¼Œå› ä¸ºæ•°å­¦æ“ä½œæ˜¯è®¡ç®—æœºå·¥ä½œæ—¶æœ€å¸¸åšçš„åŸºæœ¬æ“ä½œä¹‹ä¸€ï¼Œæœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–æ•°å­¦æ“ä½œæ˜¯ä¼˜åŒ–è®¡ç®—æœºæ€§èƒ½çš„é‡è¦ä¸»é¢˜ã€‚ä¾‹å¦‚CPUä¼šä¸“é—¨ä¸ºæµ®ç‚¹æ•°è®¾è®¡æµ®ç‚¹æ•°è®¡ç®—å•å…ƒï¼Œæ›´æ“…é•¿æ•°å­¦è¿ç®—çš„GPUä¹Ÿè¢«è®¾è®¡å‡ºæ¥ç”¨äºè¾…åŠ©è®¡ç®—æœºçš„æ•°å­¦è¿ç®—ã€‚ ä¹˜æ³• å¯¹äºä¹˜æ³• sum=x*yï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯æŠŠ sum=sum+x é‡å¤è¿ç®— y æ¬¡ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯æ¨¡æ‹Ÿå°å­¦è¿ç®—ä¹˜æ³•çš„ç«–å¼æ–¹å¼ï¼šç”¨ shiftedx å»ä¹˜ y çš„æ¯ä¸€ä½ï¼Œå¦‚æœ y çš„è¿™ä½ä¸º1ï¼Œåˆ™æŠŠç»“æœåŠ åˆ° sum ä¸­ï¼Œå¦‚æœä¸º0åˆ™èˆå¼ƒï¼›å¤„ç†å®Œ y çš„å½“å‰ä½åï¼Œå¤„ç† y çš„ä¸‹ä¸€ä½ï¼Œæ­¤æ—¶éœ€è¦æ“ä½œ shiftedx=shiftedx*2ï¼ˆæ­¤æ“ä½œå¯ä»¥é€šè¿‡åŠ æ³•å®ç°ï¼Œæˆ–è€…é€šè¿‡ç§»ä½å®ç°ï¼Œç§»ä½æ•ˆç‡æ›´é«˜ï¼Œè™½ç„¶Hackä¸æ”¯æŒç§»ä½æ“ä½œï¼‰ã€‚ç¬¬äºŒç§æ–¹å¼æ•ˆç‡æ›´é«˜ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log2(n))ã€‚ å®ç°ï¼š static int powers_of_two; function void init() { let powers_of_two = Array.new(16); let powers_of_two[0] = 1; let powers_of_two[1] = 2; let powers_of_two[2] = 4; let powers_of_two[3] = 8; let powers_of_two[4] = 16; let powers_of_two[5] = 32; let powers_of_two[6] = 64; let powers_of_two[7] = 128; let powers_of_two[8] = 256; let powers_of_two[9] = 512; let powers_of_two[10] = 1024; let powers_of_two[11] = 2048; let powers_of_two[12] = 4096; let powers_of_two[13] = 8192; let powers_of_two[14] = 16384; let powers_of_two[15] = 16384+16384; return; } // åˆ¤æ–­xçš„ç¬¬nä½æ˜¯å¦ä¸º1 function boolean bit(int x, int n) { return ~((x &amp;amp; powers_of_two[n]) = 0); } function int multiply(int x, int y) { var int sum, shiftedX; var int j; let sum = 0; let shiftedX = x; let j = 0; while( j &amp;lt; 16 ) { // 16-bit numbers if(Math.bit(y, j)) { let sum = sum + shiftedX; } let shiftedX = shiftedX + shiftedX; let j = j + 1; } return sum; } é™¤æ³• å¯¹äºé™¤æ³• d=x/yï¼Œå®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯é‡å¤è®¡ç®— x=x-yï¼Œæ¯è®¡ç®—ä¸€æ¬¡å d=d+1ï¼Œç›´è‡³ x-y&amp;lt;0 ä¸ºæ­¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åçš„æƒ…å†µæ˜¯ y=1 çš„æƒ…å†µï¼Œæ­¤æ—¶çš„æ­¥é•¿æœ€çŸ­ï¼Œéœ€è¦é‡å¤è®¡ç®—xæ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(x)ã€‚æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¢åŠ æ­¥é•¿ï¼Œæ¯æ¬¡ä¸æ˜¯å‡å»yï¼Œè€Œæ˜¯å‡å»2yï¼Œè€Œä¸”æ˜¯é€’å½’çš„è¿›è¡Œä¸‹å»ï¼Œç›´è‡³ x&amp;lt;y æ—¶è¿”å›ï¼Œæ­¤æ—¶æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º O(log2(n))ã€‚ function int divide(int x, int y) { var int neg_x, neg_y; var int q; var int result; let neg_x = x &amp;lt; 0; let neg_y = y &amp;lt; 0; let x = Math.abs(x); let y = Math.abs(y); if( y &amp;gt; x ) { return 0; } let q = Math.divide(x, y+y); if( x-(2*q*y) &amp;lt; y ) { let result = q+q; } else { let result = q+q+1; } if( neg_x = neg_y ) { return result; } else { return -result; } } å¼€å¹³æ–¹ è¿™ä¸ªå¼€å¹³æ–¹å‡½æ•°è¿”å›å…¥å‚ x å¼€å¹³æ–¹åç»“æœçš„æ•´æ•°éƒ¨åˆ†ã€‚ç®—æ³•å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼ï¼Œæ‰¾åˆ° $y^2\leq x&amp;lt;(y+1)^2$ å³å¯ã€‚è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log2(n))ï¼Œä½†ç”±äºæˆ‘ä»¬è®¡ç®—çš„ x å¤§å°æœ‰ä¸Šé™ï¼ˆ$2^{16}-1$ï¼‰ï¼Œæ‰€ä»¥çœŸå®æ‰§è¡Œæ—¶å¾ªç¯çš„æ¬¡æ•°æ˜¯å›ºå®šçš„ n/2 (n=16)ï¼Œå¤æ‚åº¦æ˜¯O(n/2)ã€‚ ä¼ªä»£ç ï¼š y = 0 for j = n/2 - 1 ... 1, 0 do if (y+2^j)^2 &amp;lt; x then y = 2^j return y function int sqrt(int x) { var int j, y; var int approx; var int approx_squared; let y = 0; let j = 7; // = #bits / 2 - 1 while( ~(j &amp;lt; 0) ) { let approx = y + powers_of_two[j]; let approx_squared = approx * approx; if( ~(approx_squared &amp;gt; x) &amp;amp; (approx_squared &amp;gt; 0) ) { // in case of overflow let y = approx; } let j = j - 1; } return y; } ç»å¯¹å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€å–æ¨¡ è¿™äº›è¿ç®—å°±æ¯”è¾ƒç®€å•äº† function int max(int a, int b) { if( a &amp;gt; b ) { return a; } else { return b; } } function int min(int a, int b) { if( a &amp;lt; b ) { return a; } else { return b; } } function int abs(int x) { if( x &amp;lt; 0 ) { let x = -x; } return x; } function int mod(int x, int y) { var int q; let q = Math.divide(x, y); return x - (q*y); } å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„é€»è¾‘æ¯”è¾ƒç®€å•ã€‚åœ¨Jackä¸­ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨å†…å®¹ä¸€ä¸²asciiç¼–ç ï¼ˆä¸”ä¸éœ€è¦ä»¥\0ç»“å°¾ï¼‰ã€‚æˆ‘ä»¬ç”¨Stringç±»æ¥å®ç°ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªæ–¹æ³•æ˜¯æ„é€ å‡½æ•° new(int length) å’Œ appendChar(char c)ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ”¯æŒä¸€ä¸ªä¸€ä¸ªåœ°è¿½åŠ å­—ç¬¦ï¼Œä¸æ”¯æŒç›´æ¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ğŸ˜‚ã€‚é™„ä¸Šasciiç¼–ç è¡¨ï¼š class String { field Array buffer; field int buffer_len; field int str_len; constructor String new(int maxLength) { if( maxLength = 0 ) { let maxLength = 1; } let buffer = Array.new(maxLength); let buffer_len = maxLength; let str_len = 0; return this; } method void dispose() { do Array.dispose(buffer); return; } method int length() { return str_len; } method char charAt(int j) { return buffer[j]; } method void setCharAt(int j, char c) { let buffer[j] = c; return; } * Returns this string as the return value. */ method String appendChar(char c) { if( str_len &amp;lt; buffer_len ) { let buffer[str_len] = c; let str_len = str_len + 1; } return this; } method void eraseLastChar() { if( str_len &amp;gt; 0 ) { let str_len = str_len - 1; } return; } /** è¿”å›å­—ç¬¦ä¸²ä»£è¡¨çš„æ•´æ•°å€¼ */ method int intValue() { var int int_val; var int i; var boolean neg; let int_val = 0; if( (str_len &amp;gt; 0) &amp;amp; (buffer[0] = 45) ) { // '-' let neg = true; let i = 1; } else { let neg = false; let i = 0; } while( (i &amp;lt; str_len) &amp;amp; String.is_digit(buffer[i]) ) { let int_val = (int_val * 10) + String.digit_val(buffer[i]); let i = i + 1; } if( neg ) { return -int_val; } else { return int_val; } } function boolean is_digit(char c) { return ~(c &amp;lt; 48) &amp;amp; ~(c &amp;gt; 57); } function int digit_val(char c) { return c - 48; } function char digit_char(int i) { return i + 48; } /** ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¿å­˜æ•´æ•° */ method void setInt(int number) { let str_len = 0; // Clear string if( number &amp;lt; 0 ) { let number = -number; do appendChar(45); // leading '-' } do do_set_int(number); return; } method void do_set_int(int number) { var int q; var int mod; var char c; let q = number / 10; let mod = number - (q*10); let c = String.digit_char(mod); if( number &amp;lt; 10 ) { do appendChar(c); } else { do do_set_int(q); do appendChar(c); } return; } function char newLine() { return 128; } function char backSpace() { return 129; } /** åŒå¼•å· */ function char doubleQuote() { return 34; } } å†…å­˜ç®¡ç† ä½¿ç”¨é«˜çº§è¯­è¨€ï¼Œæœ€å¤§çš„æ–¹ä¾¿ä¹‹ä¸€å°±æ˜¯å¼€å‘è€…å‡ ä¹ä¸ç”¨å…³æ³¨å†…å­˜ç®¡ç†çš„ç»†èŠ‚ï¼Œæ‰€æœ‰å¤æ‚çç¢çš„å·¥ä½œéƒ½åˆæ“ä½œç³»ç»Ÿï¼Œç¼–è¯‘å™¨ï¼Œè™šæ‹Ÿæœºï¼Œæ±‡ç¼–å™¨ç­‰åº•å±‚æ¥è´Ÿè´£å®ç°ã€‚ä¸åŒå˜é‡ç±»å‹çš„å†…å­˜åœ¨ç¨‹åºå£°æ˜å‘¨æœŸä¸­çš„ä¸åŒæ—¶åˆ»è¢«åˆ†é…ï¼Œä¾‹å¦‚ï¼Œé™æ€å˜é‡åœ¨ç¼–è¯‘æœŸç”±ç¼–è¯‘å™¨ä¸ºå…¶åˆ†é…å†…å­˜ï¼›å±€éƒ¨å˜é‡åˆ™åœ¨æ¯ä¸ªå‡½æ•°è¿è¡Œçš„æ—¶å€™åˆ†é…åœ¨æ ˆå†…å­˜ä¸Šï¼›å…¶ä»–å†…å­˜åˆ™æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«åŠ¨æ€åœ°åˆ†é…åœ¨å †å†…å­˜ä¸Šï¼Œè¿™äº›å†…å­˜å°±éœ€è¦å€ŸåŠ©æ“ä½œç³»ç»Ÿæ¥ç®¡ç†äº†ã€‚æ“ä½œç³»ç»Ÿå¯èƒ½ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥ç®¡ç†å†…å­˜çš„åˆ†é…å’Œå›æ”¶ï¼Œé€šå¸¸éƒ½æ˜¯ç”¨alloc()å’ŒdeAlloc()è¿™ä¸¤ä¸ªå‡½æ•°ä¸­å®ç°çš„ã€‚ æœ€ç®€å•çš„å†…å­˜ç®¡ç†ç®—æ³• ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„æŒ‡é’ˆ free æŒ‡å‘è¿˜æœªä½¿ç”¨è¿‡çš„å†…å­˜çš„åŸºåœ°å€ã€‚è¿™ç§æ–¹å¼åªæ˜¯ç®€å•çš„å‘å‰åˆ†é…å†…å­˜ï¼Œä¸è´Ÿè´£å›æ”¶å†…å­˜ã€‚ // ä¼ªä»£ç  initialize free = heapBase // åˆ†é…ä¸€å—å¤§å°ä¸º size çš„å†…å­˜ alloc(size) pointer = free free = free + size return pointer // å›æ”¶objectçš„å†…å­˜ deAlloc(object) do nothing // ä¸åšå†…å­˜å›æ”¶å¤„ç† ç®—æ³•æ”¹è¿› ç»å…¸çš„ç®—æ³•æ˜¯å¯ä»¥ä½¿ç”¨é“¾è¡¨æ¥ç®¡ç†å†…å­˜ã€‚è¯¥ç®—æ³•ç®¡ç†ä¸€ä¸ªfreeListé“¾è¡¨ï¼Œé“¾è¡¨çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå†…å­˜æ®µï¼Œè°ƒç”¨è€…ç”³è¯·åˆ†é…å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿä»å¯ç”¨å†…å­˜æ®µä¸­æŒ‘é€‰ä¸€ä¸ªåˆé€‚çš„å†…å­˜æ®µï¼ˆå†…å­˜æ®µå†…å­˜å¤§äºç”³è¯·çš„å†…å­˜ï¼‰ï¼Œå°†å…¶ï¼ˆå†…å­˜æ®µçš„å…¨éƒ¨å†…å­˜æˆ–éƒ¨åˆ†å†…å­˜ï¼‰è¿”å›ç»™è°ƒç”¨è€…ï¼Œç„¶åæ›´æ–°é“¾è¡¨ã€‚è°ƒç”¨è€…ç”³è¯·å›æ”¶å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»ŸæŠŠéœ€è¦å›æ”¶çš„è¿™æ®µå†…å­˜åŠ å…¥freeListé“¾è¡¨ã€‚ æ¯ä¸ªå†…å­˜æ®µçš„ç¬¬ä¸€ä¸ªä½ç½®ç”¨äºä¿å­˜è¯¥å†…å­˜æ®µçš„é•¿åº¦ï¼Œç¬¬äºŒä¸ªä½ç½®ç”¨äºæŒ‡å‘ Next å†…å­˜æ®µã€‚å½“æ“ä½œç³»ç»ŸæŸ¥æ‰¾åˆé€‚çš„å†…å­˜æ®µæ—¶å¯ä»¥ä½¿ç”¨æœ€ä¼˜é€‚åº”ç®—æ³•ï¼Œå³æŸ¥æ‰¾æ•´ä¸ªé“¾è¡¨ä¸­å¤§å°æœ€åŒ¹é…å˜é‡çš„å†…å­˜æ®µï¼›æˆ–è€…æœ€å…ˆé€‚åº”ç®—æ³•ï¼Œå³æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³å˜é‡éœ€æ±‚çš„å†…å­˜æ®µã€‚ æˆ‘ä»¬ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå½“å‰çš„freeListçŠ¶æ€å¦‚å·¦å›¾æ‰€ç¤ºï¼Œæœ‰ä¸‰å—å†…å­˜ï¼Œå…¶å†…å­˜æ®µå¤§å°åˆ†åˆ«æ˜¯4ã€9ã€5ï¼ˆå¯ç”¨å¤§å°æ˜¯2ã€7ã€3ï¼‰ã€‚å½“è°ƒç”¨è€…æ‰§è¡Œalloc(5)æ—¶ï¼Œä»£è¡¨è°ƒç”¨è€…éœ€è¦å¤§å°ä¸º5çš„å†…å­˜ï¼Œæ­¤æ—¶ä¸‰å—å†…å­˜ä¸­åªæœ‰å¤§å°ä¸º9çš„å†…å­˜å—æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬ä¸­å–å‡ºå6ä½å†…å­˜è¿”å›ç»™è°ƒç”¨è€…ï¼ˆå¤šçš„ä¸€ä½ç”¨æ¥æ ‡è¯†è¯¥å˜é‡å ç”¨å†…å­˜å¤§å°ï¼Œåç»­ç”¨äºå†…å­˜å›æ”¶æ—¶ä½¿ç”¨ï¼‰ï¼Œç„¶åå¤§å°ä¸º9çš„å†…å­˜å—å°±è¿˜å‰©3äº†ã€‚ // ä¼ªä»£ç  Initialize: freeList = heap freeList.length = heapLength freeList.next = null // åˆ†é…å†…å­˜ alloc(size): åˆ©ç”¨â€œæœ€ä¼˜é€‚åº”ç®—æ³•â€æˆ–è€…â€œæœ€å…ˆé€‚åº”ç®—æ³•â€æ‰¾åˆ°åˆé€‚çš„å†…å­˜æ®µï¼ˆæ»¡è¶³æ¡ä»¶ segement.length &amp;gt; sizeï¼‰ if æ‰¾ä¸åˆ° è¿”å› fail æˆ–è€…å°è¯•æ•´åˆå†…å­˜ç¢ç‰‡ else block = ä»å†…å­˜æ®µä¸­å–å‡ºä¸€æ®µå†…å­˜ï¼Œå¤§å°ä¸º size + 1ï¼ˆå¦‚æœå–å‡ºåï¼Œè¯¥å†…å­˜æ®µå‰©ä½™å¤ªå°ï¼Œåˆ™ç›´æ¥æ˜¯è¿™æ•´ä¸ªå†…å­˜æ®µå°±å¥½ï¼Œé˜²æ­¢å°ç¢ç‰‡å‡ºç°ï¼‰ æ›´æ–°é€‰ä¸­çš„å†…å­˜çš„å‰©ä½™æƒ…å†µ block[-1] = size + 1ï¼Œæ ‡è¯†å˜é‡ç”³è¯·çš„å ç”¨å†…å­˜å¤§å°ï¼Œåç»­ç”¨äºå†…å­˜å›æ”¶æ—¶ä½¿ç”¨ return block // å›æ”¶å†…å­˜ deAlloc(object) segement = object - 1ï¼Œè¯¥æ®µå†…å­˜çš„åŸºåœ°å€ segement.length = object[-1]ï¼Œå˜é‡å ç”¨å†…å­˜çš„å¤§å° å°†segementæ’å…¥freeList // ç”¨jackå®ç° class Memory { static Array memory; static Array freeList; static Array NO_BLOCK; static int FL_LENGTH; // freeListé•¿åº¦åœ¨segementä¸Šçš„indexï¼Œå€¼ä¸ºä¸º0 static int FL_NEXT; // freeListnextæŒ‡é’ˆåœ¨segementä¸Šçš„ndexï¼Œå€¼ä¸ºä¸º1 static int ALLOC_SIZE; // åˆ†é…çš„blockçš„sizeï¼Œåœ¨blockä¸Šçš„indexï¼Œå€¼ä¸º-1 /** åˆå§‹åŒ– */ function void init() { let memory = 0; let freeList = 2048; // heapåŸºåœ°å€ let NO_BLOCK = 16384; let FL_LENGTH = 0; let FL_NEXT = 1; let ALLOC_SIZE = -1; let freeList[FL_LENGTH] = 16384-2048; //åˆå§‹åŒ–freeListï¼Œæ­¤æ—¶freeçš„å†…å­˜ä¸ºæ•´ä¸ªheap let freeList[FL_NEXT] = null; return; } /** è¿”å›åœ°å€ä¸ºaddressçš„å†…å­˜å•å…ƒçš„å†…å®¹ */ function int peek(int address) { return memory[address]; } /** æŠŠæ•°å€¼valueå­˜å‚¨åˆ°åœ°å€ä¸ºaddressçš„å†…å­˜å•å…ƒä¸­ */ function void poke(int address, int value) { let memory[address] = value; return; } /** ä»å¯ç”¨å†…å­˜ä¸­å¯»æ‰¾ä¸€å—åˆé€‚çš„å†…å­˜å—ï¼Œè¿”å›å†…å­˜å—çš„åŸºåœ°å€ */ function Array alloc(int size) { var Array prev_block; var Array found_block; let prev_block = Memory.best_fit(size); // prev_block æ˜¯ç›®æ ‡ block çš„å‰ä¸€ä¸ªblock if( prev_block = NO_BLOCK ) { let found_block = null; // æœªæ‰¾åˆ° } else { if( prev_block = null ) { let found_block = freeList; // ç›®æ ‡ block æ˜¯ freeList çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ let freeList = Memory.do_alloc(found_block, size); // åˆ†é…å†…å­˜ï¼Œå¹¶æ›´æ–°freeList } else { let found_block = prev_block[FL_NEXT]; let prev_block[FL_NEXT] = Memory.do_alloc(found_block, size); // åˆ†é…å†…å­˜ï¼Œå¹¶æ›´æ–°freeList } } return found_block+1; } /** æœ€ä¼˜åŒ¹é…ç®—æ³• */ function Array best_fit(int size) { var Array best_block; var Array prev_block; var Array cur_block; var int best_size; var int cur_size; let best_block = NO_BLOCK; let best_size = 16384 - 2048; let cur_block = freeList; let prev_block = null; // éå†freeListï¼Œæ‰¾åˆ°å¯ç”¨å†…å­˜å¤§äºsieï¼Œä¸”å…¶ä¸­æœ€å°çš„block while( ~(cur_block = null) ) { let cur_size = cur_block[FL_LENGTH]-1; if( ~(cur_size &amp;lt; size) &amp;amp; (cur_size &amp;lt; best_size) ) { let best_block = prev_block; let best_size = cur_size; } let prev_block = cur_block; let cur_block = cur_block[FL_NEXT]; } return best_block; // è¿”å›æœ€ä¼˜blockçš„å‰ä¸€ä¸ªblock } /** åˆ†é…å†…å­˜ï¼Œå¹¶å¡«å……block headerçš„å€¼ï¼ˆå€¼ä¸ºblockçš„é•¿åº¦ï¼‰*/ function Array do_alloc(Array found_block, int size) { var Array next_block; var int block_size; if( found_block[FL_LENGTH] &amp;gt; (size+1+2) ) { // blockå†…å­˜å¤§äºç”³è¯·å†…å†…å­˜ï¼Œåˆ†é…blockçš„ä¸€éƒ¨åˆ† let next_block = found_block + size+1; // next_blockçš„ä½ç½® let next_block[FL_NEXT] = found_block[FL_NEXT]; // next_blocké‡ç½®blockä¿¡æ¯ let next_block[FL_LENGTH] = found_block[FL_LENGTH] - (next_block - found_block); let found_block = found_block + 1; // found_blocké‡ç½®blockä¿¡æ¯ let found_block[ALLOC_SIZE] = size+1; } else { // æŠŠæ•´å—å†…å­˜éƒ½åˆ†é…ç»™ç”³è¯·è€… let next_block = found_block[FL_NEXT]; let block_size = found_block[FL_LENGTH]; let found_block = found_block + 1; // found_blocké‡ç½®blockä¿¡æ¯ let found_block[ALLOC_SIZE] = block_size; } return next_block; } /** é‡Šæ”¾å†…å­˜ */ function void deAlloc(Array object) { var int alloc_size; var Array prev_block; var Array next_block; let alloc_size = object[ALLOC_SIZE]; let object = object - 1; let prev_block = Memory.find_prev_free(object); // æ‰¾åˆ°prev_block if( prev_block = null ) { // objectæˆä¸ºæ–°çš„é¦–èŠ‚ç‚¹ let object[FL_LENGTH] = alloc_size; let object[FL_NEXT] = freeList; let freeList = object; let prev_block = object; } else { if( (prev_block + prev_block[FL_LENGTH]) = object ) { // å¦‚æœ prev_block å’Œ object ç›¸è¿ï¼Œåˆ™åˆå¹¶ä¸¤ä¸ªblock let prev_block[FL_LENGTH] = prev_block[FL_LENGTH] + alloc_size; } else { // é“¾æ¥ä¸¤ä¸ªblock let object[FL_LENGTH] = alloc_size; let object[FL_NEXT] = prev_block[FL_NEXT]; let prev_block[FL_NEXT] = object; let prev_block = object; } } if( (prev_block + prev_block[FL_LENGTH]) = prev_block[FL_NEXT] ) { // å°è¯•åˆå¹¶prev_blockå’Œnext_block let next_block = prev_block[FL_NEXT]; let prev_block[FL_LENGTH] = prev_block[FL_LENGTH] + next_block[FL_LENGTH]; let prev_block[FL_NEXT] = next_block[FL_NEXT]; } return } /** è¿”å›blockçš„prev_block */ function Array find_prev_free(Array object) { var Array block; if( freeList &amp;gt; object ) { return null; } let block = freeList; while( ~(block[FL_NEXT] = null) &amp;amp; (block[FL_NEXT] &amp;lt; object) ) { let block = block[FL_NEXT]; } return block; } } I/O è®¡ç®—æœºä¸€èˆ¬ä¼šè¿æ¥ä¸€äº›è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œä¾‹å¦‚ï¼šæ˜¾ç¤ºå™¨ã€é¼ æ ‡ã€é”®ç›˜ã€ç¡¬ç›˜ã€ç½‘å¡ç­‰ï¼Œè¿™äº›I/Oè®¾å¤‡éƒ½æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œåœ¨è¿™äº›è®¾å¤‡ä¸Šè¿›è¡Œè¯»å†™æ“ä½œä¹Ÿæ˜¯å¾ˆå¤æ‚çš„ï¼Œä½†å¯¹äºç¨‹åºå‘˜è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œç³»ç»Ÿæ¥æ“ä½œå®ƒä»¬ï¼Œæ“ä½œç³»ç»Ÿä½¿ç”¨ä¸€ç»„é©±åŠ¨ç¨‹åºæ¥å¤„ç†å„ä¸ªI/Oè®¾å¤‡çš„æ“ä½œç»†èŠ‚ï¼Œç„¶åå‘ä¸Šæä¾›ä¸€ç»„å°è£…å¥½çš„APIæ¥å£ã€‚ I/Oè®¾å¤‡å¯¹äºCPUå’Œæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå…¶å®æ˜¯ä¸€æ®µå†…å­˜å’Œä¸€ç»„BIOSé©±åŠ¨ç¨‹åºï¼ˆåœ¨Hackä¸­æ²¡æœ‰è¿™äº›é©±åŠ¨ç¨‹åºï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å†™ï¼‰ï¼Œå½“æ“ä½œç³»ç»Ÿæƒ³è¦å’ŒI/Oè®¾å¤‡äº¤äº’æ—¶ï¼Œå°±é€šè¿‡è¿™äº›ç¨‹åºä»ç›¸åº”çš„å†…å­˜ä¸­è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚åœ¨Hackä¸­ï¼Œæˆ‘ä»¬åªæœ‰ä¸¤ä¸ªI/Oè®¾å¤‡ï¼šæ˜¾ç¤ºå™¨å’Œé”®ç›˜ï¼Œ æ˜¾ç¤ºå™¨çš„å†…å­˜æ˜ å°„æ˜¯ä»16384å¼€å§‹çš„è¿ç»­çš„ 8K åœ°å€ç©ºé—´ï¼ˆè¯¥æ˜¾ç¤ºå™¨çš„åˆ†è¾¨ç‡æ˜¯ï¼š512*256ï¼‰ï¼›é”®ç›˜æ›´ç®€å•ï¼Œå®ƒåªæ˜ å°„24576è¿™ä¸€ä¸ªåœ°å€å•å…ƒçš„åœ°å€ç©ºé—´ï¼ˆå› ä¸ºè¶³ä»¥å®¹çº³æ‰€æœ‰è‹±æ–‡å­—ç¬¦å’Œç¬¦å·ï¼‰ é”®ç›˜ å½“æˆ‘ä»¬æ•²å‡»é”®ç›˜æ—¶ï¼Œæ•²å‡»çš„å­—ç¬¦çš„saciiç ä¼šå†™å…¥åˆ°åœ°å€ä¸º24576çš„å†…å­˜ä¸­ã€‚æˆ‘ä»¬çš„é©±åŠ¨ç¨‹åºè¦åšçš„äº‹æƒ…å°±æ˜¯ï¼Œå®Œæˆä¸€ç»„ç‰¹å®šçš„APIï¼Œä»–ä»¬å¯ä»¥ä»24576å·åœ°å€ä¸­è¯»å–å­—ç¬¦ï¼ˆè¯»å–å•ä¸ªå­—ç¬¦æˆ–è€…å…ˆç»„åˆæˆå­—ç¬¦ä¸²ï¼‰ã€‚ ç›‘æµ‹é”®ç›˜è¾“å…¥ ç¬¬ä¸€ä»¶äº‹éœ€è¦åšçš„æ˜¯ï¼Œç›‘æµ‹åˆ°é”®ç›˜çš„è¾“å…¥ã€‚è¯¥æ–¹æ³•çš„æ ¸å¿ƒå°±æ˜¯ä»é”®ç›˜çš„å†…å­˜æ˜ åƒä¸­è¯»å‡ºå½“å‰æŒ‰ä¸‹çš„å­—ç¬¦çš„asciiç ï¼Œå½“è¯»å–çš„å€¼ä¸ä¸º0çš„æ—¶å€™ï¼Œä»£è¡¨æœ‰å­—ç¬¦è¾“å…¥ã€‚ // keyPress() ä¼ªä»£ç  if æœ‰æŒ‰é”®æŒ‰ä¸‹ return è¯¥é”®çš„saciiç  else return 0 // Jackå®ç° function char keyPressed() { return keyboard[0]; } è¯»å–å•ä¸ªå­—ç¬¦ è¯»å–å•ä¸ªå­—ç¬¦æ—¶æˆ‘ä»¬éœ€è¦é¢å¯¹ä¸¤ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ä¸ªï¼Œä»€ä¹ˆæƒ…å†µä¸‹æ‰å«ç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªå•ä¸ªå­—ç¬¦å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å®šä¹‰ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é”®ï¼Œç„¶åæ¾å¼€æŒ‰é”®ï¼Œè¿™è¿‡ç¨‹ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼ˆå³ä½¿é•¿æ—¶é—´æŒ‰ä½å†æ¾å¼€ä¹Ÿæ˜¯è¾“å…¥ä¸€ä¸ªï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…æ˜¯ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œç„¶åè®°å½•æ•°å€¼ï¼Œç„¶åç­‰å¾…ç”¨æˆ·æ¾å¼€ï¼Œå®Œæˆæœ¬æ¬¡å•ä¸ªå­—ç¬¦è¯»å–ã€‚ç¬¬äºŒä¸ªï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå¯è§†åŒ–åé¦ˆï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå­—ç¬¦åï¼Œéœ€è¦åœ¨å±å¹•ä¸Šå›æ˜¾å‡ºæ¥ï¼Œå¹¶ä¸”è¾…åŠ©ä»¥å…‰æ ‡æç¤ºï¼ˆè™½ç„¶è¿™ä¸ªæ“ä½œçœ‹ä¼¼ç†æ‰€å½“ç„¶ï¼Œä½†å…¶ä¸­ç»è¿‡çš„è¿‡ç¨‹å¹¶ä¸ç®€å•ï¼‰ã€‚ // readChar() ä¼ªä»£ç  while æ²¡æœ‰ä»»ä½•æŒ‰é”®æŒ‰ä¸‹ ç­‰å¾…...ç›´åˆ°æœ‰æŒ‰é”®æŒ‰ä¸‹ c = å½“å‰æŒ‰ä¸‹çš„æŒ‰é”®å€¼ while å½“å‰æŒ‰é”®è¿˜å¤„äºæŒ‰ä¸‹çŠ¶æ€ ç­‰å¾…...ç›´åˆ°æŒ‰é”®æ¾å¼€ print c // æŠŠå­—ç¬¦å›æ˜¾åˆ°å±å¹•ä¸Š å°†å…‰æ ‡å³ç§»ä¸€æ ¼ return c // jackå®ç° function char readChar() { var char key; while( Keyboard.keyPressed() = 0 ) {} let key = Keyboard.keyPressed(); while( ~(Keyboard.keyPressed() = 0) ) {} do Output.printChar(key); return key; } è¯»å–ä¸€è¡Œå­—ç¬¦ ç„¶åæˆ‘ä»¬åœ¨ readChar() çš„åŸºç¡€ä¸Šæ‰©å±•å‡º readLine()ï¼ŒreadLine()éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ã€‚ç¬¬ä¸€ä¸ªï¼ŒæŠŠè¯»å–çš„å•ä¸ªå­—ç¬¦å†™å…¥å­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œç›´åˆ°è¾“å…¥æ¢è¡Œç¬¦æ—¶ç»“æŸã€‚ç¬¬äºŒä¸ªï¼Œå…è®¸ç”¨æˆ·åœ¨è¾“å…¥è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ é™¤é”®åˆ é™¤ // readLine() ä¼ªä»£ç  s = ç©ºå­—ç¬¦ä¸² repeat c = readChar() if c = æ¢è¡Œç¬¦ print æ¢è¡Œç¬¦ return s else if c = é€€æ ¼é”® s åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦ å…‰æ ‡å·¦ç§»ä¸€æ ¼ else s = s.append(c) // Jackå®ç° function String readLine(String message) { var String line; var char c; do Output.printString(message); let line = String.new(50); // max length let c = Keyboard.readChar(); while( ~(c = String.newLine()) ) { if( c = String.backSpace() ) { do line.eraseLastChar(); do Output.backSpace(); } else { do line.appendChar(c); } let c = Keyboard.readChar(); } return line; } å¯ä»¥çœ‹åˆ°ï¼Œé”®ç›˜è¾“å…¥çš„è®¾è®¡å®ç°è¿˜æ˜¯åŸºäºä¸€ç³»åˆ—çº§è”çš„åˆ†å±‚æŠ½è±¡ã€‚é«˜çº§ç¨‹åºreadLine()ä¾èµ–readChar()ï¼ŒreadChar()ä¾èµ–äºkeyPress()ï¼ŒkeyPress()ä¾èµ–äºç¡¬ä»¶ã€‚å¯è§åˆ†å±‚æŠ½è±¡çš„è®¾è®¡æ¨¡å¼è´¯ç©¿äº†æ•´ä¸ªè®¡ç®—æœºçš„å®è§‚æ¶æ„å’Œå¾®è§‚å®ç°ï¼Œå¯ä»¥è¯´æ˜¯è®¡ç®—æœºç§‘å­¦çš„ç²¾åæ€æƒ³ã€‚ å›¾å½¢æ˜¾ç¤º ç°ä»£è®¡ç®—æœºå¤§å¤šä½¿ç”¨ä½å›¾ï¼ˆbitmapï¼‰æˆ–ç§°å…‰æ …ï¼ˆrasterï¼‰çš„æŠ€æœ¯æ¥æ˜¾ç¤ºå›¾å½¢æˆ–æ–‡å­—ã€‚å±å¹•ç”±ä¸€ç»„äºŒç»´çš„å¹³é¢ç‚¹ç»„æˆï¼Œæ¯ä¸ªç‚¹æ˜¯ä¸€ä¸ªåƒç´ ï¼ˆpixelï¼‰ï¼Œæ¯ä¸ªåƒç´ ç‚¹å¯¹åº”åˆ°æ˜¾å­˜ä¸­çš„æŸä¸ªåœ°å€ï¼Œè®¡ç®—æœºè¦åšçš„å°±æ˜¯ç»™æ¯ä¸ªåƒç´ ç‚¹èµ‹ä¸Šä¸€ä¸ªé¢œè‰²çš„å€¼ï¼ŒHackåªæ”¯æŒé»‘å’Œç™½ï¼Œå› æ­¤åªå 1bitï¼Œå¦‚æœæ˜¾ç¤ºå™¨æ”¯æŒå½©è‰²æ˜¾ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªåƒç´ å°±ä¼šå ç”¨æ›´å¤šbitçš„å†…å­˜ã€‚ Hackçš„å±å¹•åˆ†è¾¨ç‡æ˜¯512*256ï¼Œå³å±å¹•ä¸Šæœ‰131072ä¸ªåƒç´ ç‚¹ã€‚åƒç´ ç‚¹å’Œæ˜¾å­˜çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼šç°å­˜ä¸­æ¯ä¸ªBitå¯¹åº”ä¸€ä¸ªåƒç´ ç‚¹ï¼ˆ1ä»£è¡¨é»‘è‰²ï¼Œ0ä»£è¡¨ç™½è‰²ï¼‰ï¼Œä¸€è¡Œ512ä¸ªåƒç´ éœ€è¦å¯¹åº” 32*16bitï¼ˆä¸€ä¸ªwordï¼‰ï¼Œ32word/è¡Œ*256è¡Œ=8192wordï¼Œæ­£å¥½æ˜¯8Kåœ°å€ç©ºé—´ã€‚å› æ­¤å­˜åœ¨å¯¹åº”å…³ç³»ï¼šç¬¬rè¡Œç¬¬cåˆ—çš„åƒç´ ç‚¹ï¼Œå¯¹åº”åœ°å€ä¸º Screen[r*32+c/16] çš„wordçš„ç¬¬ c%16 çš„bitã€‚ ç‚¹ äº†è§£äº†ä¸Šé¢åƒç´ ç‚¹å’Œå†…å­˜bitçš„å¯¹åº”å…³ç³»åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºç»™å•ä¸€åƒç´ ç‚¹èµ‹å€¼çš„æ–¹æ³•äº†ã€‚ /** ç»˜åˆ¶åƒç´ ç‚¹ (x, y) */ function void drawPixel(int x, int y) { var int address; var int mask; let address = (y*32) + (x/16); // å…ˆæ‰¾åˆ°ç¬¬å‡ ä¸ªword let mask = Math.two_to_the(x &amp;amp; 15); // å†æ‰¾åˆ°è¯¥wordçš„ç¬¬å‡ ä¸ªbitï¼Œå¹¶è½¬æˆæ©ç çš„å½¢å¼ã€‚ä¾‹å¦‚ç¬¬4ä¸ªbitï¼Œå¯¹åº”0000000000000100 if( cur_colour ) { let screen[address] = screen[address] | mask; } else { let screen[address] = screen[address] &amp;amp; ~mask; } return; } /** æ¸…é™¤å±å¹• */ function void clearScreen() { var int i; let i = 0; while( i &amp;lt; 8192 ) { let screen[i] = white; } return; } /** è®¾ç½®å°†è¦ä½¿ç”¨çš„color white = false, black = true. */ function void setColor(boolean b) { let cur_colour = b; return; } çº¿ ç‚¹å¾ˆå®¹æ˜“ç»˜åˆ¶ï¼Œçº¿åˆ™å¤æ‚å¾ˆå¤šã€‚ç”±äºåƒç´ ç‚¹æ˜¯ä¸€ä¸ªä¸ªçŸ©å½¢çš„å°æ–¹å—ï¼Œæ‰€ä»¥é™¤äº†æ¨ªçº¿å’Œç«–çº¿ï¼Œæˆ‘ä»¬æ— æ³•ç»˜åˆ¶å‡ºå®Œå…¨ç¬”ç›´çš„çº¿ï¼ˆæ–œçº¿éƒ½æ˜¯å¸¦é”¯é½¿æ¯›è¾¹çš„ï¼‰ï¼Œå½“ç„¶é€šè¿‡ç¼©å°åƒç´ ç‚¹çš„å¤§å°æˆ‘ä»¬å¯ä»¥æ— é™é€¼è¿‘ç¬”ç›´ï¼ˆå½“åƒç´ ç‚¹å°åˆ°äººçœ¼æ— æ³•åˆ†è¾¨æ—¶å°±å¯ä»¥äº†ï¼Œå³æ‰€è°“çš„è§†ç½‘è†œå±å¹•ï¼‰ã€‚ æˆ‘ä»¬åœ¨ç»˜åˆ¶çº¿çš„æ—¶å€™ï¼Œåˆ†ä¸º3ç§åœºæ™¯ï¼šæ¨ªçº¿ã€ç«–çº¿å’Œæ–œçº¿ã€‚å…¶ä¸­æ¨ªçº¿å’Œç«–çº¿éƒ½æ¯”è¾ƒå®¹æ˜“å®ç°ï¼Œç»˜åˆ¶æ–œçº¿åˆ™å¤æ‚ä¸€äº›ï¼Œéœ€è¦å€ŸåŠ©ç‰¹å®šçš„ç®—æ³•ã€‚ /** ä» (x1, y1) åˆ° (x2, y2) ç»˜åˆ¶ä¸€æ¡çº¿ */ function void drawLine(int x1, int y1, int x2, int y2) { var int dx, dy; var int temp; // ä¿è¯ x1 &amp;lt;= x2 if( x1 &amp;gt; x2 ) { let temp = x1; let x1 = x2; let x2 = temp; let temp = y1; let y1 = y2; let y2 = temp; } let dx = x2 - x1; let dy = y2 - y1; if( dx = 0 ) { do Screen.drawVerticalLine( x1, y1, y2 ); } else { if( dy = 0 ) { do Screen.drawHorizontalLine( x1, x2, y1 ); } else { do Screen.drawDiagonalLine( x1, y1, x2, y2, dx, dy ); }} return; } ç«–çº¿ ç»˜åˆ¶ç«–çº¿è¾ƒå®¹æ˜“ï¼Œè°ƒç”¨ drawPixel() æ–¹æ³•ï¼Œä» y1 ç»˜åˆ¶åˆ° y2 å³å¯ï¼ˆy1&amp;lt;=y2ï¼‰ã€‚ function void drawVerticalLine( int x, int y1, int y2 ) { var int temp; // ä¿è¯ y1 &amp;lt;= y2 if( y1 &amp;gt; y2 ) { let temp = y1; let y1 = y2; let y2 = temp; } while( ~(y1 &amp;gt; y2) ) { do Screen.drawPixel( x, y1 ); let y1 = y1 + 1; } return; } æ¨ªçº¿ æ¨ªçº¿çš„å®ç°æ–¹å¼å¯ä»¥å’Œç«–çº¿ä¸€æ ·ï¼Œä¸€ä¸ªä¸ªåƒç´ çš„ç»˜åˆ¶å®Œå³å¯ã€‚ä½†è¿™é‡Œæˆ‘ä»¬åšä¸€ä¸ªå°ä¼˜åŒ–ï¼Œä¸€æ¡æ¨ªçº¿ä¼šæ¨ªè·¨nä¸ªwordï¼Œé™¤äº†å¤´å’Œå°¾ï¼Œä¸­é—´çš„wordéƒ½æ˜¯è¿ç»­çš„ï¼Œæ‰€æœ‰æˆ‘ä»¬å¯ä»¥ä¸ºè¿™äº›wordä¸€æ¬¡æ€§èµ‹å€¼16ä¸ªbitï¼Œè¿™æ ·å¾ªç¯çš„æ¬¡æ•°ä¼šç¼©çŸ­16å€ã€‚ function void drawHorizontalLine( int x1, int x2, int y ) { var int start_addr, end_addr; var int x1mod16, x2mod16; let x1mod16 = x1 &amp;amp; 15; // çº¿åœ¨ä¸€ä¸ªwordå†…çš„åç§»é‡ let x2mod16 = x2 &amp;amp; 15; // çº¿åœ¨æœ€åä¸€ä¸ªwordå†…çš„åç§»é‡ let start_addr = (y*32) + (x1/16); let end_addr = (y*32) + (x2/16) + (x2mod16=0); if( start_addr = end_addr ) { // çº¿çš„é•¿åº¦åœ¨ä¸€ä¸ªwordå†… do Screen.draw_short_horizontal_line( x1, x2, y ); } else { if( ~(x1mod16 = 0) ) { // çº¿åœ¨ç¬¬ä¸€ä¸ªWordå†…çš„ä¸€å°æ®µ let start_addr = start_addr + 1; do Screen.draw_short_horizontal_line( x1, x1+16-x1mod16, y ); } if( ~(x2mod16 = 0) ) { // çº¿åœ¨æœ€åä¸ªWordå†…çš„ä¸€å°æ®µ let end_addr = end_addr - 1; do Screen.draw_short_horizontal_line( x2-x2mod16, x2, y ); } while( ~(start_addr &amp;gt; end_addr) ) { // ä¸­é—´çš„è‹¥å¹²æ®µword let screen[start_addr] = cur_colour; let start_addr = start_addr + 1; } } return; } function void draw_short_horizontal_line( int x1, int x2, int y ) { while( ~(x1 &amp;gt; x2) ) { do Screen.drawPixel( x1, y ); let x1 = x1 + 1; } return; } æ–œçº¿ æ–œçº¿çš„ç»˜åˆ¶æ³•æ¯”ç›´çº¿å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç»˜åˆ¶åƒç´ ç‚¹çš„æ—¶å€™åªèƒ½å‘ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ç»˜åˆ¶ï¼Œè€Œä¸èƒ½æ–œç€ç»˜åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½å°½é‡è®©æˆ‘ä»¬çš„æ–œçº¿å’Œç›®æ ‡æ–œçº¿è¿‘ä¼¼ã€‚ä¸ºäº†å®Œæˆç»˜åˆ¶æ–œçº¿ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ–œç‡æ¥è¾…åŠ©ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ç»˜åˆ¶æ–œçº¿æ—¶ï¼Œæ–°ç»˜åˆ¶çš„åƒç´ ç‚¹çš„è¿åŠ¨ä½ç½®æ˜¯åƒè›‡ä¸€æ ·å·¦å³èœ¿èœ’å‰è¿›çš„ï¼Œæˆ‘ä»¬çš„ç®—æ³•çš„ç›®çš„å°±æ˜¯åˆ«è®©è¿™æ¡è›‡è·‘åï¼Œå½“å‰æ–œç‡å°äºç›®æ ‡æ–œç‡æ—¶ï¼Œæˆ‘ä»¬å°±å‘ä¸Šç»˜åˆ¶åƒç´ ç‚¹ä»¥å¢å¤§æ–œç‡ï¼›å½“å‰æ–œç‡å¤§äºç›®æ ‡æ–œç‡æ—¶ï¼Œæˆ‘ä»¬å°±å‘å³ç»˜åˆ¶åƒç´ ç‚¹ä»¥å‡å°æ–œç‡ã€‚ ç®—æ³•æ€æƒ³å¦‚ä¸Šè¿°ï¼Œæˆ‘ä»¬ä¸‹é¢è¦åšçš„å°±æ˜¯å®ç°å®ƒçš„æ™®éé€‚ç”¨ç‰ˆæœ¬ï¼ˆä¸åŒæ–¹å‘çš„æ–œçº¿ï¼‰ã€‚ function void drawDiagonalLine( int x1, int y1, int x2, int y2, int dx, int dy ) { var int a, b; var int adyMinusbdx; var int y_incr; let a = 0; let b = 0; let adyMinusbdx = 0; if( dy &amp;lt; 0 ) { // æ–œçº¿æ–¹å‘ let y_incr = -1; } else { let y_incr = 1; } while( ~(a &amp;gt; dx) &amp;amp; (((y_incr = 1) &amp;amp; ~(b &amp;gt; dy)) | ((y_incr = -1) &amp;amp; ~(b &amp;lt; dy))) ) { // æ˜¯å¦ç»˜åˆ¶åˆ°äº†ç»ˆç‚¹ do Screen.drawPixel( x1+a, y1+b ); if( adyMinusbdx &amp;lt; 0 ) { // å¦‚æœæ–œç‡åå¤§ï¼Œå‘å³ç»˜åˆ¶ let a = a + 1; let adyMinusbdx = adyMinusbdx + (dy*y_incr); } else { // å¦‚æœæ–œç‡åå°ï¼Œå‘ä¸Šï¼ˆä¸‹ï¼‰ç»˜åˆ¶ let b = b + y_incr; let adyMinusbdx = adyMinusbdx - dx; } } return; } çŸ©å½¢ çŸ©å½¢çš„ç»˜åˆ¶æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ç»˜åˆ¶næ¡æ¨ªçº¿å³å¯ã€‚ function void drawRectangle(int x1, int y1, int x2, int y2) { var int y; let y = y1; while( ~(y &amp;gt; y2) ) { do Screen.drawHorizontalLine(x1, x2, y); let y = y + 1; } return; } åœ† åœ†ä¹Ÿæœ‰ä¸€ä¸ªç®€å•çš„ç»˜åˆ¶ç®—æ³•ï¼šä»ä¸Šåˆ°ä¸‹ä¸€è¡Œè¡Œçš„ç»˜åˆ¶ï¼Œä¸€ç§æ¯ä¸€è¡Œçš„é•¿åº¦éƒ½å¯ä»¥æ ¹æ®åŠå¾„rå’Œåç§»é‡dyè®¡ç®—å‡ºæ¥ï¼ˆæ¶‰åŠåˆ°å¹³æ–¹å’Œå¼€å‘è¿ç®—ï¼Œæˆ‘ä»¬åœ¨Mathç±»æ±‡ä¸­å·²ç»å®ç°ï¼‰ function void drawCircle(int cx, int cy, int r) { var int dx, dy; var int r_squared; let dy = -r; let r_squared = r*r; while( ~(dy &amp;gt; r) ) { let dx = Math.sqrt(r_squared-(dy*dy)); do Screen.drawHorizontalLine( cx-dx, cx+dx, cy+dy ); let dy = dy + 1; } return; } æ–‡å­—æ˜¾ç¤º ä¸ºäº†åœ¨å±å¹•ä¸Šè¾“å‡ºæ–‡å­—ï¼Œæˆ‘ä»¬æŠŠ512*256çš„å±å¹•åˆ’åˆ†æˆè‹¥å¹²ä¸ª8*11å¤§å°çš„çš„æ–¹æ ¼å­ï¼ˆæ€»å…±åˆ’åˆ†äº†64*23ä¸ªï¼‰ï¼Œåœ¨æ¯ä¸ªæ–¹æ ¼å­ä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨88ä¸ªåƒç´ ç‚¹æ¥ç»˜åˆ¶æ–‡å­—ï¼Œä»¥ä¸‹å›¾çš„ä¸ºä¾‹ã€‚ å®ç°æ–‡å­—ç»˜åˆ¶çš„é€»è¾‘ä¹Ÿæ˜¯æ¯”ç®€å•çš„ï¼Œæœ€é‡è¦çš„æ˜¯è¦å…ˆè®¾è®¡å‡ºå­—ç¬¦çš„bitMapï¼ˆå­—ç¬¦çš„bitMapå†³å®šäº†å­—ç¬¦çš„å­—å½¢å’Œå­—ä½“ï¼‰ï¼ŒHackæ”¯æŒ127ä¸­å­—ç¬¦çš„å±•ç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬åˆ—å‡ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼š // é»‘è‰²æ–¹å— do Output.create(0,63,63,63,63,63,63,63,63,63,0,0); // å„ä¸ªå­—ç¬¦çš„ bitmap do Output.create(32,0,0,0,0,0,0,0,0,0,0,0); // do Output.create(33,12,30,30,30,12,12,0,12,12,0,0); // ! do Output.create(34,54,54,20,0,0,0,0,0,0,0,0); // &quot; ...... do Output.create(48,12,30,51,51,51,51,51,30,12,0,0); // 0 do Output.create(49,12,14,15,12,12,12,12,12,63,0,0); // 1 do Output.create(50,30,51,48,24,12,6,3,51,63,0,0); // 2 ...... do Output.create(58,0,0,12,12,0,0,12,12,0,0,0); // : do Output.create(59,0,0,12,12,0,0,12,12,6,0,0); // ; do Output.create(60,0,0,24,12,6,3,6,12,24,0,0); // &amp;lt; ...... do Output.create(65,12,30,51,51,63,51,51,51,51,0,0); // A do Output.create(66,31,51,51,51,31,51,51,51,31,0,0); // B do Output.create(67,28,54,35,3,3,3,35,54,28,0,0); // C ...... do Output.create(91,30,6,6,6,6,6,6,6,30,0,0); // [ do Output.create(92,0,0,1,3,6,12,24,48,32,0,0); // \ do Output.create(93,30,24,24,24,24,24,24,24,30,0,0); // ] ...... do Output.create(97,0,0,0,14,24,30,27,27,54,0,0); // a do Output.create(98,3,3,3,15,27,51,51,51,30,0,0); // b do Output.create(99,0,0,0,30,51,3,3,51,30,0,0); // c ...... do Output.create(123,56,12,12,12,7,12,12,12,56,0,0); // { do Output.create(124,12,12,12,12,12,12,12,12,12,0,0); // | do Output.create(125,7,12,12,12,56,12,12,12,7,0,0); // } ...... // åˆ›å»ºä¸€ä¸ª8*11çš„bitMap, å…¶ä¸­ a,b,c ä»£è¡¨å…¶ä¸­æŸä¸€è¡Œçš„bitMapæƒ…å†µ function void create(int index, int a, int b, int c, int d, int e, int f, int g, int h, int i, int j, int k) { var Array map; let map = Array.new(11); let charMaps[index] = map; let map[0] = a; let map[1] = b; let map[2] = c; let map[3] = d; let map[4] = e; let map[5] = f; let map[6] = g; let map[7] = h; let map[8] = i; let map[9] = j; let map[10] = k; return; } é™¤äº†å­—ç¬¦ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡å…‰æ ‡æ¥è¾…åŠ©æŒ‡ç¤ºå½“å‰å­—ç¬¦æ˜¾ç¤ºçš„ä½ç½®ï¼ŒåŒ…æ‹¬å‘å‰ã€å‘åç§»åŠ¨ï¼Œæ¢è¡Œï¼š /** ç§»åŠ¨å…‰æ ‡ä½ç½® */ function void moveCursor(int i, int j) { let cursor_x = j; let cursor_y = i; return; } /** åœ¨å±å¹•ä¸Šæ¢è¡Œ */ function void println() { let cursor_x = 0; if( cursor_y &amp;lt; 22 ) { let cursor_y = cursor_y + 1; } else { do Output.scroll(); } return; } /** å±å¹•ç¿»é¡µ */ function void scroll() { let cursor_x = 0; let cursor_y = 0; return; } /** é€€æ ¼ */ function void backSpace() { if( cursor_x = 0 ) { if( ~(cursor_y = 0) ) { let cursor_x = 63; let cursor_y = cursor_y - 1; } } else { let cursor_x = cursor_x - 1; } return; } æœ€åæ˜¯åœ¨å…‰æ ‡çš„ä½ç½®æ‰“å°ä¸€ä¸ªå­—ç¬¦ï¼ˆæˆ–ä¸€ä¸²å­—ç¬¦ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ï¼šå…ˆæ ¹æ®å…‰æ ‡çš„ä½ç½®è®¡ç®—å‡ºå­—ç¬¦åº”è¯¥å ç”¨çš„å†…å­˜çš„ä½ç½®ï¼Œç„¶åæŠŠå­—ç¬¦çš„ bitMap å¡«å……åˆ°è¿™å—å†…å­˜çš„è¿‡ç¨‹ã€‚ /** åœ¨å±å¹•ä¸Šæ‰“å°å­—ç¬¦ï¼Œå¹¶å°†å…‰æ ‡ä½ç½®å‘å‰ç§»åŠ¨ä¸€æ ¼ */ function void printChar(char c) { var Array map; var int address; var int mask; var int bitmap; var int i; // è·å–å­—ç¬¦çš„bitMapï¼Œåœ°å€é”šç‚¹åˆ°å½“å‰å…‰æ ‡ä½ç½® let map = Output.getMap(c); let address = (cursor_y*32*11) + (cursor_x/2); let mask = cursor_x &amp;amp; 1; // æŠŠbitMapçš„å€¼ï¼Œå¡«å……åˆ°é”šç‚¹åˆ°çš„å†…å­˜ï¼ˆ11*8çš„æ–¹å—ï¼‰ let i = 0; while( i &amp;lt; 11 ) { let bitmap = map[i]; if( mask = 1 ) { let bitmap = bitmap * 256; } let screen[address] = screen[address] &amp;amp; charMasks[mask] | bitmap; let address = address + 32; let i = i + 1; } // ç§»åŠ¨å…‰æ ‡ä½ç½® if( cursor_x = 63 ) { do Output.println(); } else { let cursor_x = cursor_x + 1; } return; } /** åœ¨å±å¹•ä¸Šæ‰“å°ä¸€ä¸ªå­—ç¬¦ */ function void printString(String s) { var int i; let i = 0; while( i &amp;lt; s.length() ) { do Output.printChar(s.charAt(i)); let i = i + 1; } return; } /** åœ¨å±å¹•ä¸Šæ‰“å°ä¸€ä¸ªæ•°å­— */ function void printInt(int i) { var String s; let s = String.new(10); do s.setInt(i); do Output.printString(s); do s.dispose(); return; } System æˆ‘ä»¬å®Œæˆäº†ä¸€ç³»åˆ—çš„Jackæ“ä½œç³»ç»Ÿçš„åŸºç¡€åº“ï¼Œå®ƒä»¬æé«˜äº†æˆ‘ä»¬ä½¿ç”¨Jackç¼–å†™ç¨‹åºçš„æ•ˆç‡ï¼Œæ‹“å±•äº†ç¨‹åºçš„äººæœºäº¤äº’èƒ½åŠ›ã€‚æœ€åæˆ‘ä»¬éœ€è¦å†å†™ä¸€ä¸ªSystemç±»ï¼ŒæŠŠè¿™äº›åº“æ•´åˆèµ·æ¥ï¼Œå½¢æˆJackæ“ä½œç³»ç»Ÿã€‚é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºï¼Œå½“è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œé¦–å…ˆè¢«æ‰§è¡Œçš„ç¨‹åºå°±æ˜¯æ“ä½œç³»ç»Ÿï¼ˆå‡†ç¡®çš„è¯´å…ˆæ‰§è¡Œå¼•å¯¼ç¨‹åºï¼Œå¼•å¯¼æ‰§è¡Œæ“ä½œç³»ç»Ÿç¨‹åºï¼‰ã€‚Jackæ“ä½œç³»ç»Ÿä¼šå…ˆæ‰§è¡Œä¸€ç³»åˆ—æ ‡å‡†åº“åˆå§‹åŒ–å·¥ä½œï¼Œç„¶åå†æŠŠæ‰§è¡Œäº¤ç»™ä¸»ç¨‹åºï¼Œä¸»ç¨‹åºæ‰§è¡Œå®Œåï¼ˆå¦‚æœä¸»ç¨‹åºä¸æ˜¯ä»¥æ— é™å¾ªç¯çš„æ–¹å¼æ‰§è¡Œçš„è¯ï¼‰ï¼Œæ“ä½œç³»ç»ŸæŠŠè®¡ç®—æœºæŒ‚èµ·ï¼ˆæ— é™å¾ªç¯çš„æ–¹å¼ï¼‰ã€‚ class Sys { function void init() { do Math.init(); // ç³»ç»Ÿåº“åˆå§‹åŒ– do Output.init(); do Screen.init(); do Keyboard.init(); do Memory.init(); do Main.main(); // æ‰§è¡Œä¸»ç¨‹åº do Sys.halt(); // å®Œæˆä¸»ç¨‹åºåï¼ŒæŒ‚èµ· return; } /** æŒ‚èµ·ï¼šæ— é™å¾ªç¯ */ function void halt() { while(true){} return; } /** Wait ä¸€å°æ®µæ—¶é—´ */ function void wait(int duration) { var int i, j; let i = 0; while( i &amp;lt; duration ) { let j = 0; while( j &amp;lt; 200 ) { let j = j + 1; } let i = i + 1; } return; } /** æ‰“å°é”™è¯¯ä¿¡æ¯ */ function void error(int errorCode) { do Output.printString(&quot;Err&quot;); do Output.printInt(errorCode); do Sys.halt(); return; } } æ€»ç»“ å¯ä»¥è¯´æˆ‘ä»¬æœ¬ç¯‡å®ç°çš„æ“ä½œç³»ç»Ÿå®Œå…¨ç®—ä¸ä¸Šä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„æ“ä½œç³»ç»Ÿï¼Œæœ€ç»ˆè¿™ä¸ªæ“ä½œç³»ç»Ÿå’Œæˆ‘ä»¬çš„ä¸»ç¨‹åºä¼šè¢«ä¸€èµ·ç¼–è¯‘ï¼Œç”Ÿæˆä¸€ä¸ªé™æ€ç¨‹åºã€‚æœ€ç»ˆHackæ‰§è¡Œçš„æ˜¯è¿™ä¸ªç›®æ ‡ç¨‹åºï¼Œè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿï¼ŒJackæ“ä½œç³»ç»Ÿå®Œå…¨æ²¡æœ‰èµ·åˆ°ç®¡ç†ç¨‹åºçš„ä½œç”¨ã€‚ä½†è¿™ä¸å¦¨ç¢æˆ‘ä»¬ä»ä¸­çª¥åˆ°æ“ä½œç³»ç»Ÿä¸­çš„ä¸€äº›åº•å±‚æ“ä½œçš„å·¥ä½œåŸç†ï¼ˆä¸»è¦æ˜¯å†…å­˜ç®¡ç†å’ŒI/0ç®¡ç†ï¼‰ã€‚ æˆ‘ä»¬ä¹Ÿå®Œå…¨å¯ä»¥å¯¹å®ƒè¿›è¡Œæ‰©å±•ï¼Œä¾‹å¦‚å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿä¸­é›†æˆè¿›100ä¸ªå°æ¸¸æˆï¼Œå¯åŠ¨ååœ¨å±å¹•ä¸Šå±•ç¤ºæ‰€æœ‰æ¸¸æˆçš„å›¾æ ‡ï¼Œç”¨æˆ·é€‰æ‹©æ¸¸æˆåï¼Œæ“ä½œç³»ç»Ÿåˆ‡æ¢åˆ°ç›¸åº”çš„æ¸¸æˆç¨‹åºæ‰§è¡Œã€‚è¿™æ ·æˆ‘ä»¬å°±æŠŠHackå˜æˆäº†ä¸€ä¸ªå°éœ¸ç‹æ¸¸æˆæœºğŸ˜…ã€‚ æœ¬ç¯‡å®Œæ•´å®ç°æ”¾åœ¨äº†:github</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(9/12)â€“å®ç°ç¼–è¯‘å™¨</title><link href="/2020/02/25/%E5%AE%9E%E7%8E%B0%E7%BC%96%E8%AF%91%E5%99%A8.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(9/12)--å®ç°ç¼–è¯‘å™¨" /><published>2020-02-25T00:00:00+08:00</published><updated>2020-02-25T00:00:00+08:00</updated><id>/2020/02/25/%E5%AE%9E%E7%8E%B0%E7%BC%96%E8%AF%91%E5%99%A8</id><content type="html" xml:base="/2020/02/25/%E5%AE%9E%E7%8E%B0%E7%BC%96%E8%AF%91%E5%99%A8.html">&lt;p&gt;æœ¬ç¯‡å®ç°Jackçš„ç¼–è¯‘å™¨ï¼Œä¹Ÿæ˜¯ä»0åˆ°1æ„å»ºè®¡ç®—æœºç³»åˆ—æœ€å¤æ‚çš„ä¸€ç¯‡ã€‚ç¼–è¯‘å™¨çš„å®ç°æœ¬èº«æ˜¯éå¸¸å¤æ‚çš„ï¼Œä½†å¾—ç›ŠäºJackè¶…ç®€æ´çš„è¯­æ³•ï¼Œæˆ‘ä»¬å›é¿æ‰äº†å¾ˆå¤šå¤æ‚çš„é—®é¢˜ã€‚æ€»ä½“ä¸ŠJackç¼–è¯‘å™¨æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¼–è¯‘å™¨ï¼Œå®ƒåŒ…æ‹¬è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æï¼Œä»£ç ç”Ÿæˆç­‰é‡è¦ä¸»é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;é«˜çº§è¯­è¨€ä¸ºä»€ä¹ˆèƒ½å¤Ÿè¢«ç¼–è¯‘å™¨ç†è§£å’Œç¼–è¯‘ï¼Ÿå› ä¸ºé«˜çº§è¯­è¨€æ˜¯æŒ‰ç…§æŸç§è§„åˆ™çš„è¯­æ³•ï¼ˆä¸Šä¸‹æ–‡æ— å…³è¯­æ³•ï¼‰ç»„ç»‡çš„ï¼Œç»“æ„ä¸Šå±‚æ¬¡åŒ–çš„è¯­è¨€ã€‚ç¨‹åºçš„æ¯ä¸ªç±»ï¼Œæ¯æ¡è¯­å¥éƒ½æ˜¯ç¬¦åˆæŸç§è¯­æ³•è§„åˆ™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åè¿‡æ¥èƒ½å¤Ÿä½¿ç”¨è¿™äº›è¯­æ³•è§„åˆ™å¯¹å…¶è¿›è¡Œå‡†ç¡®åœ°è§£æï¼Œè€Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„è‡ªç„¶è¯­è¨€åˆ™ä¸å¤ªå—è¯­æ³•çš„ä¸¥æ ¼çš„çº¦æŸï¼Œæ‰€ä»¥ç”¨ç®—æ³•è§£é‡Šè‡ªç„¶è¯­è¨€ä¼šæ›´å›°éš¾ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è¯æ³•åˆ†æ&quot;&gt;è¯æ³•åˆ†æ&lt;/h3&gt;

&lt;p&gt;ç¨‹åºåŸºæœ¬ä¸Šç”±è¯­å¥ç»„æˆï¼Œè¯­å¥ç”±å•è¯å’Œç¬¦å·ç»„æˆï¼Œæ¯ä¸ªå•è¯æˆ–ç¬¦å·éƒ½æœ‰å®ƒè¦è¡¨è¾¾çš„å«ä¹‰ï¼šæˆ–æ˜¯æŸç§é¢„ç®—æ“ä½œï¼Œæˆ–æ˜¯æŸå—å†…å­˜çš„æŒ‡é’ˆï¼Œæˆ–æ˜¯æŒ‡æ˜å½“å‰è¯­å¥æ˜¯é‚£ç§ç±»å‹ç­‰ç­‰ã€‚ç¼–è¯‘å™¨è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æŠŠè¯­å¥æ‹†è§£æˆä¸€ä¸ªä¸ªå•è¯æˆ–ç¬¦å·ï¼Œå³è¯æ³•åˆ†æã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc9yj7rudwj314q0h4q3a.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;Jackè¯­æ³•ç”±ä¸€ä¸‹äº”ç±»å•è¯æ„æˆï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1. å…³é”®å­—ï¼šå¤šç”¨äºæŒ‡æ˜å½“å‰è¯­å¥çš„ç±»å‹ã€å±æ€§ã€‚
2. ç¬¦å·ï¼šç®—æ•°é€»è¾‘è¿ç®—ç¬¦å·ã€åŠŸèƒ½ç¬¦å·ç­‰ã€‚
3. æ•´å‹æ•°å­—ï¼š0...32767
4. å­—ç¬¦åˆ›ï¼šâ€œâ€æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ã€‚
5. å­—é¢é‡ï¼šç±»åã€å˜é‡åç­‰ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc9yj6vuonj319g0m0abl.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ä¸‹é¢ä»¥ä¸€ä¸ªç¨‹åºä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gca095p9hmj31cg0ne0vp.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;å®ç°&quot;&gt;å®ç°&lt;/h4&gt;

&lt;p&gt;è¯æ³•åˆ†æçš„è¿‡ç¨‹å¹¶ä¸å¤æ‚ã€‚å…ˆåˆ é™¤è¾“å…¥ç¨‹åºä¸­çš„æ³¨é‡Šä»£ç ï¼Œç„¶åé€šè¿‡ä½¿ç”¨Rubyçš„StringScannerå·¥å…·å’Œä¸€äº›æ­£åˆ™æ“ä½œæŠŠæºç¨‹åºæ‹†è§£æˆä»¥ä¸Šäº”ç§ç±»å‹çš„å•è¯å³å¯ã€‚æˆ‘ä»¬ç”¨JackTokenizeræ¥å®ç°Jackçš„è¯æ³•åˆ†æï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;JackTokenizeræ¥å£è®¾è®¡ï¼š

constructorï¼šè¾“å…¥æºç¨‹åºï¼Œå®Œæˆè¯æ³•åˆ†æ
hasMoreTokenï¼šæ˜¯å¦è¿˜æ˜¯token
advanceï¼štokenæ¸¸æ ‡å‰è¿›ä¸€ä½
tokenTypeï¼šå½“å‰tokenç±»å‹
keywordï¼šè¿”å›å½“å‰å…³é”®å­—ç±»å‹çš„token
symbolï¼šè¿”å›å½“å‰symbolç±»å‹çš„token
intValueï¼šè¿”å›å½“å‰intç±»å‹çš„token
stringValueï¼šè¿”å›å½“å‰stringç±»å‹çš„token
indentifierï¼šè¿”å›å½“å‰indentifierç±»å‹çš„token
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è¯æ³•åˆ†æå…³é”®ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;vg&quot;&gt;$KEYWORDS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;class&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;method&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;function&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;constructor&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;int&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;boolean&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;char&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;void&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;let&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;do&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;if&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;else&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;while&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;return&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;false&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;null&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;this&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;vg&quot;&gt;$SYMBOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;{&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;+&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;amp;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;|&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;=&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;~&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JackTokenizer&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;analysizeFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#åˆ é™¤æ‰€æœ‰æ³¨é‡Š&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/((?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:\/\/.*))/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;#ä»£ç è½¬æˆtoken&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scanTextToToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeTokensTofile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scanTextToToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StringScanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;eos?&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰«æå­—ç¬¦ä¸²ç±»å‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;stringToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/&quot;[^&quot;]*&quot;/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringToken&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringToken&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\s+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;next&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# æ‰«æsymbol&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\{|\}|\(|\)|\[|\]|\.|\,|\;|\+|\-|\*|\/|\&amp;amp;|\||\&amp;lt;|\&amp;gt;|\=|\~/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolToken&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolToken&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\s+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;next&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# æ‰«æå…¶ä»–tokenotherToken&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;otherToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan_until&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\s+|\{|\}|\(|\)|\[|\]|\.|\,|\;|\+|\-|\*|\/|\&amp;amp;|\||\&amp;lt;|\&amp;gt;|\=|\~/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;otherToken&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;otherToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;otherToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;otherToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;otherToken&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\s+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;next&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeTokensTofile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;tokens&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;keyword&amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;/keyword&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;stringConstant&amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;/stringConstant&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;convertSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;symbol&amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;/symbol&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;integerConstant&amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;/integerConstant&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;identifier&amp;gt; &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &amp;lt;/identifier&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;/tokens&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenOutputFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;vg&quot;&gt;$KEYWORDS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;vg&quot;&gt;$SYMBOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\d+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/&quot;[^&quot;]*&quot;/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;è¯­æ³•åˆ†æ&quot;&gt;è¯­æ³•åˆ†æ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬çš„ç¼–è¯‘å™¨å¾ˆèªæ˜ï¼Œå·²ç»æŒæ¡äº†Jackçš„å•è¯ï¼Œæ¥ä¸‹æ¥è¯¥å­¦ä¹ è¯­æ³•äº†ã€‚è¯­æ³•åˆ†æçš„ä»»åŠ¡æ˜¯åˆ†ææºç¨‹åºç±»ã€æ–¹æ³•çš„ç»“æ„å’Œæ¯æ¡è¯­å¥çš„ç»„æˆï¼Œåˆ†æçš„ç»“æœä»¥æŠ½è±¡è¯­æ³•æ ‘çš„æ–¹å¼å‘ˆç°ï¼Œæœ‰çš„ç¼–è¯‘å™¨ä¼šæ˜¾ç¤ºåœ°æ„é€ å‡ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆç”¨äºè¿›ä¸€æ­¥ä»£ç ç”Ÿæˆå’Œé”™è¯¯æŠ¥å‘Šï¼‰ï¼Œæœ‰çš„ç¼–è¯‘å™¨åˆ™éšå¼åœ°æ„é€ æŠ½è±¡è¯­æ³•æ ‘ï¼Œå³å®æ—¶çš„ç”Ÿæˆä»£ç å’Œé”™è¯¯æŠ¥å‘Šï¼Œä¸å¿…åœ¨å†…å­˜ä¸­ç»´æŠ¤æ•´ä¸ªæ ‘çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬çš„ç¼–è¯‘å™¨å±äºåè€…ï¼ˆä½†æˆ‘ä»¬åœ¨å®ç°çš„è¿‡ç¨‹ä¸­ä»ä¼šç”Ÿæˆä¸€ä¸ªxmlæ ¼å¼çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œç”¨äºéªŒè¯æˆ‘ä»¬çš„è¯­æ³•åˆ†æç¨‹åºæ˜¯å¦æ­£ç¡®ï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gcayvbwgqfj310k0u0q82.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•&quot;&gt;ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•&lt;/h4&gt;

&lt;p&gt;å‡ ä¹æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œä»¥åŠå¤§å¤šæ•°ç”¨äºæè¿°å¤æ‚æ–‡ä»¶çš„å…¶ä»–å½¢å¼çš„è¯­è¨€ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•æè¿°ã€‚&lt;strong&gt;ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•æ˜¯ä¸€ç»„é€’å½’å¼çš„ï¼Œæ ‘çŠ¶ç»“æ„çš„è¯­æ³•è§„åˆ™ï¼Œç”¨æ¥æŒ‡å®šè¯­æ³•ä¸­çš„è¯­æ³•å…ƒç´ å¦‚ä½•ç”±æ›´ç®€å•çš„å…ƒç´ ç»„æˆ&lt;/strong&gt;ã€‚ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•ç”±ç»ˆç»“ç¬¦å’Œéç»ˆç»“ç¬¦ä¸¤ç§å…ƒç´ æ„æˆï¼Œä¾‹å¦‚é’ˆå¯¹è¯­å¥ï¼šwhile (count &amp;lt;= 100) { count ++; â€¦}ã€‚whileã€(ã€countã€++ ç­‰ç¬¦å·éƒ½å±äºç»ˆç»“ç¬¦ï¼Œå› ä¸ºå®ƒä»¬å·²ç»æ— æ³•å†ç»§ç»­åˆ†å‰²ï¼Œæ˜¯ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•ä¸–ç•Œçš„åŸå­çº§å­˜åœ¨ï¼›åŒæ—¶ç»ˆç»“ç¬¦ä¹Ÿå¯ä»¥äº’ç›¸ç»„åˆæˆæ›´é«˜çº§çš„éç»ˆç»“ç¬¦ï¼Œä¾‹å¦‚ count &amp;lt;= 100 ç»„æˆäº†ä¸€ä¸ªexpressionï¼Œcount ++; ç»„æˆäº†ä¸€ä¸ªstatementï¼Œå¤šä¸ªstatementåˆå¯ä»¥ç»„æˆstatementSequenceç­‰ï¼Œexpressionã€statementã€statementSequenceéƒ½å±äºéç»ˆç»“ç¬¦ï¼Œä»–ä»¬æ˜¯å¯ä»¥å†å‘ä¸‹åˆ†å‰²çš„ã€‚&lt;strong&gt;è¯­æ³•åˆ†æè¿‡ç¨‹å°±æ˜¯æ­ç¤ºç¨‹åºä¸­éç»ˆç»“ç¬¦ä¸éç»ˆç»“ç¬¦ï¼Œéç»ˆç»“ç¬¦ä¸ç»ˆç»“ç¬¦å…³ç³»çš„è¿‡ç¨‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gcazdzfktbj31ac0sgq4h.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;jackéç»ˆç»“ç¬¦&quot;&gt;Jackéç»ˆç»“ç¬¦&lt;/h4&gt;

&lt;p&gt;Jackçš„ç»ˆç»“ç¬¦æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ä¸»è¦æ¥äº†è§£ä¸€ä¸‹éç»ˆç»“ç¬¦ï¼ŒJackçš„éç»ˆç»“ç¬¦ä¸»è¦å¯ä»¥åˆ†ä¸º3ç±»ï¼šç¨‹åºç»“æ„ç±»ã€è¯­å¥ç±»ã€è¡¨è¾¾å¼ç±»ã€‚&lt;/p&gt;

&lt;p&gt;ç¨‹åºç»“æ„ç±»çš„éç»ˆç»“ç¬¦ç”¨äºåˆ†æclassçš„ç»“æ„ï¼Œå˜é‡å£°æ˜çš„ç»“æ„ï¼Œå‡½æ•°å£°æ˜ã€å‡½æ•°å®ç°ç­‰çš„ç»“æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å…ˆå£°æ˜ç±»åï¼Œç„¶åæ˜¯è‹¥å¹²å˜é‡å£°æ˜ï¼ˆclassVarDecï¼‰ï¼Œç„¶åæ˜¯è‹¥å¹²å‡½æ•°çš„å‡ ä¸ªï¼ˆsubroutineDecï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;classVarDecç”±å˜é‡å±æ€§ã€å˜é‡ç±»å‹ã€å˜é‡åä¸‰ä¸ªç»ˆç»“ç¬¦æ„æˆ&lt;/li&gt;
  &lt;li&gt;subroutineDecç”±3ç§å‡½æ•°å£°æ˜ï¼Œå‚æ•°åˆ—è¡¨ï¼Œå‡½æ•°ä½“å®ç°ï¼ˆsubroutineBodyï¼‰æ„æˆ&lt;/li&gt;
  &lt;li&gt;å‡½æ•°ä½“å®ç°ç”±è‹¥å¹²å±€éƒ¨å˜é‡å£°æ˜å’Œè‹¥å¹²è¯­å¥æ„æˆ&lt;/li&gt;
  &lt;li&gt;çœç•¥â€¦å‚è€ƒä¸‹å›¾&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gcb007o2u6j317k0n20us.jpg&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¯­å¥ç±»çš„éç»ˆç»“ç¬¦ç”¨äºåˆ†æè¯­å¥ï¼ŒåŒ…æ‹¬ï¼šif, while, let, do, return 5ä¸­è¯­å¥ã€‚
&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gcb0068i3sj317g0fgab1.jpg&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¡¨è¾¾å¼ç±»çš„éç»ˆç»“ç¬¦ç”¨äºåˆ†æè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼æ˜¯Jackä¸‰ç§éç»ˆç»“ç¬¦æœ€å¤æ‚çš„ä¸€ç§ã€‚ä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥æœ‰ä¸€ä¸ªé¡¹æˆ–å¤šä¸ªé¡¹æ„æˆï¼›æ¯ä¸ªé¡¹å¯èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å…³é”®å­—ã€å˜é‡ã€æ•°ç»„ã€æˆ–è€…æ˜¯å‡½æ•°è°ƒç”¨ï¼Œç”šè‡³æ˜¯ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚
&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gcb005e8vfj317a0gugmp.jpg&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;é€’å½’ä¸‹é™ç®—æ³•&quot;&gt;é€’å½’ä¸‹é™ç®—æ³•&lt;/h4&gt;

&lt;p&gt;æœ‰å¾ˆå¤šç®—æ³•å¯ä»¥ç”¨æ¥æ„å»ºè¯­æ³•åˆ†ææ ‘ï¼Œé€’å½’ä¸‹é™ç®—æ³•æ˜¯æ¯”è¾ƒæ˜æ˜¾å’Œç®€å•çš„ä¸€ç§ã€‚é€’å½’ä¸‹é™ç®—æ³•è‡ªé¡¶å‘ä¸‹åœ°æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ï¼Œç¢°åˆ°è¯­æ³•ä¸­çš„éç»ˆç»“ç¬¦æ—¶ï¼Œç”¨ç›¸åº”çš„è¯­æ³•åˆ†æå‡½æ•°å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­ï¼Œå¤„ç†whileè¯­å¥æ—¶ï¼Œå…ˆè°ƒç”¨compileWhileStatementå‡½æ•°ï¼Œä»£è¡¨è¯­æ³•æ ‘ç”Ÿæˆäº†ä¸€ä¸ªwhileè¯­å¥èŠ‚ç‚¹ï¼Œç„¶åå¤„ç†whileè¯­å¥çš„å…·ä½“å®ç°ï¼Œç”±äºwhileä¸­åˆåŒ…å«äº†å…¶ä»–éç»ˆç»“ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ç»§ç»­é€’å½’çš„è°ƒç”¨å…¶ä»–è¯­æ³•åˆ†æå‡½æ•°ï¼ŒçŸ¥é“éç»ˆç»“ç¬¦å…¨éƒ¨ç”±ç»ˆç»“ç¬¦ç»„æˆæ—¶returnã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gcazzd2l1kj318p0u0780.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;å®ç°-1&quot;&gt;å®ç°&lt;/h4&gt;

&lt;p&gt;è¯­æ³•åˆ†æç¨‹åºä»å·¦åˆ°å³çš„è¯»å–è¯æ³•åˆ†æå™¨çš„tokenè¾“å‡ºï¼Œé‡åˆ°éç»ˆç»“ç¬¦åˆ™å¯¹å…¶è¿›è¡Œå±•å¼€ï¼Œå¦‚æœè¯¥éç»ˆç»“ç¬¦ä»ç”±å…¶ä»–éç»ˆç»“ç¬¦æ„æˆï¼Œåˆ™æ·±åº¦ä¼˜å…ˆçš„é€’å½’å±•å¼€è¿™äº›éç»ˆç»“ç¬¦ï¼Œç›´è‡³éç»ˆç»“ç¬¦å…¨éƒ¨ç”±ç»ˆç»“ç¬¦æ„æˆä¸ºæ­¢ã€‚è¯­æ³•åˆ†æéƒ¨åˆ†å®Œæ•´çš„å®ç°è¾ƒé•¿ï¼Œè¿™é‡Œä»…ä¸¾å‡ ä¸ªéç»ˆç»“ç¬¦çš„è¯­æ³•åˆ†æè¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CompilationEngine&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#compile method&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘æ•´ä¸ªç±»&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileClass&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;class&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#class&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#className&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#{&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileClassVarDec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#classVarDec*&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileSubroutine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#subroutine*&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#}&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;/class&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘é™æ€å˜é‡æˆ–æˆå‘˜å˜é‡çš„å£°æ˜&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileClassVarDec&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;classVarDec&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(static|field)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeVar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName or varNames&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;/classVarDec&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘å±€éƒ¨å˜é‡&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileVarDec&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSubroutine&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isSubroutine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;constructor&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;function&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;method&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSubroutine&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;subroutineDec&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(method type)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;int&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;char&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;boolean&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;void&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(basic type)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;IDENTIFIER&quot;&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(class type)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#method name&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileParameterList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#parameterList&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileSubroutineBody&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#subroutineBody&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;/subroutineDec&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;isSubroutine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;constructor&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;function&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;method&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘å‚æ•°åˆ—è¡¨&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileParameterList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘å‡½æ•°ä½“&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSubroutineBody&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileStatements&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileLet&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileIF&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileWhile&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileReturn&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;returnStatement&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#return&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ•°ç»„&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;/returnStatement&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileDo&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSubroutineCall&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ–¹æ³•åæˆ–ç±»å¯¹è±¡æˆ–å®ä¾‹å¯¹è±¡&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#.&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ–¹æ³•å&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;expression&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;termEnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vg&quot;&gt;$OPETATOR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;termEnd&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ“ä½œç¬¦&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;termEnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vg&quot;&gt;$OPETATOR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@outputfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;/expression&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆ&quot;&gt;è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆ&lt;/h3&gt;

&lt;p&gt;è¯­æ³•åˆ†æä¹Ÿæ˜¯è¯­ä¹‰åˆ†æçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬çŸ¥é“äº†è¯­æ³•çš„ç±»å‹å°±çŸ¥é“äº†å®ƒæ‰€è¦è¡¨è¾¾çš„ä¸€éƒ¨åˆ†å«ä¹‰ï¼Œä¾‹å¦‚æˆ‘ä»¬çŸ¥é“äº†å®ƒæ˜¯ifæˆ–whileè¯­æ³•ï¼Œå°±çŸ¥é“å°†è¦è¿›è¡Œä¸€ç³»åˆ—çš„åˆ†æ”¯è·³è½¬æ“ä½œï¼›çŸ¥é“äº†å®ƒæ˜¯letè¯­æ³•ï¼Œå°±çŸ¥é“äº†éœ€è¦è¿›è¡Œèµ‹å€¼æ“ä½œï¼›çŸ¥é“äº†å®ƒæ˜¯doè¯­æ³•ï¼Œå°±çŸ¥é“äº†éœ€è¦è¿›è¡Œå‡½æ•°è°ƒç”¨æ“ä½œã€‚ä½†è¯­æ³•åˆ†æè¡¨è¾¾çš„è¯­ä¹‰è¿˜ä¸å®Œå…¨ï¼Œä¾‹å¦‚letè¯­å¥ä¸­èµ‹å€¼çš„å¯¹è±¡æ˜¯æˆå‘˜å˜é‡è¿˜æ˜¯é™æ€å˜é‡ï¼Ÿdoè¯­æ³•ä¸­è°ƒç”¨çš„å‡½æ•°æ˜¯ç±»æ–¹æ³•è¿˜æ˜¯å®ä¾‹æ–¹æ³•ï¼Ÿè¿™äº›éƒ½éœ€è¦æˆ‘ä»¬åœ¨è¯­ä¹‰åˆ†æè¿‡ç¨‹ä¸­æ¥è¿›ä¸€æ­¥åˆ¤æ–­ã€‚å½“æˆ‘ä»¬åˆ†æå‡ºä¸€ä¸ªè¯­å¥çš„è¯­ä¹‰çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”çš„è™šæ‹Ÿæœºä»£ç äº†ï¼ˆåœ¨è¿™é‡Œè™šæ‹Ÿæœºè¯­è¨€å……å½“äº†ä¸­é—´è¯­è¨€ï¼Œæœ¬ç« çš„ç¼–è¯‘å™¨æ˜¯ç¼–è¯‘å™¨çš„å‰ç«¯ï¼Œè™šæ‹Ÿæœºåˆ™æ˜¯ç¼–è¯‘å™¨çš„åç«¯ï¼‰ï¼Œä¸”è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆæ˜¯å¯ä»¥åŒæ—¶è¿›è¡Œçš„ã€‚&lt;/p&gt;

&lt;p&gt;ç¨‹åºçš„æœ¬è´¨å°±æ˜¯ä¸€ç³»åˆ—å¯¹æ•°æ®çš„æ“ä½œï¼Œæ‰€ä»¥æŠŠé«˜çº§è¯­è¨€ç¼–è¯‘æˆè¾ƒä½çº§çš„è¯­è¨€ä¸»è¦æ¶‰åŠä¸¤ä¸ªä¸»é¢˜ï¼š&lt;strong&gt;æ•°æ®çš„ç¿»è¯‘å’Œå‘½ä»¤çš„ç¿»è¯‘&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ•°æ®ç¿»è¯‘&quot;&gt;æ•°æ®ç¿»è¯‘&lt;/h3&gt;

&lt;h4 id=&quot;å˜é‡&quot;&gt;å˜é‡&lt;/h4&gt;

&lt;p&gt;å˜é‡åä»£è¡¨äº†å†…å­˜ä¸­çš„æŸä¸ªåœ°å€ï¼Œæ˜¯é«˜çº§è¯­è¨€è®¿é—®å†…å­˜çš„æ¥å£ã€‚åœ¨Jackä¸­å˜é‡ç±»å‹åŒ…æ‹¬ï¼šé™æ€å˜é‡ã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡å’Œå‚æ•°å˜é‡ã€‚åœ¨é«˜çº§è¯­è¨€ä¸­ï¼Œå˜é‡åç”¨å­—é¢é‡è¡¨ç¤ºï¼ˆidentifierï¼‰ï¼Œè€Œè™šæ‹Ÿæœºè¯­è¨€å¹¶ä¸è®¤è¯†è¿™äº›ç¬¦å·ï¼Œè™šæ‹Ÿæœºè¯­è¨€åªè®¤è¯† static 0ã€static 1ã€local 0ã€argument 1ã€this 0 ç­‰ç¬¦å·ï¼Œæ‰€ä»¥æ•°æ®ç¿»è¯‘éƒ¨åˆ†çš„å·¥ä½œå°±æ˜¯æŠŠé«˜çº§è¯­è¨€ä¸­çš„å˜é‡åç¿»è¯‘æˆâ€œæ®µå + indexâ€çš„æ ¼å¼ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç¬¦å·è¡¨&quot;&gt;ç¬¦å·è¡¨&lt;/h4&gt;

&lt;p&gt;å˜é‡ç¿»è¯‘çš„è¿‡ç¨‹åˆæ¶‰åŠåˆ°äº†ç¬¦å·è¡¨ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å…ˆæŠŠç¬¦å·åŠ å…¥ç¬¦å·è¡¨ï¼Œç„¶ååœ¨åç»­çš„ç¼–è¯‘è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°äº†ç¬¦å·å°±å»ç¬¦å·è¡¨æŸ¥æ‰¾ç¬¦å·å¯¹åº”çš„typeï¼ˆå˜é‡ç±»å‹ï¼‰, kindï¼ˆå±äºå“ªä¸ªæ®µï¼‰å’Œindexã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcc32lf25ej30vw0ioq3h.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ç¬¦å·è¡¨ä¸­key(ç¬¦å·)å’Œvalueçš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å±€éƒ¨å˜é‡åˆ†é…åˆ° local æ®µ&lt;/li&gt;
  &lt;li&gt;é™æ€å˜é‡åˆ†é…åˆ° static æ®µ&lt;/li&gt;
  &lt;li&gt;å‚æ•°å˜é‡åˆ†é…åˆ° argument æ®µ&lt;/li&gt;
  &lt;li&gt;é€šè¿‡ this index çš„æ–¹å¼æ¥è®¿é—®æˆå‘˜å˜é‡&lt;/li&gt;
  &lt;li&gt;é€šè¿‡ that index çš„æ–¹å¼æ¥è®¿é—®æ•°ç»„&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;ç¬¦å·è¡¨å®ç°&quot;&gt;ç¬¦å·è¡¨å®ç°&lt;/h4&gt;
&lt;p&gt;ç¬¦å·è¡¨çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯æ”¯æŒç¬¦å·çš„æ–°å¢å’ŒæŸ¥è¯¢åŠŸèƒ½ï¼Œä¸”éœ€è¦ç®¡ç†æ¯ä¸ªæ®µçš„indexï¼ˆæ®µä¸­æ–°å¢äº†å˜é‡åindexéœ€è¦+1ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;startSubroutineï¼šç¬¦å·è¡¨é‡ç½®ï¼Œå¼€è¾Ÿæ–°çš„å­ç¨‹åºä½œç”¨åŸŸ
define         ï¼šæ–°å¢ä¸€æ¡ç¬¦å·
varCount       ï¼šç¬¦å·è¡¨ä¸­æŸKindçš„å˜é‡æ•°é‡
kindOf         ï¼šæŸç¬¦å·çš„kind
typeOf         ï¼šæŸç¬¦å·çš„type
indexOf        ï¼šæŸç¬¦å·çš„index
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SymbolTable&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@symbolTableDic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;arg&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@segementDic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;arg&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;argument&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;local&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;arg&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;startSubroutine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ¸…ç©ºsubroutineTableï¼Œå¼€å§‹ç¼–è¯‘ä¸‹ä¸€ä¸ªæ–¹æ³•&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;arg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å­˜å…¥ç¬¦å·è¡¨, name:&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, type:&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, kind:&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolTable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTableDic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;varCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;kindOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;valus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;findSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@segementDic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;typeOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;valus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;findSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;valus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;findSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;key?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;key?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printSymbols&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;classTable: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@classTable&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;subroutineTable: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@subroutineTable&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;symbolIndex: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@symbolIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ç”±äºJackçš„é€‚å½“è®¾è®¡ï¼Œæˆ‘ä»¬ä¸ä¼šé‡åˆ°åœ¨åµŒå¥—çš„ä½œç”¨åŸŸä¸­ä½¿ç”¨å˜é‡çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸ä¼šé‡åˆ°å˜é‡å†²çªçš„é—®é¢˜ã€‚åœ¨å…¶ä»–é«˜çº§è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéšæ—¶å¼€è¾Ÿä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼ˆä¾‹å¦‚ç”¨{}æ‹¬èµ·æ¥ï¼‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨ç¬¦å·è¡¨çš„é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯å¢åŠ ä¸€å±‚ä½œç”¨åŸŸéƒ½ä¼šæ–°å¢ä¸€ä¸ªæ–°çš„ç¬¦å·è¡¨èŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å¤„ç†ç¬¦å·&quot;&gt;å¤„ç†ç¬¦å·&lt;/h4&gt;
&lt;p&gt;ä¸‹é¢æˆªå–äº†ä¸€æ®µç¬¦å·å¤„ç†çš„å®ç°ï¼ˆæŠŠç¬¦å·åŠ å…¥ç¬¦å·è¡¨ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆçš„é˜¶æ®µæ˜¯èåˆåœ¨è¯­æ³•åˆ†æçš„è¿‡ç¨‹å½“ä¸­çš„ï¼Œæ˜¯å¯¹è¯­æ³•åˆ†æç¨‹åºçš„æ‰©å±•ã€‚åœ¨è¯­æ³•åˆ†æè¿‡ç¨‹ä¸­ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªæ–°ç¬¦å·ï¼Œæˆ‘ä»¬å…ˆè§£æå®ƒçš„typeå’Œkindï¼Œç„¶åæŠŠå®ƒå†™åˆ°ç¬¦å·è¡¨ä¸­ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘é™æ€å˜é‡æˆ–æˆå‘˜å˜é‡çš„å£°æ˜&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileClassVarDec&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeVarToSymbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#ç¼–è¯‘å±€éƒ¨å˜é‡&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileVarDec&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeVarToSymbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isVar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;var&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeVarToSymbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;firstVarName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;isSemicolon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;SYMBOL&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;;&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isSemicolon&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nextVarName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nextVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isSemicolon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;SYMBOL&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;;&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;varCount&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å‘½ä»¤ç¿»è¯‘&quot;&gt;å‘½ä»¤ç¿»è¯‘&lt;/h3&gt;

&lt;p&gt;å‘½ä»¤ç¿»è¯‘éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ä¸¤ç±»å‘½ä»¤ï¼šè¡¨è¾¾å¼æ±‚å€¼å’Œç¨‹åºæµç¨‹æ§åˆ¶&lt;/p&gt;

&lt;h4 id=&quot;è¡¨è¾¾å¼æ±‚å€¼&quot;&gt;è¡¨è¾¾å¼æ±‚å€¼&lt;/h4&gt;

&lt;p&gt;è¡¨è¾¾å¼æ±‚å€¼å°±æ˜¯è®¡ç®—å½¢å¦‚ï¼šx+g(x,y,-z)*5çš„è®¡ç®—å¼ï¼Œè®¡ç®—è¿™ç§è¡¨è¾¾å¼å¯ä»¥ç”¨ç»å…¸çš„åç¼€è¡¨ç¤ºæ³•æ¥å¤„ç†ï¼ˆRPNï¼Œé€†æ³¢å…°è¡¨ç¤ºæ³•ï¼‰ï¼Œå³é€šè¿‡ååºéå†çš„æ–¹å¼ç»“åˆæ ˆçš„ä½¿ç”¨æ¥è®¡ç®—è¡¨è¾¾å¼ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcc7a0oblqj31fw0no3zx.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ç”¨ç¨‹åºè¡¨è¾¾åç¼€è¡¨è¾¾å¼çš„ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;compileExpression(exp)
{
if exp æ˜¯æ•°å­— n                  then push n
if exp æ˜¯å˜é‡ v                  then push v
if exp = (exp1 op exp2)         then compileExpression(exp1), compileExpression(exp2), compile op 
if exp = op(exp1)               then compileExpression(exp1), compile op 
if exp = f(exp1 ... expN)       then compileExpression(exp1), ..., compileExpression(expn), call f
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;è¡¨è¾¾å¼å®ç°&quot;&gt;è¡¨è¾¾å¼å®ç°&lt;/h4&gt;
&lt;p&gt;ç”¨ç¨‹åºè¡¨è¾¾åç¼€è¡¨è¾¾å¼çš„ç®—æ³•æœ¬èº«æ¯”è¾ƒç®€ç­”ï¼Œä½†è¡¨è¾¾å¼æœ¬èº«æ¯”è¾ƒå¤æ‚ï¼Œåœ¨Jackä¸­å¾ˆå¤šç¬¦å·æˆ–ç¬¦å·çš„ç»„åˆéƒ½å¯ä»¥è¢«å½“åšä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¾‹å¦‚ä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä¸€ä¸ªæ•°å­—ï¼Œä¸€ä¸ªå˜é‡ï¼›ä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ä¸­çš„æŸä¸ªå€¼ï¼›ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°è°ƒç”¨ï¼›ä¹Ÿå¯ä»¥æ˜¯ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¥çš„å¦ä¸€ä¸ªè¡¨è¾¾å¼ç­‰ï¼Œæˆ‘ä»¬æŠŠè¿™äº›å¯èƒ½çš„æ–¹å¼éƒ½ç»Ÿç§°ä¸ºä¸€ä¸ªtermã€‚è¡¨è¾¾å¼å®ç°çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;termEnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vg&quot;&gt;$OPETATOR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;termEnd&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;opretator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vg&quot;&gt;$OPTOCMD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ“ä½œç¬¦&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opretator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;termEnd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vg&quot;&gt;$OPETATOR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;~&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#unary term&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;opetator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vg&quot;&gt;$UNARYCMD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt; 
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;opetator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;KEYWORD&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;keyword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getKeyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keyword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;false&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keyword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;null&quot;&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePushNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keyword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;true&quot;&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePushNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;not&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#-1ä»£è¡¨true&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keyword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;this&quot;&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;æ˜¯ä¸å¯è¯†åˆ«ç¬¦å·ï¼ˆåªè¯†åˆ«ture, false, nullï¼‰&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;INT-CONST&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePushNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tokenType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;STRING-CONST&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‘ç°stringï¼š&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;processString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#(expression)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName | varName[expression] | subroutineCall&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;firstToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;backward&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pushVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName[expression]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pushVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;add&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#ä¿®æ”¹That&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;that&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#subroutineCall&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@className&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå…ˆpushè‡ªå·±&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
        &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;kindOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒç”¨å®ä¾‹çš„æ–¹æ³•&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;
            &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;this&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#push this&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@curFunctionType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;method&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;argument&quot;&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
            &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;typeOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;callName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;callName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;åˆ†æ”¯æµç¨‹æ§åˆ¶&quot;&gt;åˆ†æ”¯æµç¨‹æ§åˆ¶&lt;/h4&gt;

&lt;p&gt;è¿™é‡Œçš„åˆ†æ”¯æµç¨‹æ§åˆ¶æŒ‡çš„å°±æ˜¯Jackä¸­çš„ifè¯­å¥å’Œwhileè¯­å¥ã€‚åˆ†æ”¯æµç¨‹æ§åˆ¶çš„ç¼–è¯‘ç›¸å¯¹æ›´ç›´è§‚ä¸€ç‚¹ï¼Œå°±æ˜¯æŠŠifå’Œwhileè¯­å¥ç¼–è¯‘æˆæ›´ä½çº§çš„gotoå’Œif-gotoè¯­å¥ã€‚å®ƒä»¬çš„å®ç°ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcchm1dj93j31di0u00ug.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;å…³é”®ä»£ç å®ç°å¦‚ä¸‹ï¼Œè¿™é‡Œå€¼å¾—æ€è€ƒçš„æ˜¯ï¼šå¦‚ä½•ä¿è¯label L1, label L2ç­‰labelåä¸äº’ç›¸å†²çªï¼›ä¸”ifå’Œwhileæ˜¯å¯ä»¥å…·å¤‡åµŒå¥—ç»“æ„çš„ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç¡®ä¿è¿›å…¥æˆ–é€€å‡ºæ—¶æ›´æ·±ä¸€çº§ifæˆ–whileè¯­å¥æ—¶ï¼Œlabelçš„å¯¹åº”å…³ç³»ä¸ä¼šæ··ä¹±ã€‚&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileIF&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@ifBackTrace&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@ifTotle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@ifTotle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@ifTotle&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_TRUE&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeGoto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_FALSE&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_TRUE&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileStatements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keyword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;else&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#compile else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeGoto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_END&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_FALSE&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileStatements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_END&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;backward&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è¿”å›åˆ°}å¤„&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;IF_FALSE&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@ifCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@ifBackTrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileWhile&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@whileBackTrace&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@whileTotle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@whileTotle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@whileTotle&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WHILE_EXP&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;not&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeIf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WHILE_END&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileStatements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeGoto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WHILE_EXP&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WHILE_END&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@whileCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@whileBackTrace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pop&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;å‡½æ•°è°ƒç”¨å’Œè¿”å›&quot;&gt;å‡½æ•°è°ƒç”¨å’Œè¿”å›&lt;/h4&gt;

&lt;p&gt;åœ¨è°ƒç”¨VMå‡½æ•°ä¹‹å‰ï¼Œè°ƒç”¨è€…å¿…é¡»å°†å‡½æ•°çš„å‚å…¥å‹å…¥æ ˆï¼Œä¸”å¦‚æœè¢«è°ƒç”¨çš„VMå‡½æ•°æ˜¯è‡ªå·±å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆé¦–å…ˆå…¥æ ˆçš„å‚æ•°æ˜¯è¯¥æ–¹æ³•æ“ä½œå¯¹è±¡çš„å¼•ç”¨ï¼ˆè¿›å…¥å‡½æ•°åè¿™ä¸ªå¯¹è±¡å¼•ç”¨å˜ä¸ºthisæŒ‡é’ˆï¼‰ã€‚returnæ–¹æ³•çš„å®ç°åˆ™å¾ˆç®€å•ï¼Œä¸è¿‡å½“returnçš„ç±»å‹ä¸ºvoidæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è¿”å›ä¸€ä¸ªå¸¸é‡0ä½œä¸ºè¿”å›å€¼ã€‚&lt;/p&gt;

&lt;p&gt;ä»£ç å…³é”®å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSubroutineCall&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;isVoid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå…ˆpush this&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@className&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;kindOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒç”¨å®ä¾‹çš„æ–¹æ³•&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;this&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#push this&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@curFunctionType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;method&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;argument&quot;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;typeOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;callName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;callName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileReturn&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePushNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#é»˜è®¤push0&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeReturn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#return&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeReturn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#return&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å¯¹è±¡è®¿é—®&quot;&gt;å¯¹è±¡è®¿é—®&lt;/h3&gt;

&lt;p&gt;ä¸Šè¿°æˆ‘ä»¬è®²çš„æ“ä½œéƒ½æ˜¯å‘ç”Ÿåœ¨æ ˆç©ºé—´ï¼Œè€Œå¯¹è±¡å’Œæ•°ç»„å­˜å‚¨çš„å†…å­˜ä½ç½®åœ¨å †ç©ºé—´ã€‚å¯¹è±¡å’Œæ•°ç»„çš„å¤„ç†æ–¹å¼å¾ˆç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨å†…å­˜ä¸­ä¸ºå…¶åˆ†é…ä¸€å—è¿ç»­çš„å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªæŒ‡å‘èµ·å§‹åœ°å€çš„æŒ‡é’ˆæ¥è¿›è¡Œè®¿é—®ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcd3nvaw6kj30ke11g75d.jpg&quot; width=&quot;300&quot; /&gt;&lt;/center&gt;

&lt;p&gt;thisæŒ‡é’ˆåœ¨å¯¹è±¡è®¿é—®ä¸­èµ·åˆ°äº†é‡è¦ä½œç”¨ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç³»ç»Ÿçš„Memory.alloc()å‡½æ•°æ¥ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼ŒMemory.alloc()è¿”å›æŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„æŒ‡é’ˆï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªæŒ‡é’ˆèµ‹å€¼ç»™THISæ®µï¼Œè¿”å›ç»™è°ƒç”¨è€…ã€‚&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ball&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                     &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AleftWall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ArightWall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AtopWall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AbottomWall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;      
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;   
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;leftWall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AleftWall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rightWall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ArightWall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topWall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AtopWall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bottomWall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AbottomWall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wall&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# ç¼–è¯‘æ„é€ å‡½æ•°ï¼Œå¼€è¾Ÿå®ä¾‹å†…å­˜&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileConstructor&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;filedCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;varCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePushNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filedCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;#é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å¯¹è±¡éœ€è¦å¤šå¤§çš„å†…å­˜ï¼Œå³éœ€è¦å­˜å‚¨å¤šå°‘ä¸ªå˜é‡&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Memory.alloc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;#æŠŠå®ä¾‹å†…å­˜åœ°å€popåˆ°THIS&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å½“æˆ‘ä»¬è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•æ—¶ï¼Œéœ€è¦å…ˆpushå®ä¾‹æ–¹æ³•çš„å…¥å‚ï¼Œä½†æˆ‘ä»¬é¦–å…ˆéœ€è¦pushä¸€ä¸ªé¢å¤–çš„éšå«å‚æ•°ï¼Œå°±æ˜¯è°ƒç”¨å¯¹è±¡æœ¬èº«ï¼Œè¿™ä¸ªå‚æ•°åœ¨å‡½æ•°å†…éƒ¨æˆ‘ä»¬åŒæ ·é€šè¿‡thisæŒ‡é’ˆæ¥è®¿é—®ã€‚å¯ä»¥çœ‹åˆ°é€šè¿‡è™šæ‹Ÿå†…å­˜æ®µthisï¼Œæˆ‘ä»¬ç®€åŒ–äº†å¯¹è±¡è®¿é—®æ“ä½œã€‚&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileDo&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileSubroutineCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;temp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#doè¯­å¥æ€»æ˜¯è°ƒç”¨è¿”å›ç±»å‹ä¸ºvoidçš„å‡½æ•°ï¼Œæ‰€ä»¥æœ€åå¼¹å‡º(å¹¶å¿½ç•¥)è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSubroutineCall&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;isVoid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå…ˆpush this&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@className&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;kindOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NONE&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è°ƒç”¨å®ä¾‹çš„æ–¹æ³•&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;this&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#push this&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@curFunctionType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;method&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;argument&quot;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;typeOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstSymbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpressionList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isInstanceMethod&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;callName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methodName&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;callName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ•°ç»„è®¿é—®&quot;&gt;æ•°ç»„è®¿é—®&lt;/h3&gt;

&lt;p&gt;å¯¹è±¡çš„è®¿é—®æˆ‘ä»¬ä½¿ç”¨äº†thisæŒ‡é’ˆï¼Œé‚£ä¹ˆæ•°ç»„çš„è®¿é—®æˆ‘ä»¬ä¼šç”¨ä¸Šæœ€åä¸€ä¸ªè™šæ‹Ÿå†…å­˜æ®µï¼šthatæŒ‡é’ˆã€‚ä¾‹å¦‚åœ¨è®¿é—®æ•°ç»„å¯¹è±¡array[index]æ—¶ï¼Œå…ˆè®¡ç®—arrayæŒ‡å‘çš„é¦–åœ°å€+indexï¼Œå¾—å‡ºçš„å€¼å°±æ˜¯è¦è®¿é—®çš„å…ƒç´ ï¼Œç„¶åæŠŠè¿™ä¸ªå€¼èµ‹å€¼ç»™thatæŒ‡é’ˆï¼Œè¿™é‡Œé¢ç”¨åˆ°äº†temp 0æ¥ä¿å­˜ä¸´æ—¶å˜é‡ï¼Œä¸ºäº†é˜²æ­¢thatæŒ‡é’ˆåœ¨ä½¿ç”¨æ—¶å†²çªã€‚thatæŒ‡é’ˆçš„å­˜åœ¨ä¹Ÿæ˜¯ä¸ºäº†ç®€åŒ–ä»£ç çš„ç»“æ„ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/00831rSTly1gcd3wstnv3j316p0u0q3y.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;
&lt;p&gt;å…³é”®ä»£ç å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// b[2] = 5&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]]]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// a[5] = 8 * 5 = 40&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
    
    &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileLet&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;isArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;isArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pushVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;add&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;    
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isArray&lt;/span&gt;                                 
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;temp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;#temp0 = expression above&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;         &lt;span class=&quot;c1&quot;&gt;#thatæŒ‡å‘æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;temp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;that&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;kindOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@symbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;argument&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;local&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# æŠŠexpressionçš„å€¼popåˆ°var&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolKind&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;field&quot;&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;this&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbolIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# æŠŠexpressionçš„å€¼popåˆ°thisæ®µ&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ä¸èƒ½è¯†åˆ«&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileTerm&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName | varName[expression] | subroutineCall&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;firstToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;backward&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pushVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;secondToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#varName[expression]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getIndentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compileExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pushVarName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writeArithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;add&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#ä¿®æ”¹That&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@vmWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writePush&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;that&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@tokenizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; 
      &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸ä¼šå»ç¼–å†™ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬å¯¹äºç¼–è¯‘å™¨çš„å­¦ä¹ å’Œäº†è§£å¯èƒ½æ›´å¤šçš„æ¥è‡ªå¯¹ä¸€äº›æ•™æå’Œèµ„æ–™æµ…å°è¾„æ­¢åœ°é˜…è¯»ï¼Œåªæ˜¯å½¢æˆäº†ä¸€ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µï¼Œç”šè‡³è‡ªå·±éƒ½ä¼šæ€€ç–‘è‡ªå·±å¯¹å…¶ç†è§£çš„æ­£ç¡®æ€§ã€‚è™½ç„¶æ¯”èµ·åŠ¨è¾„ç™¾ä¸‡è¡Œä»£ç çš„å·¥ä¸šçº§ç¼–è¯‘å™¨ï¼ŒJackç¼–è¯‘å™¨å®åœ¨æ˜¯å¤ªè¿‡ç®€å•ï¼Œä½†æˆ‘ä»¬ä»å¯ä»¥ä»äº²è‡ªå®ç°å®ƒçš„è¿‡ç¨‹ä¸­çœŸæ­£åœ°çª¥æ¢åˆ°ç¼–è¯‘å™¨å·¥ä½œçš„åŸºæœ¬åŸç†ã€‚&lt;/p&gt;

&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»0åˆ°1æ„å»ºè®¡ç®—æœºç³»åˆ—çš„æ–‡ç« å°±è¦æ¥è¿‘å°¾å£°äº†ï¼Œä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªæœ€ç®€å•çš„æ“ä½œç³»ç»Ÿï¼Œæ”¯æŒé«˜çº§æ•°å­¦è¿ç®—ã€å†…å­˜åˆ†é…ã€æ•°ç»„æ“ä½œã€å­—ç¬¦ä¸²æ“ä½œã€è¾“å…¥è¾“å‡ºç­‰èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ç¯‡å®Œæ•´å®ç°æ”¾åœ¨äº†:&lt;a href=&quot;https://github.com/guosainpu/Nand2Tetris&quot;&gt;github&lt;/a&gt;&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">æœ¬ç¯‡å®ç°Jackçš„ç¼–è¯‘å™¨ï¼Œä¹Ÿæ˜¯ä»0åˆ°1æ„å»ºè®¡ç®—æœºç³»åˆ—æœ€å¤æ‚çš„ä¸€ç¯‡ã€‚ç¼–è¯‘å™¨çš„å®ç°æœ¬èº«æ˜¯éå¸¸å¤æ‚çš„ï¼Œä½†å¾—ç›ŠäºJackè¶…ç®€æ´çš„è¯­æ³•ï¼Œæˆ‘ä»¬å›é¿æ‰äº†å¾ˆå¤šå¤æ‚çš„é—®é¢˜ã€‚æ€»ä½“ä¸ŠJackç¼–è¯‘å™¨æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¼–è¯‘å™¨ï¼Œå®ƒåŒ…æ‹¬è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æï¼Œä»£ç ç”Ÿæˆç­‰é‡è¦ä¸»é¢˜ã€‚ é«˜çº§è¯­è¨€ä¸ºä»€ä¹ˆèƒ½å¤Ÿè¢«ç¼–è¯‘å™¨ç†è§£å’Œç¼–è¯‘ï¼Ÿå› ä¸ºé«˜çº§è¯­è¨€æ˜¯æŒ‰ç…§æŸç§è§„åˆ™çš„è¯­æ³•ï¼ˆä¸Šä¸‹æ–‡æ— å…³è¯­æ³•ï¼‰ç»„ç»‡çš„ï¼Œç»“æ„ä¸Šå±‚æ¬¡åŒ–çš„è¯­è¨€ã€‚ç¨‹åºçš„æ¯ä¸ªç±»ï¼Œæ¯æ¡è¯­å¥éƒ½æ˜¯ç¬¦åˆæŸç§è¯­æ³•è§„åˆ™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åè¿‡æ¥èƒ½å¤Ÿä½¿ç”¨è¿™äº›è¯­æ³•è§„åˆ™å¯¹å…¶è¿›è¡Œå‡†ç¡®åœ°è§£æï¼Œè€Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„è‡ªç„¶è¯­è¨€åˆ™ä¸å¤ªå—è¯­æ³•çš„ä¸¥æ ¼çš„çº¦æŸï¼Œæ‰€ä»¥ç”¨ç®—æ³•è§£é‡Šè‡ªç„¶è¯­è¨€ä¼šæ›´å›°éš¾ã€‚ è¯æ³•åˆ†æ ç¨‹åºåŸºæœ¬ä¸Šç”±è¯­å¥ç»„æˆï¼Œè¯­å¥ç”±å•è¯å’Œç¬¦å·ç»„æˆï¼Œæ¯ä¸ªå•è¯æˆ–ç¬¦å·éƒ½æœ‰å®ƒè¦è¡¨è¾¾çš„å«ä¹‰ï¼šæˆ–æ˜¯æŸç§é¢„ç®—æ“ä½œï¼Œæˆ–æ˜¯æŸå—å†…å­˜çš„æŒ‡é’ˆï¼Œæˆ–æ˜¯æŒ‡æ˜å½“å‰è¯­å¥æ˜¯é‚£ç§ç±»å‹ç­‰ç­‰ã€‚ç¼–è¯‘å™¨è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æŠŠè¯­å¥æ‹†è§£æˆä¸€ä¸ªä¸ªå•è¯æˆ–ç¬¦å·ï¼Œå³è¯æ³•åˆ†æã€‚ Jackè¯­æ³•ç”±ä¸€ä¸‹äº”ç±»å•è¯æ„æˆï¼š 1. å…³é”®å­—ï¼šå¤šç”¨äºæŒ‡æ˜å½“å‰è¯­å¥çš„ç±»å‹ã€å±æ€§ã€‚ 2. ç¬¦å·ï¼šç®—æ•°é€»è¾‘è¿ç®—ç¬¦å·ã€åŠŸèƒ½ç¬¦å·ç­‰ã€‚ 3. æ•´å‹æ•°å­—ï¼š0...32767 4. å­—ç¬¦åˆ›ï¼šâ€œâ€æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ã€‚ 5. å­—é¢é‡ï¼šç±»åã€å˜é‡åç­‰ã€‚ ä¸‹é¢ä»¥ä¸€ä¸ªç¨‹åºä¸¾ä¾‹ï¼š å®ç° è¯æ³•åˆ†æçš„è¿‡ç¨‹å¹¶ä¸å¤æ‚ã€‚å…ˆåˆ é™¤è¾“å…¥ç¨‹åºä¸­çš„æ³¨é‡Šä»£ç ï¼Œç„¶åé€šè¿‡ä½¿ç”¨Rubyçš„StringScannerå·¥å…·å’Œä¸€äº›æ­£åˆ™æ“ä½œæŠŠæºç¨‹åºæ‹†è§£æˆä»¥ä¸Šäº”ç§ç±»å‹çš„å•è¯å³å¯ã€‚æˆ‘ä»¬ç”¨JackTokenizeræ¥å®ç°Jackçš„è¯æ³•åˆ†æï¼š JackTokenizeræ¥å£è®¾è®¡ï¼š constructorï¼šè¾“å…¥æºç¨‹åºï¼Œå®Œæˆè¯æ³•åˆ†æ hasMoreTokenï¼šæ˜¯å¦è¿˜æ˜¯token advanceï¼štokenæ¸¸æ ‡å‰è¿›ä¸€ä½ tokenTypeï¼šå½“å‰tokenç±»å‹ keywordï¼šè¿”å›å½“å‰å…³é”®å­—ç±»å‹çš„token symbolï¼šè¿”å›å½“å‰symbolç±»å‹çš„token intValueï¼šè¿”å›å½“å‰intç±»å‹çš„token stringValueï¼šè¿”å›å½“å‰stringç±»å‹çš„token indentifierï¼šè¿”å›å½“å‰indentifierç±»å‹çš„token è¯æ³•åˆ†æå…³é”®ä»£ç å¦‚ä¸‹ï¼š $KEYWORDS = [&quot;class&quot;, &quot;method&quot;, &quot;function&quot;, &quot;constructor&quot;, &quot;int&quot;, &quot;boolean&quot;, &quot;char&quot;, &quot;void&quot;, &quot;var&quot;, &quot;static&quot;, &quot;field&quot;, &quot;let&quot;, &quot;do&quot;, &quot;if&quot;, &quot;else&quot;, &quot;while&quot;, &quot;return&quot;, &quot;true&quot;, &quot;false&quot;, &quot;null&quot;, &quot;this&quot;] $SYMBOL = [&quot;{&quot;, &quot;}&quot;, &quot;(&quot;, &quot;)&quot;, &quot;[&quot;, &quot;]&quot;, &quot;.&quot;, &quot;,&quot;, &quot;;&quot;, &quot;+&quot;, &quot;-&quot;, &quot;*&quot;, &quot;/&quot;, &quot;&amp;amp;&quot;, &quot;|&quot;, &quot;&amp;lt;&quot;, &quot;&amp;gt;&quot;, &quot;=&quot;, &quot;~&quot;] class JackTokenizer def analysizeFile(file) #åˆ é™¤æ‰€æœ‰æ³¨é‡Š file = file.gsub(/((?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:\/\/.*))/, '').split.join(' ') #ä»£ç è½¬æˆtoken @tokens = self.scanTextToToken(file) self.writeTokensTofile(@tokens) end def scanTextToToken(text) tokens = [] scanner = StringScanner.new(text) while !scanner.eos? # æ‰«æå­—ç¬¦ä¸²ç±»å‹ stringToken = scanner.scan(/&quot;[^&quot;]*&quot;/) if stringToken tokens &amp;lt;&amp;lt; stringToken scanner.scan(/\s+/) next end # æ‰«æsymbol symbolToken = scanner.scan(/\{|\}|\(|\)|\[|\]|\.|\,|\;|\+|\-|\*|\/|\&amp;amp;|\||\&amp;lt;|\&amp;gt;|\=|\~/) if symbolToken tokens &amp;lt;&amp;lt; symbolToken scanner.scan(/\s+/) next end # æ‰«æå…¶ä»–tokenotherToken otherToken = scanner.scan_until(/\s+|\{|\}|\(|\)|\[|\]|\.|\,|\;|\+|\-|\*|\/|\&amp;amp;|\||\&amp;lt;|\&amp;gt;|\=|\~/) if otherToken otherToken = otherToken[0..otherToken.length-2] scanner.pos = scanner.pos-1 tokens &amp;lt;&amp;lt; otherToken scanner.scan(/\s+/) next end end return tokens end def writeTokensTofile(tokens) @tokenOutputFile.write(&quot;&amp;lt;tokens&amp;gt;\n&quot;) tokens.each do |token| if self.isKeyword(token) @tokenOutputFile.write(&quot;&amp;lt;keyword&amp;gt; #{token} &amp;lt;/keyword&amp;gt;\n&quot;) elsif self.isString(token) token = token[1..token.length-2] @tokenOutputFile.write(&quot;&amp;lt;stringConstant&amp;gt; #{token} &amp;lt;/stringConstant&amp;gt;\n&quot;) elsif self.isSymbol(token) token = self.convertSymbol(token) @tokenOutputFile.write(&quot;&amp;lt;symbol&amp;gt; #{token} &amp;lt;/symbol&amp;gt;\n&quot;) elsif self.isNumber(token) @tokenOutputFile.write(&quot;&amp;lt;integerConstant&amp;gt; #{token} &amp;lt;/integerConstant&amp;gt;\n&quot;) else @tokenOutputFile.write(&quot;&amp;lt;identifier&amp;gt; #{token} &amp;lt;/identifier&amp;gt;\n&quot;) end end @tokenOutputFile.write(&quot;&amp;lt;/tokens&amp;gt;\n&quot;) @tokenOutputFile.close() end def isKeyword(token) return $KEYWORDS.include? token end def isSymbol(token) return $SYMBOL.include? token end def isNumber(token) return token.match(/\d+/) end def isString(token) return token.match(/&quot;[^&quot;]*&quot;/) end end è¯­æ³•åˆ†æ æˆ‘ä»¬çš„ç¼–è¯‘å™¨å¾ˆèªæ˜ï¼Œå·²ç»æŒæ¡äº†Jackçš„å•è¯ï¼Œæ¥ä¸‹æ¥è¯¥å­¦ä¹ è¯­æ³•äº†ã€‚è¯­æ³•åˆ†æçš„ä»»åŠ¡æ˜¯åˆ†ææºç¨‹åºç±»ã€æ–¹æ³•çš„ç»“æ„å’Œæ¯æ¡è¯­å¥çš„ç»„æˆï¼Œåˆ†æçš„ç»“æœä»¥æŠ½è±¡è¯­æ³•æ ‘çš„æ–¹å¼å‘ˆç°ï¼Œæœ‰çš„ç¼–è¯‘å™¨ä¼šæ˜¾ç¤ºåœ°æ„é€ å‡ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆç”¨äºè¿›ä¸€æ­¥ä»£ç ç”Ÿæˆå’Œé”™è¯¯æŠ¥å‘Šï¼‰ï¼Œæœ‰çš„ç¼–è¯‘å™¨åˆ™éšå¼åœ°æ„é€ æŠ½è±¡è¯­æ³•æ ‘ï¼Œå³å®æ—¶çš„ç”Ÿæˆä»£ç å’Œé”™è¯¯æŠ¥å‘Šï¼Œä¸å¿…åœ¨å†…å­˜ä¸­ç»´æŠ¤æ•´ä¸ªæ ‘çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬çš„ç¼–è¯‘å™¨å±äºåè€…ï¼ˆä½†æˆ‘ä»¬åœ¨å®ç°çš„è¿‡ç¨‹ä¸­ä»ä¼šç”Ÿæˆä¸€ä¸ªxmlæ ¼å¼çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œç”¨äºéªŒè¯æˆ‘ä»¬çš„è¯­æ³•åˆ†æç¨‹åºæ˜¯å¦æ­£ç¡®ï¼‰ã€‚ ä¸Šä¸‹æ–‡æ— å…³è¯­æ³• å‡ ä¹æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œä»¥åŠå¤§å¤šæ•°ç”¨äºæè¿°å¤æ‚æ–‡ä»¶çš„å…¶ä»–å½¢å¼çš„è¯­è¨€ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•æè¿°ã€‚ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•æ˜¯ä¸€ç»„é€’å½’å¼çš„ï¼Œæ ‘çŠ¶ç»“æ„çš„è¯­æ³•è§„åˆ™ï¼Œç”¨æ¥æŒ‡å®šè¯­æ³•ä¸­çš„è¯­æ³•å…ƒç´ å¦‚ä½•ç”±æ›´ç®€å•çš„å…ƒç´ ç»„æˆã€‚ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•ç”±ç»ˆç»“ç¬¦å’Œéç»ˆç»“ç¬¦ä¸¤ç§å…ƒç´ æ„æˆï¼Œä¾‹å¦‚é’ˆå¯¹è¯­å¥ï¼šwhile (count &amp;lt;= 100) { count ++; â€¦}ã€‚whileã€(ã€countã€++ ç­‰ç¬¦å·éƒ½å±äºç»ˆç»“ç¬¦ï¼Œå› ä¸ºå®ƒä»¬å·²ç»æ— æ³•å†ç»§ç»­åˆ†å‰²ï¼Œæ˜¯ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•ä¸–ç•Œçš„åŸå­çº§å­˜åœ¨ï¼›åŒæ—¶ç»ˆç»“ç¬¦ä¹Ÿå¯ä»¥äº’ç›¸ç»„åˆæˆæ›´é«˜çº§çš„éç»ˆç»“ç¬¦ï¼Œä¾‹å¦‚ count &amp;lt;= 100 ç»„æˆäº†ä¸€ä¸ªexpressionï¼Œcount ++; ç»„æˆäº†ä¸€ä¸ªstatementï¼Œå¤šä¸ªstatementåˆå¯ä»¥ç»„æˆstatementSequenceç­‰ï¼Œexpressionã€statementã€statementSequenceéƒ½å±äºéç»ˆç»“ç¬¦ï¼Œä»–ä»¬æ˜¯å¯ä»¥å†å‘ä¸‹åˆ†å‰²çš„ã€‚è¯­æ³•åˆ†æè¿‡ç¨‹å°±æ˜¯æ­ç¤ºç¨‹åºä¸­éç»ˆç»“ç¬¦ä¸éç»ˆç»“ç¬¦ï¼Œéç»ˆç»“ç¬¦ä¸ç»ˆç»“ç¬¦å…³ç³»çš„è¿‡ç¨‹ã€‚ Jackéç»ˆç»“ç¬¦ Jackçš„ç»ˆç»“ç¬¦æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ä¸»è¦æ¥äº†è§£ä¸€ä¸‹éç»ˆç»“ç¬¦ï¼ŒJackçš„éç»ˆç»“ç¬¦ä¸»è¦å¯ä»¥åˆ†ä¸º3ç±»ï¼šç¨‹åºç»“æ„ç±»ã€è¯­å¥ç±»ã€è¡¨è¾¾å¼ç±»ã€‚ ç¨‹åºç»“æ„ç±»çš„éç»ˆç»“ç¬¦ç”¨äºåˆ†æclassçš„ç»“æ„ï¼Œå˜é‡å£°æ˜çš„ç»“æ„ï¼Œå‡½æ•°å£°æ˜ã€å‡½æ•°å®ç°ç­‰çš„ç»“æ„ï¼š å…ˆå£°æ˜ç±»åï¼Œç„¶åæ˜¯è‹¥å¹²å˜é‡å£°æ˜ï¼ˆclassVarDecï¼‰ï¼Œç„¶åæ˜¯è‹¥å¹²å‡½æ•°çš„å‡ ä¸ªï¼ˆsubroutineDecï¼‰ã€‚ classVarDecç”±å˜é‡å±æ€§ã€å˜é‡ç±»å‹ã€å˜é‡åä¸‰ä¸ªç»ˆç»“ç¬¦æ„æˆ subroutineDecç”±3ç§å‡½æ•°å£°æ˜ï¼Œå‚æ•°åˆ—è¡¨ï¼Œå‡½æ•°ä½“å®ç°ï¼ˆsubroutineBodyï¼‰æ„æˆ å‡½æ•°ä½“å®ç°ç”±è‹¥å¹²å±€éƒ¨å˜é‡å£°æ˜å’Œè‹¥å¹²è¯­å¥æ„æˆ çœç•¥â€¦å‚è€ƒä¸‹å›¾ è¯­å¥ç±»çš„éç»ˆç»“ç¬¦ç”¨äºåˆ†æè¯­å¥ï¼ŒåŒ…æ‹¬ï¼šif, while, let, do, return 5ä¸­è¯­å¥ã€‚ è¡¨è¾¾å¼ç±»çš„éç»ˆç»“ç¬¦ç”¨äºåˆ†æè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼æ˜¯Jackä¸‰ç§éç»ˆç»“ç¬¦æœ€å¤æ‚çš„ä¸€ç§ã€‚ä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥æœ‰ä¸€ä¸ªé¡¹æˆ–å¤šä¸ªé¡¹æ„æˆï¼›æ¯ä¸ªé¡¹å¯èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å…³é”®å­—ã€å˜é‡ã€æ•°ç»„ã€æˆ–è€…æ˜¯å‡½æ•°è°ƒç”¨ï¼Œç”šè‡³æ˜¯ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ é€’å½’ä¸‹é™ç®—æ³• æœ‰å¾ˆå¤šç®—æ³•å¯ä»¥ç”¨æ¥æ„å»ºè¯­æ³•åˆ†ææ ‘ï¼Œé€’å½’ä¸‹é™ç®—æ³•æ˜¯æ¯”è¾ƒæ˜æ˜¾å’Œç®€å•çš„ä¸€ç§ã€‚é€’å½’ä¸‹é™ç®—æ³•è‡ªé¡¶å‘ä¸‹åœ°æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ï¼Œç¢°åˆ°è¯­æ³•ä¸­çš„éç»ˆç»“ç¬¦æ—¶ï¼Œç”¨ç›¸åº”çš„è¯­æ³•åˆ†æå‡½æ•°å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­ï¼Œå¤„ç†whileè¯­å¥æ—¶ï¼Œå…ˆè°ƒç”¨compileWhileStatementå‡½æ•°ï¼Œä»£è¡¨è¯­æ³•æ ‘ç”Ÿæˆäº†ä¸€ä¸ªwhileè¯­å¥èŠ‚ç‚¹ï¼Œç„¶åå¤„ç†whileè¯­å¥çš„å…·ä½“å®ç°ï¼Œç”±äºwhileä¸­åˆåŒ…å«äº†å…¶ä»–éç»ˆç»“ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ç»§ç»­é€’å½’çš„è°ƒç”¨å…¶ä»–è¯­æ³•åˆ†æå‡½æ•°ï¼ŒçŸ¥é“éç»ˆç»“ç¬¦å…¨éƒ¨ç”±ç»ˆç»“ç¬¦ç»„æˆæ—¶returnã€‚ å®ç° è¯­æ³•åˆ†æç¨‹åºä»å·¦åˆ°å³çš„è¯»å–è¯æ³•åˆ†æå™¨çš„tokenè¾“å‡ºï¼Œé‡åˆ°éç»ˆç»“ç¬¦åˆ™å¯¹å…¶è¿›è¡Œå±•å¼€ï¼Œå¦‚æœè¯¥éç»ˆç»“ç¬¦ä»ç”±å…¶ä»–éç»ˆç»“ç¬¦æ„æˆï¼Œåˆ™æ·±åº¦ä¼˜å…ˆçš„é€’å½’å±•å¼€è¿™äº›éç»ˆç»“ç¬¦ï¼Œç›´è‡³éç»ˆç»“ç¬¦å…¨éƒ¨ç”±ç»ˆç»“ç¬¦æ„æˆä¸ºæ­¢ã€‚è¯­æ³•åˆ†æéƒ¨åˆ†å®Œæ•´çš„å®ç°è¾ƒé•¿ï¼Œè¿™é‡Œä»…ä¸¾å‡ ä¸ªéç»ˆç»“ç¬¦çš„è¯­æ³•åˆ†æè¿‡ç¨‹ã€‚ class CompilationEngine #compile method #ç¼–è¯‘æ•´ä¸ªç±» def compileClass @outputfile.write(&quot;&amp;lt;class&amp;gt;\n&quot;) @tokenizer.advance() self.writeKeyword() #class @tokenizer.advance() self.writeIndentifier() #className @tokenizer.advance() self.writeSymbol() #{ @tokenizer.advance() self.compileClassVarDec() #classVarDec* self.compileSubroutine() #subroutine* self.writeSymbol() #} @outputfile.write(&quot;&amp;lt;/class&amp;gt;\n&quot;) end #ç¼–è¯‘é™æ€å˜é‡æˆ–æˆå‘˜å˜é‡çš„å£°æ˜ def compileClassVarDec isVar = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;static&quot; || @tokenizer.keyword() == &quot;field&quot;) while isVar @outputfile.write(&quot;&amp;lt;classVarDec&amp;gt;\n&quot;) self.writeKeyword() #(static|field) @tokenizer.advance() self.writeType() @tokenizer.advance() self.writeVar() #varName or varNames @tokenizer.advance() isVar = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;static&quot; || @tokenizer.keyword() == &quot;field&quot;) @outputfile.write(&quot;&amp;lt;/classVarDec&amp;gt;\n&quot;) end return end #ç¼–è¯‘å±€éƒ¨å˜é‡ def compileVarDec ... end def compileSubroutine isSubroutine = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;constructor&quot; || @tokenizer.keyword() == &quot;function&quot; || @tokenizer.keyword() == &quot;method&quot;) while isSubroutine @outputfile.write(&quot;&amp;lt;subroutineDec&amp;gt;\n&quot;) self.writeKeyword() #(method type) @tokenizer.advance() if @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;int&quot; || @tokenizer.keyword() == &quot;char&quot; || @tokenizer.keyword() == &quot;boolean&quot; || @tokenizer.keyword() == &quot;void&quot;) self.writeKeyword() #(basic type) elsif @tokenizer.tokenType == &quot;IDENTIFIER&quot; self.writeIndentifier() #(class type) end @tokenizer.advance() self.writeIndentifier() #method name @tokenizer.advance() self.writeSymbol() #( @tokenizer.advance() self.compileParameterList() #parameterList self.writeSymbol() #) @tokenizer.advance() self.compileSubroutineBody() #subroutineBody @outputfile.write(&quot;&amp;lt;/subroutineDec&amp;gt;\n&quot;) @tokenizer.advance() isSubroutine = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;constructor&quot; || @tokenizer.keyword() == &quot;function&quot; || @tokenizer.keyword() == &quot;method&quot;) end return end #ç¼–è¯‘å‚æ•°åˆ—è¡¨ def compileParameterList() ... end #ç¼–è¯‘å‡½æ•°ä½“ def compileSubroutineBody() ... end def compileStatements ... end def compileLet ... end def compileIF ... end def compileWhile ... end def compileReturn @outputfile.write(&quot;&amp;lt;returnStatement&amp;gt;\n&quot;) self.writeKeyword() #return @tokenizer.advance() if @tokenizer.symbol() == &quot;;&quot; #æ•°ç»„ self.writeSymbol() #; else self.compileExpression() self.writeSymbol() #; end @outputfile.write(&quot;&amp;lt;/returnStatement&amp;gt;\n&quot;) end def compileDo ... end def compileSubroutineCall self.writeIndentifier() #æ–¹æ³•åæˆ–ç±»å¯¹è±¡æˆ–å®ä¾‹å¯¹è±¡ @tokenizer.advance() if @tokenizer.symbol() == &quot;(&quot; #è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯ self.writeSymbol() #( @tokenizer.advance() self.compileExpressionList() self.writeSymbol() #) @tokenizer.advance() self.writeSymbol() #; elsif @tokenizer.symbol() == &quot;.&quot; #è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯ self.writeSymbol() #. @tokenizer.advance() self.writeIndentifier() #æ–¹æ³•å @tokenizer.advance() self.writeSymbol() #() @tokenizer.advance() self.compileExpressionList() self.writeSymbol() #) @tokenizer.advance() self.writeSymbol() #; end end def compileExpression @outputfile.write(&quot;&amp;lt;expression&amp;gt;\n&quot;) self.compileTerm() termEnd = !($OPETATOR.include? @tokenizer.symbol()) if !termEnd self.writeSymbol() #æ“ä½œç¬¦ @tokenizer.advance() self.compileTerm() termEnd = !($OPETATOR.include? @tokenizer.symbol()) end @outputfile.write(&quot;&amp;lt;/expression&amp;gt;\n&quot;) end def compileExpressionList ... end def compileTerm ... end end è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆ è¯­æ³•åˆ†æä¹Ÿæ˜¯è¯­ä¹‰åˆ†æçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬çŸ¥é“äº†è¯­æ³•çš„ç±»å‹å°±çŸ¥é“äº†å®ƒæ‰€è¦è¡¨è¾¾çš„ä¸€éƒ¨åˆ†å«ä¹‰ï¼Œä¾‹å¦‚æˆ‘ä»¬çŸ¥é“äº†å®ƒæ˜¯ifæˆ–whileè¯­æ³•ï¼Œå°±çŸ¥é“å°†è¦è¿›è¡Œä¸€ç³»åˆ—çš„åˆ†æ”¯è·³è½¬æ“ä½œï¼›çŸ¥é“äº†å®ƒæ˜¯letè¯­æ³•ï¼Œå°±çŸ¥é“äº†éœ€è¦è¿›è¡Œèµ‹å€¼æ“ä½œï¼›çŸ¥é“äº†å®ƒæ˜¯doè¯­æ³•ï¼Œå°±çŸ¥é“äº†éœ€è¦è¿›è¡Œå‡½æ•°è°ƒç”¨æ“ä½œã€‚ä½†è¯­æ³•åˆ†æè¡¨è¾¾çš„è¯­ä¹‰è¿˜ä¸å®Œå…¨ï¼Œä¾‹å¦‚letè¯­å¥ä¸­èµ‹å€¼çš„å¯¹è±¡æ˜¯æˆå‘˜å˜é‡è¿˜æ˜¯é™æ€å˜é‡ï¼Ÿdoè¯­æ³•ä¸­è°ƒç”¨çš„å‡½æ•°æ˜¯ç±»æ–¹æ³•è¿˜æ˜¯å®ä¾‹æ–¹æ³•ï¼Ÿè¿™äº›éƒ½éœ€è¦æˆ‘ä»¬åœ¨è¯­ä¹‰åˆ†æè¿‡ç¨‹ä¸­æ¥è¿›ä¸€æ­¥åˆ¤æ–­ã€‚å½“æˆ‘ä»¬åˆ†æå‡ºä¸€ä¸ªè¯­å¥çš„è¯­ä¹‰çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”çš„è™šæ‹Ÿæœºä»£ç äº†ï¼ˆåœ¨è¿™é‡Œè™šæ‹Ÿæœºè¯­è¨€å……å½“äº†ä¸­é—´è¯­è¨€ï¼Œæœ¬ç« çš„ç¼–è¯‘å™¨æ˜¯ç¼–è¯‘å™¨çš„å‰ç«¯ï¼Œè™šæ‹Ÿæœºåˆ™æ˜¯ç¼–è¯‘å™¨çš„åç«¯ï¼‰ï¼Œä¸”è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆæ˜¯å¯ä»¥åŒæ—¶è¿›è¡Œçš„ã€‚ ç¨‹åºçš„æœ¬è´¨å°±æ˜¯ä¸€ç³»åˆ—å¯¹æ•°æ®çš„æ“ä½œï¼Œæ‰€ä»¥æŠŠé«˜çº§è¯­è¨€ç¼–è¯‘æˆè¾ƒä½çº§çš„è¯­è¨€ä¸»è¦æ¶‰åŠä¸¤ä¸ªä¸»é¢˜ï¼šæ•°æ®çš„ç¿»è¯‘å’Œå‘½ä»¤çš„ç¿»è¯‘ã€‚ æ•°æ®ç¿»è¯‘ å˜é‡ å˜é‡åä»£è¡¨äº†å†…å­˜ä¸­çš„æŸä¸ªåœ°å€ï¼Œæ˜¯é«˜çº§è¯­è¨€è®¿é—®å†…å­˜çš„æ¥å£ã€‚åœ¨Jackä¸­å˜é‡ç±»å‹åŒ…æ‹¬ï¼šé™æ€å˜é‡ã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡å’Œå‚æ•°å˜é‡ã€‚åœ¨é«˜çº§è¯­è¨€ä¸­ï¼Œå˜é‡åç”¨å­—é¢é‡è¡¨ç¤ºï¼ˆidentifierï¼‰ï¼Œè€Œè™šæ‹Ÿæœºè¯­è¨€å¹¶ä¸è®¤è¯†è¿™äº›ç¬¦å·ï¼Œè™šæ‹Ÿæœºè¯­è¨€åªè®¤è¯† static 0ã€static 1ã€local 0ã€argument 1ã€this 0 ç­‰ç¬¦å·ï¼Œæ‰€ä»¥æ•°æ®ç¿»è¯‘éƒ¨åˆ†çš„å·¥ä½œå°±æ˜¯æŠŠé«˜çº§è¯­è¨€ä¸­çš„å˜é‡åç¿»è¯‘æˆâ€œæ®µå + indexâ€çš„æ ¼å¼ã€‚ ç¬¦å·è¡¨ å˜é‡ç¿»è¯‘çš„è¿‡ç¨‹åˆæ¶‰åŠåˆ°äº†ç¬¦å·è¡¨ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å…ˆæŠŠç¬¦å·åŠ å…¥ç¬¦å·è¡¨ï¼Œç„¶ååœ¨åç»­çš„ç¼–è¯‘è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°äº†ç¬¦å·å°±å»ç¬¦å·è¡¨æŸ¥æ‰¾ç¬¦å·å¯¹åº”çš„typeï¼ˆå˜é‡ç±»å‹ï¼‰, kindï¼ˆå±äºå“ªä¸ªæ®µï¼‰å’Œindexã€‚ ç¬¦å·è¡¨ä¸­key(ç¬¦å·)å’Œvalueçš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š å±€éƒ¨å˜é‡åˆ†é…åˆ° local æ®µ é™æ€å˜é‡åˆ†é…åˆ° static æ®µ å‚æ•°å˜é‡åˆ†é…åˆ° argument æ®µ é€šè¿‡ this index çš„æ–¹å¼æ¥è®¿é—®æˆå‘˜å˜é‡ é€šè¿‡ that index çš„æ–¹å¼æ¥è®¿é—®æ•°ç»„ ç¬¦å·è¡¨å®ç° ç¬¦å·è¡¨çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯æ”¯æŒç¬¦å·çš„æ–°å¢å’ŒæŸ¥è¯¢åŠŸèƒ½ï¼Œä¸”éœ€è¦ç®¡ç†æ¯ä¸ªæ®µçš„indexï¼ˆæ®µä¸­æ–°å¢äº†å˜é‡åindexéœ€è¦+1ï¼‰ã€‚ startSubroutineï¼šç¬¦å·è¡¨é‡ç½®ï¼Œå¼€è¾Ÿæ–°çš„å­ç¨‹åºä½œç”¨åŸŸ define ï¼šæ–°å¢ä¸€æ¡ç¬¦å· varCount ï¼šç¬¦å·è¡¨ä¸­æŸKindçš„å˜é‡æ•°é‡ kindOf ï¼šæŸç¬¦å·çš„kind typeOf ï¼šæŸç¬¦å·çš„type indexOf ï¼šæŸç¬¦å·çš„index class SymbolTable def initialize() @classTable = {} @subroutineTable = {} @symbolTableDic = {&quot;static&quot; =&amp;gt; @classTable, &quot;field&quot; =&amp;gt; @classTable, &quot;arg&quot; =&amp;gt; @subroutineTable, &quot;var&quot; =&amp;gt; @subroutineTable} @segementDic = {&quot;static&quot; =&amp;gt; &quot;static&quot;, &quot;field&quot; =&amp;gt; &quot;field&quot;, &quot;arg&quot; =&amp;gt; &quot;argument&quot;, &quot;var&quot; =&amp;gt; &quot;local&quot;} @symbolIndex = {&quot;static&quot; =&amp;gt; 0, &quot;field&quot; =&amp;gt; 0, &quot;arg&quot; =&amp;gt; 0, &quot;var&quot; =&amp;gt; 0} end def startSubroutine() @subroutineTable.clear() #æ¸…ç©ºsubroutineTableï¼Œå¼€å§‹ç¼–è¯‘ä¸‹ä¸€ä¸ªæ–¹æ³• @symbolIndex[&quot;arg&quot;] = 0 @symbolIndex[&quot;var&quot;] = 0 end def define(name, type, kind) puts &quot;å­˜å…¥ç¬¦å·è¡¨, name:#{name}, type:#{type}, kind:#{kind}&quot; symbolTable = @symbolTableDic[kind] symbolTable[name] = [type, kind, @symbolIndex[kind]] @symbolIndex[kind] = @symbolIndex[kind] + 1 end def varCount(kind) count = 0 @classTable.each do |name, values| if values[1] == kind count = count + 1 end end @subroutineTable.each do |name, values| if values[1] == kind count = count + 1 end end return count end def kindOf(name) valus = self.findSymbol(name) return @segementDic[valus[1]] end def typeOf(name) valus = self.findSymbol(name) return valus[0] end def indexOf(name) valus = self.findSymbol(name) return valus[2] end def findSymbol(name) if @subroutineTable.key?(name) return @subroutineTable[name] end if @classTable.key?(name) return @classTable[name] end return [&quot;NONE&quot;, &quot;NONE&quot;, &quot;NONE&quot;] end def printSymbols puts &quot;classTable: #{@classTable}&quot; puts &quot;subroutineTable: #{@subroutineTable}&quot; puts &quot;symbolIndex: #{@symbolIndex}&quot; end end ç”±äºJackçš„é€‚å½“è®¾è®¡ï¼Œæˆ‘ä»¬ä¸ä¼šé‡åˆ°åœ¨åµŒå¥—çš„ä½œç”¨åŸŸä¸­ä½¿ç”¨å˜é‡çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸ä¼šé‡åˆ°å˜é‡å†²çªçš„é—®é¢˜ã€‚åœ¨å…¶ä»–é«˜çº§è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéšæ—¶å¼€è¾Ÿä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼ˆä¾‹å¦‚ç”¨{}æ‹¬èµ·æ¥ï¼‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨ç¬¦å·è¡¨çš„é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯å¢åŠ ä¸€å±‚ä½œç”¨åŸŸéƒ½ä¼šæ–°å¢ä¸€ä¸ªæ–°çš„ç¬¦å·è¡¨èŠ‚ç‚¹ã€‚ å¤„ç†ç¬¦å· ä¸‹é¢æˆªå–äº†ä¸€æ®µç¬¦å·å¤„ç†çš„å®ç°ï¼ˆæŠŠç¬¦å·åŠ å…¥ç¬¦å·è¡¨ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¯­ä¹‰åˆ†æå’Œä»£ç ç”Ÿæˆçš„é˜¶æ®µæ˜¯èåˆåœ¨è¯­æ³•åˆ†æçš„è¿‡ç¨‹å½“ä¸­çš„ï¼Œæ˜¯å¯¹è¯­æ³•åˆ†æç¨‹åºçš„æ‰©å±•ã€‚åœ¨è¯­æ³•åˆ†æè¿‡ç¨‹ä¸­ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªæ–°ç¬¦å·ï¼Œæˆ‘ä»¬å…ˆè§£æå®ƒçš„typeå’Œkindï¼Œç„¶åæŠŠå®ƒå†™åˆ°ç¬¦å·è¡¨ä¸­ã€‚ #ç¼–è¯‘é™æ€å˜é‡æˆ–æˆå‘˜å˜é‡çš„å£°æ˜ def compileClassVarDec varCount = 0 isVar = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;static&quot; || @tokenizer.keyword() == &quot;field&quot;) while isVar kind = getKeyword() @tokenizer.advance() type = getType() @tokenizer.advance() varCount = varCount + self.writeVarToSymbolTable(kind, type) @tokenizer.advance() isVar = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; (@tokenizer.keyword() == &quot;static&quot; || @tokenizer.keyword() == &quot;field&quot;) end return end #ç¼–è¯‘å±€éƒ¨å˜é‡ def compileVarDec varCount = 0 isVar = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; @tokenizer.keyword() == &quot;var&quot; while isVar kind = getKeyword() @tokenizer.advance() type = getType() @tokenizer.advance() varCount = varCount + self.writeVarToSymbolTable(kind, type) @tokenizer.advance() isVar = @tokenizer.tokenType == &quot;KEYWORD&quot; &amp;amp;&amp;amp; @tokenizer.keyword() == &quot;var&quot; end return varCount end def writeVarToSymbolTable(kind, type) varCount = 0 firstVarName = self.getIndentifier() @symbolTable.define(firstVarName, type, kind) varCount = varCount + 1 @tokenizer.advance() isSemicolon = @tokenizer.tokenType == &quot;SYMBOL&quot; &amp;amp;&amp;amp; @tokenizer.symbol() == &quot;;&quot; while !isSemicolon @tokenizer.advance() nextVarName = self.getIndentifier() @symbolTable.define(nextVarName, type, kind) varCount = varCount + 1 @tokenizer.advance() isSemicolon = @tokenizer.tokenType == &quot;SYMBOL&quot; &amp;amp;&amp;amp; @tokenizer.symbol() == &quot;;&quot; end return varCount end å‘½ä»¤ç¿»è¯‘ å‘½ä»¤ç¿»è¯‘éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ä¸¤ç±»å‘½ä»¤ï¼šè¡¨è¾¾å¼æ±‚å€¼å’Œç¨‹åºæµç¨‹æ§åˆ¶ è¡¨è¾¾å¼æ±‚å€¼ è¡¨è¾¾å¼æ±‚å€¼å°±æ˜¯è®¡ç®—å½¢å¦‚ï¼šx+g(x,y,-z)*5çš„è®¡ç®—å¼ï¼Œè®¡ç®—è¿™ç§è¡¨è¾¾å¼å¯ä»¥ç”¨ç»å…¸çš„åç¼€è¡¨ç¤ºæ³•æ¥å¤„ç†ï¼ˆRPNï¼Œé€†æ³¢å…°è¡¨ç¤ºæ³•ï¼‰ï¼Œå³é€šè¿‡ååºéå†çš„æ–¹å¼ç»“åˆæ ˆçš„ä½¿ç”¨æ¥è®¡ç®—è¡¨è¾¾å¼ã€‚ ç”¨ç¨‹åºè¡¨è¾¾åç¼€è¡¨è¾¾å¼çš„ç®—æ³•å¦‚ä¸‹ï¼š compileExpression(exp) { if exp æ˜¯æ•°å­— n then push n if exp æ˜¯å˜é‡ v then push v if exp = (exp1 op exp2) then compileExpression(exp1), compileExpression(exp2), compile op if exp = op(exp1) then compileExpression(exp1), compile op if exp = f(exp1 ... expN) then compileExpression(exp1), ..., compileExpression(expn), call f } è¡¨è¾¾å¼å®ç° ç”¨ç¨‹åºè¡¨è¾¾åç¼€è¡¨è¾¾å¼çš„ç®—æ³•æœ¬èº«æ¯”è¾ƒç®€ç­”ï¼Œä½†è¡¨è¾¾å¼æœ¬èº«æ¯”è¾ƒå¤æ‚ï¼Œåœ¨Jackä¸­å¾ˆå¤šç¬¦å·æˆ–ç¬¦å·çš„ç»„åˆéƒ½å¯ä»¥è¢«å½“åšä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¾‹å¦‚ä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä¸€ä¸ªæ•°å­—ï¼Œä¸€ä¸ªå˜é‡ï¼›ä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ä¸­çš„æŸä¸ªå€¼ï¼›ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°è°ƒç”¨ï¼›ä¹Ÿå¯ä»¥æ˜¯ç”¨ï¼ˆï¼‰æ‹¬èµ·æ¥çš„å¦ä¸€ä¸ªè¡¨è¾¾å¼ç­‰ï¼Œæˆ‘ä»¬æŠŠè¿™äº›å¯èƒ½çš„æ–¹å¼éƒ½ç»Ÿç§°ä¸ºä¸€ä¸ªtermã€‚è¡¨è¾¾å¼å®ç°çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼š def compileExpression self.compileTerm() termEnd = !($OPETATOR.include? @tokenizer.symbol()) if !termEnd opretator = $OPTOCMD[self.getSymbol()] #æ“ä½œç¬¦ @tokenizer.advance() self.compileTerm() @vmWriter.writeArithmetic(opretator) termEnd = !($OPETATOR.include? @tokenizer.symbol()) end end def compileTerm if @tokenizer.symbol() == &quot;-&quot; || @tokenizer.symbol() == &quot;~&quot; #unary term opetator = $UNARYCMD[self.getSymbol()] @tokenizer.advance() self.compileTerm() @vmWriter.writeArithmetic(opetator) elsif @tokenizer.tokenType == &quot;KEYWORD&quot; keyword = self.getKeyword() if keyword == &quot;false&quot; || keyword == &quot;null&quot; @vmWriter.writePushNumber(&quot;0&quot;) elsif keyword == &quot;true&quot; @vmWriter.writePushNumber(&quot;0&quot;) @vmWriter.writeArithmetic(&quot;not&quot;) #-1ä»£è¡¨true elsif keyword == &quot;this&quot; @vmWriter.writePush(&quot;pointer&quot;, 0) else raise &quot;#{keyword}æ˜¯ä¸å¯è¯†åˆ«ç¬¦å·ï¼ˆåªè¯†åˆ«ture, false, nullï¼‰&quot; end @tokenizer.advance() elsif @tokenizer.tokenType == &quot;INT-CONST&quot; number = self.getNumber() @vmWriter.writePushNumber(number) @tokenizer.advance() elsif @tokenizer.tokenType == &quot;STRING-CONST&quot; string = self.getString() puts &quot;å‘ç°stringï¼š#{string}&quot; self.processString(string) @tokenizer.advance() elsif @tokenizer.symbol() == &quot;(&quot; #(expression) @tokenizer.advance() self.compileExpression() @tokenizer.advance() else #varName | varName[expression] | subroutineCall firstToken = @tokenizer.identifier() @tokenizer.advance() secondToken = @tokenizer.symbol() @tokenizer.backward() if secondToken != &quot;[&quot; &amp;amp;&amp;amp; secondToken != &quot;(&quot; &amp;amp;&amp;amp; secondToken != &quot;.&quot; #varName varName = self.getIndentifier() self.pushVarName(varName) @tokenizer.advance() elsif secondToken == &quot;[&quot; #varName[expression] varName = self.getIndentifier() @tokenizer.advance() @tokenizer.advance() self.compileExpression() self.pushVarName(varName) @vmWriter.writeArithmetic(&quot;add&quot;) @vmWriter.writePop(&quot;pointer&quot;, 1) #ä¿®æ”¹That @vmWriter.writePush(&quot;that&quot;, 0) @tokenizer.advance() elsif secondToken == &quot;(&quot; || secondToken == &quot;.&quot; #subroutineCall firstSymbol = self.getIndentifier() @tokenizer.advance() if @tokenizer.symbol() == &quot;(&quot; #è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯ @tokenizer.advance() paramCount = self.compileExpressionList() methodName = &quot;#{@className}.#{firstSymbol}&quot; @vmWriter.writePush(&quot;pointer&quot;, 0) #è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå…ˆpushè‡ªå·± @vmWriter.writeCall(methodName, paramCount + 1) @tokenizer.advance() elsif @tokenizer.symbol() == &quot;.&quot; #è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯ @tokenizer.advance() className = firstSymbol methodName = self.getIndentifier() @tokenizer.advance() @tokenizer.advance() symbolKind = @symbolTable.kindOf(firstSymbol) symbolIndex = @symbolTable.indexOf(firstSymbol) isInstanceMethod = symbolKind != &quot;NONE&quot; &amp;amp;&amp;amp; symbolIndex != &quot;NONE&quot; if isInstanceMethod #è°ƒç”¨å®ä¾‹çš„æ–¹æ³• if symbolKind == &quot;field&quot; @vmWriter.writePush(&quot;this&quot;, symbolIndex) #push this else if @curFunctionType == &quot;method&quot; &amp;amp;&amp;amp; symbolKind == &quot;argument&quot; symbolIndex = symbolIndex + 1 end @vmWriter.writePush(symbolKind, symbolIndex) end className = @symbolTable.typeOf(firstSymbol) end paramCount = self.compileExpressionList() if isInstanceMethod paramCount = paramCount + 1 end callName = &quot;#{className}.#{methodName}&quot; @vmWriter.writeCall(callName, paramCount) @tokenizer.advance() end end end end åˆ†æ”¯æµç¨‹æ§åˆ¶ è¿™é‡Œçš„åˆ†æ”¯æµç¨‹æ§åˆ¶æŒ‡çš„å°±æ˜¯Jackä¸­çš„ifè¯­å¥å’Œwhileè¯­å¥ã€‚åˆ†æ”¯æµç¨‹æ§åˆ¶çš„ç¼–è¯‘ç›¸å¯¹æ›´ç›´è§‚ä¸€ç‚¹ï¼Œå°±æ˜¯æŠŠifå’Œwhileè¯­å¥ç¼–è¯‘æˆæ›´ä½çº§çš„gotoå’Œif-gotoè¯­å¥ã€‚å®ƒä»¬çš„å®ç°ç®—æ³•å¦‚ä¸‹ï¼š å…³é”®ä»£ç å®ç°å¦‚ä¸‹ï¼Œè¿™é‡Œå€¼å¾—æ€è€ƒçš„æ˜¯ï¼šå¦‚ä½•ä¿è¯label L1, label L2ç­‰labelåä¸äº’ç›¸å†²çªï¼›ä¸”ifå’Œwhileæ˜¯å¯ä»¥å…·å¤‡åµŒå¥—ç»“æ„çš„ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç¡®ä¿è¿›å…¥æˆ–é€€å‡ºæ—¶æ›´æ·±ä¸€çº§ifæˆ–whileè¯­å¥æ—¶ï¼Œlabelçš„å¯¹åº”å…³ç³»ä¸ä¼šæ··ä¹±ã€‚ def compileIF @ifBackTrace &amp;lt;&amp;lt; @ifCount @ifTotle = @ifTotle + 1 @ifCount = @ifTotle @tokenizer.advance() @tokenizer.advance() self.compileExpression() @vmWriter.writeIf(&quot;IF_TRUE#{@ifCount}&quot;) @vmWriter.writeGoto(&quot;IF_FALSE#{@ifCount}&quot;) @vmWriter.writeLabel(&quot;IF_TRUE#{@ifCount}&quot;) @tokenizer.advance() @tokenizer.advance() self.compileStatements() @tokenizer.advance() if @tokenizer.keyword() == &quot;else&quot; #compile else @vmWriter.writeGoto(&quot;IF_END#{@ifCount}&quot;) @vmWriter.writeLabel(&quot;IF_FALSE#{@ifCount}&quot;) @tokenizer.advance() @tokenizer.advance() self.compileStatements() @vmWriter.writeLabel(&quot;IF_END#{@ifCount}&quot;) else @tokenizer.backward() #è¿”å›åˆ°}å¤„ @vmWriter.writeLabel(&quot;IF_FALSE#{@ifCount}&quot;) end @ifCount = @ifBackTrace.pop() end def compileWhile @whileBackTrace &amp;lt;&amp;lt; @whileCount @whileTotle = @whileTotle + 1 @whileCount = @whileTotle @vmWriter.writeLabel(&quot;WHILE_EXP#{@whileCount}&quot;) @tokenizer.advance() @tokenizer.advance() self.compileExpression() @vmWriter.writeArithmetic(&quot;not&quot;) @vmWriter.writeIf(&quot;WHILE_END#{@whileCount}&quot;) @tokenizer.advance() @tokenizer.advance() self.compileStatements() @vmWriter.writeGoto(&quot;WHILE_EXP#{@whileCount}&quot;) @vmWriter.writeLabel(&quot;WHILE_END#{@whileCount}&quot;) @whileCount = @whileBackTrace.pop end å‡½æ•°è°ƒç”¨å’Œè¿”å› åœ¨è°ƒç”¨VMå‡½æ•°ä¹‹å‰ï¼Œè°ƒç”¨è€…å¿…é¡»å°†å‡½æ•°çš„å‚å…¥å‹å…¥æ ˆï¼Œä¸”å¦‚æœè¢«è°ƒç”¨çš„VMå‡½æ•°æ˜¯è‡ªå·±å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆé¦–å…ˆå…¥æ ˆçš„å‚æ•°æ˜¯è¯¥æ–¹æ³•æ“ä½œå¯¹è±¡çš„å¼•ç”¨ï¼ˆè¿›å…¥å‡½æ•°åè¿™ä¸ªå¯¹è±¡å¼•ç”¨å˜ä¸ºthisæŒ‡é’ˆï¼‰ã€‚returnæ–¹æ³•çš„å®ç°åˆ™å¾ˆç®€å•ï¼Œä¸è¿‡å½“returnçš„ç±»å‹ä¸ºvoidæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è¿”å›ä¸€ä¸ªå¸¸é‡0ä½œä¸ºè¿”å›å€¼ã€‚ ä»£ç å…³é”®å®ç°å¦‚ä¸‹ï¼š def compileSubroutineCall isVoid = false firstSymbol = self.getIndentifier() @tokenizer.advance() if @tokenizer.symbol() == &quot;(&quot; #è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯ @tokenizer.advance() @vmWriter.writePush(&quot;pointer&quot;, 0) #è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå…ˆpush this paramCount = self.compileExpressionList() methodName = &quot;#{@className}.#{firstSymbol}&quot; @vmWriter.writeCall(methodName, paramCount + 1) @tokenizer.advance() elsif @tokenizer.symbol() == &quot;.&quot; #è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯ @tokenizer.advance() className = firstSymbol methodName = self.getIndentifier() @tokenizer.advance() @tokenizer.advance() symbolKind = @symbolTable.kindOf(firstSymbol) symbolIndex = @symbolTable.indexOf(firstSymbol) isInstanceMethod = symbolKind != &quot;NONE&quot; &amp;amp;&amp;amp; symbolIndex != &quot;NONE&quot; if isInstanceMethod #è°ƒç”¨å®ä¾‹çš„æ–¹æ³• if symbolKind == &quot;field&quot; @vmWriter.writePush(&quot;this&quot;, symbolIndex) #push this else if @curFunctionType == &quot;method&quot; &amp;amp;&amp;amp; symbolKind == &quot;argument&quot; symbolIndex = symbolIndex + 1 end @vmWriter.writePush(symbolKind, symbolIndex) end className = @symbolTable.typeOf(firstSymbol) end paramCount = self.compileExpressionList() if isInstanceMethod paramCount = paramCount + 1 end callName = &quot;#{className}.#{methodName}&quot; @vmWriter.writeCall(callName, paramCount) @tokenizer.advance() end end def compileReturn @tokenizer.advance() if @tokenizer.symbol() == &quot;;&quot; #æ•°ç»„ @vmWriter.writePushNumber(0) #é»˜è®¤push0 @vmWriter.writeReturn() #return else self.compileExpression() @vmWriter.writeReturn() #return end end å¯¹è±¡è®¿é—® ä¸Šè¿°æˆ‘ä»¬è®²çš„æ“ä½œéƒ½æ˜¯å‘ç”Ÿåœ¨æ ˆç©ºé—´ï¼Œè€Œå¯¹è±¡å’Œæ•°ç»„å­˜å‚¨çš„å†…å­˜ä½ç½®åœ¨å †ç©ºé—´ã€‚å¯¹è±¡å’Œæ•°ç»„çš„å¤„ç†æ–¹å¼å¾ˆç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨å†…å­˜ä¸­ä¸ºå…¶åˆ†é…ä¸€å—è¿ç»­çš„å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªæŒ‡å‘èµ·å§‹åœ°å€çš„æŒ‡é’ˆæ¥è¿›è¡Œè®¿é—®ã€‚ thisæŒ‡é’ˆåœ¨å¯¹è±¡è®¿é—®ä¸­èµ·åˆ°äº†é‡è¦ä½œç”¨ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç³»ç»Ÿçš„Memory.alloc()å‡½æ•°æ¥ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼ŒMemory.alloc()è¿”å›æŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„æŒ‡é’ˆï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªæŒ‡é’ˆèµ‹å€¼ç»™THISæ®µï¼Œè¿”å›ç»™è°ƒç”¨è€…ã€‚ constructor Ball new(int Ax, int Ay, int AleftWall, int ArightWall, int AtopWall, int AbottomWall) { let x = Ax; let y = Ay; let leftWall = AleftWall; let rightWall = ArightWall - 6; let topWall = AtopWall; let bottomWall = AbottomWall - 6; let wall = 0; do show(); return this; } # ç¼–è¯‘æ„é€ å‡½æ•°ï¼Œå¼€è¾Ÿå®ä¾‹å†…å­˜ def compileConstructor filedCount = @symbolTable.varCount(&quot;field&quot;) @vmWriter.writePushNumber(filedCount) #é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å¯¹è±¡éœ€è¦å¤šå¤§çš„å†…å­˜ï¼Œå³éœ€è¦å­˜å‚¨å¤šå°‘ä¸ªå˜é‡ @vmWriter.writeCall(&quot;Memory.alloc&quot;, 1) @vmWriter.writePop(&quot;pointer&quot;, 0) #æŠŠå®ä¾‹å†…å­˜åœ°å€popåˆ°THIS end å½“æˆ‘ä»¬è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•æ—¶ï¼Œéœ€è¦å…ˆpushå®ä¾‹æ–¹æ³•çš„å…¥å‚ï¼Œä½†æˆ‘ä»¬é¦–å…ˆéœ€è¦pushä¸€ä¸ªé¢å¤–çš„éšå«å‚æ•°ï¼Œå°±æ˜¯è°ƒç”¨å¯¹è±¡æœ¬èº«ï¼Œè¿™ä¸ªå‚æ•°åœ¨å‡½æ•°å†…éƒ¨æˆ‘ä»¬åŒæ ·é€šè¿‡thisæŒ‡é’ˆæ¥è®¿é—®ã€‚å¯ä»¥çœ‹åˆ°é€šè¿‡è™šæ‹Ÿå†…å­˜æ®µthisï¼Œæˆ‘ä»¬ç®€åŒ–äº†å¯¹è±¡è®¿é—®æ“ä½œã€‚ def compileDo @tokenizer.advance() self.compileSubroutineCall() @vmWriter.writePop(&quot;temp&quot;, 0) #doè¯­å¥æ€»æ˜¯è°ƒç”¨è¿”å›ç±»å‹ä¸ºvoidçš„å‡½æ•°ï¼Œæ‰€ä»¥æœ€åå¼¹å‡º(å¹¶å¿½ç•¥)è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼ end def compileSubroutineCall isVoid = false firstSymbol = self.getIndentifier() @tokenizer.advance() if @tokenizer.symbol() == &quot;(&quot; #è°ƒå†…éƒ¨æ–¹æ³•åˆ†æ”¯ @tokenizer.advance() @vmWriter.writePush(&quot;pointer&quot;, 0) #è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œå…ˆpush this paramCount = self.compileExpressionList() methodName = &quot;#{@className}.#{firstSymbol}&quot; @vmWriter.writeCall(methodName, paramCount + 1) @tokenizer.advance() elsif @tokenizer.symbol() == &quot;.&quot; #è°ƒå¤–éƒ¨æ–¹æ³•åˆ†æ”¯ @tokenizer.advance() className = firstSymbol methodName = self.getIndentifier() @tokenizer.advance() @tokenizer.advance() symbolKind = @symbolTable.kindOf(firstSymbol) symbolIndex = @symbolTable.indexOf(firstSymbol) isInstanceMethod = symbolKind != &quot;NONE&quot; &amp;amp;&amp;amp; symbolIndex != &quot;NONE&quot; if isInstanceMethod #è°ƒç”¨å®ä¾‹çš„æ–¹æ³• if symbolKind == &quot;field&quot; @vmWriter.writePush(&quot;this&quot;, symbolIndex) #push this else if @curFunctionType == &quot;method&quot; &amp;amp;&amp;amp; symbolKind == &quot;argument&quot; symbolIndex = symbolIndex + 1 end @vmWriter.writePush(symbolKind, symbolIndex) end className = @symbolTable.typeOf(firstSymbol) end paramCount = self.compileExpressionList() if isInstanceMethod paramCount = paramCount + 1 end callName = &quot;#{className}.#{methodName}&quot; @vmWriter.writeCall(callName, paramCount) @tokenizer.advance() end end æ•°ç»„è®¿é—® å¯¹è±¡çš„è®¿é—®æˆ‘ä»¬ä½¿ç”¨äº†thisæŒ‡é’ˆï¼Œé‚£ä¹ˆæ•°ç»„çš„è®¿é—®æˆ‘ä»¬ä¼šç”¨ä¸Šæœ€åä¸€ä¸ªè™šæ‹Ÿå†…å­˜æ®µï¼šthatæŒ‡é’ˆã€‚ä¾‹å¦‚åœ¨è®¿é—®æ•°ç»„å¯¹è±¡array[index]æ—¶ï¼Œå…ˆè®¡ç®—arrayæŒ‡å‘çš„é¦–åœ°å€+indexï¼Œå¾—å‡ºçš„å€¼å°±æ˜¯è¦è®¿é—®çš„å…ƒç´ ï¼Œç„¶åæŠŠè¿™ä¸ªå€¼èµ‹å€¼ç»™thatæŒ‡é’ˆï¼Œè¿™é‡Œé¢ç”¨åˆ°äº†temp 0æ¥ä¿å­˜ä¸´æ—¶å˜é‡ï¼Œä¸ºäº†é˜²æ­¢thatæŒ‡é’ˆåœ¨ä½¿ç”¨æ—¶å†²çªã€‚thatæŒ‡é’ˆçš„å­˜åœ¨ä¹Ÿæ˜¯ä¸ºäº†ç®€åŒ–ä»£ç çš„ç»“æ„ã€‚ å…³é”®ä»£ç å®ç°å¦‚ä¸‹ï¼š function void main() { var Array a, b, c; let a = Array.new(10); let b = Array.new(5); let c = Array.new(1); let a[3] = 2; let a[4] = 8; let a[5] = 4; let b[a[3]] = a[3] + 3; // b[2] = 5 let a[b[a[3]]] = a[a[5]] * b[((7 - a[3]) - Main.double(2)) + 1]; // a[5] = 8 * 5 = 40 let c[0] = null; let c = c[0]; ...... return; } def compileLet @tokenizer.advance() varName = self.getIndentifier() @tokenizer.advance() isArray = false if @tokenizer.symbol() == &quot;[&quot; #æ•°ç»„ isArray = true @tokenizer.advance() self.compileExpression() self.pushVarName(varName) @vmWriter.writeArithmetic(&quot;add&quot;) @tokenizer.advance() end @tokenizer.advance() self.compileExpression() if isArray @vmWriter.writePop(&quot;temp&quot;, 0) #temp0 = expression above @vmWriter.writePop(&quot;pointer&quot;, 1) #thatæŒ‡å‘æ•°ç»„ @vmWriter.writePush(&quot;temp&quot;, 0) @vmWriter.writePop(&quot;that&quot;, 0) else symbolKind = @symbolTable.kindOf(varName) symbolIndex = @symbolTable.indexOf(varName) if symbolKind == &quot;argument&quot; || symbolKind == &quot;local&quot; || symbolKind == &quot;static&quot; @vmWriter.writePop(symbolKind, symbolIndex) # æŠŠexpressionçš„å€¼popåˆ°var elsif symbolKind == &quot;field&quot; @vmWriter.writePop(&quot;this&quot;, symbolIndex) # æŠŠexpressionçš„å€¼popåˆ°thisæ®µ else raise &quot;ä¸èƒ½è¯†åˆ«&quot; end end end def compileTerm ...... else #varName | varName[expression] | subroutineCall firstToken = @tokenizer.identifier() @tokenizer.advance() secondToken = @tokenizer.symbol() @tokenizer.backward() if secondToken != &quot;[&quot; &amp;amp;&amp;amp; secondToken != &quot;(&quot; &amp;amp;&amp;amp; secondToken != &quot;.&quot; #varName varName = self.getIndentifier() self.pushVarName(varName) @tokenizer.advance() elsif secondToken == &quot;[&quot; #varName[expression] varName = self.getIndentifier() @tokenizer.advance() @tokenizer.advance() self.compileExpression() self.pushVarName(varName) @vmWriter.writeArithmetic(&quot;add&quot;) @vmWriter.writePop(&quot;pointer&quot;, 1) #ä¿®æ”¹That @vmWriter.writePush(&quot;that&quot;, 0) @tokenizer.advance() elsif ...... end end end æ€»ç»“ æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¤§å¤šæ•°ç¨‹åºå‘˜éƒ½ä¸ä¼šå»ç¼–å†™ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬å¯¹äºç¼–è¯‘å™¨çš„å­¦ä¹ å’Œäº†è§£å¯èƒ½æ›´å¤šçš„æ¥è‡ªå¯¹ä¸€äº›æ•™æå’Œèµ„æ–™æµ…å°è¾„æ­¢åœ°é˜…è¯»ï¼Œåªæ˜¯å½¢æˆäº†ä¸€ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µï¼Œç”šè‡³è‡ªå·±éƒ½ä¼šæ€€ç–‘è‡ªå·±å¯¹å…¶ç†è§£çš„æ­£ç¡®æ€§ã€‚è™½ç„¶æ¯”èµ·åŠ¨è¾„ç™¾ä¸‡è¡Œä»£ç çš„å·¥ä¸šçº§ç¼–è¯‘å™¨ï¼ŒJackç¼–è¯‘å™¨å®åœ¨æ˜¯å¤ªè¿‡ç®€å•ï¼Œä½†æˆ‘ä»¬ä»å¯ä»¥ä»äº²è‡ªå®ç°å®ƒçš„è¿‡ç¨‹ä¸­çœŸæ­£åœ°çª¥æ¢åˆ°ç¼–è¯‘å™¨å·¥ä½œçš„åŸºæœ¬åŸç†ã€‚ åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»0åˆ°1æ„å»ºè®¡ç®—æœºç³»åˆ—çš„æ–‡ç« å°±è¦æ¥è¿‘å°¾å£°äº†ï¼Œä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šå®ç°ä¸€ä¸ªæœ€ç®€å•çš„æ“ä½œç³»ç»Ÿï¼Œæ”¯æŒé«˜çº§æ•°å­¦è¿ç®—ã€å†…å­˜åˆ†é…ã€æ•°ç»„æ“ä½œã€å­—ç¬¦ä¸²æ“ä½œã€è¾“å…¥è¾“å‡ºç­‰èƒ½åŠ›ã€‚ æœ¬ç¯‡å®Œæ•´å®ç°æ”¾åœ¨äº†:github</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(8/12)â€“é«˜çº§è¯­è¨€ï¼šJack</title><link href="/2020/02/24/%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80-Jack.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(8/12)--é«˜çº§è¯­è¨€ï¼šJack" /><published>2020-02-24T00:00:00+08:00</published><updated>2020-02-24T00:00:00+08:00</updated><id>/2020/02/24/%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80:Jack</id><content type="html" xml:base="/2020/02/24/%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80-Jack.html">&lt;p&gt;æœ¬ç¯‡æˆ‘ä»¬å°†è®¾è®¡ä¸€é—¨é«˜çº§è¯­è¨€ï¼šJackã€‚Jackæ˜¯ä¸€é—¨åŸºäºé¢å‘çš„å¯¹è±¡çš„è¯­è¨€ï¼Œå…·å¤‡ç°ä»£é«˜çº§è¯­è¨€çš„åŸºæœ¬ç‰¹æ€§å’Œé£æ ¼ï¼Œä½†æ˜¯è¯­æ³•ç›¸å¯¹ç®€å•ï¼Œä¸”ä¸æ”¯æŒç»§æ‰¿ç­‰é«˜çº§å±æ€§ï¼ˆå…¶å®Jackéå¸¸å¯’é…¸ï¼Œåªæ˜¯æ”¯æŒäº†â€œå¯¹è±¡â€çš„åŠŸèƒ½ï¼‰ã€‚æœ¬ç¯‡çš„å†…å®¹éå¸¸ç®€å•ï¼Œä¸»è¦æ˜¯ä»‹ç»Jackçš„è¯­æ³•ã€‚&lt;/p&gt;

&lt;h3 id=&quot;hello-world&quot;&gt;Hello, World&lt;/h3&gt;

&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œå­¦ä¹ ä¸€é—¨æ–°è¯­è¨€çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å†™ä¸€ä¸ª Hello, Worldã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Jackç¨‹åºè¦åŒ…å«ä¸€ä¸ªMainç±»ï¼Œä¸”åŒ…å«mainæ–¹æ³•ï¼Œè¿™æ˜¯ç¨‹åºçš„å…¥å£å‡½æ•°ã€‚&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello, World&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//æ¢è¡Œ&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ç²¾é€šjack&quot;&gt;ç²¾é€šJack&lt;/h3&gt;

&lt;p&gt;å­¦ä¹ å®Œ Hello, Worldï¼Œä¸‹é¢è®©æˆ‘ä»¬å†èŠ±5åˆ†é’Ÿæ—¶é—´æ¥ç²¾é€šJackã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class ç±»å {
	---------å˜é‡å£°æ˜åŒº-----------
	å¯ä»¥å£°æ˜2ç§å˜é‡ï¼š
	1.æˆå‘˜å˜é‡ï¼šfield
	2.é™æ€å˜é‡ï¼šstatic

	å˜é‡ç±»å‹æœ‰4ç§ï¼š
	1.åŸºæœ¬ç±»å‹ï¼šint, bool, char
	2.å¯¹è±¡ç±»å‹ï¼šè‡ªå·±å®šä¹‰çš„ç±»
	-----------------------------

	--------æ–¹æ³•å£°æ˜åŒº-------------
	å¯ä»¥å£°æ˜3ç§ç±»å‹çš„æ–¹æ³•:
	1.æ„é€ å‡½æ•°ï¼šconstructor
	2.ç±»æ–¹æ³•ï¼šfunction
	3.å®ä¾‹æ–¹å¼ï¼šmethod

	constructor å¯¹è±¡ç±»å‹ new(å…¥å‚åˆ—è¡¨) {
		......
		return thisï¼›	//constructoræœ€åä¸€å®šæ˜¯return thisï¼Œthisæ˜¯æŒ‡å‘å®ä¾‹çš„æŒ‡é’ˆ
	}
	 
	function/method è¿”å›ç±»å‹ï¼ˆå¯ä»¥æ˜¯voidï¼‰æ–¹æ³•å(å…¥å‚åˆ—è¡¨) {
		var ç±»å‹ å˜é‡å  	//ç”¨varå£°æ˜å±€éƒ¨å˜é‡
		do xxx.xxx();  	//doè¯­å¥ï¼šæ–¹æ³•è°ƒç”¨
		let a = b;	//letè¯­å¥ï¼šèµ‹å€¼è¯­å¥
		if else
		while
		return
	 }
	-----------------------------
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** ä¸€ä¸ªé“¾è¡¨ç±»ï¼Œä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¸€ä¸ªæ•´æ•°. */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;// å£°æ˜ç±»&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fieldè¯­å¥ï¼šå£°æ˜æˆå‘˜å˜é‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/* æ„é€ å‡½æ•° */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;constructor&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;car&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cdr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å‚æ•°åˆ—è¡¨&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;car&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// letè¯­å¥ï¼šè¯­å¥ç±»å‹æ˜¯èµ‹å€¼è¯­å¥&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cdr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;       
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// returnè¯­å¥&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** getter. */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getNext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** æ‰“å°é“¾è¡¨ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//methodè¯­å¥ï¼šç±»çš„å®ä¾‹æ–¹æ³•&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// varè¯­å¥ï¼šå£°æ˜å±€éƒ¨å˜é‡&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// thiså…³é”®å­—ï¼šæŒ‡å‘å½“å‰å¯¹è±¡æœ¬èº«&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//whileè¯­å¥&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// doè¯­å¥ï¼šåé¢æ¥ä¸€ä¸ªæ–¹æ³•è°ƒç”¨&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printChar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getNext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** é”€æ¯é“¾è¡¨ */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(~(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ifè¯­å¥&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;deAlloc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å›æ”¶å†…å­˜ï¼Œè°ƒç”¨æ“ä½œç³»ç»Ÿæ–¹æ³•&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fuctionè¯­å¥ï¼šå£°æ˜ç±»æ–¹æ³•&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;      
      &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;OKï¼ŒæŒæ¡äº†Jackåæˆ‘ä»¬ä¸‹ä¸€æ­¥çš„å·¥ä½œæ˜¯å®ç°Jackçš„ç¼–è¯‘å™¨ã€‚&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">æœ¬ç¯‡æˆ‘ä»¬å°†è®¾è®¡ä¸€é—¨é«˜çº§è¯­è¨€ï¼šJackã€‚Jackæ˜¯ä¸€é—¨åŸºäºé¢å‘çš„å¯¹è±¡çš„è¯­è¨€ï¼Œå…·å¤‡ç°ä»£é«˜çº§è¯­è¨€çš„åŸºæœ¬ç‰¹æ€§å’Œé£æ ¼ï¼Œä½†æ˜¯è¯­æ³•ç›¸å¯¹ç®€å•ï¼Œä¸”ä¸æ”¯æŒç»§æ‰¿ç­‰é«˜çº§å±æ€§ï¼ˆå…¶å®Jackéå¸¸å¯’é…¸ï¼Œåªæ˜¯æ”¯æŒäº†â€œå¯¹è±¡â€çš„åŠŸèƒ½ï¼‰ã€‚æœ¬ç¯‡çš„å†…å®¹éå¸¸ç®€å•ï¼Œä¸»è¦æ˜¯ä»‹ç»Jackçš„è¯­æ³•ã€‚ Hello, World ä¼—æ‰€å‘¨çŸ¥ï¼Œå­¦ä¹ ä¸€é—¨æ–°è¯­è¨€çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å†™ä¸€ä¸ª Hello, Worldã€‚ class Main { function void main() { // Jackç¨‹åºè¦åŒ…å«ä¸€ä¸ªMainç±»ï¼Œä¸”åŒ…å«mainæ–¹æ³•ï¼Œè¿™æ˜¯ç¨‹åºçš„å…¥å£å‡½æ•°ã€‚ do Output.printString(&quot;Hello, World&quot;); do Output.println(); //æ¢è¡Œ return; } } ç²¾é€šJack å­¦ä¹ å®Œ Hello, Worldï¼Œä¸‹é¢è®©æˆ‘ä»¬å†èŠ±5åˆ†é’Ÿæ—¶é—´æ¥ç²¾é€šJackã€‚ class ç±»å { ---------å˜é‡å£°æ˜åŒº----------- å¯ä»¥å£°æ˜2ç§å˜é‡ï¼š 1.æˆå‘˜å˜é‡ï¼šfield 2.é™æ€å˜é‡ï¼šstatic å˜é‡ç±»å‹æœ‰4ç§ï¼š 1.åŸºæœ¬ç±»å‹ï¼šint, bool, char 2.å¯¹è±¡ç±»å‹ï¼šè‡ªå·±å®šä¹‰çš„ç±» ----------------------------- --------æ–¹æ³•å£°æ˜åŒº------------- å¯ä»¥å£°æ˜3ç§ç±»å‹çš„æ–¹æ³•: 1.æ„é€ å‡½æ•°ï¼šconstructor 2.ç±»æ–¹æ³•ï¼šfunction 3.å®ä¾‹æ–¹å¼ï¼šmethod constructor å¯¹è±¡ç±»å‹ new(å…¥å‚åˆ—è¡¨) { ...... return thisï¼› //constructoræœ€åä¸€å®šæ˜¯return thisï¼Œthisæ˜¯æŒ‡å‘å®ä¾‹çš„æŒ‡é’ˆ } function/method è¿”å›ç±»å‹ï¼ˆå¯ä»¥æ˜¯voidï¼‰æ–¹æ³•å(å…¥å‚åˆ—è¡¨) { var ç±»å‹ å˜é‡å //ç”¨varå£°æ˜å±€éƒ¨å˜é‡ do xxx.xxx(); //doè¯­å¥ï¼šæ–¹æ³•è°ƒç”¨ let a = b; //letè¯­å¥ï¼šèµ‹å€¼è¯­å¥ if else while return } ----------------------------- } ä¸¾ä¾‹ï¼š /** ä¸€ä¸ªé“¾è¡¨ç±»ï¼Œä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¸€ä¸ªæ•´æ•°. */ class List { // å£°æ˜ç±» field int data; // fieldè¯­å¥ï¼šå£°æ˜æˆå‘˜å˜é‡ field List next; /* æ„é€ å‡½æ•° */ constructor List new(int car, List cdr) { // å‚æ•°åˆ—è¡¨ let data = car; // letè¯­å¥ï¼šè¯­å¥ç±»å‹æ˜¯èµ‹å€¼è¯­å¥ let next = cdr; return this; // returnè¯­å¥ } /** getter. */ method int getData() { return data; } method int getNext() { return next; } /** æ‰“å°é“¾è¡¨ */ method void print() { //methodè¯­å¥ï¼šç±»çš„å®ä¾‹æ–¹æ³• var List current; // varè¯­å¥ï¼šå£°æ˜å±€éƒ¨å˜é‡ let current = this; // thiså…³é”®å­—ï¼šæŒ‡å‘å½“å‰å¯¹è±¡æœ¬èº« while (~(current = null)) { //whileè¯­å¥ do Output.printInt(current.getData()); // doè¯­å¥ï¼šåé¢æ¥ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ do Output.printChar(32); let current = current.getNext(); } return; } /** é”€æ¯é“¾è¡¨ */ method void dispose() { if (~(next = null)) { // ifè¯­å¥ do next.dispose(); } do Memory.deAlloc(this); // å›æ”¶å†…å­˜ï¼Œè°ƒç”¨æ“ä½œç³»ç»Ÿæ–¹æ³• return; } } class Main { function void main() { // fuctionè¯­å¥ï¼šå£°æ˜ç±»æ–¹æ³• var List v; let v = List.new(5,null); let v = List.new(2,List.new(3,v)); do v.print(); do v.dispose(); return; } } OKï¼ŒæŒæ¡äº†Jackåæˆ‘ä»¬ä¸‹ä¸€æ­¥çš„å·¥ä½œæ˜¯å®ç°Jackçš„ç¼–è¯‘å™¨ã€‚</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(7/12)â€“å®ç°ä¸€ä¸ªè™šæ‹Ÿæœº</title><link href="/2020/02/21/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E6%9C%BA.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(7/12)--å®ç°ä¸€ä¸ªè™šæ‹Ÿæœº" /><published>2020-02-21T00:00:00+08:00</published><updated>2020-02-21T00:00:00+08:00</updated><id>/2020/02/21/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E6%9C%BA</id><content type="html" xml:base="/2020/02/21/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E6%9C%BA.html">&lt;p&gt;è®¡ç®—æœºå·¥ä½œçš„æœ¬è´¨å°±æ˜¯å¯¹å†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œå› æ­¤åªéœ€è¦å…·å¤‡ä¸¤ç§èƒ½åŠ›å³å¯ï¼š(1)å¯¹å†…å­˜çš„è¯»å’Œå†™ï¼›(2)ç”¨å¯¹æ•°æ®è¿›è¡Œç®—æ•°é€»è¾‘è¿ç®—ã€‚æ­¤å¤–ï¼Œæ”¯æŒæŒ‡ä»¤è·³è½¬èƒ½å¤§å¤§æé«˜è®¡ç®—æœºçš„å¯ç¼–ç¨‹èƒ½åŠ›ã€‚ç›´è§‚ä¸Šçœ‹ï¼ŒHackå…·å¤‡äº†ä»¥ä¸Šä¸‰é¡¹èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¸Šä¸€ç¯‡ä¹Ÿä¸¾ä¾‹äº†å¦‚ä½•å®ç°1+2+â€¦+100ã€‚ä½†Hackå’Œæˆ‘ä»¬å¸¸ç”¨çš„CPUå…·å¤‡å‡ ç™¾æ¡æŒ‡ä»¤é›†çš„èƒ½åŠ›è¿˜ç›¸å»ç”šè¿œï¼Œä¾‹å¦‚æ”¯æŒå››åˆ™è¿ç®—ï¼Œå¯¹æ ˆçš„æ“ä½œï¼ŒæŒ‡é’ˆå¯„å­˜å™¨çš„ä½¿ç”¨ï¼Œæ”¯æŒå‡½æ•°è°ƒç”¨ï¼Œå¤„ç†å…¥å‚å’Œå›å‚ç­‰ã€‚å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦åœ¨ç®€å•çš„Hackä¹‹ä¸Šï¼Œå†æ„å»ºä¸€ä¸ªæ›´åŠ å¤æ‚ï¼Œèƒ½åŠ›æ›´å¼ºçš„è™šæ‹Ÿè®¡ç®—æœºï¼Œè¿™ä¸ªè™šæ‹Ÿæœºå‘ä¸Šæä¾›äº†ä¸€å¥—æ–°çš„æ“ä½œæŒ‡ä»¤ï¼Œå³è™šæ‹Ÿæœºçš„å­—èŠ‚ç ï¼ˆåœ¨Hackä¸­è¿™å¥—å­—èŠ‚ç æ›´æ¥è¿‘æˆ‘ä»¬å¸¸ç”¨çš„CPUæŒ‡ä»¤é›†ï¼‰ï¼Œå…¶ä¸­æ¯æ¡è™šæ‹ŸæœºæŒ‡ä»¤éƒ½æ˜¯é€šè¿‡å°è£…æ±‡ç¼–å±‚ä¸€ç³»åˆ—çš„æ±‡ç¼–æŒ‡ä»¤æ¥å®ç°çš„ï¼Œåœ¨æœ¬ç¯‡ä¸­æˆ‘ä»¬ä¼šå†ä¸€æ¬¡çœ‹åˆ°åœ¨è®¡ç®—æœºç§‘å­¦ä¸­â€œå°è£…â€çš„å¼ºå¤§åŠ›é‡ã€‚&lt;/p&gt;

&lt;p&gt;è™šæ‹Ÿæœºå¯èƒ½æœ‰å¤šç§è§£é‡Šï¼Œæˆ‘ä»¬è¦å®ç°çš„è™šæ‹Ÿæœºæ˜¯ä¸€ç§ç¨‹åºè™šæ‹Ÿæœºï¼ˆç±»ä¼¼äºJavaè™šæ‹Ÿæœºï¼‰ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ”¯æŒè¿è¡Œå¹³å°æ— å…³çš„è®¡ç®—æœºç¨‹åºã€‚å…¶ä»–æ¦‚å¿µçš„è™šæ‹Ÿæœºè¿˜æœ‰ç³»ç»Ÿè™šæ‹Ÿæœºï¼Œå®Œå…¨è™šæ‹Ÿä¸€ä¸ªæ“ä½œç³»ç»Ÿå‡ºæ¥ï¼Œä¾‹å¦‚VMWareï¼ŒiOSæ¨¡æ‹Ÿå™¨ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸€ä¸ªcç¨‹åº&quot;&gt;ä¸€ä¸ªCç¨‹åº&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æ¥å†™ä¸€ä¸ªç®€å•çš„Cç¨‹åºï¼šaddã€‚ç„¶åæ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•æŠŠè¿™æ®µç¨‹åºç¿»è¯‘æˆHackä¸Šçš„æ±‡ç¼–è¯­è¨€å‘¢ï¼Ÿå¦‚æœä»…ä»…æ˜¯ç¿»è¯‘è¿™ä¸€ä¸ªç¨‹åºï¼Œè²Œä¼¼æ˜¯å¯è¡Œçš„ï¼Œä½†å¦‚æœæƒ³è¦ç›´æ¥ç¿»è¯‘ä¸€ä¸ªå¤æ‚çš„Cç¨‹åºåˆ™æ˜¯ç›¸å½“å›°éš¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹Hackå†è¿›è¡Œä¸€äº›æ‰©å±•ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬æŠŠä¸Šé¢çš„Cç¨‹åºåœ¨Macä¸Šç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åçœ‹ä¸€ä¸‹è¿™ä¸ªå®ƒåœ¨x86_64æ¶æ„ä¸‹çš„æ±‡ç¼–ä»£ç ã€‚æˆ‘ä»¬çœ‹åˆ°å®ƒçš„æ±‡ç¼–ä»£ç å¹¶ä¸å¤æ‚ï¼Œå®ƒè¢«ç¼–è¯‘æˆäº†ä¸¤ä¸ªå‡½æ•°ï¼Œç„¶åé€šè¿‡ä¸€äº›çš„push, pop, mov, add, call, returnç­‰æŒ‡ä»¤å®Œæˆã€‚è¿™äº›æŒ‡ä»¤å°±æ˜¯Hackçš„è™šæ‹Ÿæœºéœ€è¦å‚è€ƒå’Œå®ç°çš„ã€‚ä»è¿™ä¸€ç‚¹ä¸Šæ¥çœ‹ï¼ŒHackçš„è™šæ‹Ÿæœºæ›´æ¥è¿‘æˆ‘ä»¬å¸¸ç”¨çš„CPUã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc44fal8vmj30zj0u0tbs.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;stack&quot;&gt;Stack&lt;/h3&gt;

&lt;p&gt;æ— è®ºæ˜¯x86_64æ¶æ„ä¸‹çš„æ±‡ç¼–æŒ‡ä»¤ï¼Œè¿˜æ˜¯æˆ‘ä»¬éœ€è¦å®ç°çš„Hackè™šæ‹Ÿæœºï¼Œéƒ½éœ€è¦æ”¯æŒå››ç§åŸºæœ¬æ“ä½œï¼š&lt;strong&gt;ç®—æ•°é€»è¾‘æ“ä½œï¼Œå†…å­˜è®¿é—®æ“ä½œï¼Œç¨‹åºæµç¨‹æ§åˆ¶ï¼Œå‡½æ•°è°ƒç”¨&lt;/strong&gt;ã€‚æƒ³è¦æ–¹ä¾¿çš„å®ç°è¿™äº›æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šå †æ ˆï¼ˆstackï¼‰ã€‚&lt;strong&gt;ç»è¯æ˜ï¼Œé€šè¿‡å †æ ˆæ“ä½œï¼Œèƒ½å¤Ÿå®ç°ä»»ä½•æ•°å­¦æˆ–é€»è¾‘è¡¨è¾¾å¼ï¼›ä»»ä½•ç¨‹åºï¼Œæ— è®ºç”¨ä»€ä¹ˆè¯­è¨€ç¼–å†™ï¼Œéƒ½èƒ½å¤Ÿè¢«ç¿»è¯‘æˆç­‰ä»·çš„å †æ ˆæœºè¯­è¨€&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;push--pop&quot;&gt;Push &amp;amp; Pop&lt;/h3&gt;

&lt;p&gt;æ—¢ç„¶æ˜¯æ ˆçš„ä½¿ç”¨ï¼Œé‚£è‚¯å®šå°‘ä¸äº†Pushå’ŒPopæ“ä½œã€‚SPï¼ˆStack Pointerï¼‰æŒ‡é’ˆæ˜¯è¿™ä¸¤é¡¹æ“ä½œçš„å…³é”®ï¼Œ&lt;strong&gt;SPæŒ‡é’ˆå®æ—¶åœ°æŒ‡å‘æ ˆé¡¶&lt;/strong&gt;ï¼šPushæ“ä½œæŠŠä¸€ä¸ªæ•°ï¼ˆå¯ä»¥æ˜¯å†…å­˜ä¸­çš„æŸä¸ªæ•°ï¼‰å‹å…¥æ ˆé¡¶ï¼Œç„¶åSPåŠ 1ï¼ˆå¦‚æœæ ˆä»ä¸Šå‘ä¸‹ç”Ÿé•¿å°±å‡1ï¼‰ï¼›Popæ“ä½œæŠŠæ ˆé¡¶çš„æ•°å¼¹å‡ºï¼ˆå¯ä»¥å¼¹å‡ºåˆ°æŸä¸ªå†…å­˜åœ°å€ï¼‰ï¼Œç„¶åSPå‡1ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc49n0apfxj31a60oqdgh.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;å†…å­˜åˆ’åˆ†&quot;&gt;å†…å­˜åˆ’åˆ†&lt;/h3&gt;

&lt;p&gt;å†…å­˜åˆ’åˆ†æ˜¯Hackè™šæ‹Ÿæœºä¸­å¦ä¸€ä¸ªé‡è¦ä¸»é¢˜ã€‚Hackçš„å†…å­˜ç”±32Kçš„16ä½å­—ç»„æˆï¼Œå…¶ä¸­å‰16Kæ˜¯é€šç”¨å†…å­˜ï¼Œå16Kæ˜¯I/Oè®¾å¤‡çš„å†…å­˜æ˜ åƒã€‚&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;       0-15ï¼š16ä¸ªè™šæ‹Ÿå¯„å­˜å™¨(Hackå¯„å­˜å™¨ä¸å¤Ÿç”¨äº†)
     16-255ï¼šé™æ€å˜é‡åŒº
   256-2047ï¼šæ ˆ
 2048-16383ï¼šå †
16384-24575ï¼šI/Oå†…å­˜æ˜ åƒ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;0-15ä½å†…å­˜å’Œå¯„å­˜å™¨çš„æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;SP&quot;=&amp;gt;&quot;000000000000000&quot;, &quot;LCL&quot;=&amp;gt;&quot;000000000000001&quot;, &quot;ARG&quot;=&amp;gt;&quot;000000000000010&quot;, &quot;THIS&quot;=&amp;gt;&quot;000000000000011&quot;, &quot;THAT&quot;=&amp;gt;&quot;000000000000100&quot;, 
&quot;R0&quot;=&amp;gt;&quot;000000000000000&quot;, &quot;R1&quot;=&amp;gt;&quot;000000000000001&quot;, &quot;R2&quot;=&amp;gt;&quot;000000000000010&quot;, &quot;R3&quot;=&amp;gt;&quot;000000000000011&quot;, 
&quot;R4&quot;=&amp;gt;&quot;000000000000100&quot;, &quot;R5&quot;=&amp;gt;&quot;000000000000101&quot;, &quot;R6&quot;=&amp;gt;&quot;000000000000110&quot;, &quot;R7&quot;=&amp;gt;&quot;000000000000111&quot;, 
&quot;R8&quot;=&amp;gt;&quot;000000000001000&quot;, &quot;R9&quot;=&amp;gt;&quot;000000000001001&quot;, &quot;R10&quot;=&amp;gt;&quot;000000000001010&quot;, &quot;R11&quot;=&amp;gt;&quot;000000000001011&quot;, 
&quot;R12&quot;=&amp;gt;&quot;000000000001100&quot;, &quot;R13&quot;=&amp;gt;&quot;000000000001101&quot;, &quot;R14&quot;=&amp;gt;&quot;000000000001110&quot;, &quot;R15&quot;=&amp;gt;&quot;000000000001111&quot;,
&quot;SCREEN&quot;=&amp;gt;&quot;100000000000000&quot;, &quot;KBD&quot;=&amp;gt;&quot;110000000000000&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è™šæ‹Ÿæœºæ“çºµ8ä¸ªç‹¬ç«‹çš„&lt;strong&gt;è™šæ‹Ÿå†…å­˜æ®µ&lt;/strong&gt;ã€‚åœ¨è¿™é‡Œè™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æŠ€å·§ï¼Œå†…å­˜æ®µéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªå‡½æ•°éƒ½å¯ä»¥é€šè¿‡å›ºå®šçš„å‡ ä¸ªæŒ‡é’ˆï¼ˆR0-R15ï¼‰æ¥è®¿é—®è¿™äº›å†…å­˜æ®µï¼Œçœ‹ä¸Šå»æ¯ä¸ªå†…å­˜æ®µéƒ½æ˜¯å®ƒä»¬ç‹¬äº«çš„ï¼ˆæœ‰äº›æ˜¯å…±äº«çš„ï¼‰ï¼Œè€Œä¸å¿…å…³å¿ƒä»–ä»¬çš„ç‰©ç†åœ°å€åœ¨å“ªé‡Œï¼Œæ˜¯å¦ä¼šå’Œå…¶ä»–å‡½æ•°å†²çªç­‰ã€‚è¿™æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§å°è£…ï¼Œè¿™ç§å°è£…å‘ä¸Šæä¾›ä¸€ç§æ ‡å‡†çš„å†…å­˜è®¿é—®æ–¹å¼ï¼Œå‘ä¸‹äº†å®ç°è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„æ˜ å°„å’Œç®¡ç†ï¼ˆç±»ä¼¼äºæ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹åœ°å€ç©ºé—´çš„æ˜ å°„ï¼‰ã€‚è¿™å¤§å¤§é™ä½äº†è™šæ‹Ÿæœºä½¿ç”¨è€…çš„éš¾åº¦ï¼ŒæŠŠå¤æ‚çš„å·¥ä½œäº¤ç»™äº†è™šæ‹Ÿæœºæœ¬èº«ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc4bnrpe9fj30wf0u0djx.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»£ç å’Œå†…å­˜æ®µçš„å…³ç³»ã€‚ä¸€ä¸ªç±»è¢«ç¼–è¯‘æˆä¸€ä¸ª.VMæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è‹¥å¹²ä¸ªå‡½æ•°å®ç°f1, f2, f3ã€‚tempå’Œconstæ®µæ˜¯è¿›ç¨‹çº§åˆ«å…±äº«çš„ï¼›staticæ®µæ˜¯ç±»çº§åˆ«å…±äº«çš„ï¼›argumentã€localã€thisã€thatã€pointeræ˜¯å‡½æ•°çº§åˆ«çš„ç‹¬äº«çš„ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„è¿™5ä¸ªå†…å­˜æ®µï¼Œä½†æ¯ä¸ªå‡½æ•°è®¿é—®å®ƒä»¬çš„æ–¹å¼å´æ˜¯ä¸€è‡´çš„ï¼ˆå³é€šè¿‡R1-R5æŒ‡é’ˆï¼‰&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc4c6ry36pj30zq0u0q44.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;å†…å­˜è®¿é—®å‘½ä»¤&quot;&gt;å†…å­˜è®¿é—®å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;æ‰€æœ‰çš„å†…å­˜æ®µè®¿é—®éƒ½é€šè¿‡2æ¡å‘½ä»¤å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;push segement index 		å°†segement[index]çš„å€¼å‹å…¥å †æ ˆ&lt;/li&gt;
  &lt;li&gt;pop  segement index 		å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œç„¶åå­˜å…¥segement[index]&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;push locol 0 		#æŠŠlocolæ®µç¬¬ä¸€ä¸ªä½ç½®çš„å€¼å‹å…¥å †æ ˆ
push constant 123 	#æŠŠå¸¸æ•°123å‹å…¥å †æ ˆ
pop static 1 		#æŠŠæ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œå­˜å…¥staticçš„ç¬¬äºŒä¸ªä½ç½®
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc51adti2gj31000gumxq.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;å®ç°&quot;&gt;å®ç°&lt;/h4&gt;

&lt;p&gt;pushå’ŒpopæŒ‡ä»¤çš„ä½œç”¨å°±æ˜¯åœ¨æ ˆé¡¶å†…å­˜å’Œæ®µå†…å­˜ä¹‹é—´äº’ç›¸æ¬è¿æ•°å€¼ã€‚SPæŒ‡é’ˆç”¨äºæ ‡è¯†æ ˆé¡¶å†…å­˜ï¼ŒsegementåŸºåœ°å€+åç§»é‡ç”¨äºæ ‡è¯†æ®µå†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ç³»åˆ—å¯„å­˜å™¨å’Œå†…å­˜æ“ä½œï¼ˆåˆ©ç”¨Aå¯„å­˜å™¨å®šä½å†…å­˜åœ°å€ï¼ŒDå¯„å­˜å™¨æš‚å­˜æ•°å€¼ç­‰æ“ä½œï¼‰å®ç°è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writePushPop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;			&lt;span class=&quot;c1&quot;&gt;#å®ç°push, popå‘½ä»¤&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'C_PUSH'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'constant'&lt;/span&gt; 		&lt;span class=&quot;c1&quot;&gt;#push const&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushConstant&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'C_PUSH'&lt;/span&gt; 							
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passArgsAddressToA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#A=æ®µåœ°å€+åç§»åœ°å€&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 			&lt;span class=&quot;c1&quot;&gt;#æ®µå†…å­˜çš„å€¼å­˜åˆ°D&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushDtoStack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;			&lt;span class=&quot;c1&quot;&gt;#push Dåˆ°æ ˆé¡¶ï¼Œsp+1&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'C_POP'&lt;/span&gt; 							
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passArgsAddressToA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#A=æ®µåœ°å€+åç§»åœ°å€&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getStackTopToD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;			&lt;span class=&quot;c1&quot;&gt;#æ ˆé¡¶çš„å€¼å­˜åˆ°D&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 			&lt;span class=&quot;c1&quot;&gt;#pop Dåˆ°æ®µå†…å­˜&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=M-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 			&lt;span class=&quot;c1&quot;&gt;#spå‡1&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
		&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;	
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pushConstant&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 		&lt;span class=&quot;c1&quot;&gt;#å®ç°ç®€å•çš„push const&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushDtoStack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pushDtoStack&lt;/span&gt;			&lt;span class=&quot;c1&quot;&gt;#æŠŠDå¯„å­˜å™¨çš„å€¼pushåˆ°æ ˆé¡¶ï¼Œsp+1&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=M+1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getStackTopToD&lt;/span&gt;			&lt;span class=&quot;c1&quot;&gt;#æŠŠæ ˆé¡¶çš„å€¼å­˜åˆ°Då¯„å­˜å™¨ï¼Œspä¸å˜&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@R13&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#å…ˆæŠŠAçš„å€¼æš‚å­˜åˆ°R13ï¼Œåé¢åœ¨è¿˜åŸAå¯„å­˜å™¨ï¼ˆä¿å­˜ç°åœºï¼‰&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#å–å‡ºå€¼æ”¾å…¥D&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@R13&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#æ¢å¤A&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;passArgsAddressToA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;#æŠŠå†…å­˜åœ°å€å­˜åˆ°A&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;static&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@source_file_name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#æ–‡ä»¶å+indexä½œä¸ºstaticçš„ç¬¦å·&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 		&lt;span class=&quot;c1&quot;&gt;#D=indexåç§»é‡&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;temp&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@R5&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A+D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#A=tempåœ°å€+åç§»é‡&lt;/span&gt;
		&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;æ‰§è¡Œäº†&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pointer&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@THIS&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A+D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#A=THIS+åç§»é‡&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M+D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#A=æ®µå†…å­˜æŒ‡é’ˆæŒ‡å‘çš„æ®µåŸºåœ°å€+åç§»é‡&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ç®—æ•°é€»è¾‘è¿ç®—å‘½ä»¤&quot;&gt;ç®—æ•°é€»è¾‘è¿ç®—å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬è¿˜éœ€è¦å®ç°è‹¥å¹²ä¸€å…ƒæˆ–äºŒå…ƒçš„ç®—æ•°&amp;amp;é€»è¾‘è¿ç®—å‘½ä»¤ï¼ŒåŒ…æ‹¬äºŒå…ƒåŠ å‡æ³•ï¼Œä¸¤ä¸ªæ•°çš„æ¯”è¾ƒï¼Œä¸æˆ–éï¼Œå–åæ“ä½œã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰å®ç°æµ®ç‚¹æ•°æ“ä½œï¼Œä¹Ÿæ²¡æœ‰å®ç°ä¹˜é™¤æ³•ï¼ˆåé¢æˆ‘ä»¬ä¼šåœ¨è½¯ä»¶çš„å±‚é¢å®ç°ä¹˜é™¤æ³•ï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc56ao98qxj30w00k2js2.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬ä»¥ä¸‹é¢çš„ä¼ªå‘½ä»¤ä¸ºä¾‹ï¼Œçœ‹ä¸‹å¦‚ä½•åˆ©ç”¨æ ˆæ¥è¿›è¡Œç®—æ•°é€»è¾‘è¿ç®—ã€‚è¿ç®—x+yæ—¶ï¼Œæ˜¯ä¸€ç§ä»¥åç¼€è¡¨è¾¾å¼å½¢å¼çš„è¿ç®—ï¼šå…ˆæŠŠxå…¥æ ˆï¼Œsp+1ï¼›ç„¶åæŠŠyå…¥æ ˆï¼Œsp+1ï¼Œç„¶åè®¡ç®—åŠ æ³•ï¼ŒæŠŠç»“æœå€¼å­˜å…¥å½“å‰xçš„ä½ç½®ï¼Œsp-2ã€‚ä¸€å…ƒè¿ç®—åˆ™æ›´ç®€å•ï¼Œè¿ç®—-xæ—¶ï¼šå…ˆæŠŠxå…¥æ ˆï¼Œsp=1ï¼Œç„¶åå–åï¼ŒæŠŠç»“æœå€¼å­˜å…¥å½“å‰xçš„ä½ç½®ï¼Œsp-1ã€‚&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// d=(2-x)*(y+5)
push 2
push x
sub
push y
push 5
add
mult
pop d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc56iuqmzsj319g0qu3zg.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;å®ç°-1&quot;&gt;å®ç°&lt;/h4&gt;

&lt;p&gt;åœ¨å®ç°ä¸Šä¸»è¦æ€è·¯æ˜¯åˆ©ç”¨Då¯„å­˜å™¨é…åˆSPæŒ‡é’ˆï¼Œä¾‹å¦‚x+yï¼šæŠŠyèµ‹å€¼ç»™Dï¼Œç„¶åSPæŒ‡å‘xï¼Œç„¶åD=D+Mï¼Œæœ€åæŠŠDå†èµ‹å€¼ç»™SPæŒ‡å‘çš„å†…å­˜ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;arithmetic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'add'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;#D=y&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=D+M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#D=x+y&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;#spé‡ç½®&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sub'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M-D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#D=x-y&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'neg'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=-D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#M=-D&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'eq'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compare&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;JEQ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'gt'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compare&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;JGT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'lt'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compare&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;JLT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'and'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=D&amp;amp;M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#D=x&amp;amp;y&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'or'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=D|M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#D=x|y&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resetSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'not'&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passYtoD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=!D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;passYtoD&lt;/span&gt;				&lt;span class=&quot;c1&quot;&gt;#yèµ‹å€¼ç»™Då¯„å­˜å™¨&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;#sp-1åæŒ‡å‘y&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#D=y&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;resetSP&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D+1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#SPæŒ‡é’ˆé‡ç½®&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compare&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 			&lt;span class=&quot;c1&quot;&gt;#xyå¤§å°æ¯”è¾ƒã€‚&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M-D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#D=x-y&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@branchLabel_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@branchIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=0&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#0(0x0000)ä»£è¡¨false&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@mergeLabel_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@mergeIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0;JMP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(branchLabel_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@branchIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 	&lt;span class=&quot;c1&quot;&gt;#-1(0xFFFF)ä»£è¡¨true&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(mergeLabel_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@mergeIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@branchIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@branchIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@mergeIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@mergeIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ç¨‹åºæµç¨‹æ§åˆ¶å‘½ä»¤&quot;&gt;ç¨‹åºæµç¨‹æ§åˆ¶å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;è®¡ç®—æœºé»˜è®¤çš„æ‰§è¡Œé¡ºåºæ˜¯çº¿æ€§çš„ï¼Œç¨‹åºæµç¨‹æ§åˆ¶è¿™ä¸€èŠ‚æˆ‘ä»¬éœ€è¦å®ç°è·³è½¬åŠŸèƒ½å’Œåˆ†æ”¯åŠŸèƒ½ï¼Œå³ä»¥ä¸‹ä¸‰ä¸ªæŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	labelï¼šç”¨äºæ ‡è¯†æŒ‡ä»¤åœ°å€
   goto labelï¼šæ— æ¡ä»¶è·³è½¬åˆ°æŒ‡ä»¤åœ°å€
if_goto labelï¼šå…ˆå¼¹å‡ºå¹¶åˆ¤æ–­æ ˆé¡¶å€¼ï¼Œé0æ—¶è·³è½¬ï¼Œå¦åˆ™çº¿æ€§æ‰§è¡Œ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc69u6g16cj30vo0pywfi.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;å®ç°-2&quot;&gt;å®ç°&lt;/h4&gt;
&lt;p&gt;è¿™ä¸‰æ¡æŒ‡ä»¤çš„å®ç°éå¸¸ç®€å•ã€‚åŸå› æ˜¯è¿™é‡Œlabelæ‰®æ¼”äº†é‡è¦çš„åŠŸèƒ½ï¼Œç”±äºä¸‹å±‚çš„æ±‡ç¼–å™¨æ”¯æŒæŠŠlabelè¯†åˆ«æˆæŒ‡ä»¤åœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°±ä¸å¿…å†å…³å¿ƒéœ€è¦è·³è½¬çš„å…·ä½“åœ°å€ï¼Œçœå»äº†å¾ˆå¤šå·¥ä½œã€‚è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°åªè¦ä¸‹å±‚è®¾è®¡å°è£…çš„å¥½ï¼Œå°±ä¼šå¤§å¤§é™ä½ä¸Šå±‚çš„å®ç°éš¾åº¦ã€‚&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeGoto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0;JMP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;#æ— æ¡ä»¶è·³è½¬&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeIf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=A-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;#æ ˆé¡¶å€¼å­˜åˆ°D&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=M-1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;   	&lt;span class=&quot;c1&quot;&gt;#æŒ‡é’ˆå‡1&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D;JNE&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;#Dé0æ—¶è·³è½¬&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å‡½æ•°è°ƒç”¨å‘½ä»¤&quot;&gt;å‡½æ•°è°ƒç”¨å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;å‡½æ•°è°ƒç”¨æ˜¯Hackè™šæ‹Ÿæœºå®ç°æœ€å¤æ‚çš„ä¸€èŠ‚ã€‚ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯ä¸€ç³»åˆ—å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ï¼Œæ¯ä¸ªå‡½æ•°æ‰§è¡Œè‹¥å¹²æŒ‡ä»¤ï¼Œæ“ä½œå‡½æ•°ä¸­çš„å‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡ã€é™æ€å˜é‡ä¸‰ç§å˜é‡ã€‚å¦‚æœç¨‹åºåªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå·¥ä½œå¹¶ä¸å¤æ‚ï¼Œå› ä¸ºå‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡ã€é™æ€å˜é‡éƒ½æ˜¯é™æ€çš„ï¼Œæå‰åˆ†é…å¥½çš„ï¼Œç›´æ¥å»ä½¿ç”¨å°±è¡Œäº†ï¼›ä½†æ˜¯å¦‚æœç¨‹åºæ˜¯ç”±å¤šä¸ªå‡½æ•°ç»„æˆçš„ï¼Œé‚£ä¹ˆè¿™äº›å˜é‡åœ¨æ ˆä¸Šå°±æ˜¯åŠ¨æ€çš„ï¼ˆå‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡æ˜¯åŠ¨æ€çš„ï¼Œé™æ€å˜é‡è¿˜æ˜¯é™æ€çš„ï¼‰ï¼Œå®ƒä»¬çš„ä¸ªæ•°ï¼Œåˆ†é…çš„ä½ç½®éƒ½æ˜¯åœ¨åŠ¨æ€å˜åŒ–çš„ï¼Œå¤„ç†èµ·æ¥å°±éå¸¸å¤æ‚ã€‚Hackè™šæ‹Ÿæœºä¸­å‡½æ•°è°ƒç”¨éƒ¨åˆ†çš„ä»»åŠ¡å°±æ˜¯&lt;strong&gt;æŠŠè¿™ç§åŠ¨æ€å†è½¬å˜æˆé™æ€&lt;/strong&gt;ï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¸ºå®ƒæ„å»ºä¸€ä¸ªç§æœ‰ç©ºé—´ï¼ˆframeï¼‰ï¼ŒæŠŠå®ƒå°é—­åœ¨ä¸€ä¸ªâ€œä¸ä¸–éš”ç»çš„è‡ªæˆ‘ä¸–ç•Œâ€ï¼ˆè¯¥ä¸–ç•ŒåªåŒ…æ‹¬å·²ç»åˆå§‹åŒ–çš„å‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡å’Œä¸€ä¸ªç©ºçš„æ ˆç©ºé—´ï¼‰ï¼Œç„¶åè¯¥å‡½æ•°åœ¨è¿™ä¸ªç§æœ‰ç©ºé—´å†…ç›´æ¥è‡ªå·±çš„å‘½ä»¤ã€‚ä»è¯¥å‡½æ•°çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä¸æ„ŸçŸ¥å…¶ä»–å‡½æ•°çš„å­˜åœ¨ï¼Œå°±å¥½åƒç¨‹åºåªæœ‰ä¸€ä¸ªå‡½æ•°ä¸€æ ·ï¼Œåˆå˜æˆäº†é™æ€ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc6ahg2sl5j31540cm74h.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;è¿™ä¸€èŠ‚æˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹3ä¸ªæŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function f nï¼šä¸‹é¢æ˜¯ä¸€æ®µå‡½æ•°åä¸ºfçš„ä»£ç ï¼Œè¯¥å‡½æ•°æœ‰nä¸ªå‚æ•°
    call f mï¼šè°ƒç”¨å‡½æ•°fï¼Œä¸”è°ƒç”¨å‰å·²å°†mä¸ªå‚æ•°å‹å…¥æ ˆ
      returnï¼šè¿”å›åˆ°è°ƒç”¨è€…
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‡½æ•°çš„è°ƒç”¨ä¹Ÿæ˜¯é€šè¿‡æ ˆå®ç°çš„ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºä¸ºå‡½æ•°åˆ†é…ä¸€å—æ–°çš„å†…å­˜ï¼ˆframeï¼‰ï¼Œå‡½æ•°ç»“æŸæ—¶ï¼Œåˆ™å›æ”¶è¿™å—å†…å­˜ã€‚å‡½æ•°è°ƒç”¨æ¯åŠ æ·±ä¸€å±‚ï¼Œframeå¢é•¿ä¸€å—ï¼Œæ¯returnä¸€å±‚ï¼Œframeç¼©å‡ä¸€å—ï¼Œå› æ­¤æ— é™é€’å½’çš„å‡½æ•°ä¼šæ¶ˆè€—æ— é™çš„frameï¼Œå¯¼è‡´æ ˆå†…å­˜æº¢å‡ºã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc6dpovpr7j31100nojss.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨å’Œè¿”å›è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1.è°ƒç”¨å‡½æ•°å°†å‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°
2.ä¿å­˜è°ƒç”¨å‡½æ•°çš„å½“å‰çŠ¶æ€
3.è·³è½¬è‡³è¢«è°ƒç”¨å‡½æ•°
4.ä¸ºè¢«è°ƒç”¨å‡½æ•°åˆ†é…å±€éƒ¨å˜é‡ç©ºé—´å¹¶åˆå§‹åŒ–
5.æ‰§è¡Œè¢«è°ƒç”¨å‡½æ•°æŒ‡ä»¤åºåˆ—
6.è¢«è°ƒç”¨å‡½æ•°å°†å›å‚ä¼ é€’ç»™è°ƒç”¨å‡½æ•°
7.æ¢å¤è°ƒç”¨å‡½æ•°çš„çŠ¶æ€
8.å›æ”¶è¢«è°ƒç”¨å‡½æ•°ä½¿ç”¨çš„å†…å­˜ç©ºé—´
9.è¿”å›åˆ°ä¹‹å‰è°ƒç”¨å‡½æ•°çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ ˆä¸Šçš„å†…å­˜ä½¿ç”¨å’Œå¯„å­˜å™¨çŠ¶æ€å¦‚ä¸‹å›¾ã€‚è°ƒç”¨è€…åœ¨æŠŠå‡½æ•°å…¥å‚pushåˆ°æ ˆä¸Šåï¼ŒargumentæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°ï¼›ç„¶åæŠŠå‡½æ•°çš„è¿”å›æŒ‡ä»¤åœ°å€å…¥æ ˆï¼›ç„¶åä¿å­˜è°ƒç”¨è€…çš„localã€argumentã€thisã€thatæŒ‡é’ˆï¼›ç„¶åæ ¹æ®è¢«è°ƒç”¨è€…å±€éƒ¨å˜é‡æ•°é‡ä¸ºå…¶åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶æŠŠLocalæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼›æœ€åæŠŠSPæŒ‡é’ˆæŒ‡å‘æ ˆé¡¶ï¼Œæ ˆé¡¶åé¢çš„å†…å­˜ç©ºé—´éƒ½æ˜¯è¢«è°ƒç”¨è€…çš„å·¥ä½œåŒºã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc6e1ow0z0j30sm15e0tn.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;

&lt;p&gt;è¢«è°ƒç”¨è€…æ‰§è¡Œå®Œæ¯•åï¼ŒæŠŠè¿”å›å€¼popåˆ°ç¬¬ä¸€ä¸ªå…¥å‚çš„ä½ç½®ï¼ˆå¦‚æœè¿”å›ç±»å‹ä¸ºvoidï¼Œå°±å†ä¸¢å¼ƒè¿™ä¸ªè¿”å›å€¼ï¼‰ï¼›æ¢å¤è°ƒç”¨è€…çš„å„ç§å¯„å­˜å™¨æŒ‡é’ˆï¼›ç„¶åé€šè¿‡é‡ç½®SPæŒ‡é’ˆæ¥å›æ”¶è¢«è°ƒç”¨è€…çš„å†…å­˜ï¼ˆå¹¶æ²¡æœ‰ä¿®æ”¹è¢«è°ƒç”¨è€…frameå†…å­˜çš„æ•°æ®ï¼Œåªæ˜¯é‡ç½®äº†æ ˆé¡¶çš„ä½ç½®ï¼Œåé¢å®ƒä»¬å°†ä¼šè¢«æ–°çš„å‡½æ•°è¦†ç›–ï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc6e1rab8xj31tq0su76b.jpg&quot; width=&quot;1000&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;å®ç°-3&quot;&gt;å®ç°&lt;/h4&gt;
&lt;h5 id=&quot;callæŒ‡ä»¤&quot;&gt;callæŒ‡ä»¤&lt;/h5&gt;

&lt;p&gt;å®ç°callæŒ‡ä»¤ï¼Œé¦–å…ˆéœ€è¦pushè°ƒç”¨è€…çš„è¿”å›åœ°å€ï¼Œè¿”å›åœ°å€ç”¨â€œç¬¦å·å+indexâ€çš„æ–¹å¼æ ‡è¯†ï¼Œindexçš„ç›®çš„æ˜¯é˜²æ­¢è¿”å›åœ°å€é‡åï¼Œæ¯ç¿»è¯‘ä¸€æ¬¡callæŒ‡ä»¤åindexéœ€è¦+1ï¼›ç„¶åä¿å­˜å‡ ä¸ªå¯„å­˜å™¨çš„çŠ¶æ€ï¼›ç„¶åæ›´æ–°ARGå’ŒLCLï¼Œå…¶ä¸­ARG=SP-n-5ï¼ˆå‚è€ƒä¸Šé¢çš„å†…å­˜åˆ†å¸ƒå›¾ï¼‰ï¼ŒLCL = SPï¼›æœ€åæ‰§è¡Œgotoè·³è½¬æŒ‡ä»¤ã€‚å› ä¸ºè°ƒç”¨å‡½æ•°returnåè¿˜è¦è¿”å›gotoæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ ‡ç»§ç»­æ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦åœ¨æœ€åè¡¥å……ä¸€ä¸ªè¿”å›åœ°å€labelã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;call f n ä¼ªä»£ç 
--------------------
push return-address 	//è¿”å›åœ°å€å…¥æ ˆ
push LCL 		//ä¿å­˜å¯„å­˜å™¨æŒ‡é’ˆ
push ARG
push THIS
push THAT
ARG = SP-n-5 		//é‡ç½®ARGï¼Œç¬¬ä¸€ä¸ªå…¥å‚çš„ä½ç½®æ˜¯å½“å‰SPæŒ‡é’ˆå‡nå†å‡5
LCL = SP 		//é‡ç½®LCLï¼Œç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡çš„ä½ç½®æ˜¯å½“å‰SPçš„ä½ç½®
goto f 			//è·³è½¬åˆ°f
(return-address) 	//labelæ ‡è¯†ï¼Œreturnåè¿”å›è¿™é‡Œæ‰§è¡Œ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeCall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;functionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numArgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;writePushPop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;C_PUSH&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;constant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;callLabel&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@callIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;saveSegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;LCL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;saveSegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ARG&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;saveSegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;THIS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;saveSegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;THAT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;resetARG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numArgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;resetLCL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;callJump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;functionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;callLabel&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@callIndex&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@callIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@callIndex&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ä¿å­˜å¯„å­˜å™¨çš„å€¼&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;saveSegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 	
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushDtoStack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ARGè®¾ç½®ä¸ºSPæŒ‡é’ˆå‘å‰ç§»åŠ¨stepæ­¥&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;resetARG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 		
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=D-A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@ARG&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# é‡ç½®LCLï¼Œç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡çš„ä½ç½®æ˜¯å½“å‰SPçš„ä½ç½®&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;resetLCL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 			
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@LCL&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è·³è½¬æ‰§è¡Œ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;callJump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;functionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;returnLabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 	
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;functionName&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0;JMP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;returnLabel&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;functionæŒ‡ä»¤&quot;&gt;functionæŒ‡ä»¤&lt;/h5&gt;

&lt;p&gt;function f m æŒ‡ä»¤æ¯”è¾ƒç®€å•ã€‚m ä»£è¡¨å‡½æ•° f ä¸­æœ‰ m ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥åªéœ€è¦è¿ç»­push m æ¬¡0å³å¯ï¼šå¼€è¾Ÿäº† m ä¸ªå†…å­˜ç©ºé—´ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º0ï¼ˆæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„é«˜çº§è¯­è¨€ä¸­ï¼Œä¸åŒç±»å‹çš„å˜é‡å çš„å­—èŠ‚æ•°å¯èƒ½ä¸åŒã€‚Hackè¿›è¡Œäº†ç®€åŒ–ï¼Œæ‰€æœ‰åŸºæœ¬ç±»å‹çš„å˜é‡éƒ½å ç”¨ä¸€ä¸ªå­—çš„å†…å­˜ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeFunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;funtionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numArgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;(&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;funtionName&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#é¦–å…ˆç”¨ï¼ˆfuntionNameï¼‰æ¥æ ‡è¯†å‡½æ•°åœ°å€&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numArgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;writePushPop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;C_PUSH&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;constant&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;returnæŒ‡ä»¤&quot;&gt;returnæŒ‡ä»¤&lt;/h5&gt;

&lt;p&gt;returnæŒ‡ä»¤é¦–å…ˆéœ€è¦æŠŠè¿”å›å€¼popåˆ°argument 0ï¼Œå³è°ƒç”¨è€…çš„æ ˆé¡¶ï¼›ç„¶åé‡ç½®ä¸€ç³»åˆ—å¯„å­˜å™¨æŒ‡é’ˆï¼›æœ€åè·³è½¬åˆ°è¿”å›åœ°å€ã€‚è¿™é‡Œæ¯”è¾ƒå¤æ‚çš„åœ°æ–¹æ˜¯å¦‚ä½•å®‰æ’å„ä¸ªæ•°å€¼çš„æ¢å¤é¡ºåºï¼Œå› ä¸ºé¡ºåºä¸å½“å¯èƒ½å¯¼è‡´ä¸€äº›å€¼è¢«ç ´åã€‚ä¾‹å¦‚é€”ä¸­LCLè¢«æ¢å¤äº†ï¼Œå¯¼è‡´æœ€åå–ä¸åˆ°returnçš„åœ°å€ï¼Œæˆ‘åœ¨è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯å…ˆæŠŠreturnåœ°å€å¯„å­˜åˆ°ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œåé¢å†å–å‡ºæ¥ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;return ä¼ªä»£ç 
--------------------
pop argument 0 	//popè¿”å›å€¼åˆ°argument 0
SP = ARG + 1 	//é‡ç½®SPæŒ‡é’ˆ
restore THAT 	//æ¢å¤å¯„å­˜å™¨æŒ‡é’ˆ
restore THIS
restore ARG
restore LCL
goto RET 	//è·³è½¬åˆ°è¿”å›åœ°å€
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;writeReturn&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;saveReturnAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;writePushPop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;C_POP&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;argument&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;restoreSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;restoreSegement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;THAT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;restoreSegement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;THIS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;restoreSegement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ARG&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;restoreSegement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;LCL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;gotoReturnAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# æš‚å­˜returnåœ°å€åˆ°R14ï¼ˆæœ€åå–returnåœ°å€æ—¶éœ€è¦ç”¨LCL-5æ¥å®šä½ï¼Œè€Œé€”ä¸­LCLä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠŠreturnåœ°å€æš‚å­˜èµ·æ¥ï¼ŒR13è¢«getStackTopToDå ç”¨äº†ï¼‰&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;saveReturnAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@5&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@LCL&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M-D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@R14&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# é‡ç½®SPæŒ‡é’ˆ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;restoreSP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@ARG&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M+1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@SP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# æ¢å¤å¯„å­˜å™¨æŒ‡é’ˆ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;restoreSegement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
	&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;THAT&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;THIS&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ARG&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;LCL&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=A&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@LCL&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M-D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;D=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;M=D&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# returnåˆ°ä¸Šä¸€çº§å‡½æ•°ç»§ç»­æ‰§è¡Œ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gotoReturnAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;@R14&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A=M&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ä»R14å–å‡ºç¼“å­˜çš„returnåœ°å€&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0;JMP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;vi&quot;&gt;@sam_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asm_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä»ä¸­å­¦åˆ°ä»€ä¹ˆ&quot;&gt;ä»ä¸­å­¦åˆ°ä»€ä¹ˆ&lt;/h3&gt;

&lt;p&gt;é€šè¿‡æœ¬ç¯‡çš„å®è·µï¼Œæˆ‘ä»¬æŒæ¡äº†CPUåœ¨æ ˆä¸Šçš„å·¥ä½œæ–¹å¼ï¼Œå°¤å…¶æ˜¯äº†è§£äº†æ ˆå¯¹å‡½æ•°è°ƒç”¨çš„æ”¯æŒã€‚è¿™äº›æŒ‡ä»¤å’Œæˆ‘ä»¬å¸¸ç”¨çš„CPUæ±‡ç¼–æŒ‡ä»¤æ›´åŠ æ¥è¿‘ï¼ˆåŒ…æ‹¬æŸäº›å¯„å­˜å™¨çš„ä½œç”¨ï¼‰ï¼Œå¯¹æˆ‘ä»¬è¿›ä¸€æ­¥å­¦ä¹ ç†è§£x86æˆ–ARMæ±‡ç¼–æŒ‡ä»¤ï¼Œç”šè‡³Cè¯­è¨€ç­‰é«˜çº§è¯­è¨€ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°äº†ç¨‹åºè™šæ‹Ÿæœºçš„å·¥ä½œæ–¹å¼ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç¿»è¯‘æœºï¼šå‘ä¸Šæä¾›ä¸€ç§æ–°çš„è¯­è¨€æ¥å£ï¼Œç„¶åæŠŠè™šæ‹Ÿæœºè¯­è¨€ç¿»è¯‘æˆæ‰€åœ¨å¹³å°çš„è®¡ç®—æœºè¯­è¨€ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒå¹³å°ä¸Šå®ç°Hackè™šæ‹Ÿæœºï¼Œåªä¸è¿‡ç¿»è¯‘çš„å®ç°ç»†èŠ‚ä¼šå‘ç”Ÿæ”¹å˜ã€‚Hackè™šæ‹Ÿæœºå’ŒJavaè™šæ‹Ÿæœºæœ¬è´¨ä¸Šç›¸åŒçš„ï¼ŒHackè™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªçº¯çš„é™æ€ç¿»è¯‘å™¨ï¼Œè€ŒJavaè™šæ‹Ÿæœºä½œä¸ºä¸€ä¸ªè¿›ç¨‹è¿è¡Œï¼Œæ˜¯åŠ¨æ€ç¿»è¯‘çš„ï¼Œæ­¤å¤–Javaè™šæ‹Ÿæœºè¿˜æœ‰ç±»åŠ è½½å™¨ï¼Œå†…å­˜å›æ”¶ç­‰å¼ºå¤§åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¹Ÿå­¦åˆ°äº†ä¸€äº›é‡è¦çš„ç¼–ç¨‹æ€æƒ³ï¼šå¦‚æœåœ¨æœ¬å±‚å®ç°é€»è¾‘è¿‡äºå¤æ‚ï¼Œå¯ä»¥è€ƒè™‘æŠŠä¸€äº›å¤æ‚çš„é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œäº¤ç»™ä¸‹å±‚æ¥å®ç°ï¼Œå³æŠŠå¤æ‚çš„é—®é¢˜åˆ†å±‚åŒ–ã€‚å°½é‡è®©åŠ¨æ€çš„ï¼Œå˜åŒ–çš„ï¼Œéœ€è¦è¢«ç¼–ç¨‹çš„ï¼Œé¢å‘ç¨‹åºå‘˜çš„éƒ¨åˆ†å˜å¾—æ ‡å‡†å’Œç®€å•ï¼ŒæŠŠå¤æ‚çš„é€»è¾‘å°è£…åœ¨é™æ€çš„ï¼Œåº•å±‚çš„ï¼Œä¸é¢å‘ç¨‹åºå‘˜çš„åœ°æ–¹ã€‚ç›®çš„æ˜¯è®©å¼€å‘è€…èƒ½æŠŠä¸»è¦ç²¾åŠ›æ”¾åœ¨è§£å†³é—®é¢˜çš„ç®—æ³•ä¹‹ä¸Šï¼Œè€Œä¸ç”¨è€ƒè™‘è®©äººå¤´ç–¼çš„åº•å±‚çš„å®ç°ç»†èŠ‚ã€‚è¿™æ˜¯ä¸€ä¸ªç¨‹åºå‘˜çš„é‡è¦åŸºæœ¬åŠŸã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybpgy1gc7ccatyh7j30z00sg45t.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;next&quot;&gt;NEXT&lt;/h3&gt;

&lt;p&gt;Hackè™šæ‹Ÿæœºæ›´åŠ æ¥è¿‘ä¸€ä¸ªçœŸå®çš„è®¡ç®—æœºäº†ï¼Œå®ƒå¯ä»¥æ”¯æŒä¸€ç³»åˆ—å‡½æ•°åœ¨è™šæ‹Ÿæœºä¸Šçš„è¿ç®—å’Œäº’ç›¸è°ƒç”¨ã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†è®¾è®¡ä¸€é—¨ç®€æ´çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå¹¶å®ç°å®ƒçš„ç¼–è¯‘å™¨ï¼Œç„¶åæˆ‘ä»¬ç»ˆäºå¯ä»¥ä½¿ç”¨é«˜çº§è¯­è¨€åœ¨Hackä¸Šç¼–å†™ç¨‹åºäº†ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ç¯‡å®Œæ•´å®ç°æ”¾åœ¨äº†:&lt;a href=&quot;https://github.com/guosainpu/Nand2Tetris&quot;&gt;github&lt;/a&gt;&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">è®¡ç®—æœºå·¥ä½œçš„æœ¬è´¨å°±æ˜¯å¯¹å†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œå› æ­¤åªéœ€è¦å…·å¤‡ä¸¤ç§èƒ½åŠ›å³å¯ï¼š(1)å¯¹å†…å­˜çš„è¯»å’Œå†™ï¼›(2)ç”¨å¯¹æ•°æ®è¿›è¡Œç®—æ•°é€»è¾‘è¿ç®—ã€‚æ­¤å¤–ï¼Œæ”¯æŒæŒ‡ä»¤è·³è½¬èƒ½å¤§å¤§æé«˜è®¡ç®—æœºçš„å¯ç¼–ç¨‹èƒ½åŠ›ã€‚ç›´è§‚ä¸Šçœ‹ï¼ŒHackå…·å¤‡äº†ä»¥ä¸Šä¸‰é¡¹èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¸Šä¸€ç¯‡ä¹Ÿä¸¾ä¾‹äº†å¦‚ä½•å®ç°1+2+â€¦+100ã€‚ä½†Hackå’Œæˆ‘ä»¬å¸¸ç”¨çš„CPUå…·å¤‡å‡ ç™¾æ¡æŒ‡ä»¤é›†çš„èƒ½åŠ›è¿˜ç›¸å»ç”šè¿œï¼Œä¾‹å¦‚æ”¯æŒå››åˆ™è¿ç®—ï¼Œå¯¹æ ˆçš„æ“ä½œï¼ŒæŒ‡é’ˆå¯„å­˜å™¨çš„ä½¿ç”¨ï¼Œæ”¯æŒå‡½æ•°è°ƒç”¨ï¼Œå¤„ç†å…¥å‚å’Œå›å‚ç­‰ã€‚å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦åœ¨ç®€å•çš„Hackä¹‹ä¸Šï¼Œå†æ„å»ºä¸€ä¸ªæ›´åŠ å¤æ‚ï¼Œèƒ½åŠ›æ›´å¼ºçš„è™šæ‹Ÿè®¡ç®—æœºï¼Œè¿™ä¸ªè™šæ‹Ÿæœºå‘ä¸Šæä¾›äº†ä¸€å¥—æ–°çš„æ“ä½œæŒ‡ä»¤ï¼Œå³è™šæ‹Ÿæœºçš„å­—èŠ‚ç ï¼ˆåœ¨Hackä¸­è¿™å¥—å­—èŠ‚ç æ›´æ¥è¿‘æˆ‘ä»¬å¸¸ç”¨çš„CPUæŒ‡ä»¤é›†ï¼‰ï¼Œå…¶ä¸­æ¯æ¡è™šæ‹ŸæœºæŒ‡ä»¤éƒ½æ˜¯é€šè¿‡å°è£…æ±‡ç¼–å±‚ä¸€ç³»åˆ—çš„æ±‡ç¼–æŒ‡ä»¤æ¥å®ç°çš„ï¼Œåœ¨æœ¬ç¯‡ä¸­æˆ‘ä»¬ä¼šå†ä¸€æ¬¡çœ‹åˆ°åœ¨è®¡ç®—æœºç§‘å­¦ä¸­â€œå°è£…â€çš„å¼ºå¤§åŠ›é‡ã€‚ è™šæ‹Ÿæœºå¯èƒ½æœ‰å¤šç§è§£é‡Šï¼Œæˆ‘ä»¬è¦å®ç°çš„è™šæ‹Ÿæœºæ˜¯ä¸€ç§ç¨‹åºè™šæ‹Ÿæœºï¼ˆç±»ä¼¼äºJavaè™šæ‹Ÿæœºï¼‰ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ”¯æŒè¿è¡Œå¹³å°æ— å…³çš„è®¡ç®—æœºç¨‹åºã€‚å…¶ä»–æ¦‚å¿µçš„è™šæ‹Ÿæœºè¿˜æœ‰ç³»ç»Ÿè™šæ‹Ÿæœºï¼Œå®Œå…¨è™šæ‹Ÿä¸€ä¸ªæ“ä½œç³»ç»Ÿå‡ºæ¥ï¼Œä¾‹å¦‚VMWareï¼ŒiOSæ¨¡æ‹Ÿå™¨ç­‰ã€‚ ä¸€ä¸ªCç¨‹åº æˆ‘ä»¬æ¥å†™ä¸€ä¸ªç®€å•çš„Cç¨‹åºï¼šaddã€‚ç„¶åæ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•æŠŠè¿™æ®µç¨‹åºç¿»è¯‘æˆHackä¸Šçš„æ±‡ç¼–è¯­è¨€å‘¢ï¼Ÿå¦‚æœä»…ä»…æ˜¯ç¿»è¯‘è¿™ä¸€ä¸ªç¨‹åºï¼Œè²Œä¼¼æ˜¯å¯è¡Œçš„ï¼Œä½†å¦‚æœæƒ³è¦ç›´æ¥ç¿»è¯‘ä¸€ä¸ªå¤æ‚çš„Cç¨‹åºåˆ™æ˜¯ç›¸å½“å›°éš¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹Hackå†è¿›è¡Œä¸€äº›æ‰©å±•ã€‚ int add(int a, int b) { int result; result = a + b; return result; } int main(int argc, char *argv[]) { int a,b,result; a = 1; b = 2; result = add(a,b); return 0; } æˆ‘ä»¬æŠŠä¸Šé¢çš„Cç¨‹åºåœ¨Macä¸Šç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åçœ‹ä¸€ä¸‹è¿™ä¸ªå®ƒåœ¨x86_64æ¶æ„ä¸‹çš„æ±‡ç¼–ä»£ç ã€‚æˆ‘ä»¬çœ‹åˆ°å®ƒçš„æ±‡ç¼–ä»£ç å¹¶ä¸å¤æ‚ï¼Œå®ƒè¢«ç¼–è¯‘æˆäº†ä¸¤ä¸ªå‡½æ•°ï¼Œç„¶åé€šè¿‡ä¸€äº›çš„push, pop, mov, add, call, returnç­‰æŒ‡ä»¤å®Œæˆã€‚è¿™äº›æŒ‡ä»¤å°±æ˜¯Hackçš„è™šæ‹Ÿæœºéœ€è¦å‚è€ƒå’Œå®ç°çš„ã€‚ä»è¿™ä¸€ç‚¹ä¸Šæ¥çœ‹ï¼ŒHackçš„è™šæ‹Ÿæœºæ›´æ¥è¿‘æˆ‘ä»¬å¸¸ç”¨çš„CPUã€‚ Stack æ— è®ºæ˜¯x86_64æ¶æ„ä¸‹çš„æ±‡ç¼–æŒ‡ä»¤ï¼Œè¿˜æ˜¯æˆ‘ä»¬éœ€è¦å®ç°çš„Hackè™šæ‹Ÿæœºï¼Œéƒ½éœ€è¦æ”¯æŒå››ç§åŸºæœ¬æ“ä½œï¼šç®—æ•°é€»è¾‘æ“ä½œï¼Œå†…å­˜è®¿é—®æ“ä½œï¼Œç¨‹åºæµç¨‹æ§åˆ¶ï¼Œå‡½æ•°è°ƒç”¨ã€‚æƒ³è¦æ–¹ä¾¿çš„å®ç°è¿™äº›æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šå †æ ˆï¼ˆstackï¼‰ã€‚ç»è¯æ˜ï¼Œé€šè¿‡å †æ ˆæ“ä½œï¼Œèƒ½å¤Ÿå®ç°ä»»ä½•æ•°å­¦æˆ–é€»è¾‘è¡¨è¾¾å¼ï¼›ä»»ä½•ç¨‹åºï¼Œæ— è®ºç”¨ä»€ä¹ˆè¯­è¨€ç¼–å†™ï¼Œéƒ½èƒ½å¤Ÿè¢«ç¿»è¯‘æˆç­‰ä»·çš„å †æ ˆæœºè¯­è¨€ã€‚ Push &amp;amp; Pop æ—¢ç„¶æ˜¯æ ˆçš„ä½¿ç”¨ï¼Œé‚£è‚¯å®šå°‘ä¸äº†Pushå’ŒPopæ“ä½œã€‚SPï¼ˆStack Pointerï¼‰æŒ‡é’ˆæ˜¯è¿™ä¸¤é¡¹æ“ä½œçš„å…³é”®ï¼ŒSPæŒ‡é’ˆå®æ—¶åœ°æŒ‡å‘æ ˆé¡¶ï¼šPushæ“ä½œæŠŠä¸€ä¸ªæ•°ï¼ˆå¯ä»¥æ˜¯å†…å­˜ä¸­çš„æŸä¸ªæ•°ï¼‰å‹å…¥æ ˆé¡¶ï¼Œç„¶åSPåŠ 1ï¼ˆå¦‚æœæ ˆä»ä¸Šå‘ä¸‹ç”Ÿé•¿å°±å‡1ï¼‰ï¼›Popæ“ä½œæŠŠæ ˆé¡¶çš„æ•°å¼¹å‡ºï¼ˆå¯ä»¥å¼¹å‡ºåˆ°æŸä¸ªå†…å­˜åœ°å€ï¼‰ï¼Œç„¶åSPå‡1ã€‚ å†…å­˜åˆ’åˆ† å†…å­˜åˆ’åˆ†æ˜¯Hackè™šæ‹Ÿæœºä¸­å¦ä¸€ä¸ªé‡è¦ä¸»é¢˜ã€‚Hackçš„å†…å­˜ç”±32Kçš„16ä½å­—ç»„æˆï¼Œå…¶ä¸­å‰16Kæ˜¯é€šç”¨å†…å­˜ï¼Œå16Kæ˜¯I/Oè®¾å¤‡çš„å†…å­˜æ˜ åƒã€‚ 0-15ï¼š16ä¸ªè™šæ‹Ÿå¯„å­˜å™¨(Hackå¯„å­˜å™¨ä¸å¤Ÿç”¨äº†) 16-255ï¼šé™æ€å˜é‡åŒº 256-2047ï¼šæ ˆ 2048-16383ï¼šå † 16384-24575ï¼šI/Oå†…å­˜æ˜ åƒ 0-15ä½å†…å­˜å’Œå¯„å­˜å™¨çš„æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š &quot;SP&quot;=&amp;gt;&quot;000000000000000&quot;, &quot;LCL&quot;=&amp;gt;&quot;000000000000001&quot;, &quot;ARG&quot;=&amp;gt;&quot;000000000000010&quot;, &quot;THIS&quot;=&amp;gt;&quot;000000000000011&quot;, &quot;THAT&quot;=&amp;gt;&quot;000000000000100&quot;, &quot;R0&quot;=&amp;gt;&quot;000000000000000&quot;, &quot;R1&quot;=&amp;gt;&quot;000000000000001&quot;, &quot;R2&quot;=&amp;gt;&quot;000000000000010&quot;, &quot;R3&quot;=&amp;gt;&quot;000000000000011&quot;, &quot;R4&quot;=&amp;gt;&quot;000000000000100&quot;, &quot;R5&quot;=&amp;gt;&quot;000000000000101&quot;, &quot;R6&quot;=&amp;gt;&quot;000000000000110&quot;, &quot;R7&quot;=&amp;gt;&quot;000000000000111&quot;, &quot;R8&quot;=&amp;gt;&quot;000000000001000&quot;, &quot;R9&quot;=&amp;gt;&quot;000000000001001&quot;, &quot;R10&quot;=&amp;gt;&quot;000000000001010&quot;, &quot;R11&quot;=&amp;gt;&quot;000000000001011&quot;, &quot;R12&quot;=&amp;gt;&quot;000000000001100&quot;, &quot;R13&quot;=&amp;gt;&quot;000000000001101&quot;, &quot;R14&quot;=&amp;gt;&quot;000000000001110&quot;, &quot;R15&quot;=&amp;gt;&quot;000000000001111&quot;, &quot;SCREEN&quot;=&amp;gt;&quot;100000000000000&quot;, &quot;KBD&quot;=&amp;gt;&quot;110000000000000&quot; è™šæ‹Ÿæœºæ“çºµ8ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜æ®µã€‚åœ¨è¿™é‡Œè™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æŠ€å·§ï¼Œå†…å­˜æ®µéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªå‡½æ•°éƒ½å¯ä»¥é€šè¿‡å›ºå®šçš„å‡ ä¸ªæŒ‡é’ˆï¼ˆR0-R15ï¼‰æ¥è®¿é—®è¿™äº›å†…å­˜æ®µï¼Œçœ‹ä¸Šå»æ¯ä¸ªå†…å­˜æ®µéƒ½æ˜¯å®ƒä»¬ç‹¬äº«çš„ï¼ˆæœ‰äº›æ˜¯å…±äº«çš„ï¼‰ï¼Œè€Œä¸å¿…å…³å¿ƒä»–ä»¬çš„ç‰©ç†åœ°å€åœ¨å“ªé‡Œï¼Œæ˜¯å¦ä¼šå’Œå…¶ä»–å‡½æ•°å†²çªç­‰ã€‚è¿™æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§å°è£…ï¼Œè¿™ç§å°è£…å‘ä¸Šæä¾›ä¸€ç§æ ‡å‡†çš„å†…å­˜è®¿é—®æ–¹å¼ï¼Œå‘ä¸‹äº†å®ç°è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„æ˜ å°„å’Œç®¡ç†ï¼ˆç±»ä¼¼äºæ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹åœ°å€ç©ºé—´çš„æ˜ å°„ï¼‰ã€‚è¿™å¤§å¤§é™ä½äº†è™šæ‹Ÿæœºä½¿ç”¨è€…çš„éš¾åº¦ï¼ŒæŠŠå¤æ‚çš„å·¥ä½œäº¤ç»™äº†è™šæ‹Ÿæœºæœ¬èº«ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»£ç å’Œå†…å­˜æ®µçš„å…³ç³»ã€‚ä¸€ä¸ªç±»è¢«ç¼–è¯‘æˆä¸€ä¸ª.VMæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è‹¥å¹²ä¸ªå‡½æ•°å®ç°f1, f2, f3ã€‚tempå’Œconstæ®µæ˜¯è¿›ç¨‹çº§åˆ«å…±äº«çš„ï¼›staticæ®µæ˜¯ç±»çº§åˆ«å…±äº«çš„ï¼›argumentã€localã€thisã€thatã€pointeræ˜¯å‡½æ•°çº§åˆ«çš„ç‹¬äº«çš„ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„è¿™5ä¸ªå†…å­˜æ®µï¼Œä½†æ¯ä¸ªå‡½æ•°è®¿é—®å®ƒä»¬çš„æ–¹å¼å´æ˜¯ä¸€è‡´çš„ï¼ˆå³é€šè¿‡R1-R5æŒ‡é’ˆï¼‰ å†…å­˜è®¿é—®å‘½ä»¤ æ‰€æœ‰çš„å†…å­˜æ®µè®¿é—®éƒ½é€šè¿‡2æ¡å‘½ä»¤å®ç°ï¼š push segement index å°†segement[index]çš„å€¼å‹å…¥å †æ ˆ pop segement index å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œç„¶åå­˜å…¥segement[index] push locol 0 #æŠŠlocolæ®µç¬¬ä¸€ä¸ªä½ç½®çš„å€¼å‹å…¥å †æ ˆ push constant 123 #æŠŠå¸¸æ•°123å‹å…¥å †æ ˆ pop static 1 #æŠŠæ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œå­˜å…¥staticçš„ç¬¬äºŒä¸ªä½ç½® å®ç° pushå’ŒpopæŒ‡ä»¤çš„ä½œç”¨å°±æ˜¯åœ¨æ ˆé¡¶å†…å­˜å’Œæ®µå†…å­˜ä¹‹é—´äº’ç›¸æ¬è¿æ•°å€¼ã€‚SPæŒ‡é’ˆç”¨äºæ ‡è¯†æ ˆé¡¶å†…å­˜ï¼ŒsegementåŸºåœ°å€+åç§»é‡ç”¨äºæ ‡è¯†æ®µå†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ç³»åˆ—å¯„å­˜å™¨å’Œå†…å­˜æ“ä½œï¼ˆåˆ©ç”¨Aå¯„å­˜å™¨å®šä½å†…å­˜åœ°å€ï¼ŒDå¯„å­˜å™¨æš‚å­˜æ•°å€¼ç­‰æ“ä½œï¼‰å®ç°è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚ def writePushPop(command, segment, index) #å®ç°push, popå‘½ä»¤ asm_cmd = '' segment = @table[&quot;#{segment}&quot;] if command == 'C_PUSH' &amp;amp;&amp;amp; segment =='constant' #push const asm_cmd &amp;lt;&amp;lt; pushConstant(index) elsif command == 'C_PUSH' asm_cmd &amp;lt;&amp;lt; passArgsAddressToA(segment, index) #A=æ®µåœ°å€+åç§»åœ°å€ asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot; &amp;lt;&amp;lt; &quot;\n&quot; #æ®µå†…å­˜çš„å€¼å­˜åˆ°D asm_cmd &amp;lt;&amp;lt; pushDtoStack() #push Dåˆ°æ ˆé¡¶ï¼Œsp+1 elsif command == 'C_POP' asm_cmd &amp;lt;&amp;lt; passArgsAddressToA(segment, index) #A=æ®µåœ°å€+åç§»åœ°å€ asm_cmd &amp;lt;&amp;lt; getStackTopToD() #æ ˆé¡¶çš„å€¼å­˜åˆ°D asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #pop Dåˆ°æ®µå†…å­˜ asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=M-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; #spå‡1 end if asm_cmd.length &amp;gt; 0 @sam_file.write(asm_cmd) end end def pushConstant(const) #å®ç°ç®€å•çš„push const asm_cmd = &quot;@#{const}\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=A&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; pushDtoStack() return asm_cmd end def pushDtoStack #æŠŠDå¯„å­˜å™¨çš„å€¼pushåˆ°æ ˆé¡¶ï¼Œsp+1 asm_cmd = &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=M+1&quot;&amp;lt;&amp;lt; &quot;\n&quot; return asm_cmd end def getStackTopToD #æŠŠæ ˆé¡¶çš„å€¼å­˜åˆ°Då¯„å­˜å™¨ï¼Œspä¸å˜ asm_cmd = &quot;D=A&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@R13&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #å…ˆæŠŠAçš„å€¼æš‚å­˜åˆ°R13ï¼Œåé¢åœ¨è¿˜åŸAå¯„å­˜å™¨ï¼ˆä¿å­˜ç°åœºï¼‰ asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #å–å‡ºå€¼æ”¾å…¥D asm_cmd &amp;lt;&amp;lt; &quot;@R13&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #æ¢å¤A return asm_cmd end def passArgsAddressToA(segment, index) #æŠŠå†…å­˜åœ°å€å­˜åˆ°A asm_cmd = '' if segment == &quot;static&quot; asm_cmd &amp;lt;&amp;lt; &quot;@#{@source_file_name}.#{index}&quot;&amp;lt;&amp;lt; &quot;\n&quot; #æ–‡ä»¶å+indexä½œä¸ºstaticçš„ç¬¦å· return asm_cmd end asm_cmd &amp;lt;&amp;lt; &quot;@#{index}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=A&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=indexåç§»é‡ if segment == &quot;temp&quot; asm_cmd &amp;lt;&amp;lt; &quot;@R5&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=A+D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #A=tempåœ°å€+åç§»é‡ puts &quot;æ‰§è¡Œäº†#{segment}&quot; elsif segment == &quot;pointer&quot; asm_cmd &amp;lt;&amp;lt; &quot;@THIS&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=A+D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #A=THIS+åç§»é‡ else asm_cmd &amp;lt;&amp;lt; &quot;@#{segment}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M+D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #A=æ®µå†…å­˜æŒ‡é’ˆæŒ‡å‘çš„æ®µåŸºåœ°å€+åç§»é‡ end return asm_cmd end ç®—æ•°é€»è¾‘è¿ç®—å‘½ä»¤ æˆ‘ä»¬è¿˜éœ€è¦å®ç°è‹¥å¹²ä¸€å…ƒæˆ–äºŒå…ƒçš„ç®—æ•°&amp;amp;é€»è¾‘è¿ç®—å‘½ä»¤ï¼ŒåŒ…æ‹¬äºŒå…ƒåŠ å‡æ³•ï¼Œä¸¤ä¸ªæ•°çš„æ¯”è¾ƒï¼Œä¸æˆ–éï¼Œå–åæ“ä½œã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰å®ç°æµ®ç‚¹æ•°æ“ä½œï¼Œä¹Ÿæ²¡æœ‰å®ç°ä¹˜é™¤æ³•ï¼ˆåé¢æˆ‘ä»¬ä¼šåœ¨è½¯ä»¶çš„å±‚é¢å®ç°ä¹˜é™¤æ³•ï¼‰ã€‚ æˆ‘ä»¬ä»¥ä¸‹é¢çš„ä¼ªå‘½ä»¤ä¸ºä¾‹ï¼Œçœ‹ä¸‹å¦‚ä½•åˆ©ç”¨æ ˆæ¥è¿›è¡Œç®—æ•°é€»è¾‘è¿ç®—ã€‚è¿ç®—x+yæ—¶ï¼Œæ˜¯ä¸€ç§ä»¥åç¼€è¡¨è¾¾å¼å½¢å¼çš„è¿ç®—ï¼šå…ˆæŠŠxå…¥æ ˆï¼Œsp+1ï¼›ç„¶åæŠŠyå…¥æ ˆï¼Œsp+1ï¼Œç„¶åè®¡ç®—åŠ æ³•ï¼ŒæŠŠç»“æœå€¼å­˜å…¥å½“å‰xçš„ä½ç½®ï¼Œsp-2ã€‚ä¸€å…ƒè¿ç®—åˆ™æ›´ç®€å•ï¼Œè¿ç®—-xæ—¶ï¼šå…ˆæŠŠxå…¥æ ˆï¼Œsp=1ï¼Œç„¶åå–åï¼ŒæŠŠç»“æœå€¼å­˜å…¥å½“å‰xçš„ä½ç½®ï¼Œsp-1ã€‚ // d=(2-x)*(y+5) push 2 push x sub push y push 5 add mult pop d å®ç° åœ¨å®ç°ä¸Šä¸»è¦æ€è·¯æ˜¯åˆ©ç”¨Då¯„å­˜å™¨é…åˆSPæŒ‡é’ˆï¼Œä¾‹å¦‚x+yï¼šæŠŠyèµ‹å€¼ç»™Dï¼Œç„¶åSPæŒ‡å‘xï¼Œç„¶åD=D+Mï¼Œæœ€åæŠŠDå†èµ‹å€¼ç»™SPæŒ‡å‘çš„å†…å­˜ã€‚ def arithmetic(cmd) asm_cmd = &quot;&quot; if cmd == 'add' asm_cmd &amp;lt;&amp;lt; passYtoD() #D=y asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=D+M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=x+y asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; resetSP() #spé‡ç½® elsif cmd == 'sub' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M-D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=x-y asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'neg' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; &quot;M=-D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #M=-D asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'eq' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; compare(&quot;JEQ&quot;) asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'gt' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; compare(&quot;JGT&quot;) asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'lt' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; compare(&quot;JLT&quot;) asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'and' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=D&amp;amp;M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=x&amp;amp;y asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'or' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=D|M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=x|y asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; resetSP() elsif cmd == 'not' asm_cmd &amp;lt;&amp;lt; passYtoD() asm_cmd &amp;lt;&amp;lt; &quot;M=!D&quot;&amp;lt;&amp;lt; &quot;\n&quot; end return asm_cmd end def passYtoD #yèµ‹å€¼ç»™Då¯„å­˜å™¨ asm_cmd = &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; #sp-1åæŒ‡å‘y asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=y return asm_cmd end def resetSP asm_cmd = &quot;D=A&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D+1&quot;&amp;lt;&amp;lt; &quot;\n&quot; #SPæŒ‡é’ˆé‡ç½® return asm_cmd end def compare(cmd) #xyå¤§å°æ¯”è¾ƒã€‚ asm_cmd = &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M-D&quot;&amp;lt;&amp;lt; &quot;\n&quot; #D=x-y asm_cmd &amp;lt;&amp;lt; &quot;@branchLabel_#{@branchIndex}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D;#{cmd}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=0&quot;&amp;lt;&amp;lt; &quot;\n&quot; #0(0x0000)ä»£è¡¨false asm_cmd &amp;lt;&amp;lt; &quot;@mergeLabel_#{@mergeIndex}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;0;JMP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;(branchLabel_#{@branchIndex})&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; #-1(0xFFFF)ä»£è¡¨true asm_cmd &amp;lt;&amp;lt; &quot;(mergeLabel_#{@mergeIndex})&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; @branchIndex = @branchIndex + 1 @mergeIndex = @mergeIndex + 1 return asm_cmd end ç¨‹åºæµç¨‹æ§åˆ¶å‘½ä»¤ è®¡ç®—æœºé»˜è®¤çš„æ‰§è¡Œé¡ºåºæ˜¯çº¿æ€§çš„ï¼Œç¨‹åºæµç¨‹æ§åˆ¶è¿™ä¸€èŠ‚æˆ‘ä»¬éœ€è¦å®ç°è·³è½¬åŠŸèƒ½å’Œåˆ†æ”¯åŠŸèƒ½ï¼Œå³ä»¥ä¸‹ä¸‰ä¸ªæŒ‡ä»¤ï¼š labelï¼šç”¨äºæ ‡è¯†æŒ‡ä»¤åœ°å€ goto labelï¼šæ— æ¡ä»¶è·³è½¬åˆ°æŒ‡ä»¤åœ°å€ if_goto labelï¼šå…ˆå¼¹å‡ºå¹¶åˆ¤æ–­æ ˆé¡¶å€¼ï¼Œé0æ—¶è·³è½¬ï¼Œå¦åˆ™çº¿æ€§æ‰§è¡Œ å®ç° è¿™ä¸‰æ¡æŒ‡ä»¤çš„å®ç°éå¸¸ç®€å•ã€‚åŸå› æ˜¯è¿™é‡Œlabelæ‰®æ¼”äº†é‡è¦çš„åŠŸèƒ½ï¼Œç”±äºä¸‹å±‚çš„æ±‡ç¼–å™¨æ”¯æŒæŠŠlabelè¯†åˆ«æˆæŒ‡ä»¤åœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°±ä¸å¿…å†å…³å¿ƒéœ€è¦è·³è½¬çš„å…·ä½“åœ°å€ï¼Œçœå»äº†å¾ˆå¤šå·¥ä½œã€‚è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°åªè¦ä¸‹å±‚è®¾è®¡å°è£…çš„å¥½ï¼Œå°±ä¼šå¤§å¤§é™ä½ä¸Šå±‚çš„å®ç°éš¾åº¦ã€‚ def writeLabel(label) asm_cmd = &quot;(#{label})&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end def writeGoto(label) asm_cmd = &quot;@#{label}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;0;JMP&quot;&amp;lt;&amp;lt; &quot;\n&quot; #æ— æ¡ä»¶è·³è½¬ @sam_file.write(asm_cmd) end def writeIf(label) asm_cmd = &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=A-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; #æ ˆé¡¶å€¼å­˜åˆ°D asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=M-1&quot;&amp;lt;&amp;lt; &quot;\n&quot; #æŒ‡é’ˆå‡1 asm_cmd &amp;lt;&amp;lt; &quot;@#{label}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D;JNE&quot;&amp;lt;&amp;lt; &quot;\n&quot; #Dé0æ—¶è·³è½¬ @sam_file.write(asm_cmd) end å‡½æ•°è°ƒç”¨å‘½ä»¤ å‡½æ•°è°ƒç”¨æ˜¯Hackè™šæ‹Ÿæœºå®ç°æœ€å¤æ‚çš„ä¸€èŠ‚ã€‚ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯ä¸€ç³»åˆ—å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ï¼Œæ¯ä¸ªå‡½æ•°æ‰§è¡Œè‹¥å¹²æŒ‡ä»¤ï¼Œæ“ä½œå‡½æ•°ä¸­çš„å‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡ã€é™æ€å˜é‡ä¸‰ç§å˜é‡ã€‚å¦‚æœç¨‹åºåªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå·¥ä½œå¹¶ä¸å¤æ‚ï¼Œå› ä¸ºå‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡ã€é™æ€å˜é‡éƒ½æ˜¯é™æ€çš„ï¼Œæå‰åˆ†é…å¥½çš„ï¼Œç›´æ¥å»ä½¿ç”¨å°±è¡Œäº†ï¼›ä½†æ˜¯å¦‚æœç¨‹åºæ˜¯ç”±å¤šä¸ªå‡½æ•°ç»„æˆçš„ï¼Œé‚£ä¹ˆè¿™äº›å˜é‡åœ¨æ ˆä¸Šå°±æ˜¯åŠ¨æ€çš„ï¼ˆå‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡æ˜¯åŠ¨æ€çš„ï¼Œé™æ€å˜é‡è¿˜æ˜¯é™æ€çš„ï¼‰ï¼Œå®ƒä»¬çš„ä¸ªæ•°ï¼Œåˆ†é…çš„ä½ç½®éƒ½æ˜¯åœ¨åŠ¨æ€å˜åŒ–çš„ï¼Œå¤„ç†èµ·æ¥å°±éå¸¸å¤æ‚ã€‚Hackè™šæ‹Ÿæœºä¸­å‡½æ•°è°ƒç”¨éƒ¨åˆ†çš„ä»»åŠ¡å°±æ˜¯æŠŠè¿™ç§åŠ¨æ€å†è½¬å˜æˆé™æ€ï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¸ºå®ƒæ„å»ºä¸€ä¸ªç§æœ‰ç©ºé—´ï¼ˆframeï¼‰ï¼ŒæŠŠå®ƒå°é—­åœ¨ä¸€ä¸ªâ€œä¸ä¸–éš”ç»çš„è‡ªæˆ‘ä¸–ç•Œâ€ï¼ˆè¯¥ä¸–ç•ŒåªåŒ…æ‹¬å·²ç»åˆå§‹åŒ–çš„å‚æ•°å˜é‡ã€æœ¬åœ°å˜é‡å’Œä¸€ä¸ªç©ºçš„æ ˆç©ºé—´ï¼‰ï¼Œç„¶åè¯¥å‡½æ•°åœ¨è¿™ä¸ªç§æœ‰ç©ºé—´å†…ç›´æ¥è‡ªå·±çš„å‘½ä»¤ã€‚ä»è¯¥å‡½æ•°çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä¸æ„ŸçŸ¥å…¶ä»–å‡½æ•°çš„å­˜åœ¨ï¼Œå°±å¥½åƒç¨‹åºåªæœ‰ä¸€ä¸ªå‡½æ•°ä¸€æ ·ï¼Œåˆå˜æˆäº†é™æ€ã€‚ è¿™ä¸€èŠ‚æˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹3ä¸ªæŒ‡ä»¤ï¼š function f nï¼šä¸‹é¢æ˜¯ä¸€æ®µå‡½æ•°åä¸ºfçš„ä»£ç ï¼Œè¯¥å‡½æ•°æœ‰nä¸ªå‚æ•° call f mï¼šè°ƒç”¨å‡½æ•°fï¼Œä¸”è°ƒç”¨å‰å·²å°†mä¸ªå‚æ•°å‹å…¥æ ˆ returnï¼šè¿”å›åˆ°è°ƒç”¨è€… å‡½æ•°çš„è°ƒç”¨ä¹Ÿæ˜¯é€šè¿‡æ ˆå®ç°çš„ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºä¸ºå‡½æ•°åˆ†é…ä¸€å—æ–°çš„å†…å­˜ï¼ˆframeï¼‰ï¼Œå‡½æ•°ç»“æŸæ—¶ï¼Œåˆ™å›æ”¶è¿™å—å†…å­˜ã€‚å‡½æ•°è°ƒç”¨æ¯åŠ æ·±ä¸€å±‚ï¼Œframeå¢é•¿ä¸€å—ï¼Œæ¯returnä¸€å±‚ï¼Œframeç¼©å‡ä¸€å—ï¼Œå› æ­¤æ— é™é€’å½’çš„å‡½æ•°ä¼šæ¶ˆè€—æ— é™çš„frameï¼Œå¯¼è‡´æ ˆå†…å­˜æº¢å‡ºã€‚ ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨å’Œè¿”å›è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹å¦‚ä¸‹ï¼š 1.è°ƒç”¨å‡½æ•°å°†å‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•° 2.ä¿å­˜è°ƒç”¨å‡½æ•°çš„å½“å‰çŠ¶æ€ 3.è·³è½¬è‡³è¢«è°ƒç”¨å‡½æ•° 4.ä¸ºè¢«è°ƒç”¨å‡½æ•°åˆ†é…å±€éƒ¨å˜é‡ç©ºé—´å¹¶åˆå§‹åŒ– 5.æ‰§è¡Œè¢«è°ƒç”¨å‡½æ•°æŒ‡ä»¤åºåˆ— 6.è¢«è°ƒç”¨å‡½æ•°å°†å›å‚ä¼ é€’ç»™è°ƒç”¨å‡½æ•° 7.æ¢å¤è°ƒç”¨å‡½æ•°çš„çŠ¶æ€ 8.å›æ”¶è¢«è°ƒç”¨å‡½æ•°ä½¿ç”¨çš„å†…å­˜ç©ºé—´ 9.è¿”å›åˆ°ä¹‹å‰è°ƒç”¨å‡½æ•°çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œ åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ ˆä¸Šçš„å†…å­˜ä½¿ç”¨å’Œå¯„å­˜å™¨çŠ¶æ€å¦‚ä¸‹å›¾ã€‚è°ƒç”¨è€…åœ¨æŠŠå‡½æ•°å…¥å‚pushåˆ°æ ˆä¸Šåï¼ŒargumentæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°ï¼›ç„¶åæŠŠå‡½æ•°çš„è¿”å›æŒ‡ä»¤åœ°å€å…¥æ ˆï¼›ç„¶åä¿å­˜è°ƒç”¨è€…çš„localã€argumentã€thisã€thatæŒ‡é’ˆï¼›ç„¶åæ ¹æ®è¢«è°ƒç”¨è€…å±€éƒ¨å˜é‡æ•°é‡ä¸ºå…¶åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶æŠŠLocalæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼›æœ€åæŠŠSPæŒ‡é’ˆæŒ‡å‘æ ˆé¡¶ï¼Œæ ˆé¡¶åé¢çš„å†…å­˜ç©ºé—´éƒ½æ˜¯è¢«è°ƒç”¨è€…çš„å·¥ä½œåŒºã€‚ è¢«è°ƒç”¨è€…æ‰§è¡Œå®Œæ¯•åï¼ŒæŠŠè¿”å›å€¼popåˆ°ç¬¬ä¸€ä¸ªå…¥å‚çš„ä½ç½®ï¼ˆå¦‚æœè¿”å›ç±»å‹ä¸ºvoidï¼Œå°±å†ä¸¢å¼ƒè¿™ä¸ªè¿”å›å€¼ï¼‰ï¼›æ¢å¤è°ƒç”¨è€…çš„å„ç§å¯„å­˜å™¨æŒ‡é’ˆï¼›ç„¶åé€šè¿‡é‡ç½®SPæŒ‡é’ˆæ¥å›æ”¶è¢«è°ƒç”¨è€…çš„å†…å­˜ï¼ˆå¹¶æ²¡æœ‰ä¿®æ”¹è¢«è°ƒç”¨è€…frameå†…å­˜çš„æ•°æ®ï¼Œåªæ˜¯é‡ç½®äº†æ ˆé¡¶çš„ä½ç½®ï¼Œåé¢å®ƒä»¬å°†ä¼šè¢«æ–°çš„å‡½æ•°è¦†ç›–ï¼‰ã€‚ å®ç° callæŒ‡ä»¤ å®ç°callæŒ‡ä»¤ï¼Œé¦–å…ˆéœ€è¦pushè°ƒç”¨è€…çš„è¿”å›åœ°å€ï¼Œè¿”å›åœ°å€ç”¨â€œç¬¦å·å+indexâ€çš„æ–¹å¼æ ‡è¯†ï¼Œindexçš„ç›®çš„æ˜¯é˜²æ­¢è¿”å›åœ°å€é‡åï¼Œæ¯ç¿»è¯‘ä¸€æ¬¡callæŒ‡ä»¤åindexéœ€è¦+1ï¼›ç„¶åä¿å­˜å‡ ä¸ªå¯„å­˜å™¨çš„çŠ¶æ€ï¼›ç„¶åæ›´æ–°ARGå’ŒLCLï¼Œå…¶ä¸­ARG=SP-n-5ï¼ˆå‚è€ƒä¸Šé¢çš„å†…å­˜åˆ†å¸ƒå›¾ï¼‰ï¼ŒLCL = SPï¼›æœ€åæ‰§è¡Œgotoè·³è½¬æŒ‡ä»¤ã€‚å› ä¸ºè°ƒç”¨å‡½æ•°returnåè¿˜è¦è¿”å›gotoæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤æ ‡ç»§ç»­æ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦åœ¨æœ€åè¡¥å……ä¸€ä¸ªè¿”å›åœ°å€labelã€‚ call f n ä¼ªä»£ç  -------------------- push return-address //è¿”å›åœ°å€å…¥æ ˆ push LCL //ä¿å­˜å¯„å­˜å™¨æŒ‡é’ˆ push ARG push THIS push THAT ARG = SP-n-5 //é‡ç½®ARGï¼Œç¬¬ä¸€ä¸ªå…¥å‚çš„ä½ç½®æ˜¯å½“å‰SPæŒ‡é’ˆå‡nå†å‡5 LCL = SP //é‡ç½®LCLï¼Œç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡çš„ä½ç½®æ˜¯å½“å‰SPçš„ä½ç½® goto f //è·³è½¬åˆ°f (return-address) //labelæ ‡è¯†ï¼Œreturnåè¿”å›è¿™é‡Œæ‰§è¡Œ def writeCall(functionName, numArgs) writePushPop(&quot;C_PUSH&quot;, &quot;constant&quot;, &quot;callLabel#{@callIndex}&quot;) saveSegment(&quot;LCL&quot;) saveSegment(&quot;ARG&quot;) saveSegment(&quot;THIS&quot;) saveSegment(&quot;THAT&quot;) resetARG(5+numArgs.to_i) resetLCL() callJump(functionName, &quot;callLabel#{@callIndex}&quot;) @callIndex = @callIndex + 1 end # ä¿å­˜å¯„å­˜å™¨çš„å€¼ def saveSegment(segment) asm_cmd = &quot;@#{segment}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; pushDtoStack() @sam_file.write(asm_cmd) end # ARGè®¾ç½®ä¸ºSPæŒ‡é’ˆå‘å‰ç§»åŠ¨stepæ­¥ def resetARG(steps) asm_cmd = &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@#{steps}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=D-A&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@ARG&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end # é‡ç½®LCLï¼Œç¬¬ä¸€ä¸ªå±€éƒ¨å˜é‡çš„ä½ç½®æ˜¯å½“å‰SPçš„ä½ç½® def resetLCL() asm_cmd = &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@LCL&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end # è·³è½¬æ‰§è¡Œ def callJump(functionName, returnLabel) asm_cmd = &quot;@#{functionName}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;0;JMP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;(#{returnLabel})&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end functionæŒ‡ä»¤ function f m æŒ‡ä»¤æ¯”è¾ƒç®€å•ã€‚m ä»£è¡¨å‡½æ•° f ä¸­æœ‰ m ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥åªéœ€è¦è¿ç»­push m æ¬¡0å³å¯ï¼šå¼€è¾Ÿäº† m ä¸ªå†…å­˜ç©ºé—´ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º0ï¼ˆæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„é«˜çº§è¯­è¨€ä¸­ï¼Œä¸åŒç±»å‹çš„å˜é‡å çš„å­—èŠ‚æ•°å¯èƒ½ä¸åŒã€‚Hackè¿›è¡Œäº†ç®€åŒ–ï¼Œæ‰€æœ‰åŸºæœ¬ç±»å‹çš„å˜é‡éƒ½å ç”¨ä¸€ä¸ªå­—çš„å†…å­˜ï¼‰ã€‚ def writeFunction(funtionName, numArgs) asm_cmd = &quot;(#{funtionName})&quot;&amp;lt;&amp;lt; &quot;\n&quot; #é¦–å…ˆç”¨ï¼ˆfuntionNameï¼‰æ¥æ ‡è¯†å‡½æ•°åœ°å€ @sam_file.write(asm_cmd) index = 0 while index &amp;lt; numArgs.to_i writePushPop(&quot;C_PUSH&quot;, &quot;constant&quot;, &quot;0&quot;) index = index + 1 end end returnæŒ‡ä»¤ returnæŒ‡ä»¤é¦–å…ˆéœ€è¦æŠŠè¿”å›å€¼popåˆ°argument 0ï¼Œå³è°ƒç”¨è€…çš„æ ˆé¡¶ï¼›ç„¶åé‡ç½®ä¸€ç³»åˆ—å¯„å­˜å™¨æŒ‡é’ˆï¼›æœ€åè·³è½¬åˆ°è¿”å›åœ°å€ã€‚è¿™é‡Œæ¯”è¾ƒå¤æ‚çš„åœ°æ–¹æ˜¯å¦‚ä½•å®‰æ’å„ä¸ªæ•°å€¼çš„æ¢å¤é¡ºåºï¼Œå› ä¸ºé¡ºåºä¸å½“å¯èƒ½å¯¼è‡´ä¸€äº›å€¼è¢«ç ´åã€‚ä¾‹å¦‚é€”ä¸­LCLè¢«æ¢å¤äº†ï¼Œå¯¼è‡´æœ€åå–ä¸åˆ°returnçš„åœ°å€ï¼Œæˆ‘åœ¨è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯å…ˆæŠŠreturnåœ°å€å¯„å­˜åˆ°ä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œåé¢å†å–å‡ºæ¥ã€‚ return ä¼ªä»£ç  -------------------- pop argument 0 //popè¿”å›å€¼åˆ°argument 0 SP = ARG + 1 //é‡ç½®SPæŒ‡é’ˆ restore THAT //æ¢å¤å¯„å­˜å™¨æŒ‡é’ˆ restore THIS restore ARG restore LCL goto RET //è·³è½¬åˆ°è¿”å›åœ°å€ def writeReturn saveReturnAddress() writePushPop(&quot;C_POP&quot;, &quot;argument&quot;, &quot;0&quot;) restoreSP() restoreSegement(&quot;THAT&quot;) restoreSegement(&quot;THIS&quot;) restoreSegement(&quot;ARG&quot;) restoreSegement(&quot;LCL&quot;) gotoReturnAddress() end # æš‚å­˜returnåœ°å€åˆ°R14ï¼ˆæœ€åå–returnåœ°å€æ—¶éœ€è¦ç”¨LCL-5æ¥å®šä½ï¼Œè€Œé€”ä¸­LCLä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠŠreturnåœ°å€æš‚å­˜èµ·æ¥ï¼ŒR13è¢«getStackTopToDå ç”¨äº†ï¼‰ def saveReturnAddress() asm_cmd = &quot;@5&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=A&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@LCL&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M-D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@R14&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end # é‡ç½®SPæŒ‡é’ˆ def restoreSP() asm_cmd = &quot;@ARG&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M+1&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@SP&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end # æ¢å¤å¯„å­˜å™¨æŒ‡é’ˆ def restoreSegement(segment) table = {&quot;THAT&quot;=&amp;gt;&quot;1&quot;, &quot;THIS&quot;=&amp;gt;&quot;2&quot;, &quot;ARG&quot;=&amp;gt;&quot;3&quot;, &quot;LCL&quot;=&amp;gt;&quot;4&quot;} asm_cmd = &quot;@#{table[segment]}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=A&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@LCL&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M-D&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;D=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;@#{segment}&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;M=D&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end # returnåˆ°ä¸Šä¸€çº§å‡½æ•°ç»§ç»­æ‰§è¡Œ def gotoReturnAddress() asm_cmd = &quot;@R14&quot;&amp;lt;&amp;lt; &quot;\n&quot; asm_cmd &amp;lt;&amp;lt; &quot;A=M&quot;&amp;lt;&amp;lt; &quot;\n&quot; # ä»R14å–å‡ºç¼“å­˜çš„returnåœ°å€ asm_cmd &amp;lt;&amp;lt; &quot;0;JMP&quot;&amp;lt;&amp;lt; &quot;\n&quot; @sam_file.write(asm_cmd) end ä»ä¸­å­¦åˆ°ä»€ä¹ˆ é€šè¿‡æœ¬ç¯‡çš„å®è·µï¼Œæˆ‘ä»¬æŒæ¡äº†CPUåœ¨æ ˆä¸Šçš„å·¥ä½œæ–¹å¼ï¼Œå°¤å…¶æ˜¯äº†è§£äº†æ ˆå¯¹å‡½æ•°è°ƒç”¨çš„æ”¯æŒã€‚è¿™äº›æŒ‡ä»¤å’Œæˆ‘ä»¬å¸¸ç”¨çš„CPUæ±‡ç¼–æŒ‡ä»¤æ›´åŠ æ¥è¿‘ï¼ˆåŒ…æ‹¬æŸäº›å¯„å­˜å™¨çš„ä½œç”¨ï¼‰ï¼Œå¯¹æˆ‘ä»¬è¿›ä¸€æ­¥å­¦ä¹ ç†è§£x86æˆ–ARMæ±‡ç¼–æŒ‡ä»¤ï¼Œç”šè‡³Cè¯­è¨€ç­‰é«˜çº§è¯­è¨€ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚ æˆ‘ä»¬çœ‹åˆ°äº†ç¨‹åºè™šæ‹Ÿæœºçš„å·¥ä½œæ–¹å¼ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç¿»è¯‘æœºï¼šå‘ä¸Šæä¾›ä¸€ç§æ–°çš„è¯­è¨€æ¥å£ï¼Œç„¶åæŠŠè™šæ‹Ÿæœºè¯­è¨€ç¿»è¯‘æˆæ‰€åœ¨å¹³å°çš„è®¡ç®—æœºè¯­è¨€ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒå¹³å°ä¸Šå®ç°Hackè™šæ‹Ÿæœºï¼Œåªä¸è¿‡ç¿»è¯‘çš„å®ç°ç»†èŠ‚ä¼šå‘ç”Ÿæ”¹å˜ã€‚Hackè™šæ‹Ÿæœºå’ŒJavaè™šæ‹Ÿæœºæœ¬è´¨ä¸Šç›¸åŒçš„ï¼ŒHackè™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªçº¯çš„é™æ€ç¿»è¯‘å™¨ï¼Œè€ŒJavaè™šæ‹Ÿæœºä½œä¸ºä¸€ä¸ªè¿›ç¨‹è¿è¡Œï¼Œæ˜¯åŠ¨æ€ç¿»è¯‘çš„ï¼Œæ­¤å¤–Javaè™šæ‹Ÿæœºè¿˜æœ‰ç±»åŠ è½½å™¨ï¼Œå†…å­˜å›æ”¶ç­‰å¼ºå¤§åŠŸèƒ½ã€‚ æˆ‘ä»¬ä¹Ÿå­¦åˆ°äº†ä¸€äº›é‡è¦çš„ç¼–ç¨‹æ€æƒ³ï¼šå¦‚æœåœ¨æœ¬å±‚å®ç°é€»è¾‘è¿‡äºå¤æ‚ï¼Œå¯ä»¥è€ƒè™‘æŠŠä¸€äº›å¤æ‚çš„é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œäº¤ç»™ä¸‹å±‚æ¥å®ç°ï¼Œå³æŠŠå¤æ‚çš„é—®é¢˜åˆ†å±‚åŒ–ã€‚å°½é‡è®©åŠ¨æ€çš„ï¼Œå˜åŒ–çš„ï¼Œéœ€è¦è¢«ç¼–ç¨‹çš„ï¼Œé¢å‘ç¨‹åºå‘˜çš„éƒ¨åˆ†å˜å¾—æ ‡å‡†å’Œç®€å•ï¼ŒæŠŠå¤æ‚çš„é€»è¾‘å°è£…åœ¨é™æ€çš„ï¼Œåº•å±‚çš„ï¼Œä¸é¢å‘ç¨‹åºå‘˜çš„åœ°æ–¹ã€‚ç›®çš„æ˜¯è®©å¼€å‘è€…èƒ½æŠŠä¸»è¦ç²¾åŠ›æ”¾åœ¨è§£å†³é—®é¢˜çš„ç®—æ³•ä¹‹ä¸Šï¼Œè€Œä¸ç”¨è€ƒè™‘è®©äººå¤´ç–¼çš„åº•å±‚çš„å®ç°ç»†èŠ‚ã€‚è¿™æ˜¯ä¸€ä¸ªç¨‹åºå‘˜çš„é‡è¦åŸºæœ¬åŠŸã€‚ NEXT Hackè™šæ‹Ÿæœºæ›´åŠ æ¥è¿‘ä¸€ä¸ªçœŸå®çš„è®¡ç®—æœºäº†ï¼Œå®ƒå¯ä»¥æ”¯æŒä¸€ç³»åˆ—å‡½æ•°åœ¨è™šæ‹Ÿæœºä¸Šçš„è¿ç®—å’Œäº’ç›¸è°ƒç”¨ã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†è®¾è®¡ä¸€é—¨ç®€æ´çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå¹¶å®ç°å®ƒçš„ç¼–è¯‘å™¨ï¼Œç„¶åæˆ‘ä»¬ç»ˆäºå¯ä»¥ä½¿ç”¨é«˜çº§è¯­è¨€åœ¨Hackä¸Šç¼–å†™ç¨‹åºäº†ã€‚ æœ¬ç¯‡å®Œæ•´å®ç°æ”¾åœ¨äº†:github</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(6/12)â€“æ±‡ç¼–è¯­è¨€ä¸æ±‡ç¼–å™¨</title><link href="/2020/02/19/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B8%8E%E6%B1%87%E7%BC%96%E5%99%A8.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(6/12)--æ±‡ç¼–è¯­è¨€ä¸æ±‡ç¼–å™¨" /><published>2020-02-19T00:00:00+08:00</published><updated>2020-02-19T00:00:00+08:00</updated><id>/2020/02/19/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B8%8E%E6%B1%87%E7%BC%96%E5%99%A8</id><content type="html" xml:base="/2020/02/19/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B8%8E%E6%B1%87%E7%BC%96%E5%99%A8.html">&lt;p&gt;å‰ä¸€ç¯‡æˆ‘ä»¬å®Œæˆäº†Hackå¹³å°çš„ç¡¬ä»¶éƒ¨åˆ†ï¼Œæœ¬ç¯‡å¼€å§‹æˆ‘ä»¬è¿›å…¥åˆ°è½¯ä»¶çš„éƒ¨åˆ†ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œè½¯ä»¶éƒ¨åˆ†æ›´åŠ å¤æ‚ï¼Œéœ€è¦èŠ±æ›´å¤šæ—¶é—´æ¥å®ç°å’Œè°ƒè¯•ã€‚è½¯ä»¶éƒ¨åˆ†çš„ç¬¬ä¸€å±‚å°±æ˜¯æ±‡ç¼–è¯­è¨€å’Œæ±‡ç¼–å™¨ï¼Œæœ¬ç¯‡æˆ‘ä»¬å°†å®šä¹‰Hackçš„æ±‡ç¼–è¯­è¨€ï¼Œå¹¶ç¼–å†™å¯¹åº”çš„æ±‡ç¼–å™¨&lt;/p&gt;

&lt;h3 id=&quot;æ±‡ç¼–è¯­è¨€å’Œæ±‡ç¼–å™¨&quot;&gt;æ±‡ç¼–è¯­è¨€å’Œæ±‡ç¼–å™¨&lt;/h3&gt;

&lt;p&gt;æ±‡ç¼–è¯­è¨€æ˜¯æœºå™¨è¯­è¨€çš„ç¬¦å·è¡¨ç¤ºï¼Œç›¸æ¯”äºæœºå™¨è¯­è¨€ï¼Œæ±‡ç¼–è¯­è¨€æ›´æ¥è¿‘äºè‡ªç„¶è¯­è¨€ï¼Œä¾¿äºæˆ‘ä»¬é˜…è¯»å’Œè®°å¿†ã€‚æ±‡ç¼–è¯­è¨€å’Œæœºå™¨è¯­è¨€åœ¨è¡¨è¿°ä¸Šçš„ä¸€è‡´æ€§æ˜¯éå¸¸é«˜çš„ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ä¸¤ç§æŒ‡ä»¤æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¾‹å¦‚ï¼š1000100111011000å¯¹åº”mov ax,bxï¼ŒæŠŠæœºå™¨æŒ‡ä»¤æ‹†æˆ3æ®µï¼Œå…¶ä¸­å‰8ä½ä»£è¡¨movï¼Œä¸­é—´4ä½ä»£è¡¨å¯„å­˜å™¨axï¼Œæœ€åå››ä½ä»£è¡¨å¯„å­˜å™¨bxã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ±‡ç¼–è¯­è¨€ä¸­ç”¨å¼•ç”¨ä¸€äº›ç¬¦å·ï¼Œç”¨äºä»£è¡¨æŸäº›æ•°å€¼ï¼ˆä¾‹å¦‚å†…å­˜åœ°å€ï¼ŒæŒ‡ä»¤åœ°å€ç­‰ï¼‰ï¼Œè¿™å¯ä»¥æŠŠæˆ‘ä»¬ä»å¤„ç†è¿™äº›ç¹ççš„æ•°å€¼çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼ˆä¾‹å¦‚æˆ‘ä»¬ç”¨ç¬¦å·iæ¥ä»£è¡¨ä¸€å—å†…å­˜åœ°å€ï¼Œç„¶åä¸ç”¨å»è®°å¿†åœ°å€å…·ä½“çš„å€¼æ˜¯å¤šå°‘ï¼Œåˆ†é…åœ¨ä»€ä¹ˆä½ç½®ï¼Œæ˜¯å¦å’Œå…¶ä»–åœ°å€å†²çªç­‰ï¼‰ï¼Œæé«˜ä»£ç çš„ç¼–å†™æ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;æ±‡ç¼–å™¨è´Ÿè´£æŠŠæ±‡ç¼–è¯­è¨€ç¿»è¯‘æˆæœºå™¨è¯­è¨€ã€‚å› ä¸ºæ±‡ç¼–è¯­è¨€å’Œæœºå™¨è¯­è¨€çš„é«˜åº¦ä¸€è‡´æ€§ï¼Œæ‰€ä»¥å®ç°æ±‡ç¼–å™¨æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚å”¯ä¸€çš„éš¾ç‚¹å¯èƒ½å°±åœ¨äºä¸Šé¢æ‰€æåˆ°çš„å¦‚ä½•æŠŠä¸€äº›ç¬¦å·å’Œå®ƒä»¬æ‰€å¯¹åº”çš„æ•°å€¼è”ç³»èµ·æ¥ï¼Œå³ç¬¦å·è§£æ(symbol resolution)çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;hackçš„æ±‡ç¼–è¯­è¨€è®¾è®¡&quot;&gt;Hackçš„æ±‡ç¼–è¯­è¨€è®¾è®¡&lt;/h3&gt;

&lt;p&gt;æƒ³è¦è®¾è®¡ä¸€é—¨æ±‡ç¼–è¯­è¨€ï¼Œé‚£ä¹ˆå¿…é¡»è¦å‚è€ƒå®ƒçš„æœºå™¨è¯­è¨€ã€‚Hackçš„æœºå™¨æŒ‡ä»¤é›†è¿‡äºç®€å•ï¼Œåªæœ‰Aã€Cä¸¤ç§å‘½ä»¤ï¼Œæ‰€ä»¥ç›¸åº”çš„å®ƒçš„æ±‡ç¼–è¯­è¨€ä¹Ÿå¾ˆç®€å•ğŸ˜‚ã€‚&lt;/p&gt;

&lt;h4 id=&quot;aæŒ‡ä»¤&quot;&gt;AæŒ‡ä»¤&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬copyä¸€äº›ä¸Šä¸€ç¯‡æ–‡ç« çš„å†…å®¹ï¼šAæŒ‡ä»¤ï¼Œå³AddressæŒ‡ä»¤ã€‚å®ƒçš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæ•°å€¼ä¼ é€åˆ°CPUä¸­çš„Aå¯„å­˜å™¨å³å¯ï¼Œå¤šæ•°æƒ…å†µä¸‹è¿™ä¸ªæ•°å­—åç»­ä¼šå½“åšåœ°å€ä½¿ç”¨ï¼Œç”¨äºå®šä½å†…å­˜ä¸­çš„å­˜å‚¨å•å…ƒã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh0rj8yj6j30we0480sn.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬å®šä¹‰AæŒ‡ä»¤çš„æ±‡ç¼–æŒ‡ä»¤æ ¼å¼æ˜¯ï¼š&lt;strong&gt;@value&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt;valueå¯ä»¥æ˜¯ä¸€ä¸ªç«‹å³æ•°ã€‚è¿™ç§æ ¼å¼æ˜¯ä¸¤ç§è¯­è¨€çš„å¤©ç„¶æ˜ å°„ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@3  //æŠŠæ•°å­—3ä¼ é€åˆ°Aå¯„å­˜å™¨
@5  //æŠŠæ•°å­—5ä¼ é€åˆ°Aå¯„å­˜å™¨
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt;valueä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç¬¦å·ï¼ˆå˜é‡åï¼‰&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æ”¯æŒæŠŠç¬¦å·å½“åšæ•°å€¼ä»£å…¥ï¼Œè¿™æ›´åƒæˆ‘ä»¬åœ¨é«˜çº§è¯­è¨€ä¸­ç¼–ç çš„æ–¹å¼ã€‚ä¾‹å¦‚@numberï¼Œå®ƒçš„å«ä¹‰æ˜¯ï¼šæŠŠå˜é‡numberçš„é¦–åœ°å€ä¼ é€åˆ°Aå¯„å­˜å™¨ï¼Œnumberçš„é¦–åœ°å€å¯èƒ½æ˜¯1000æˆ–è€…2000ï¼Œæˆ‘ä»¬å¹¶ä¸å»å…³å¿ƒå®ƒã€‚å¦‚æœä¸æ”¯æŒ@+ç¬¦å·è¿™ç§å‘½ä»¤ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆç¼–å†™Hackçš„Aæ±‡ç¼–æŒ‡ä»¤å‘¢ï¼Ÿæˆ‘ä»¬å¯èƒ½éœ€è¦å…ˆæ¢³ç†å‡ºè¯¥ç¨‹åºéœ€è¦å‡ ä¸ªå˜é‡ï¼Œä¾‹å¦‚iï¼Œjï¼Œkï¼Œç„¶åç”»ä¸€ä¸ªè¡¨æ ¼ï¼Œå®‰æ’ä¸€ä¸‹iï¼Œjï¼Œkçš„åœ°å€ï¼Œå¹¶ä¿è¯ä»–ä»¬ä¸äº’ç›¸å†²çªï¼Œç„¶åç”¨@+ç«‹å³æ•°çš„æ–¹å¼ç¼–å†™ï¼Œæ¯æ¬¡é‡åˆ°éœ€è¦ä¼ å…¥å˜é‡åœ°å€çš„æ—¶å€™ï¼Œå»æ£€æŸ¥ä¸‹è¡¨æ ¼ï¼Œå¡«å…¥å˜é‡å¯¹åº”çš„æ•°å€¼ã€‚åœ¨å¤æ‚çš„ç¨‹åºä¸­ï¼Œè¿™å¯èƒ½æ˜¯ç›¸å½“ç¹çä¸”å®¹å™¨å‡ºé”™çš„ï¼Œæ‰€ä»¥æŠŠä»–äº¤ç»™æ±‡ç¼–å™¨å»åšæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@number  //æŠŠå˜é‡numberå¯¹åº”çš„æ•°å€¼ï¼ˆå˜é‡åœ°å€ï¼‰ä¼ é€åˆ°Aå¯„å­˜å™¨
@END     //æŠŠæ ‡ç­¾ENDå¯¹åº”çš„æ•°å€¼ï¼ˆæŒ‡ä»¤åœ°å€ï¼‰ä¼ é€åˆ°Aå¯„å­˜å™¨
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™å¥½åƒæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸç§æŠ€å·§ï¼ˆå€ŸåŠ©ä¸€äº›æ•°æ®ç»“æ„å’Œç®—æ³•ï¼‰ï¼Œæ¥æŠŠä¸€ä¸ªé—®é¢˜è§£å†³åœ°æ›´å¿«æ›´å¥½&lt;/strong&gt;ï¼Œè¿™å¯èƒ½å°±æ˜¯ç¼–ç¨‹ä¸­æœ€æœ‰æ„æ€ä¹Ÿæœ€æœ‰æŒ‘æˆ˜çš„åœ°æ–¹å§ã€‚&lt;/p&gt;

&lt;h4 id=&quot;cæŒ‡ä»¤&quot;&gt;CæŒ‡ä»¤&lt;/h4&gt;

&lt;p&gt;CæŒ‡ä»¤è¾ƒä¸ºå¤æ‚ï¼Œåˆ†æˆ4éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ç¬¬ä¸€ä½æ˜¯æ ‡å¿—ä½ï¼šä¸º1æ—¶å°±ä»£è¡¨è¯¥æŒ‡ä»¤æ˜¯CæŒ‡ä»¤&lt;/li&gt;
  &lt;li&gt;3-10ä½æ˜¯compä½ï¼šï¼šè¿™å‡ ä½çš„æ’åˆ—ç”¨äºè¡¨ç¤ºæ‰§è¡Œä¸åŒçš„å…ƒç´ &amp;amp;é€»è¾‘è¿ç®—&lt;/li&gt;
  &lt;li&gt;11â€”â€”13ä½æ˜¯destä½ï¼šæŒ‡ç¤ºéœ€è¦æŠŠè®¡ç®—å‡ºçš„æ•°æ®ä¼ é€åˆ°å“ªé‡Œï¼ˆå¯„å­˜å™¨æˆ–å†…å­˜ï¼‰&lt;/li&gt;
  &lt;li&gt;14-16ä½æ˜¯jumpä½ï¼šæŒ‡ç¤ºCPUæ‰§è¡Œè·³è½¬æŒ‡ä»¤çš„æ¡ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh0v8yf1cj311604st8o.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬å®šä¹‰CæŒ‡ä»¤çš„æ±‡ç¼–æŒ‡ä»¤æ ¼å¼æ˜¯ï¼š&lt;strong&gt;dest=comp ; jump&lt;/strong&gt;ã€‚å…¶ä¸­â€dest=â€ï¼Œæˆ–â€; jumpâ€å¯ä»¥è¢«çœç•¥ï¼Œæ‰€ä»¥è¿˜å¯ä»¥æ¼”åŒ–å‡ºå¦å¤–ä¸¤ç§æ›´å¸¸ç”¨çš„æŒ‡ä»¤ï¼šâ€dest=compâ€å’Œâ€comp ; jumpâ€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt;è®¡ç®—åèµ‹å€¼æŒ‡ä»¤ï¼šdest=comp&lt;/p&gt;

&lt;p&gt;ä¸‹å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°destï¼Œcompï¼Œjumpå„è‡ªçš„æ“ä½œå’Œcodeçš„å¯¹åº”æ–¹å¼ã€‚ä¾‹å¦‚compä¸­0000010å¯¹ä»£è¡¨ç®—D+Açš„å’Œï¼Œç„¶åä»outè¾“å‡ºï¼›destä¸­010ä»£è¡¨æŠŠcompè®¡ç®—çš„èµ‹ç»™å¯„å­˜å™¨Dï¼›é‚£ä¹ˆD=D+Aï¼Œè¿™å¥æ±‡ç¼–æŒ‡ä»¤å°±ä»£è¡¨ï¼šè¿›è¡ŒD+Açš„è®¡ç®—æ“ä½œï¼Œç„¶åæŠŠç»“æœä¼ é€åˆ°å¯„å­˜å™¨Dã€‚D=D+Aå¯¹åº”çš„æœºå™¨æŒ‡ä»¤æ˜¯ï¼š111(0000010)(010)(000)ï¼ˆåä¸‰ä½000ä»£è¡¨è·³è½¬æŒ‡ä»¤ä¸ºnullï¼Œå³ä¸è·³è½¬ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt;è®¡ç®—åè·³è½¬æŒ‡ä»¤ï¼šcomp ; jump&lt;/p&gt;

&lt;p&gt;jumpä¸­001ä»£è¡¨åˆ¤æ–­compè¾“å‡ºçš„å€¼ï¼Œå¦‚æœ&amp;gt;0ï¼Œåˆ™è¿›è¡ŒæŒ‡ä»¤è·³è½¬æ“ä½œã€‚é‚£ä¹ˆD ; JGTï¼Œè¿™å¥æ±‡ç¼–æŒ‡ä»¤å°±ä»£è¡¨ï¼šè¿›è¡ŒDçš„è®¡ç®—æ“ä½œï¼ˆå³ç®€å•çš„æŠŠDè¾“å‡ºï¼‰ï¼Œç„¶ååˆ¤æ–­å¦‚æœå€¼&amp;gt;0ï¼Œåˆ™è¿›è¡ŒæŒ‡ä»¤è·³è½¬æ“ä½œã€‚D ; JGTå¯¹åº”çš„æœºå™¨æŒ‡ä»¤æ˜¯ï¼š111(0001100)(000)(001)ã€‚ï¼ˆå€’æ•°åä¸‰ä½000ä»£è¡¨èµ‹å€¼æŒ‡ä»¤ä¸ºnullï¼Œå³ä¸éœ€èµ‹å€¼ï¼‰&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybpgy1gc2zbfy0mmj30uq0kgt9m.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;&lt;em&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ— è®ºæ˜¯è¦è¿›è¡ŒæŒ‡ä»¤è·³è½¬æ“ä½œï¼Œè¿˜æ˜¯å¯¹å†…å­˜çš„æ•°æ®è¿›è¡Œè¯»æˆ–å†™ï¼Œéƒ½éœ€è¦å…ˆè°ƒç”¨AæŒ‡ä»¤ï¼ŒæŠŠç›®æ ‡åœ°å€å†™å…¥Aå¯„å­˜å™¨&lt;/em&gt;&lt;/p&gt;

&lt;h4 id=&quot;ç¬¦å·ä¸ç¬¦å·è¡¨&quot;&gt;ç¬¦å·ä¸ç¬¦å·è¡¨&lt;/h4&gt;

&lt;p&gt;Hackæ±‡ç¼–è¯­è¨€ä¸­æ¶‰åŠ3ä¸­ç¬¦å·ï¼šé¢„å®šä¹‰ç¬¦å·ã€æ ‡ç­¾ç¬¦å·ã€å˜é‡ç¬¦å·&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt;é¢„å®šä¹‰ç¬¦å·ï¼šé¢„å®šä¹‰ç¬¦å·ç»‘å®šäº†å†…å­˜ä¸­çš„ä¸€äº›åœ°å€å€¼ï¼Œåœ¨ç¼–å†™æ±‡ç¼–è¯­è¨€æ—¶èµ·åˆ°è¾…åŠ©ä½œç”¨ã€‚ä¾‹å¦‚SP, lCL, ARGç­‰ç”¨äºè¾…åŠ©å‡½æ•°è°ƒç”¨æ ˆçš„å®ç°ï¼›R0-R15å¯ä»¥è¢«å½“åšæ‰©å±•çš„å¯„å­˜å™¨ä½¿ç”¨ï¼›SCREEN, KBDä»£è¡¨å±å¹•å’Œé”®ç›˜çš„å†…å­˜åŒºåŸŸé¦–åœ°å€ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybpgy1gc316bfi83j30im0cmmxe.jpg&quot; width=&quot;300&quot; /&gt;&lt;/center&gt;

&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt;æ ‡ç­¾ç¬¦å·ï¼šæ ‡ç­¾ç¬¦å·ç»‘å®šäº†æŒ‡ä»¤çš„åœ°å€å€¼ï¼Œç”¨äºè·³è½¬æŒ‡ä»¤ã€‚ç”¨ï¼ˆå¤§å†™å­—æ¯ç¬¦å·ï¼‰å£°æ˜ï¼Œç‹¬å ä¸€è¡Œã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt;å˜é‡ç¬¦å·ï¼šå˜é‡ç¬¦å·ç»‘å®šäº†å˜é‡çš„åœ°å€å€¼ã€‚æ¯é‡åˆ°æ–°çš„å˜é‡ï¼Œåˆ™è¿ç»­åœ°åœ¨å†…å­˜ç©ºé—´ä¸ºå…¶åˆ†é…åœ°å€ï¼ˆå˜é‡åœ°å€ä»å†…å­˜ä¸­16åœ°å€å¼€å§‹ï¼‰ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybpgy1gc31216n0qj30ss19yq65.jpg&quot; width=&quot;300&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼Œkeyæ˜¯ç¬¦å·æœ¬èº«ï¼Œvalueå¯ä»¥æ˜¯å’Œè¯¥ç¬¦å·ç›¸å…³çš„è‹¥å¹²ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œç¬¦å·è¡¨çš„valueå°±æ˜¯ç¬¦å·ä»£è¡¨çš„å†…å­˜åœ°å€çš„å€¼ã€‚åœ¨ä½¿ç”¨ç¬¦å·è¡¨çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦å…ˆæ„å»ºç¬¦å·è¡¨ï¼ˆç¬¦å·è¡¨å¯èƒ½ä¼šè¢«åŠ¨æ€åœ°ä¿®æ”¹ï¼‰ï¼Œç„¶ååœ¨å¤„ç†ç¨‹åºæ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡æŸ¥æ‰¾ç¬¦å·è¡¨æ¥è·å–ç¬¦å·ç›¸å…³çš„ä¿¡æ¯ã€‚ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªé‡è¦çš„æ•°æ®ç»“æ„ï¼Œåœ¨æ±‡ç¼–å™¨ã€ç¼–è¯‘å™¨ã€é“¾æ¥å™¨ä¸­éƒ½æ‰®æ¼”äº†é‡è¦çš„è§’è‰²ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybpgy1gc31ywvwbaj30u80lwq3z.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;ä¸¾ä¾‹&quot;&gt;ä¸¾ä¾‹&lt;/h4&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ï¼ŒæŠŠä¸€ä¸ªCè¯­è¨€é£æ ¼çš„ä»£ç ï¼Œè½¬åŒ–ä¸ºHackä¸Šçš„æ±‡ç¼–è¯­è¨€å®ç°ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybpgy1gc32onh098j31390u0t9w.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;å®ç°&quot;&gt;å®ç°&lt;/h3&gt;

&lt;p&gt;å®ç°Hackçš„æ±‡ç¼–å™¨ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ–¹æ³•æ˜¯é€è¡Œçš„åˆ†ææ±‡ç¼–æŒ‡ä»¤ï¼Œåˆ¤æ–­æŒ‡ä»¤ç±»å‹å’Œç»„æˆæˆåˆ†ï¼Œç„¶åç”Ÿæˆå¯¹åº”çš„æœºå™¨æŒ‡ä»¤ã€‚å”¯ä¸€çš„éš¾ç‚¹åœ¨äºå¯¹ç¬¦å·çš„å¤„ç†ï¼Œè€Œå®ç°çš„æŠ€å·§åœ¨äºå¯¹ç¬¦å·è¡¨çš„è¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ±‡ç¼–å™¨å®ç°ï¼šï¼ˆå®Œæ•´å®ç°æ”¾åœ¨:&lt;a href=&quot;https://github.com/guosainpu/Nand2Tetris&quot;&gt;github&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SymbolTable&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# void add_entry(entry)      æ–°å¢ä¸€ä¸ªç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# bool contains(symbol)      æ˜¯å¦åŒ…å«ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string get_address(symbol) è·å–ç¬¦å·çš„å€¼&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ......&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Parser&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# bool hasMoreCommand        æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€æ¡æŒ‡ä»¤&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# void advance               æŒ‡ä»¤æ¸¸æ ‡å‰è¿›&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string commandType         å½“å‰æŒ‡ä»¤çš„ç±»å‹&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string symbol              å½“å‰æŒ‡ä»¤çš„ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string dest                å½“å‰æŒ‡ä»¤destéƒ¨åˆ†çš„ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string comp                å½“å‰æŒ‡ä»¤compéƒ¨åˆ†çš„ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string jump                å½“å‰æŒ‡ä»¤jumpéƒ¨åˆ†çš„ç¬¦å·&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ......&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Code&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string dest(mnemonic)      æ ¹æ®ç¬¦å·è·å–destçš„æœºå™¨ç &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string comp(mnemonic)      æ ¹æ®ç¬¦å·è·å–compçš„æœºå™¨ç &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# string jump(mnemonic)      æ ¹æ®ç¬¦å·è·å–jumpçš„æœºå™¨ç &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ......&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# main&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hack_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.hack&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;symbol_table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SymbolTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;vg&quot;&gt;$command_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#ç¬¬ä¸€æ¬¡éå†æºæ–‡ä»¶ï¼Œæ„å»ºç¬¦å·è¡¨ï¼ˆåˆå§‹åŒ–æ‰€æœ‰æ ‡ç­¾ç¬¦å·çš„å€¼ï¼Œå› ä¸ºæ ‡ç­¾ç¬¦å·å¯ä»¥å…ˆä½¿ç”¨åå£°æ˜ï¼Œæ‰€ä»¥éœ€è¦å…ˆéå†ä¸€éï¼›å˜é‡ç¬¦å·å¯ä»¥è¾¹ç”Ÿæˆæœºå™¨ä»£ç æ—¶è¾¹åˆå§‹åŒ–ï¼Œå› ä¸ºå˜é‡ç¬¦å·æ˜¯å…ˆå£°æ˜åä½¿ç”¨ï¼‰&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;generate symbol table:&quot;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hasMoreCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commandType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;L_COMMAND&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;symbol_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add_entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completeBinary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;vg&quot;&gt;$command_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))})&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;vg&quot;&gt;$command_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;generate code:&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#ç¬¬äºŒæ¬¡éå†æºæ–‡ä»¶ï¼ŒæŠŠæ±‡ç¼–ä»£ç æ±‡ç¼–æˆæœºå™¨ä»£ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;vg&quot;&gt;$variabel_address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#å˜é‡ä»åœ°å€16å¼€å§‹è¿ç»­åˆ†é…&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hack_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hack_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hasMoreCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;advance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;commandType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;A_COMMAND&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;address_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;address_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completeBinary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#å¦‚æœç¬¦å·è¡¨å·²ç»åŒ…å«ç¬¦å·ï¼Œåˆ™ç›´æ¥å–å‡ºç¬¦å·çš„å€¼&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;address_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;address_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completeBinary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vg&quot;&gt;$variabel_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#å¦‚æœç¬¦å·è¡¨ä¸åŒ…å«ç¬¦å·ï¼Œåˆ™æŠŠç¬¦å·åŠ å…¥åˆ°ç¬¦å·è¡¨ï¼Œå¹¶æŠŠä¸‹ä¸€ä¸ªå˜é‡åœ°å€+1&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;symbol_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add_entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command_symbol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
            &lt;span class=&quot;vg&quot;&gt;$variabel_address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address_value&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;C_COMMAND&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;111&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dest_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;comp_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;comp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;comp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;jump_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;jump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;jump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comp_value&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dest_value&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jump_value&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;L_COMMAND&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;next&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;unknow command type&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;hack_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;completeBinary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binary_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;binary_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;binary_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;binary_string&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;is_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/\D/&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬ç”¨ä¸åˆ°200è¡Œçš„ä»£ç å°±å®ç°äº†ä¸€ä¸ªæ±‡ç¼–å™¨ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;æ±‡ç¼–è¯­è¨€æ˜¯äººæ“ä½œè®¡ç®—æœºå·¥ä½œæœ€ç›´æ¥çš„æ–¹å¼ï¼Œå®ƒæè¿°äº†è®¡ç®—æœºæœ€ç»ˆæ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ã€‚å­¦ä¹ æ±‡ç¼–è¯­è¨€èƒ½è®©æˆ‘ä»¬å……åˆ†è·å¾—åº•å±‚ç¼–ç¨‹çš„ä½“éªŒï¼Œç†è§£è®¡ç®—æœºè¿è¡Œçš„æœºç†ï¼Œè¿™èƒ½è®©æˆ‘åœ¨å­¦ä¹ ç†è§£ä¸Šå±‚çŸ¥è¯†çš„æ—¶å€™æ›´åŠ å‡†ç¡®ã€‚Hackçš„æ±‡ç¼–æŒ‡ä»¤åªå…·å¤‡äº†æœ€å¿…è¦çš„åŠŸèƒ½ï¼Œå’Œæˆ‘ä»¬å¸¸ç”¨çš„åŠ¨è¾„å‡ ç™¾æ¡çš„æ±‡ç¼–æŒ‡ä»¤é›†æœ‰å¾ˆå¤§å·®è·ï¼Œä½†è¿™å¹¶ä¸å¦¨ç¢Hackæˆä¸ºä¸€ä¸ªå®Œæ•´çš„è®¡ç®—æœºã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šåŸºäºHackçš„æ±‡ç¼–æŒ‡ä»¤æ‰©å±•å‡ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œè¿™ä¸ªè™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†æ›´æ¥è¿‘æˆ‘ä»¬å¸¸ç”¨çš„CPUçš„æŒ‡ä»¤é›†ã€‚&lt;/p&gt;

&lt;p&gt;æ¨èç‹çˆ½çš„ã€Šæ±‡ç¼–è¯­è¨€ã€‹ï¼Œè¿™æœ¬ä¹¦ä¸ä»…èƒ½é«˜æ•ˆåœ°æŒ‡å¯¼å¤§å®¶å­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€æœ¬ç”¨äºæŒ‡å¯¼å¦‚ä½•å­¦ä¹ çš„ä¹¦ï¼Œå­—é‡Œè¡Œé—´è•´å«äº†ç‹çˆ½è€å¸ˆè‡ªå·±å¯¹å¦‚ä½•å­¦ä¹ ï¼Œå¦‚ä½•æ•™å­¦çš„ç†è§£ã€‚ç›¸æ¯”è¾ƒäºå¾ˆå¤šè‹ç™½çš„ç¿»è¯‘ä¹¦ç±ï¼Œè¿™æœ¬æœ¬åœŸä¹¦ç±æ›´åŠ ä¼˜ç§€ã€‚&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">å‰ä¸€ç¯‡æˆ‘ä»¬å®Œæˆäº†Hackå¹³å°çš„ç¡¬ä»¶éƒ¨åˆ†ï¼Œæœ¬ç¯‡å¼€å§‹æˆ‘ä»¬è¿›å…¥åˆ°è½¯ä»¶çš„éƒ¨åˆ†ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œè½¯ä»¶éƒ¨åˆ†æ›´åŠ å¤æ‚ï¼Œéœ€è¦èŠ±æ›´å¤šæ—¶é—´æ¥å®ç°å’Œè°ƒè¯•ã€‚è½¯ä»¶éƒ¨åˆ†çš„ç¬¬ä¸€å±‚å°±æ˜¯æ±‡ç¼–è¯­è¨€å’Œæ±‡ç¼–å™¨ï¼Œæœ¬ç¯‡æˆ‘ä»¬å°†å®šä¹‰Hackçš„æ±‡ç¼–è¯­è¨€ï¼Œå¹¶ç¼–å†™å¯¹åº”çš„æ±‡ç¼–å™¨ æ±‡ç¼–è¯­è¨€å’Œæ±‡ç¼–å™¨ æ±‡ç¼–è¯­è¨€æ˜¯æœºå™¨è¯­è¨€çš„ç¬¦å·è¡¨ç¤ºï¼Œç›¸æ¯”äºæœºå™¨è¯­è¨€ï¼Œæ±‡ç¼–è¯­è¨€æ›´æ¥è¿‘äºè‡ªç„¶è¯­è¨€ï¼Œä¾¿äºæˆ‘ä»¬é˜…è¯»å’Œè®°å¿†ã€‚æ±‡ç¼–è¯­è¨€å’Œæœºå™¨è¯­è¨€åœ¨è¡¨è¿°ä¸Šçš„ä¸€è‡´æ€§æ˜¯éå¸¸é«˜çš„ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ä¸¤ç§æŒ‡ä»¤æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¾‹å¦‚ï¼š1000100111011000å¯¹åº”mov ax,bxï¼ŒæŠŠæœºå™¨æŒ‡ä»¤æ‹†æˆ3æ®µï¼Œå…¶ä¸­å‰8ä½ä»£è¡¨movï¼Œä¸­é—´4ä½ä»£è¡¨å¯„å­˜å™¨axï¼Œæœ€åå››ä½ä»£è¡¨å¯„å­˜å™¨bxã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ±‡ç¼–è¯­è¨€ä¸­ç”¨å¼•ç”¨ä¸€äº›ç¬¦å·ï¼Œç”¨äºä»£è¡¨æŸäº›æ•°å€¼ï¼ˆä¾‹å¦‚å†…å­˜åœ°å€ï¼ŒæŒ‡ä»¤åœ°å€ç­‰ï¼‰ï¼Œè¿™å¯ä»¥æŠŠæˆ‘ä»¬ä»å¤„ç†è¿™äº›ç¹ççš„æ•°å€¼çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼ˆä¾‹å¦‚æˆ‘ä»¬ç”¨ç¬¦å·iæ¥ä»£è¡¨ä¸€å—å†…å­˜åœ°å€ï¼Œç„¶åä¸ç”¨å»è®°å¿†åœ°å€å…·ä½“çš„å€¼æ˜¯å¤šå°‘ï¼Œåˆ†é…åœ¨ä»€ä¹ˆä½ç½®ï¼Œæ˜¯å¦å’Œå…¶ä»–åœ°å€å†²çªç­‰ï¼‰ï¼Œæé«˜ä»£ç çš„ç¼–å†™æ•ˆç‡ã€‚ æ±‡ç¼–å™¨è´Ÿè´£æŠŠæ±‡ç¼–è¯­è¨€ç¿»è¯‘æˆæœºå™¨è¯­è¨€ã€‚å› ä¸ºæ±‡ç¼–è¯­è¨€å’Œæœºå™¨è¯­è¨€çš„é«˜åº¦ä¸€è‡´æ€§ï¼Œæ‰€ä»¥å®ç°æ±‡ç¼–å™¨æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚å”¯ä¸€çš„éš¾ç‚¹å¯èƒ½å°±åœ¨äºä¸Šé¢æ‰€æåˆ°çš„å¦‚ä½•æŠŠä¸€äº›ç¬¦å·å’Œå®ƒä»¬æ‰€å¯¹åº”çš„æ•°å€¼è”ç³»èµ·æ¥ï¼Œå³ç¬¦å·è§£æ(symbol resolution)çš„è¿‡ç¨‹ã€‚ Hackçš„æ±‡ç¼–è¯­è¨€è®¾è®¡ æƒ³è¦è®¾è®¡ä¸€é—¨æ±‡ç¼–è¯­è¨€ï¼Œé‚£ä¹ˆå¿…é¡»è¦å‚è€ƒå®ƒçš„æœºå™¨è¯­è¨€ã€‚Hackçš„æœºå™¨æŒ‡ä»¤é›†è¿‡äºç®€å•ï¼Œåªæœ‰Aã€Cä¸¤ç§å‘½ä»¤ï¼Œæ‰€ä»¥ç›¸åº”çš„å®ƒçš„æ±‡ç¼–è¯­è¨€ä¹Ÿå¾ˆç®€å•ğŸ˜‚ã€‚ AæŒ‡ä»¤ æˆ‘ä»¬copyä¸€äº›ä¸Šä¸€ç¯‡æ–‡ç« çš„å†…å®¹ï¼šAæŒ‡ä»¤ï¼Œå³AddressæŒ‡ä»¤ã€‚å®ƒçš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæ•°å€¼ä¼ é€åˆ°CPUä¸­çš„Aå¯„å­˜å™¨å³å¯ï¼Œå¤šæ•°æƒ…å†µä¸‹è¿™ä¸ªæ•°å­—åç»­ä¼šå½“åšåœ°å€ä½¿ç”¨ï¼Œç”¨äºå®šä½å†…å­˜ä¸­çš„å­˜å‚¨å•å…ƒã€‚ æˆ‘ä»¬å®šä¹‰AæŒ‡ä»¤çš„æ±‡ç¼–æŒ‡ä»¤æ ¼å¼æ˜¯ï¼š@valueã€‚ 1.valueå¯ä»¥æ˜¯ä¸€ä¸ªç«‹å³æ•°ã€‚è¿™ç§æ ¼å¼æ˜¯ä¸¤ç§è¯­è¨€çš„å¤©ç„¶æ˜ å°„ã€‚ @3 //æŠŠæ•°å­—3ä¼ é€åˆ°Aå¯„å­˜å™¨ @5 //æŠŠæ•°å­—5ä¼ é€åˆ°Aå¯„å­˜å™¨ 2.valueä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç¬¦å·ï¼ˆå˜é‡åï¼‰ æˆ‘ä»¬æ”¯æŒæŠŠç¬¦å·å½“åšæ•°å€¼ä»£å…¥ï¼Œè¿™æ›´åƒæˆ‘ä»¬åœ¨é«˜çº§è¯­è¨€ä¸­ç¼–ç çš„æ–¹å¼ã€‚ä¾‹å¦‚@numberï¼Œå®ƒçš„å«ä¹‰æ˜¯ï¼šæŠŠå˜é‡numberçš„é¦–åœ°å€ä¼ é€åˆ°Aå¯„å­˜å™¨ï¼Œnumberçš„é¦–åœ°å€å¯èƒ½æ˜¯1000æˆ–è€…2000ï¼Œæˆ‘ä»¬å¹¶ä¸å»å…³å¿ƒå®ƒã€‚å¦‚æœä¸æ”¯æŒ@+ç¬¦å·è¿™ç§å‘½ä»¤ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆç¼–å†™Hackçš„Aæ±‡ç¼–æŒ‡ä»¤å‘¢ï¼Ÿæˆ‘ä»¬å¯èƒ½éœ€è¦å…ˆæ¢³ç†å‡ºè¯¥ç¨‹åºéœ€è¦å‡ ä¸ªå˜é‡ï¼Œä¾‹å¦‚iï¼Œjï¼Œkï¼Œç„¶åç”»ä¸€ä¸ªè¡¨æ ¼ï¼Œå®‰æ’ä¸€ä¸‹iï¼Œjï¼Œkçš„åœ°å€ï¼Œå¹¶ä¿è¯ä»–ä»¬ä¸äº’ç›¸å†²çªï¼Œç„¶åç”¨@+ç«‹å³æ•°çš„æ–¹å¼ç¼–å†™ï¼Œæ¯æ¬¡é‡åˆ°éœ€è¦ä¼ å…¥å˜é‡åœ°å€çš„æ—¶å€™ï¼Œå»æ£€æŸ¥ä¸‹è¡¨æ ¼ï¼Œå¡«å…¥å˜é‡å¯¹åº”çš„æ•°å€¼ã€‚åœ¨å¤æ‚çš„ç¨‹åºä¸­ï¼Œè¿™å¯èƒ½æ˜¯ç›¸å½“ç¹çä¸”å®¹å™¨å‡ºé”™çš„ï¼Œæ‰€ä»¥æŠŠä»–äº¤ç»™æ±‡ç¼–å™¨å»åšæ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚ @number //æŠŠå˜é‡numberå¯¹åº”çš„æ•°å€¼ï¼ˆå˜é‡åœ°å€ï¼‰ä¼ é€åˆ°Aå¯„å­˜å™¨ @END //æŠŠæ ‡ç­¾ENDå¯¹åº”çš„æ•°å€¼ï¼ˆæŒ‡ä»¤åœ°å€ï¼‰ä¼ é€åˆ°Aå¯„å­˜å™¨ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™å¥½åƒæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸç§æŠ€å·§ï¼ˆå€ŸåŠ©ä¸€äº›æ•°æ®ç»“æ„å’Œç®—æ³•ï¼‰ï¼Œæ¥æŠŠä¸€ä¸ªé—®é¢˜è§£å†³åœ°æ›´å¿«æ›´å¥½ï¼Œè¿™å¯èƒ½å°±æ˜¯ç¼–ç¨‹ä¸­æœ€æœ‰æ„æ€ä¹Ÿæœ€æœ‰æŒ‘æˆ˜çš„åœ°æ–¹å§ã€‚ CæŒ‡ä»¤ CæŒ‡ä»¤è¾ƒä¸ºå¤æ‚ï¼Œåˆ†æˆ4éƒ¨åˆ†ã€‚ ç¬¬ä¸€ä½æ˜¯æ ‡å¿—ä½ï¼šä¸º1æ—¶å°±ä»£è¡¨è¯¥æŒ‡ä»¤æ˜¯CæŒ‡ä»¤ 3-10ä½æ˜¯compä½ï¼šï¼šè¿™å‡ ä½çš„æ’åˆ—ç”¨äºè¡¨ç¤ºæ‰§è¡Œä¸åŒçš„å…ƒç´ &amp;amp;é€»è¾‘è¿ç®— 11â€”â€”13ä½æ˜¯destä½ï¼šæŒ‡ç¤ºéœ€è¦æŠŠè®¡ç®—å‡ºçš„æ•°æ®ä¼ é€åˆ°å“ªé‡Œï¼ˆå¯„å­˜å™¨æˆ–å†…å­˜ï¼‰ 14-16ä½æ˜¯jumpä½ï¼šæŒ‡ç¤ºCPUæ‰§è¡Œè·³è½¬æŒ‡ä»¤çš„æ¡ä»¶ æˆ‘ä»¬å®šä¹‰CæŒ‡ä»¤çš„æ±‡ç¼–æŒ‡ä»¤æ ¼å¼æ˜¯ï¼šdest=comp ; jumpã€‚å…¶ä¸­â€dest=â€ï¼Œæˆ–â€; jumpâ€å¯ä»¥è¢«çœç•¥ï¼Œæ‰€ä»¥è¿˜å¯ä»¥æ¼”åŒ–å‡ºå¦å¤–ä¸¤ç§æ›´å¸¸ç”¨çš„æŒ‡ä»¤ï¼šâ€dest=compâ€å’Œâ€comp ; jumpâ€ã€‚ 1.è®¡ç®—åèµ‹å€¼æŒ‡ä»¤ï¼šdest=comp ä¸‹å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°destï¼Œcompï¼Œjumpå„è‡ªçš„æ“ä½œå’Œcodeçš„å¯¹åº”æ–¹å¼ã€‚ä¾‹å¦‚compä¸­0000010å¯¹ä»£è¡¨ç®—D+Açš„å’Œï¼Œç„¶åä»outè¾“å‡ºï¼›destä¸­010ä»£è¡¨æŠŠcompè®¡ç®—çš„èµ‹ç»™å¯„å­˜å™¨Dï¼›é‚£ä¹ˆD=D+Aï¼Œè¿™å¥æ±‡ç¼–æŒ‡ä»¤å°±ä»£è¡¨ï¼šè¿›è¡ŒD+Açš„è®¡ç®—æ“ä½œï¼Œç„¶åæŠŠç»“æœä¼ é€åˆ°å¯„å­˜å™¨Dã€‚D=D+Aå¯¹åº”çš„æœºå™¨æŒ‡ä»¤æ˜¯ï¼š111(0000010)(010)(000)ï¼ˆåä¸‰ä½000ä»£è¡¨è·³è½¬æŒ‡ä»¤ä¸ºnullï¼Œå³ä¸è·³è½¬ï¼‰ 2.è®¡ç®—åè·³è½¬æŒ‡ä»¤ï¼šcomp ; jump jumpä¸­001ä»£è¡¨åˆ¤æ–­compè¾“å‡ºçš„å€¼ï¼Œå¦‚æœ&amp;gt;0ï¼Œåˆ™è¿›è¡ŒæŒ‡ä»¤è·³è½¬æ“ä½œã€‚é‚£ä¹ˆD ; JGTï¼Œè¿™å¥æ±‡ç¼–æŒ‡ä»¤å°±ä»£è¡¨ï¼šè¿›è¡ŒDçš„è®¡ç®—æ“ä½œï¼ˆå³ç®€å•çš„æŠŠDè¾“å‡ºï¼‰ï¼Œç„¶ååˆ¤æ–­å¦‚æœå€¼&amp;gt;0ï¼Œåˆ™è¿›è¡ŒæŒ‡ä»¤è·³è½¬æ“ä½œã€‚D ; JGTå¯¹åº”çš„æœºå™¨æŒ‡ä»¤æ˜¯ï¼š111(0001100)(000)(001)ã€‚ï¼ˆå€’æ•°åä¸‰ä½000ä»£è¡¨èµ‹å€¼æŒ‡ä»¤ä¸ºnullï¼Œå³ä¸éœ€èµ‹å€¼ï¼‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ— è®ºæ˜¯è¦è¿›è¡ŒæŒ‡ä»¤è·³è½¬æ“ä½œï¼Œè¿˜æ˜¯å¯¹å†…å­˜çš„æ•°æ®è¿›è¡Œè¯»æˆ–å†™ï¼Œéƒ½éœ€è¦å…ˆè°ƒç”¨AæŒ‡ä»¤ï¼ŒæŠŠç›®æ ‡åœ°å€å†™å…¥Aå¯„å­˜å™¨ ç¬¦å·ä¸ç¬¦å·è¡¨ Hackæ±‡ç¼–è¯­è¨€ä¸­æ¶‰åŠ3ä¸­ç¬¦å·ï¼šé¢„å®šä¹‰ç¬¦å·ã€æ ‡ç­¾ç¬¦å·ã€å˜é‡ç¬¦å· 1.é¢„å®šä¹‰ç¬¦å·ï¼šé¢„å®šä¹‰ç¬¦å·ç»‘å®šäº†å†…å­˜ä¸­çš„ä¸€äº›åœ°å€å€¼ï¼Œåœ¨ç¼–å†™æ±‡ç¼–è¯­è¨€æ—¶èµ·åˆ°è¾…åŠ©ä½œç”¨ã€‚ä¾‹å¦‚SP, lCL, ARGç­‰ç”¨äºè¾…åŠ©å‡½æ•°è°ƒç”¨æ ˆçš„å®ç°ï¼›R0-R15å¯ä»¥è¢«å½“åšæ‰©å±•çš„å¯„å­˜å™¨ä½¿ç”¨ï¼›SCREEN, KBDä»£è¡¨å±å¹•å’Œé”®ç›˜çš„å†…å­˜åŒºåŸŸé¦–åœ°å€ã€‚ 2.æ ‡ç­¾ç¬¦å·ï¼šæ ‡ç­¾ç¬¦å·ç»‘å®šäº†æŒ‡ä»¤çš„åœ°å€å€¼ï¼Œç”¨äºè·³è½¬æŒ‡ä»¤ã€‚ç”¨ï¼ˆå¤§å†™å­—æ¯ç¬¦å·ï¼‰å£°æ˜ï¼Œç‹¬å ä¸€è¡Œã€‚ 3.å˜é‡ç¬¦å·ï¼šå˜é‡ç¬¦å·ç»‘å®šäº†å˜é‡çš„åœ°å€å€¼ã€‚æ¯é‡åˆ°æ–°çš„å˜é‡ï¼Œåˆ™è¿ç»­åœ°åœ¨å†…å­˜ç©ºé—´ä¸ºå…¶åˆ†é…åœ°å€ï¼ˆå˜é‡åœ°å€ä»å†…å­˜ä¸­16åœ°å€å¼€å§‹ï¼‰ã€‚ ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼Œkeyæ˜¯ç¬¦å·æœ¬èº«ï¼Œvalueå¯ä»¥æ˜¯å’Œè¯¥ç¬¦å·ç›¸å…³çš„è‹¥å¹²ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œç¬¦å·è¡¨çš„valueå°±æ˜¯ç¬¦å·ä»£è¡¨çš„å†…å­˜åœ°å€çš„å€¼ã€‚åœ¨ä½¿ç”¨ç¬¦å·è¡¨çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦å…ˆæ„å»ºç¬¦å·è¡¨ï¼ˆç¬¦å·è¡¨å¯èƒ½ä¼šè¢«åŠ¨æ€åœ°ä¿®æ”¹ï¼‰ï¼Œç„¶ååœ¨å¤„ç†ç¨‹åºæ•°æ®çš„æ—¶å€™ï¼Œé€šè¿‡æŸ¥æ‰¾ç¬¦å·è¡¨æ¥è·å–ç¬¦å·ç›¸å…³çš„ä¿¡æ¯ã€‚ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªé‡è¦çš„æ•°æ®ç»“æ„ï¼Œåœ¨æ±‡ç¼–å™¨ã€ç¼–è¯‘å™¨ã€é“¾æ¥å™¨ä¸­éƒ½æ‰®æ¼”äº†é‡è¦çš„è§’è‰²ã€‚ ä¸¾ä¾‹ è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ï¼ŒæŠŠä¸€ä¸ªCè¯­è¨€é£æ ¼çš„ä»£ç ï¼Œè½¬åŒ–ä¸ºHackä¸Šçš„æ±‡ç¼–è¯­è¨€å®ç°ã€‚ å®ç° å®ç°Hackçš„æ±‡ç¼–å™¨ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ–¹æ³•æ˜¯é€è¡Œçš„åˆ†ææ±‡ç¼–æŒ‡ä»¤ï¼Œåˆ¤æ–­æŒ‡ä»¤ç±»å‹å’Œç»„æˆæˆåˆ†ï¼Œç„¶åç”Ÿæˆå¯¹åº”çš„æœºå™¨æŒ‡ä»¤ã€‚å”¯ä¸€çš„éš¾ç‚¹åœ¨äºå¯¹ç¬¦å·çš„å¤„ç†ï¼Œè€Œå®ç°çš„æŠ€å·§åœ¨äºå¯¹ç¬¦å·è¡¨çš„è¿ç”¨ã€‚ æ±‡ç¼–å™¨å®ç°ï¼šï¼ˆå®Œæ•´å®ç°æ”¾åœ¨:githubï¼‰ class SymbolTable # void add_entry(entry) æ–°å¢ä¸€ä¸ªç¬¦å· # bool contains(symbol) æ˜¯å¦åŒ…å«ç¬¦å· # string get_address(symbol) è·å–ç¬¦å·çš„å€¼ # ...... end class Parser # bool hasMoreCommand æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€æ¡æŒ‡ä»¤ # void advance æŒ‡ä»¤æ¸¸æ ‡å‰è¿› # string commandType å½“å‰æŒ‡ä»¤çš„ç±»å‹ # string symbol å½“å‰æŒ‡ä»¤çš„ç¬¦å· # string dest å½“å‰æŒ‡ä»¤destéƒ¨åˆ†çš„ç¬¦å· # string comp å½“å‰æŒ‡ä»¤compéƒ¨åˆ†çš„ç¬¦å· # string jump å½“å‰æŒ‡ä»¤jumpéƒ¨åˆ†çš„ç¬¦å· # ...... end class Code # string dest(mnemonic) æ ¹æ®ç¬¦å·è·å–destçš„æœºå™¨ç  # string comp(mnemonic) æ ¹æ®ç¬¦å·è·å–compçš„æœºå™¨ç  # string jump(mnemonic) æ ¹æ®ç¬¦å·è·å–jumpçš„æœºå™¨ç  # ...... end # main file_name = ARGV[0] hack_name = file_name.split(&quot;.&quot;)[0] + &quot;.hack&quot; parser=Parser.new(File.read(file_name)) code = Code.new() symbol_table = SymbolTable.new(); $command_line = 0 #ç¬¬ä¸€æ¬¡éå†æºæ–‡ä»¶ï¼Œæ„å»ºç¬¦å·è¡¨ï¼ˆåˆå§‹åŒ–æ‰€æœ‰æ ‡ç­¾ç¬¦å·çš„å€¼ï¼Œå› ä¸ºæ ‡ç­¾ç¬¦å·å¯ä»¥å…ˆä½¿ç”¨åå£°æ˜ï¼Œæ‰€ä»¥éœ€è¦å…ˆéå†ä¸€éï¼›å˜é‡ç¬¦å·å¯ä»¥è¾¹ç”Ÿæˆæœºå™¨ä»£ç æ—¶è¾¹åˆå§‹åŒ–ï¼Œå› ä¸ºå˜é‡ç¬¦å·æ˜¯å…ˆå£°æ˜åä½¿ç”¨ï¼‰ puts &quot;generate symbol table:&quot; while parser.hasMoreCommand() parser.advance() command_type = parser.commandType() command_symbol = parser.symbol() if command_type == &quot;L_COMMAND&quot; if !symbol_table.contains(command_symbol) symbol_table.add_entry({command_symbol=&amp;gt;completeBinary(($command_line).to_s(2))}) end else $command_line += 1 end end puts &quot;generate code:&quot; #ç¬¬äºŒæ¬¡éå†æºæ–‡ä»¶ï¼ŒæŠŠæ±‡ç¼–ä»£ç æ±‡ç¼–æˆæœºå™¨ä»£ç  parser.reset() $variabel_address = 16 #å˜é‡ä»åœ°å€16å¼€å§‹è¿ç»­åˆ†é… hack_file = File.new(hack_name, &quot;w&quot;) while parser.hasMoreCommand() new_command = &quot;&quot; parser.advance() command_type = parser.commandType() command_symbol = parser.symbol() if command_type == &quot;A_COMMAND&quot; new_command &amp;lt;&amp;lt; &quot;0&quot; address_value = &quot;&quot; if is_number(command_symbol) address_value = completeBinary(command_symbol.to_i.to_s(2)) elsif symbol_table.contains(command_symbol) #å¦‚æœç¬¦å·è¡¨å·²ç»åŒ…å«ç¬¦å·ï¼Œåˆ™ç›´æ¥å–å‡ºç¬¦å·çš„å€¼ address_value = symbol_table.get_address(command_symbol) else address_value = completeBinary($variabel_address.to_s(2)) #å¦‚æœç¬¦å·è¡¨ä¸åŒ…å«ç¬¦å·ï¼Œåˆ™æŠŠç¬¦å·åŠ å…¥åˆ°ç¬¦å·è¡¨ï¼Œå¹¶æŠŠä¸‹ä¸€ä¸ªå˜é‡åœ°å€+1 symbol_table.add_entry({command_symbol=&amp;gt;address_value}) $variabel_address += 1 end new_command &amp;lt;&amp;lt; address_value elsif command_type == &quot;C_COMMAND&quot; new_command &amp;lt;&amp;lt; &quot;111&quot; dest_value = code.dest(parser.dest()) comp_value = code.comp(parser.comp()) jump_value = code.jump(parser.jump()) new_command &amp;lt;&amp;lt; comp_value new_command &amp;lt;&amp;lt; dest_value new_command &amp;lt;&amp;lt; jump_value elsif command_type == &quot;L_COMMAND&quot; next else new_command &amp;lt;&amp;lt; &quot;unknow command type&quot; end new_command &amp;lt;&amp;lt; &quot;\n&quot; hack_file.write(new_command) end def completeBinary(binary_string) while binary_string.length &amp;lt; 15 binary_string.insert(0,&quot;0&quot;) end return binary_string end def is_number(string) return string !~ /\D/ end æˆ‘ä»¬ç”¨ä¸åˆ°200è¡Œçš„ä»£ç å°±å®ç°äº†ä¸€ä¸ªæ±‡ç¼–å™¨ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ æ€»ç»“ æ±‡ç¼–è¯­è¨€æ˜¯äººæ“ä½œè®¡ç®—æœºå·¥ä½œæœ€ç›´æ¥çš„æ–¹å¼ï¼Œå®ƒæè¿°äº†è®¡ç®—æœºæœ€ç»ˆæ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ã€‚å­¦ä¹ æ±‡ç¼–è¯­è¨€èƒ½è®©æˆ‘ä»¬å……åˆ†è·å¾—åº•å±‚ç¼–ç¨‹çš„ä½“éªŒï¼Œç†è§£è®¡ç®—æœºè¿è¡Œçš„æœºç†ï¼Œè¿™èƒ½è®©æˆ‘åœ¨å­¦ä¹ ç†è§£ä¸Šå±‚çŸ¥è¯†çš„æ—¶å€™æ›´åŠ å‡†ç¡®ã€‚Hackçš„æ±‡ç¼–æŒ‡ä»¤åªå…·å¤‡äº†æœ€å¿…è¦çš„åŠŸèƒ½ï¼Œå’Œæˆ‘ä»¬å¸¸ç”¨çš„åŠ¨è¾„å‡ ç™¾æ¡çš„æ±‡ç¼–æŒ‡ä»¤é›†æœ‰å¾ˆå¤§å·®è·ï¼Œä½†è¿™å¹¶ä¸å¦¨ç¢Hackæˆä¸ºä¸€ä¸ªå®Œæ•´çš„è®¡ç®—æœºã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šåŸºäºHackçš„æ±‡ç¼–æŒ‡ä»¤æ‰©å±•å‡ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œè¿™ä¸ªè™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†æ›´æ¥è¿‘æˆ‘ä»¬å¸¸ç”¨çš„CPUçš„æŒ‡ä»¤é›†ã€‚ æ¨èç‹çˆ½çš„ã€Šæ±‡ç¼–è¯­è¨€ã€‹ï¼Œè¿™æœ¬ä¹¦ä¸ä»…èƒ½é«˜æ•ˆåœ°æŒ‡å¯¼å¤§å®¶å­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€æœ¬ç”¨äºæŒ‡å¯¼å¦‚ä½•å­¦ä¹ çš„ä¹¦ï¼Œå­—é‡Œè¡Œé—´è•´å«äº†ç‹çˆ½è€å¸ˆè‡ªå·±å¯¹å¦‚ä½•å­¦ä¹ ï¼Œå¦‚ä½•æ•™å­¦çš„ç†è§£ã€‚ç›¸æ¯”è¾ƒäºå¾ˆå¤šè‹ç™½çš„ç¿»è¯‘ä¹¦ç±ï¼Œè¿™æœ¬æœ¬åœŸä¹¦ç±æ›´åŠ ä¼˜ç§€ã€‚</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(5/12)â€“å®ç°hackï¼šè®¡ç®—æœºæ¶æ„ã€å†…å­˜ã€CPUå’ŒæŒ‡ä»¤é›†</title><link href="/2020/02/01/hack-CPU%E6%9E%B6%E6%9E%84%E5%92%8C%E6%8C%87%E4%BB%A4%E9%9B%86.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(5/12)--å®ç°hackï¼šè®¡ç®—æœºæ¶æ„ã€å†…å­˜ã€CPUå’ŒæŒ‡ä»¤é›†" /><published>2020-02-01T00:00:00+08:00</published><updated>2020-02-01T00:00:00+08:00</updated><id>/2020/02/01/hack%20CPU%E6%9E%B6%E6%9E%84%E5%92%8C%E6%8C%87%E4%BB%A4%E9%9B%86</id><content type="html" xml:base="/2020/02/01/hack-CPU%E6%9E%B6%E6%9E%84%E5%92%8C%E6%8C%87%E4%BB%A4%E9%9B%86.html">&lt;p&gt;ç»è¿‡å‰ä¸¤ç¯‡æˆ‘ä»¬å·²ç»å®ç°äº†æ‰€æœ‰çš„ç»„åˆé€»è¾‘èŠ¯ç‰‡å’Œæ—¶åºèŠ¯ç‰‡ï¼Œå…·å¤‡äº†å®ç°hackè®¡ç®—æœºçš„åŸºç¡€ï¼Œæœ¬ç¯‡æ˜¯é¡¹ç›®ç¡¬ä»¶éƒ¨åˆ†çš„æœ€åä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç¯‡å®šä¹‰hackèƒ½å¤Ÿæ‰§è¡Œçš„æ“ä½œï¼Œå³hackçš„æŒ‡ä»¤é›†ï¼›å®ç°hackçš„å†…å­˜ã€CPUï¼Œç„¶åå°†å®ƒä»¬ç»„åˆèµ·æ¥å½¢æˆå®Œæ•´çš„è®¡ç®—æœºç¡¬ä»¶æ¶æ„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è®¡ç®—æœºæ¶æ„&quot;&gt;è®¡ç®—æœºæ¶æ„&lt;/h3&gt;

&lt;p&gt;hackæ˜¯åŸºäºç»å…¸çš„å†¯Â·è¯ºä¼Šæ›¼ä½“ç³»æ¶æ„ï¼Œå®ƒçš„å…³é”®ç»„æˆéƒ¨åˆ†æ˜¯å°†ä¸­å¤®å¤„ç†å•å…ƒå’Œå­˜å‚¨å™¨ï¼Œé€šè¿‡å­˜å‚¨å™¨ä¸­å­˜å‚¨çš„ç¨‹åºæŒ‡ä»¤æ§åˆ¶ä¸­å¤®å¤„ç†å™¨çš„æ‰§è¡Œï¼Œå³å­˜å‚¨ç¨‹åºè®¡ç®—æœºã€‚å®ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ä»¥è¿ç®—å•å…ƒä¸ºä¸­å¿ƒ&lt;/li&gt;
  &lt;li&gt;é‡‡ç”¨å­˜å‚¨ç¨‹åºåŸç†&lt;/li&gt;
  &lt;li&gt;å­˜å‚¨å™¨æ˜¯æŒ‰åœ°å€è®¿é—®ã€çº¿æ€§ç¼–å€çš„ç©ºé—´&lt;/li&gt;
  &lt;li&gt;æ§åˆ¶æµç”±æŒ‡ä»¤æµäº§ç”Ÿ&lt;/li&gt;
  &lt;li&gt;æŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆ&lt;/li&gt;
  &lt;li&gt;æ•°æ®ä»¥äºŒè¿›åˆ¶ç¼–ç &lt;/li&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbgwoausqdj31b00p20t8.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;æŒ‡ä»¤é›†æœºå™¨è¯­è¨€&quot;&gt;æŒ‡ä»¤é›†ï¼ˆæœºå™¨è¯­è¨€ï¼‰&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦æ¥ç†è§£CPUï¼Œä¸€ä¸ªæ˜¯ä»æœºå™¨è¯­è¨€çš„è§’åº¦ï¼Œä¸€ä¸ªæ˜¯ä»ç‰©ç†å®ç°çš„è§’åº¦ã€‚&lt;strong&gt;æœºå™¨è¯­è¨€æ˜¯CPUçš„åŠŸèƒ½æŠ½è±¡ï¼Œç‰©ç†å®ç°æ˜¯CPUçš„å…·ä½“å®ç°ï¼ŒåŒæ—¶æœºå™¨è¯­è¨€è¿˜æ˜¯è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶å±‚å’Œè½¯ä»¶å±‚çš„æ¥å£ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æƒ³è¦å®ç°CPUï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®šä¹‰CPUèƒ½æ‰§è¡Œå“ªäº›æ“ä½œï¼Œç„¶åæŠŠè¿™äº›æ“ä½œæŠ½è±¡ä¸ºCPUçš„æŒ‡ä»¤é›†ã€‚CPUçš„æŒ‡ä»¤é›†å°±æ˜¯ä¸€ç³»åˆ—çš„æ“ä½œçº¦å®šï¼Œå®ƒä»¬ä»¥æ ¼å¼åŒ–çš„æŒ‡ä»¤ï¼Œæè¿°äº†å¦‚ä½•ç”¨CPUæ¥æ“ä½œå†…å­˜ã€‚æˆ‘ä»¬å·²x86çš„æŒ‡ä»¤é›†ä¸ºä¾‹ï¼Œx86çš„æŒ‡ä»¤é›†éå¸¸å¤æ‚ï¼Œæœ‰å‡ ç™¾æ¡æŒ‡ä»¤ï¼ŒåŒ…æ‹¬æ•°æ®ä¼ è¾“æŒ‡ä»¤ã€ç®—æ•°è¿ç®—æŒ‡ä»¤ã€é€»è¾‘è¿ç®—æŒ‡ä»¤ã€ä½ç§»æŒ‡ä»¤ã€å­—ç¬¦ä¸²æ“ä½œæŒ‡ä»¤ã€å¤„ç†å™¨æ§åˆ¶æŒ‡ä»¤ã€æ§åˆ¶è½¬ç§»æŒ‡ä»¤ç­‰&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh0f43rzqj312h0u0wk4.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬ä¼šæŠ›å¼ƒè¯¸å¤šå¤æ‚çš„æŒ‡ä»¤ï¼Œåªå®ç°ä¸€ä¸ªCPUæ‰€éœ€çš„æœ€å¿…é¡»çš„åŠŸèƒ½ï¼Œä»¥æ–¹ä¾¿å®ç°ï¼Œä½†æ›´é‡è¦çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬ç†è§£è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶è®¾è®¡è¿è¡Œçš„æœ€åŸºæœ¬åŸç†ã€‚æˆ‘ä»¬å¯ä»¥æ¢³ç†å‡ºæœ€å¿…é¡»çš„4ç‚¹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ä»å†…å­˜ä¸­è¯»å–æŸåœ°å€çš„æ•°æ®ï¼ˆåŒ…æ‹¬æŒ‡ä»¤æ•°æ®ï¼‰ï¼Œä¼ é€åˆ°CPU&lt;/li&gt;
  &lt;li&gt;CPUè¿›è¡ŒåŸºæœ¬çš„ç®—æ•°&amp;amp;é€»è¾‘è¿ç®—&lt;/li&gt;
  &lt;li&gt;CPUæŠŠæ•°æ®å†™å…¥å†…å­˜æˆ–å¯„å­˜å™¨&lt;/li&gt;
  &lt;li&gt;CPUè·³è½¬åˆ°æŸåœ°å€æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨å®ç°æ—¶ï¼Œæˆ‘ä»¬åªéœ€è®¾è®¡ä¸¤æ¡æŒ‡ä»¤å°±å¯ä»¥æ»¡è¶³ä¸Šé¢çš„4ç‚¹åŠŸèƒ½ï¼Œä½ æ²¡å¬é”™ï¼Œåªéœ€è¦ä¸¤æ¡ã€‚å†ä»‹ç»è¿™ä¸¤æ¡æŒ‡ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸‹CPUä¸­éœ€è¦ç”¨åˆ°çš„2ä¸ªå¯„å­˜å™¨ï¼ŒAå¯„å­˜å™¨ï¼šç”¨äºæš‚å­˜ä¸€ä¸ªç«‹å³æ•°ï¼ˆé€šå¸¸æ˜¯å°†è¦ç”¨åˆ°çš„å†…å­˜åœ°å€çš„å€¼ï¼‰ï¼›Då¯„å­˜å™¨ï¼šç”¨äºæš‚å­˜è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´æ•°æ®ã€‚å›é¡¾ä¸€ä¸‹å‰ä¸¤ç¯‡çš„å†…å®¹ï¼Œæˆ‘ä»¬å®ç°çš„èŠ¯ç‰‡çš„æœ€å¤§å­—é•¿éƒ½16ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æŒ‡ä»¤ä¹Ÿæ˜¯16ä½çš„ã€‚&lt;/p&gt;

&lt;h4 id=&quot;aæŒ‡ä»¤&quot;&gt;AæŒ‡ä»¤&lt;/h4&gt;
&lt;p&gt;AæŒ‡ä»¤ï¼Œå³AddressæŒ‡ä»¤ã€‚å®ƒçš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæ•°å€¼ä¼ é€åˆ°CPUä¸­çš„Aå¯„å­˜å™¨å³å¯ï¼Œå¤šæ•°æƒ…å†µä¸‹è¿™ä¸ªæ•°å­—åç»­ä¼šå½“åšåœ°å€ä½¿ç”¨ï¼Œç”¨äºå®šä½å†…å­˜ä¸­çš„å­˜å‚¨å•å…ƒã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹AæŒ‡ä»¤çš„æ ¼å¼ï¼ŒAæŒ‡ä»¤æŠŠ16ä½æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€ä½æ˜¯æ ‡å¿—ä½ï¼Œä¸º0æ—¶å°±ä»£è¡¨è¯¥æŒ‡ä»¤æ˜¯AæŒ‡ä»¤ï¼Œå‰©ä¸‹çš„15ä½å°±æ˜¯éœ€è¦ä¼ å…¥Aå¯„å­˜å™¨çš„æ•°å€¼ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒAæŒ‡ä»¤å®ç°äº†ä¸Šé¢4ç‚¹åŠŸèƒ½çš„ç¬¬ä¸€ç‚¹ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh0rj8yj6j30we0480sn.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;cæŒ‡ä»¤&quot;&gt;CæŒ‡ä»¤&lt;/h4&gt;
&lt;p&gt;CæŒ‡ä»¤è¾ƒä¸ºå¤æ‚ï¼Œåˆ†æˆ4éƒ¨åˆ†ã€‚AæŒ‡ä»¤å®ç°äº†ä¸Šé¢4ç‚¹åŠŸèƒ½çš„åä¸‰ç‚¹&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ç¬¬ä¸€ä½æ˜¯æ ‡å¿—ä½ï¼šä¸º1æ—¶å°±ä»£è¡¨è¯¥æŒ‡ä»¤æ˜¯CæŒ‡ä»¤&lt;/li&gt;
  &lt;li&gt;3-10ä½æ˜¯compä½ï¼šï¼šè¿™å‡ ä½çš„æ’åˆ—ç”¨äºè¡¨ç¤ºæ‰§è¡Œä¸åŒçš„å…ƒç´ &amp;amp;é€»è¾‘è¿ç®—&lt;/li&gt;
  &lt;li&gt;11â€”â€”13ä½æ˜¯destä½ï¼šæŒ‡ç¤ºéœ€è¦æŠŠè®¡ç®—å‡ºçš„æ•°æ®ä¼ é€åˆ°å“ªé‡Œï¼ˆå¯„å­˜å™¨æˆ–å†…å­˜ï¼‰&lt;/li&gt;
  &lt;li&gt;14-16ä½æ˜¯jumpä½ï¼šæŒ‡ç¤ºCPUæ‰§è¡Œè·³è½¬æŒ‡ä»¤çš„æ¡ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh0v8yf1cj311604st8o.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;compä½ï¼Œcopmä½ä¸»è¦ä½œç”¨äºCPUä¸­çš„ALUï¼ŒæŒ‡ç¤ºALUæ¥è¿›è¡Œä¸€äº›ç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—ï¼Œæ“ä½œæ•°å°±æ˜¯Aå¯„å­˜å™¨ï¼ŒDå¯„å­˜å™¨ï¼Œæˆ–è€…ç”±Aå¯„å­˜å™¨ä¸­çš„åœ°å€æŒ‡å‘çš„å†…å­˜å•å…ƒä¸­çš„æ•°æ®ã€‚æ“ä½œåˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh153x9nkj30w20rawf4.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;é€šè¿‡compä½çš„æŒ‡ç¤ºALUè®¡ç®—å‡ºçš„æ•°å€¼ï¼Œå†ä¼ é€åˆ°ç”±destä½æŒ‡ç¤ºçš„å­˜å‚¨å•å…ƒï¼Œè¿™ä¸ªå­˜å‚¨å•å…ƒæ˜¯Aå¯„å­˜å™¨ï¼ŒDå¯„å­˜å™¨ï¼Œæˆ–è€…ç”±Aå¯„å­˜å™¨ä¸­çš„åœ°å€æŒ‡å‘çš„å†…å­˜å•å…ƒï¼Œæˆ–è€…æ˜¯ä»–ä»¬çš„ç»„åˆã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh18hc1zaj31040d2ab1.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒCPUæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œä½†ä¹Ÿéœ€è¦è¿›è¡Œè·³è½¬æ‰§è¡Œã€‚jumpçš„æ‰§è¡Œé€»è¾‘æ˜¯ï¼Œæ ¹æ®compä½è¾“å‡ºçš„æ•°æ®ï¼Œç”¨jumpä½åˆ¤æ–­æ˜¯å¦éœ€è¦è·³è½¬ï¼Œå¦‚æœéœ€è¦ï¼Œåˆ™è·³è½¬åˆ°Aå¯„å­˜å™¨ä¸­åœ°å€çš„æŒ‡ä»¤ï¼Œå¦åˆ™æŒ‰é¡ºåºæ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh1e9lupsj30vg0e8mxu.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;h4 id=&quot;ä¸€äº›ç¬¦å·&quot;&gt;ä¸€äº›ç¬¦å·&lt;/h4&gt;
&lt;p&gt;åŒæ—¶ï¼Œæˆ‘ä»¬æå‰ä»‹ç»ä¸€äº›é¢„å®šä¹‰çš„ç¬¦å·ï¼Œç¬¦å·çš„ä½œç”¨æ˜¯ä¾¿äºæˆ‘ä»¬åç»­ç¼–å†™hackçš„æ±‡ç¼–è¯­è¨€ã€‚æ‰€éœ€çš„ç¬¦å·ç±»å‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;é¢„å®šä¹‰ç¬¦å·ï¼šæœ‰æ±‡ç¼–è¯­è¨€ä¸­ç‰¹æ®Šå«ä¹‰çš„ç¬¦å·&lt;/li&gt;
  &lt;li&gt;è™šæ‹Ÿå¯„å­˜å™¨ï¼šä»£è¡¨ä¸€äº›è™šæ‹Ÿå¯„å­˜å™¨ä¸­çš„åœ°å€&lt;/li&gt;
  &lt;li&gt;é¢„å®šä¹‰æŒ‡é’ˆï¼šæŒ‡å‘ä¸€äº›ç‰¹å®šçš„å†…å­˜&lt;/li&gt;
  &lt;li&gt;I/OæŒ‡é’ˆï¼šæŒ‡å‘å†…å­˜ä¸­I/Oçš„å…¶å®åœ°å€&lt;/li&gt;
  &lt;li&gt;æ ‡ç­¾ç¬¦å·ï¼šç”¨äºè¡¨ç¤ºæŒ‡ä»¤çš„ä½ç½®ï¼ˆæ–¹ä¾¿ç¼–å†™è·³è½¬é€»è¾‘ï¼‰&lt;/li&gt;
  &lt;li&gt;å˜é‡ç¬¦å·ï¼šæ–¹ä¾¿åœ¨æ±‡ç¼–ä»£ç ä¸­å£°æ˜å˜é‡&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å†…å­˜&quot;&gt;å†…å­˜&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨æ—¶åºèŠ¯ç‰‡é‡Œå·²ç»å®ç°äº†RAMèŠ¯ç‰‡ï¼Œæ‰€ä»¥å®ç°å†…å­˜çš„å·¥ä½œå·²ç»åŸºæœ¬å®Œæˆã€‚æœ¬ç¯‡ä¸»è¦æ˜¯å¯¹å†…å­˜çš„ä½¿ç”¨ã€ç»„åˆå’Œåˆ’åˆ†ã€‚å†…å­˜æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†ï¼Œä¸»è¦åˆ†ä¸ºæ•°æ®å†…å­˜å’ŒæŒ‡ä»¤å†…å­˜ä¸¤éƒ¨åˆ†ï¼Œæ­£å¸¸æ—¶æƒ…å†µæ•°æ®å†…å­˜å’ŒæŒ‡ä»¤å†…å­˜æ˜¯åœ¨ä¸€å—å¤§å†…å­˜ä¸‹åˆ’åˆ†çš„ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå¸®å¼€å‘è€…åˆ†é…ç®¡ç†çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ºäº†æ›´æ–¹ä¾¿çš„å®ç°ï¼ŒæŠŠhackçš„å†…å­˜æ‹†æˆé‡å—ï¼šä¸€å—æ•°æ®å†…å­˜Memoryï¼Œä¸€å—ROMï¼ŒROMä¸“é—¨ç”¨äºå­˜å‚¨ç¨‹åºï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸æ”¯æŒå†™å…¥æ“ä½œã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh3erthk6j312e0o2mxq.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;åŒæ—¶æŠŠMemoryåˆ’åˆ†ä¸º3éƒ¨åˆ†ï¼šRAMï¼ˆ16Kï¼‰ï¼Œç”¨äºå­˜å‚¨æ•°æ®ï¼›Screenï¼ˆ8Kï¼‰å†…å­˜æ˜ å°„åˆ°æ˜¾ç¤ºå™¨ï¼›Keyboardï¼ˆ16bitï¼‰å†…å­˜æ˜ å°„åˆ°é”®ç›˜ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh2ausrj0j30uo0lu0tf.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼šMemory&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CHIP Memory {
    IN in[16], load, address[15];
    OUT out[16];

    PARTS:
    DMux4Way(in=true, sel[0..1]=address[13..14], a=a, b=b, c=c, d=d);

    Or(a=a, b=b, out=outa);

    And(a=outa, b=load, out=load0);
    And(a=c, b=load, out=load1);

    RAM16K(in=in, load=load0, address[0..13]=address[0..13], out=R0);
    Screen(in=in, load=load1, address[0..12]=address[0..12], out=R1);
    Keyboard(out=R2);

    Mux4Way16(a=R0, b=R0, c=R1, d=R2, sel[0..1]=address[13..14], out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;cpu&quot;&gt;CPU&lt;/h3&gt;
&lt;p&gt;å®šä¹‰å®ŒæŒ‡ä»¤é›†ï¼Œæˆ‘ä»¬æ¥ç€éœ€è¦åšçš„å°±æ˜¯æŒ‰ç…§æŒ‡ä»¤åŠŸèƒ½å®ç°CPUã€‚hackçš„CPUä¸»è¦ç”±ä»¥ä¸‹å››éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ALUï¼šä¸»è¦ç”¨äºæ‰§è¡Œç®—æ•°&amp;amp;é€»è¾‘è¿ç®—&lt;/li&gt;
  &lt;li&gt;å¯„å­˜å™¨ï¼šAå¯„å­˜å™¨ã€Då¯„å­˜å™¨&lt;/li&gt;
  &lt;li&gt;PCï¼šç¨‹åºè®¡æ•°å™¨ï¼Œä¿å­˜ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€&lt;/li&gt;
  &lt;li&gt;æ§åˆ¶é€»è¾‘ï¼šè§£ææŒ‡ä»¤ç±»å‹ï¼Œé€‰æ‹©å¯„å­˜å™¨ï¼Œæ›´æ–°PCç­‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CPUçš„ç”µè·¯ç¤ºæ„å›¾å¦‚ä¸‹(å®Œæ•´ç”µè·¯å›¾æ¯”è¾ƒéš¾ç”»ï¼Œå…ˆä¸ç”»äº†ï¼‰&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh319ez5ij31800rct9n.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼šCPU&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CHIP CPU {

    IN  inM[16],         // M value input  (M = contents of RAM[A])
        instruction[16], // Instruction for execution
        reset;           // Signals whether to re-start the current
                         // program (reset==1) or continue executing
                         // the current program (reset==0).

    OUT outM[16],        // M value output
        writeM,          // Write to M? 
        addressM[15],    // Address in data memory (of M)
        pc[15];          // address of next instruction

    PARTS:
    // æŒ‡ä»¤ç±»å‹è§£æ
    And(a=instruction[15], b=true, out=ins15);          // ins15æŒ‡ä»¤æ ‡å¿—ä½
    Not(in=instruction[15], out=ins15Not);       // ins15Not:æŒ‡ä»¤æ ‡å¿—ä½å–å

    // AæŒ‡ä»¤å’ŒAå¯„å­˜å™¨
    Mux16(a=instruction, b=ALUOut, sel=instruction[5], out=ARSel);
    Mux16(a=instruction, b=ARSel, sel=ins15, out=ARIn);
    Or(a=ins15Not, b=instruction[5], out=ARLoad);
    ARegister(in=ARIn, load=ARLoad, out=AROut);

    // Då¯„å­˜å™¨
    And(a=ins15, b=instruction[4], out=DRLoad);
    DRegister(in=ALUOut, load=DRLoad, out=DROut);

    // CæŒ‡ä»¤ç±»å‹åŒºåˆ†ï¼šè®¡ç®—Aè¿˜æ˜¯è®¡ç®—M
    Mux16(a=AROut, b=inM, sel=instruction[12], out=AMOut);

    // ALUé€»è¾‘
    ALU(x=DROut, y=AMOut, zx=instruction[11], nx=instruction[10], zy=instruction[9], ny=instruction[8], f=instruction[7], no=instruction[6], out=ALUOut, zr=ALUzr, ng=ALUng);

    // outM &amp;amp; writeM &amp;amp; addressM
    And16(a=true, b=ALUOut, out=outM);
    And(a=ins15, b=instruction[3], out=writeM);
    And16(a=true, b=AROut, out[0..14]=addressM[0..14]);

    // jumpé€»è¾‘
    And(a=ALUng, b=instruction[2], out=j1Out);
    And(a=ALUzr, b=instruction[1], out=j2Out);
    Or(a=ALUng, b=ALUzr, out=po);
    Not(in=po, out=ALUpo);
    And(a=ALUpo, b=instruction[0], out=j3Out);
    Or8Way(in[0]=j1Out, in[1]=j2Out, in[2]=j3Out, in[3..7]=false, out=jump);
    And(a=ins15, b=jump, out=jumpOut);

    // PC
    PC(in=AROut, load=jumpOut, inc=true, reset=reset, out[0..14]=pc[0..14]);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;combination&quot;&gt;COMBINATION&lt;/h3&gt;

&lt;p&gt;æœ€åæˆ‘ä»¬æŒ‰ç…§æ•´ä½“æ¶æ„å›¾ï¼ŒæŠŠCPUã€ROMã€RAMè¿æ¥èµ·æ¥å³å¯ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh27xo7nej31bg0ok0tw.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * The HACK computer, including CPU, ROM and RAM.
 * When reset is 0, the program stored in the computer's ROM executes.
 * When reset is 1, the execution of the program restarts. 
 * Thus, to start a program's execution, reset must be pushed &quot;up&quot; (1)
 * and &quot;down&quot; (0). From this point onward the user is at the mercy of 
 * the software. In particular, depending on the program's code, the 
 * screen may show some output and the user may be able to interact 
 * with the computer via the keyboard.
 */

CHIP Computer {

    IN reset;

    PARTS:
    CPU(inM=memoryOut, instruction=ROMOut, reset=reset, outM=outM, writeM=writeM, addressM=addressM, pc=pc);
    ROM32K(address=pc, out=ROMOut);
    Memory(in=outM, load=writeM, address=addressM, out=memoryOut);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œäº†hackç¡¬ä»¶éƒ¨åˆ†çš„æ‰€æœ‰å·¥ä½œã€‚æˆ‘ä»¬åŸºäºä¸¤ä¸ªåŸºæœ¬ä»¬ï¼šNandå’ŒDFFï¼Œä¸€æ­¥æ­¥å®ç°äº†è¯¸å¤šèŠ¯ç‰‡ï¼Œæœ€ç»ˆå®ç°äº†æ•´ä¸ªç¡¬ä»¶æ¶æ„ã€‚hackè™½å°ï¼Œäº”è„ä¿±å…¨ï¼Œæˆ‘ä»¬åªä¿ç•™äº†è®¡ç®—æœºæ¶æ„ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œ&lt;strong&gt;å‡å°‘äº†æˆ‘ä»¬çš„å·¥ä½œé‡ï¼Œæ›´é‡è¦çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬æ‹¨å¼€ä¼—å¤šå¤æ‚çš„æŠ€æœ¯ç»†èŠ‚ï¼Œæ¸…æ¥šçš„äº†è§£åˆ°è®¡ç®—æœºä½“ç³»æœ€æ ¸å¿ƒçš„è®¾è®¡æ€æƒ³&lt;/strong&gt;ã€‚å®Œæˆäº†hackçš„ç¡¬ä»¶ç³»ç»Ÿå’ŒæŒ‡ä»¤é›†çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ä¸€ä¸ªç”¨0101å†™çš„hello worldç¨‹åºäº†ï¼Œä½†è¿™è²Œä¼¼æœ‰äº›ç—›è‹¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€ç¯‡å®šä¹‰hackçš„æ±‡ç¼–è¯­è¨€ï¼Œå¹¶ç¼–å†™æ±‡ç¼–å™¨ã€‚ğŸ˜€&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbh3i0sxnoj310s0u03zp.jpg&quot; width=&quot;700&quot; /&gt;&lt;/center&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">ç»è¿‡å‰ä¸¤ç¯‡æˆ‘ä»¬å·²ç»å®ç°äº†æ‰€æœ‰çš„ç»„åˆé€»è¾‘èŠ¯ç‰‡å’Œæ—¶åºèŠ¯ç‰‡ï¼Œå…·å¤‡äº†å®ç°hackè®¡ç®—æœºçš„åŸºç¡€ï¼Œæœ¬ç¯‡æ˜¯é¡¹ç›®ç¡¬ä»¶éƒ¨åˆ†çš„æœ€åä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç¯‡å®šä¹‰hackèƒ½å¤Ÿæ‰§è¡Œçš„æ“ä½œï¼Œå³hackçš„æŒ‡ä»¤é›†ï¼›å®ç°hackçš„å†…å­˜ã€CPUï¼Œç„¶åå°†å®ƒä»¬ç»„åˆèµ·æ¥å½¢æˆå®Œæ•´çš„è®¡ç®—æœºç¡¬ä»¶æ¶æ„ã€‚ è®¡ç®—æœºæ¶æ„ hackæ˜¯åŸºäºç»å…¸çš„å†¯Â·è¯ºä¼Šæ›¼ä½“ç³»æ¶æ„ï¼Œå®ƒçš„å…³é”®ç»„æˆéƒ¨åˆ†æ˜¯å°†ä¸­å¤®å¤„ç†å•å…ƒå’Œå­˜å‚¨å™¨ï¼Œé€šè¿‡å­˜å‚¨å™¨ä¸­å­˜å‚¨çš„ç¨‹åºæŒ‡ä»¤æ§åˆ¶ä¸­å¤®å¤„ç†å™¨çš„æ‰§è¡Œï¼Œå³å­˜å‚¨ç¨‹åºè®¡ç®—æœºã€‚å®ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š ä»¥è¿ç®—å•å…ƒä¸ºä¸­å¿ƒ é‡‡ç”¨å­˜å‚¨ç¨‹åºåŸç† å­˜å‚¨å™¨æ˜¯æŒ‰åœ°å€è®¿é—®ã€çº¿æ€§ç¼–å€çš„ç©ºé—´ æ§åˆ¶æµç”±æŒ‡ä»¤æµäº§ç”Ÿ æŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆ æ•°æ®ä»¥äºŒè¿›åˆ¶ç¼–ç  æŒ‡ä»¤é›†ï¼ˆæœºå™¨è¯­è¨€ï¼‰ æˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦æ¥ç†è§£CPUï¼Œä¸€ä¸ªæ˜¯ä»æœºå™¨è¯­è¨€çš„è§’åº¦ï¼Œä¸€ä¸ªæ˜¯ä»ç‰©ç†å®ç°çš„è§’åº¦ã€‚æœºå™¨è¯­è¨€æ˜¯CPUçš„åŠŸèƒ½æŠ½è±¡ï¼Œç‰©ç†å®ç°æ˜¯CPUçš„å…·ä½“å®ç°ï¼ŒåŒæ—¶æœºå™¨è¯­è¨€è¿˜æ˜¯è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶å±‚å’Œè½¯ä»¶å±‚çš„æ¥å£ã€‚ æƒ³è¦å®ç°CPUï¼Œæˆ‘ä»¬é¦–å…ˆè¦å®šä¹‰CPUèƒ½æ‰§è¡Œå“ªäº›æ“ä½œï¼Œç„¶åæŠŠè¿™äº›æ“ä½œæŠ½è±¡ä¸ºCPUçš„æŒ‡ä»¤é›†ã€‚CPUçš„æŒ‡ä»¤é›†å°±æ˜¯ä¸€ç³»åˆ—çš„æ“ä½œçº¦å®šï¼Œå®ƒä»¬ä»¥æ ¼å¼åŒ–çš„æŒ‡ä»¤ï¼Œæè¿°äº†å¦‚ä½•ç”¨CPUæ¥æ“ä½œå†…å­˜ã€‚æˆ‘ä»¬å·²x86çš„æŒ‡ä»¤é›†ä¸ºä¾‹ï¼Œx86çš„æŒ‡ä»¤é›†éå¸¸å¤æ‚ï¼Œæœ‰å‡ ç™¾æ¡æŒ‡ä»¤ï¼ŒåŒ…æ‹¬æ•°æ®ä¼ è¾“æŒ‡ä»¤ã€ç®—æ•°è¿ç®—æŒ‡ä»¤ã€é€»è¾‘è¿ç®—æŒ‡ä»¤ã€ä½ç§»æŒ‡ä»¤ã€å­—ç¬¦ä¸²æ“ä½œæŒ‡ä»¤ã€å¤„ç†å™¨æ§åˆ¶æŒ‡ä»¤ã€æ§åˆ¶è½¬ç§»æŒ‡ä»¤ç­‰ æˆ‘ä»¬ä¼šæŠ›å¼ƒè¯¸å¤šå¤æ‚çš„æŒ‡ä»¤ï¼Œåªå®ç°ä¸€ä¸ªCPUæ‰€éœ€çš„æœ€å¿…é¡»çš„åŠŸèƒ½ï¼Œä»¥æ–¹ä¾¿å®ç°ï¼Œä½†æ›´é‡è¦çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬ç†è§£è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶è®¾è®¡è¿è¡Œçš„æœ€åŸºæœ¬åŸç†ã€‚æˆ‘ä»¬å¯ä»¥æ¢³ç†å‡ºæœ€å¿…é¡»çš„4ç‚¹åŠŸèƒ½ï¼š ä»å†…å­˜ä¸­è¯»å–æŸåœ°å€çš„æ•°æ®ï¼ˆåŒ…æ‹¬æŒ‡ä»¤æ•°æ®ï¼‰ï¼Œä¼ é€åˆ°CPU CPUè¿›è¡ŒåŸºæœ¬çš„ç®—æ•°&amp;amp;é€»è¾‘è¿ç®— CPUæŠŠæ•°æ®å†™å…¥å†…å­˜æˆ–å¯„å­˜å™¨ CPUè·³è½¬åˆ°æŸåœ°å€æ‰§è¡Œ åœ¨å®ç°æ—¶ï¼Œæˆ‘ä»¬åªéœ€è®¾è®¡ä¸¤æ¡æŒ‡ä»¤å°±å¯ä»¥æ»¡è¶³ä¸Šé¢çš„4ç‚¹åŠŸèƒ½ï¼Œä½ æ²¡å¬é”™ï¼Œåªéœ€è¦ä¸¤æ¡ã€‚å†ä»‹ç»è¿™ä¸¤æ¡æŒ‡ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸‹CPUä¸­éœ€è¦ç”¨åˆ°çš„2ä¸ªå¯„å­˜å™¨ï¼ŒAå¯„å­˜å™¨ï¼šç”¨äºæš‚å­˜ä¸€ä¸ªç«‹å³æ•°ï¼ˆé€šå¸¸æ˜¯å°†è¦ç”¨åˆ°çš„å†…å­˜åœ°å€çš„å€¼ï¼‰ï¼›Då¯„å­˜å™¨ï¼šç”¨äºæš‚å­˜è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´æ•°æ®ã€‚å›é¡¾ä¸€ä¸‹å‰ä¸¤ç¯‡çš„å†…å®¹ï¼Œæˆ‘ä»¬å®ç°çš„èŠ¯ç‰‡çš„æœ€å¤§å­—é•¿éƒ½16ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æŒ‡ä»¤ä¹Ÿæ˜¯16ä½çš„ã€‚ AæŒ‡ä»¤ AæŒ‡ä»¤ï¼Œå³AddressæŒ‡ä»¤ã€‚å®ƒçš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªæ•°å€¼ä¼ é€åˆ°CPUä¸­çš„Aå¯„å­˜å™¨å³å¯ï¼Œå¤šæ•°æƒ…å†µä¸‹è¿™ä¸ªæ•°å­—åç»­ä¼šå½“åšåœ°å€ä½¿ç”¨ï¼Œç”¨äºå®šä½å†…å­˜ä¸­çš„å­˜å‚¨å•å…ƒã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹AæŒ‡ä»¤çš„æ ¼å¼ï¼ŒAæŒ‡ä»¤æŠŠ16ä½æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€ä½æ˜¯æ ‡å¿—ä½ï¼Œä¸º0æ—¶å°±ä»£è¡¨è¯¥æŒ‡ä»¤æ˜¯AæŒ‡ä»¤ï¼Œå‰©ä¸‹çš„15ä½å°±æ˜¯éœ€è¦ä¼ å…¥Aå¯„å­˜å™¨çš„æ•°å€¼ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒAæŒ‡ä»¤å®ç°äº†ä¸Šé¢4ç‚¹åŠŸèƒ½çš„ç¬¬ä¸€ç‚¹ã€‚ CæŒ‡ä»¤ CæŒ‡ä»¤è¾ƒä¸ºå¤æ‚ï¼Œåˆ†æˆ4éƒ¨åˆ†ã€‚AæŒ‡ä»¤å®ç°äº†ä¸Šé¢4ç‚¹åŠŸèƒ½çš„åä¸‰ç‚¹ ç¬¬ä¸€ä½æ˜¯æ ‡å¿—ä½ï¼šä¸º1æ—¶å°±ä»£è¡¨è¯¥æŒ‡ä»¤æ˜¯CæŒ‡ä»¤ 3-10ä½æ˜¯compä½ï¼šï¼šè¿™å‡ ä½çš„æ’åˆ—ç”¨äºè¡¨ç¤ºæ‰§è¡Œä¸åŒçš„å…ƒç´ &amp;amp;é€»è¾‘è¿ç®— 11â€”â€”13ä½æ˜¯destä½ï¼šæŒ‡ç¤ºéœ€è¦æŠŠè®¡ç®—å‡ºçš„æ•°æ®ä¼ é€åˆ°å“ªé‡Œï¼ˆå¯„å­˜å™¨æˆ–å†…å­˜ï¼‰ 14-16ä½æ˜¯jumpä½ï¼šæŒ‡ç¤ºCPUæ‰§è¡Œè·³è½¬æŒ‡ä»¤çš„æ¡ä»¶ compä½ï¼Œcopmä½ä¸»è¦ä½œç”¨äºCPUä¸­çš„ALUï¼ŒæŒ‡ç¤ºALUæ¥è¿›è¡Œä¸€äº›ç®—æ•°è¿ç®—å’Œé€»è¾‘è¿ç®—ï¼Œæ“ä½œæ•°å°±æ˜¯Aå¯„å­˜å™¨ï¼ŒDå¯„å­˜å™¨ï¼Œæˆ–è€…ç”±Aå¯„å­˜å™¨ä¸­çš„åœ°å€æŒ‡å‘çš„å†…å­˜å•å…ƒä¸­çš„æ•°æ®ã€‚æ“ä½œåˆ—è¡¨å¦‚ä¸‹ï¼š é€šè¿‡compä½çš„æŒ‡ç¤ºALUè®¡ç®—å‡ºçš„æ•°å€¼ï¼Œå†ä¼ é€åˆ°ç”±destä½æŒ‡ç¤ºçš„å­˜å‚¨å•å…ƒï¼Œè¿™ä¸ªå­˜å‚¨å•å…ƒæ˜¯Aå¯„å­˜å™¨ï¼ŒDå¯„å­˜å™¨ï¼Œæˆ–è€…ç”±Aå¯„å­˜å™¨ä¸­çš„åœ°å€æŒ‡å‘çš„å†…å­˜å•å…ƒï¼Œæˆ–è€…æ˜¯ä»–ä»¬çš„ç»„åˆã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒCPUæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œä½†ä¹Ÿéœ€è¦è¿›è¡Œè·³è½¬æ‰§è¡Œã€‚jumpçš„æ‰§è¡Œé€»è¾‘æ˜¯ï¼Œæ ¹æ®compä½è¾“å‡ºçš„æ•°æ®ï¼Œç”¨jumpä½åˆ¤æ–­æ˜¯å¦éœ€è¦è·³è½¬ï¼Œå¦‚æœéœ€è¦ï¼Œåˆ™è·³è½¬åˆ°Aå¯„å­˜å™¨ä¸­åœ°å€çš„æŒ‡ä»¤ï¼Œå¦åˆ™æŒ‰é¡ºåºæ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚ ä¸€äº›ç¬¦å· åŒæ—¶ï¼Œæˆ‘ä»¬æå‰ä»‹ç»ä¸€äº›é¢„å®šä¹‰çš„ç¬¦å·ï¼Œç¬¦å·çš„ä½œç”¨æ˜¯ä¾¿äºæˆ‘ä»¬åç»­ç¼–å†™hackçš„æ±‡ç¼–è¯­è¨€ã€‚æ‰€éœ€çš„ç¬¦å·ç±»å‹å¦‚ä¸‹ï¼š é¢„å®šä¹‰ç¬¦å·ï¼šæœ‰æ±‡ç¼–è¯­è¨€ä¸­ç‰¹æ®Šå«ä¹‰çš„ç¬¦å· è™šæ‹Ÿå¯„å­˜å™¨ï¼šä»£è¡¨ä¸€äº›è™šæ‹Ÿå¯„å­˜å™¨ä¸­çš„åœ°å€ é¢„å®šä¹‰æŒ‡é’ˆï¼šæŒ‡å‘ä¸€äº›ç‰¹å®šçš„å†…å­˜ I/OæŒ‡é’ˆï¼šæŒ‡å‘å†…å­˜ä¸­I/Oçš„å…¶å®åœ°å€ æ ‡ç­¾ç¬¦å·ï¼šç”¨äºè¡¨ç¤ºæŒ‡ä»¤çš„ä½ç½®ï¼ˆæ–¹ä¾¿ç¼–å†™è·³è½¬é€»è¾‘ï¼‰ å˜é‡ç¬¦å·ï¼šæ–¹ä¾¿åœ¨æ±‡ç¼–ä»£ç ä¸­å£°æ˜å˜é‡ å†…å­˜ æˆ‘ä»¬åœ¨æ—¶åºèŠ¯ç‰‡é‡Œå·²ç»å®ç°äº†RAMèŠ¯ç‰‡ï¼Œæ‰€ä»¥å®ç°å†…å­˜çš„å·¥ä½œå·²ç»åŸºæœ¬å®Œæˆã€‚æœ¬ç¯‡ä¸»è¦æ˜¯å¯¹å†…å­˜çš„ä½¿ç”¨ã€ç»„åˆå’Œåˆ’åˆ†ã€‚å†…å­˜æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†ï¼Œä¸»è¦åˆ†ä¸ºæ•°æ®å†…å­˜å’ŒæŒ‡ä»¤å†…å­˜ä¸¤éƒ¨åˆ†ï¼Œæ­£å¸¸æ—¶æƒ…å†µæ•°æ®å†…å­˜å’ŒæŒ‡ä»¤å†…å­˜æ˜¯åœ¨ä¸€å—å¤§å†…å­˜ä¸‹åˆ’åˆ†çš„ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå¸®å¼€å‘è€…åˆ†é…ç®¡ç†çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ºäº†æ›´æ–¹ä¾¿çš„å®ç°ï¼ŒæŠŠhackçš„å†…å­˜æ‹†æˆé‡å—ï¼šä¸€å—æ•°æ®å†…å­˜Memoryï¼Œä¸€å—ROMï¼ŒROMä¸“é—¨ç”¨äºå­˜å‚¨ç¨‹åºï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸æ”¯æŒå†™å…¥æ“ä½œã€‚ åŒæ—¶æŠŠMemoryåˆ’åˆ†ä¸º3éƒ¨åˆ†ï¼šRAMï¼ˆ16Kï¼‰ï¼Œç”¨äºå­˜å‚¨æ•°æ®ï¼›Screenï¼ˆ8Kï¼‰å†…å­˜æ˜ å°„åˆ°æ˜¾ç¤ºå™¨ï¼›Keyboardï¼ˆ16bitï¼‰å†…å­˜æ˜ å°„åˆ°é”®ç›˜ã€‚ HDLå®ç°ï¼šMemory CHIP Memory { IN in[16], load, address[15]; OUT out[16]; PARTS: DMux4Way(in=true, sel[0..1]=address[13..14], a=a, b=b, c=c, d=d); Or(a=a, b=b, out=outa); And(a=outa, b=load, out=load0); And(a=c, b=load, out=load1); RAM16K(in=in, load=load0, address[0..13]=address[0..13], out=R0); Screen(in=in, load=load1, address[0..12]=address[0..12], out=R1); Keyboard(out=R2); Mux4Way16(a=R0, b=R0, c=R1, d=R2, sel[0..1]=address[13..14], out=out); } CPU å®šä¹‰å®ŒæŒ‡ä»¤é›†ï¼Œæˆ‘ä»¬æ¥ç€éœ€è¦åšçš„å°±æ˜¯æŒ‰ç…§æŒ‡ä»¤åŠŸèƒ½å®ç°CPUã€‚hackçš„CPUä¸»è¦ç”±ä»¥ä¸‹å››éƒ¨åˆ†ç»„æˆï¼š ALUï¼šä¸»è¦ç”¨äºæ‰§è¡Œç®—æ•°&amp;amp;é€»è¾‘è¿ç®— å¯„å­˜å™¨ï¼šAå¯„å­˜å™¨ã€Då¯„å­˜å™¨ PCï¼šç¨‹åºè®¡æ•°å™¨ï¼Œä¿å­˜ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ æ§åˆ¶é€»è¾‘ï¼šè§£ææŒ‡ä»¤ç±»å‹ï¼Œé€‰æ‹©å¯„å­˜å™¨ï¼Œæ›´æ–°PCç­‰ CPUçš„ç”µè·¯ç¤ºæ„å›¾å¦‚ä¸‹(å®Œæ•´ç”µè·¯å›¾æ¯”è¾ƒéš¾ç”»ï¼Œå…ˆä¸ç”»äº†ï¼‰ HDLå®ç°ï¼šCPU CHIP CPU { IN inM[16], // M value input (M = contents of RAM[A]) instruction[16], // Instruction for execution reset; // Signals whether to re-start the current // program (reset==1) or continue executing // the current program (reset==0). OUT outM[16], // M value output writeM, // Write to M? addressM[15], // Address in data memory (of M) pc[15]; // address of next instruction PARTS: // æŒ‡ä»¤ç±»å‹è§£æ And(a=instruction[15], b=true, out=ins15); // ins15æŒ‡ä»¤æ ‡å¿—ä½ Not(in=instruction[15], out=ins15Not); // ins15Not:æŒ‡ä»¤æ ‡å¿—ä½å–å // AæŒ‡ä»¤å’ŒAå¯„å­˜å™¨ Mux16(a=instruction, b=ALUOut, sel=instruction[5], out=ARSel); Mux16(a=instruction, b=ARSel, sel=ins15, out=ARIn); Or(a=ins15Not, b=instruction[5], out=ARLoad); ARegister(in=ARIn, load=ARLoad, out=AROut); // Då¯„å­˜å™¨ And(a=ins15, b=instruction[4], out=DRLoad); DRegister(in=ALUOut, load=DRLoad, out=DROut); // CæŒ‡ä»¤ç±»å‹åŒºåˆ†ï¼šè®¡ç®—Aè¿˜æ˜¯è®¡ç®—M Mux16(a=AROut, b=inM, sel=instruction[12], out=AMOut); // ALUé€»è¾‘ ALU(x=DROut, y=AMOut, zx=instruction[11], nx=instruction[10], zy=instruction[9], ny=instruction[8], f=instruction[7], no=instruction[6], out=ALUOut, zr=ALUzr, ng=ALUng); // outM &amp;amp; writeM &amp;amp; addressM And16(a=true, b=ALUOut, out=outM); And(a=ins15, b=instruction[3], out=writeM); And16(a=true, b=AROut, out[0..14]=addressM[0..14]); // jumpé€»è¾‘ And(a=ALUng, b=instruction[2], out=j1Out); And(a=ALUzr, b=instruction[1], out=j2Out); Or(a=ALUng, b=ALUzr, out=po); Not(in=po, out=ALUpo); And(a=ALUpo, b=instruction[0], out=j3Out); Or8Way(in[0]=j1Out, in[1]=j2Out, in[2]=j3Out, in[3..7]=false, out=jump); And(a=ins15, b=jump, out=jumpOut); // PC PC(in=AROut, load=jumpOut, inc=true, reset=reset, out[0..14]=pc[0..14]); } COMBINATION æœ€åæˆ‘ä»¬æŒ‰ç…§æ•´ä½“æ¶æ„å›¾ï¼ŒæŠŠCPUã€ROMã€RAMè¿æ¥èµ·æ¥å³å¯ã€‚ HDLå®ç° /** * The HACK computer, including CPU, ROM and RAM. * When reset is 0, the program stored in the computer's ROM executes. * When reset is 1, the execution of the program restarts. * Thus, to start a program's execution, reset must be pushed &quot;up&quot; (1) * and &quot;down&quot; (0). From this point onward the user is at the mercy of * the software. In particular, depending on the program's code, the * screen may show some output and the user may be able to interact * with the computer via the keyboard. */ CHIP Computer { IN reset; PARTS: CPU(inM=memoryOut, instruction=ROMOut, reset=reset, outM=outM, writeM=writeM, addressM=addressM, pc=pc); ROM32K(address=pc, out=ROMOut); Memory(in=outM, load=writeM, address=addressM, out=memoryOut); } æ€»ç»“ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œäº†hackç¡¬ä»¶éƒ¨åˆ†çš„æ‰€æœ‰å·¥ä½œã€‚æˆ‘ä»¬åŸºäºä¸¤ä¸ªåŸºæœ¬ä»¬ï¼šNandå’ŒDFFï¼Œä¸€æ­¥æ­¥å®ç°äº†è¯¸å¤šèŠ¯ç‰‡ï¼Œæœ€ç»ˆå®ç°äº†æ•´ä¸ªç¡¬ä»¶æ¶æ„ã€‚hackè™½å°ï¼Œäº”è„ä¿±å…¨ï¼Œæˆ‘ä»¬åªä¿ç•™äº†è®¡ç®—æœºæ¶æ„ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå‡å°‘äº†æˆ‘ä»¬çš„å·¥ä½œé‡ï¼Œæ›´é‡è¦çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬æ‹¨å¼€ä¼—å¤šå¤æ‚çš„æŠ€æœ¯ç»†èŠ‚ï¼Œæ¸…æ¥šçš„äº†è§£åˆ°è®¡ç®—æœºä½“ç³»æœ€æ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ã€‚å®Œæˆäº†hackçš„ç¡¬ä»¶ç³»ç»Ÿå’ŒæŒ‡ä»¤é›†çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ä¸€ä¸ªç”¨0101å†™çš„hello worldç¨‹åºäº†ï¼Œä½†è¿™è²Œä¼¼æœ‰äº›ç—›è‹¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€ç¯‡å®šä¹‰hackçš„æ±‡ç¼–è¯­è¨€ï¼Œå¹¶ç¼–å†™æ±‡ç¼–å™¨ã€‚ğŸ˜€</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(4/12)â€“æ—¶åºé€»è¾‘èŠ¯ç‰‡ï¼šæ—¶åºé—¨ã€å¯„å­˜å™¨ã€RAMã€è®¡æ•°å™¨</title><link href="/2020/01/29/%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E8%8A%AF%E7%89%87-%E6%97%B6%E5%BA%8F%E9%97%A8-%E5%AF%84%E5%AD%98%E5%99%A8-RAM-%E8%AE%A1%E6%95%B0%E5%99%A8.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(4/12)--æ—¶åºé€»è¾‘èŠ¯ç‰‡ï¼šæ—¶åºé—¨ã€å¯„å­˜å™¨ã€RAMã€è®¡æ•°å™¨" /><published>2020-01-29T00:00:00+08:00</published><updated>2020-01-29T00:00:00+08:00</updated><id>/2020/01/29/%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E8%8A%AF%E7%89%87:%E6%97%B6%E5%BA%8F%E9%97%A8%E3%80%81%E5%AF%84%E5%AD%98%E5%99%A8%E3%80%81RAM%E3%80%81%E8%AE%A1%E6%95%B0%E5%99%A8</id><content type="html" xml:base="/2020/01/29/%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E8%8A%AF%E7%89%87-%E6%97%B6%E5%BA%8F%E9%97%A8-%E5%AF%84%E5%AD%98%E5%99%A8-RAM-%E8%AE%A1%E6%95%B0%E5%99%A8.html">&lt;p&gt;ä¸Šä¸€ç¯‡æˆ‘ä»¬å®ç°äº†ä¸€ç³»åˆ—ç»„åˆé€»è¾‘èŠ¯ç‰‡å’ŒCPUçš„è¿ç®—å¤§è„‘ï¼šALUï¼Œä½†æ˜¯ç»„åˆé€»è¾‘èŠ¯ç‰‡æ˜¯ä¸€ä¸ªå®æ—¶ç³»ç»Ÿï¼Œåªè¦è¾“å…¥å€¼æ”¹å˜äº†è¾“å‡ºå€¼ä¹Ÿé©¬ä¸Šè·Ÿç€æ”¹å˜ï¼Œä¸Šä¸€ç§’è¾›è‹¦è®¡ç®—å‡ºæ¥çš„å€¼ï¼Œä¸‹ä¸€ç§’å°±æ¶ˆå¤±ä¸è§äº†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…·å¤‡â€è®°å¿†åŠŸèƒ½â€çš„åŸä»¶ï¼Œç”¨äºå­˜å‚¨æ•°æ®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æœ¬ç¯‡è¦ä»‹ç»çš„ï¼šæ—¶åºé€»è¾‘èŠ¯ç‰‡ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åé¦ˆç”µè·¯æ—¶é’Ÿç³»ç»Ÿdè§¦å‘å™¨&quot;&gt;åé¦ˆç”µè·¯ã€æ—¶é’Ÿç³»ç»Ÿã€Dè§¦å‘å™¨&lt;/h3&gt;

&lt;p&gt;ç»„åˆé€»è¾‘èŠ¯ç‰‡ä¹‹æ‰€ä»¥æ— æ³•è®°ä½ä¸Šä¸€æ¬¡è®¡ç®—çš„å€¼ï¼Œæ˜¯å› ä¸ºç”µæµä¿¡æ¯çš„æµå‘æ˜¯å•å‘çš„ï¼Œå®ƒæ€»æ˜¯å‘å‰æµåŠ¨ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•ä¸¤æ¬¡è¸å…¥åŒä¸€æ¡æ²³æµã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å¼•ä¸€æ¡å¯¼çº¿è®©æ•°æ®å›æµï¼Œå½¢æˆä¸€ä¸ªç¯è·¯å³å¯ï¼ˆå³å½¢æˆåé¦ˆï¼‰ã€‚ä¸‹å›¾å°±æ˜¯ç”¨ORé—¨åŠ ä¸Šä¸€è·¯ç¯è·¯æ„æˆçš„ä¸€ä½å­˜å‚¨å™¨ï¼Œä½†ä»–çš„ç¼ºç‚¹æ˜¯åªèƒ½è®°å¿†ä¸€æ¬¡1çš„è¾“å…¥ï¼Œåç»­æ— è®ºè¾“å…¥å¦‚ä½•æ”¹å˜ï¼Œè¾“å‡ºæ€»æ˜¯ä¸º1ã€‚å¦‚æœæƒ³è¦å®ç°åŠŸèƒ½æ›´å¼ºå¤§çš„è®°å¿†èŠ¯ç‰‡å°±éœ€è¦æ›´å¤æ‚çš„ç”µè·¯è®¾è®¡ï¼Œä½†ä»ç„¶æ˜¯åŸºäºé—¨çš„è¾“å‡ºå†é‡æ–°ä½œä¸ºè¾“å…¥çš„åŸç†ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbdrumxqvgj30l60740sl.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æåˆ°â€è®°å¿†â€å°±ä¸èƒ½ä¸æ¶‰åŠåˆ°â€æ—¶é—´â€ï¼Œè®¡ç®—æœºä¸­çš„æ—¶é—´æ˜¯åŸºäºéœ‡è¡æ—¶é’Ÿç³»ç»Ÿçš„ï¼Œéœ‡è¡æ—¶é’Ÿæä¾›è¿ç»­çš„äº¤å˜ä¿¡å·ï¼ˆé«˜ä½ç”µå¹³ï¼‰ä»è€Œå½¢æˆç¦»æ•£çš„æ—¶é—´å‘¨æœŸã€‚æ—¶é’Ÿå‘¨æœŸæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­å„å…ƒå™¨ä»¶èƒ½æ•´é½åˆ’ä¸€ï¼Œåè°ƒåŒæ­¥çš„å·¥ä½œçš„åŸºç¡€ã€‚å½“ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸåˆ°æ¥æ—¶ï¼Œè®¡ç®—æœºçš„å„ä¸ªå…ƒå™¨ä»¶å¿…é¡»æŠ“ç´§åœ¨æœ¬æ¬¡å‘¨æœŸå†…å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç„¶ååœä¸‹æ¥å®‰é™ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸçš„æ¥ä¸´ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ—¶é’Ÿé¢‘ç‡é€šå¸¸è¢«å½“åšè¡¡é‡è®¡ç®—æœºæ€§èƒ½çš„é‡è¦æŒ‡æ ‡ï¼Œå› ä¸ºé¢‘ç‡è¶Šé«˜ï¼Œå•ä½æ—¶é—´å†…è®¡ç®—æœºå®Œæˆçš„å·¥ä½œæ­¥éª¤å°±è¶Šå¤šï¼‰ã€‚ä¾‹å¦‚åªæœ‰å½“æ—¶é’Ÿä¸Šå‡æ²¿åˆ°æ¥æ—¶ï¼Œå„æ—¶åºèŠ¯ç‰‡æ‰ä¼šç¬é—´æ”¹å˜çŠ¶æ€ï¼Œå…¶ä½™æ—¶é—´ä¿æŒçŠ¶æ€é”å®šã€‚å¦‚æœæŠŠCPUã€å†…å­˜ã€è¾“å…¥è¾“å‡ºè®¾å¤‡æ¯”ä½œä¹å›¢ä¸­å„ä¸ªä¹å™¨çš„ä¹æ‰‹ï¼Œé‚£ä¹ˆæ—¶é’Ÿç³»ç»Ÿå°±æ˜¯è®¡ç®—æœºä¹å›¢çš„ä¹é˜ŸæŒ‡æŒ¥ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbeiyf35ixj313e02edft.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;åœ¨æ­å»ºhackçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€å…±ç”¨åˆ°äº†ä¸¤ä¸ªåŸºæœ¬èŠ¯ç‰‡ï¼ˆå³ä¸ç”¨è‡ªå·±å®ç°çš„èŠ¯ç‰‡ï¼‰ï¼Œä¸€ä¸ªæ˜¯ä¸Šä¸€ç¯‡ç”¨äºæ­å»ºç»„åˆé€»è¾‘èŠ¯ç‰‡ç³»ç»Ÿçš„Nandï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯æœ¬ç‰‡ç”¨äºæ­å»ºæ—¶åºé€»è¾‘èŠ¯ç‰‡çš„DFFï¼ˆdata Flip-Flopï¼šDè§¦å‘å™¨ï¼‰ã€‚DFFçš„ç»“æ„ç”±R-Sé”å­˜å™¨æ´¾ç”Ÿè€Œæ¥ã€‚ï¼ˆDFFçš„å®ç°ç›¸å¯¹å¤æ‚ï¼Œå¦‚æœå¯¹é”å­˜å™¨å’ŒDFFæ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒã€Šç¼–ç çš„å¥¥ç§˜ã€‹Charles Petzoldï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0082zybply1gc0yzm52nxj317y0iy753.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;è¾¹æ²¿è§¦å‘çš„Då‹è§¦å‘å™¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;DFFåŒ…å«1bitçš„è¾“å…¥å’Œ1bitçš„è¾“å‡ºï¼Œå¦å¤–DFFæœ‰ä¸€ä¸ªæ—¶é’Ÿè¾“å…¥ï¼ˆå›¾ä¸­çš„å°ä¸‰è§’ä»£è¡¨æ—¶é’Ÿè¾“å…¥ï¼‰ï¼ŒDFFæ ¹æ®æ•°æ®è¾“å…¥ä½å’Œæ—¶é’Ÿè¾“å…¥ä½çš„è¾“å…¥å®ç°äº†out(t)=in(t-1)ï¼Œå³DFFç®€å•çš„å°†å‰ä¸€ä¸ªæ—¶é—´å‘¨æœŸçš„è¾“å…¥å€¼ä½œä¸ºå½“å‰æ—¶é—´å‘¨æœŸçš„è¾“å‡ºå€¼ã€‚è¿™æ˜¯DFFå…·å¤‡è®°å¿†åŠŸèƒ½çš„è¡¨ç°ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åç»­å®ç°16bitå¯„å­˜å™¨ï¼Œ16Kã€64Kã€256Kç­‰RAMçš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbek01supqj30dq05kaa4.jpg&quot; width=&quot;250&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;1ä½å¯„å­˜å™¨å’Œ16ä½å¯„å­˜å™¨&quot;&gt;1ä½å¯„å­˜å™¨å’Œ16ä½å¯„å­˜å™¨&lt;/h3&gt;
&lt;p&gt;æœ‰äº†DFFçš„è®°å¿†åŠŸèƒ½ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å…ˆå®ç°æœ€ç®€å•1bitå¯„å­˜å™¨å’Œ16bitå¯„å­˜å™¨ã€‚1bitå¯„å­˜å™¨çš„æ¥å£åŒ…æ‹¬ï¼šinè¾“å…¥ç®¡è„šï¼Œè´Ÿè´£ä¼ è¾“è¾“å…¥æ•°æ®ï¼›loadç®¡è„šï¼Œloadç®¡è„šæ˜¯æ§åˆ¶ä½ï¼Œåªæœ‰å½“loadä¸º1çš„æ—¶å€™ï¼Œæ‰ä¼šå­˜å‚¨inçš„è¾“å…¥æ•°æ®ï¼›outç®¡è„šè¾“å‡ºå½“å‰å­˜å‚¨çš„å€¼ã€‚æ¥å£å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbec5aygpzj311i08y3yr.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;1bitèŠ¯ç‰‡å¾ˆå¥½å®ç°ï¼Œä¸»è¦æ˜¯å®ç°loadä½çš„æ§åˆ¶åŠŸèƒ½å³å¯ï¼Œæ ¹æ®èŠ¯ç‰‡æè¿°å¯ä»¥æŠŠèŠ¯ç‰‡è®¾è®¡ä¸ºï¼šloadä¸º1æ—¶é€‰æ‹©è¾“å…¥inçš„æ•°æ®ï¼Œloadä¸º0æ—¶é€‰æ‹©è¾“å…¥ä¸Šä¸€æ¬¡å¯„å­˜å™¨ä¿å­˜çš„æ•°æ®ã€‚è¿™ç§é€‰æ‹©åŠŸèƒ½æ­£å¥½æ˜¯ä¸Šä¸€ç¯‡æˆ‘ä»¬å®ç°çš„MultiplexorèŠ¯ç‰‡ï¼ˆåé¢åœ¨å®ç°RAMçš„æ—¶å€™ï¼ŒMultiplexoråœ¨åœ°å€é€‰æ‹©ä¸­çš„ä½œç”¨ä½“ç°å¾—æ›´åŠ æ˜æ˜¾ï¼‰ã€‚1bitå¯„å­˜å™¨å†…éƒ¨å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbece9ixdnj30gc0ceaa5.jpg&quot; width=&quot;400&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬ç”¨ç¡¬ä»¶æè¿°è¯­è¨€ï¼ˆHDLï¼‰å®ç°ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * 1-bit register:
 * If load[t] == 1 then out[t+1] = in[t]
 *                 else out does not change (out[t+1] = out[t])
 */

CHIP Bit {
    IN in, load;
    OUT out;

    PARTS:
    Mux(a=outBack, b=in, sel=load, out=dffIn);
    DFF(in=dffIn, out=out, out=outBack);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ‰1bitå¯„å­˜å™¨ï¼Œ16bitå¯„å­˜å™¨å¯ä»¥çœ‹åšæ˜¯16ä¸ª1bitå¯„å­˜å™¨çš„ç»„åˆï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbecp634wwj30h80amdfw.jpg&quot; width=&quot;400&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼š16bitå¯„å­˜å™¨&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * 16-bit register:
 * If load[t] == 1 then out[t+1] = in[t]
 * else out does not change
 */

CHIP Register {
    IN in[16], load;
    OUT out[16];

    PARTS:
    Mux(a=outBack0, b=in[0], sel=load, out=dffIn0);
    DFF(in=dffIn0, out=out[0], out=outBack0);

    Mux(a=outBack1, b=in[1], sel=load, out=dffIn1);
    DFF(in=dffIn1, out=out[1], out=outBack1);

    Mux(a=outBack2, b=in[2], sel=load, out=dffIn2);
    DFF(in=dffIn2, out=out[2], out=outBack2);

    Mux(a=outBack3, b=in[3], sel=load, out=dffIn3);
    DFF(in=dffIn3, out=out[3], out=outBack3);

    Mux(a=outBack4, b=in[4], sel=load, out=dffIn4);
    DFF(in=dffIn4, out=out[4], out=outBack4);

    Mux(a=outBack5, b=in[5], sel=load, out=dffIn5);
    DFF(in=dffIn5, out=out[5], out=outBack5);

    // ...6åˆ°15
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ram&quot;&gt;RAM&lt;/h3&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬æ¥å®ç°è®¡ç®—æœºä¸­å¦ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼šRAMã€‚åˆšæ‰çœ‹åˆ°ï¼Œ16bitå¯„å­˜å™¨å¯ä»¥ç”±16ä¸ª1bitçš„å¯„å­˜å™¨ç»„åˆè€Œæˆï¼ŒåŒç†ä¸€ä¸ªmKBçš„RAMï¼Œå¯ä»¥ç”±nä¸ª16ä½å¯„å­˜å™¨ç»„åˆè€Œæˆï¼Œ16ä½å¯„å­˜å™¨å°±æ˜¯RAMä¸­çš„åŸºæœ¬å­˜å‚¨å•å…ƒï¼Œå¯„å­˜å™¨çš„å®½åº¦ï¼ˆæ­¤å¤„æ˜¯16ä½ï¼‰å°±æ˜¯RAMâ€å­—â€ï¼ˆWORDï¼‰çš„å®½åº¦ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œéœ€è¦é€šè¿‡åœ°å€æ¥è®¿é—®RAMï¼ŒRAMä¸­æ¯ä¸ªå¯„å­˜å™¨éƒ½ç»‘å®šåˆ°ä¸€ä¸ªå”¯ä¸€åœ°å€ã€‚ä¸‹å›¾æ˜¯RAMçš„æ¥å£è®¾è®¡ï¼ŒRAMæœ‰ä¸‰ç§è¾“å…¥ï¼šæ•°æ®è¾“å…¥ï¼Œåœ°å€è¾“å…¥å’ŒåŠ è½½ä½ã€‚åœ°å€æŒ‡å®šäº†å½“å‰å‘¨æœŸRAMä¸­å“ªä¸€ä¸ªå¯„å­˜å™¨è¢«è®¿é—®ï¼Œå½“è¿›è¡Œè¯»æ“ä½œæ—¶ï¼ˆload=0ï¼‰ï¼ŒRAMç«‹å³è¾“å‡ºè¢«é€‰ä¸­çš„å¯„å­˜å™¨çš„å€¼ï¼Œå½“è¿›è¡Œå†™æ“ä½œæ—¶ï¼ˆload=1ï¼‰ï¼Œè¢«é€‰ä¸­çš„å¯„å­˜å™¨è¢«èµ‹äºˆæ–°çš„å€¼ï¼Œä»ä¸‹ä¸ªå‘¨æœŸå¼€å§‹RAMå°†å¼€å§‹å‘å‡ºæ–°çš„å€¼ã€‚è¾“å…¥å’Œè¾“å‡ºçš„æ•°æ®å®½åº¦å°±æ˜¯RAMâ€å­—â€çš„å®½åº¦ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbedozihymj30ki0lsjro.jpg&quot; width=&quot;500&quot; /&gt;&lt;/center&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®ç°RAM8ï¼ŒRAM64ï¼ŒRAM512ï¼ŒRAM4Kï¼ŒRAM16Kå‡ ç§å†…å­˜å®¹é‡çš„RAMã€‚RAMnä¸­çš„nå³ä»£è¡¨RAMä¸­æœ‰nä¸ªå¯„å­˜å™¨ã€‚ä¾‹å¦‚RAM16Kä¸­æœ‰16Kä¸ª16ä½å¯„å­˜å™¨ï¼Œé‚£ä¹ˆä»–çš„å†…å­˜å®¹é‡å°±æ˜¯16K*(16/2)byte=32Kbyteã€‚æƒ³è¦å®ç°ä¸€ä¸ªRAMnèŠ¯ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨RAMnèŠ¯ç‰‡ä¸­é›†æˆnä¸ªå¯„å­˜å™¨ï¼Œå¤–åŠ ä¸€äº›åˆ—æ§åˆ¶é€»è¾‘ï¼ˆå¤„ç†loadï¼‰å’Œåœ°å€é€‰æ‹©é€»è¾‘ï¼Œé‚£ä¹ˆæ¶‰åŠåˆ°é€‰æ‹©é€»è¾‘è‡ªç„¶å°‘ä¸äº†Multiplexorå’ŒDMultiplexorã€‚é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬ä»¥RAM8ä¸ºä¾‹è®²ä¸€ä¸‹æˆ‘è‡ªå·±çš„å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;RAM8ä¸­æœ‰8ä¸ªå¯„å­˜å™¨&lt;/li&gt;
  &lt;li&gt;8ä¸ªå¯„å­˜å™¨æœ‰8ä¸ªåœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åœ°å€ä½éœ€è¦2^n=8, n=3ä½&lt;/li&gt;
  &lt;li&gt;DMuxç”¨äºè§£æå†™å…¥æ—¶çš„åœ°å€ï¼Œç”¨3ä½selåˆ†ç¦»å‡ºéœ€è¦å†™å…¥çš„é‚£ä¸€è·¯ï¼Œå†å’Œloadåšä¸æ“ä½œåä½œä¸ºå¯„å­˜å™¨çš„loadä½è¾“å…¥ï¼Œæœ€ç»ˆé€šè¿‡loadä½æ¥å†³å®šå“ªä¸€ä¸ªå¯„å­˜å™¨è¢«å†™å…¥Inã€‚&lt;/li&gt;
  &lt;li&gt;Muxç”¨äºè§£æè¯»å–æ—¶çš„åœ°å€ï¼Œç”¨3ä½selåœ¨8ä¸ªå¯„å­˜å™¨ä¸­é€‰æ‹©æƒ³è¦è¯»å–çš„é‚£ä¸€è·¯æ•°æ®&lt;/li&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbef8oh05tj31ca0qywfd.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼šRAM8&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * Memory of 8 registers, each 16 bit-wide. Out holds the value
 * stored at the memory location specified by address. If load==1, then 
 * the in value is loaded into the memory location specified by address 
 * (the loaded value will be emitted to out from the next time step onward).
 */

CHIP RAM8 {
    IN in[16], load, address[3];
    OUT out[16];

    PARTS:
    DMux8Way(in=true, sel=address, a=a, b=b, c=c, d=d, e=e, f=f, g=g, h=h);

    And(a=a, b=load, out=load0);
    And(a=b, b=load, out=load1);
    And(a=c, b=load, out=load2);
    And(a=d, b=load, out=load3);
    And(a=e, b=load, out=load4);
    And(a=f, b=load, out=load5);
    And(a=g, b=load, out=load6);
    And(a=h, b=load, out=load7);

    Register(in=in, load=load0, out=R0);
    Register(in=in, load=load1, out=R1);
    Register(in=in, load=load2, out=R2);
    Register(in=in, load=load3, out=R3);
    Register(in=in, load=load4, out=R4);
    Register(in=in, load=load5, out=R5);
    Register(in=in, load=load6, out=R6);
    Register(in=in, load=load7, out=R7);

    Mux8Way16(a=R0, b=R1, c=R2, d=R3, e=R4, f=R5, g=R6, h=R7, sel=address, out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ‰äº†RAM8ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨8ä¸ªRAM8çš„ç»„åˆå®ç°RAM64ï¼Œä»¥æ­¤ç±»æ¨å®ç°åé¢å®¹é‡æ›´å¤§çš„RAMã€‚&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;å®ç°RAM64çš„æŠ€å·§æ˜¯å¯¹åœ°å€ä½çš„æ‹†åˆ†ï¼ŒRAM64éœ€è¦6ä¸ªåœ°å€ä½ï¼ŒæŠŠ6ä¸ªåœ°å€ä¸ºæ‹†åˆ†ä¸º3+3&lt;/li&gt;
  &lt;li&gt;å’Œå®ç°RAM8çš„æ—¶å€™ç±»ä¼¼ï¼Œéœ€è¦å¼•å…¥ä¸€ç»„Muxå’ŒDMuxï¼Œè¿™ç»„é€‰æ‹©èŠ¯ç‰‡ä½¿ç”¨6ä½åœ°å€ä¸­çš„é«˜ä¸‰ä½ï¼Œé€šè¿‡é«˜3ä½æŠŠåœ°å€åˆæ­¥åˆ’åˆ†ä¸º8ä¸ªåœ°å€æ®µï¼Œæ¯ä¸ªåœ°å€æ®µçš„å®¹é‡å³RAM8ä¸­å¯„å­˜å™¨çš„æ•°é‡&lt;/li&gt;
  &lt;li&gt;æ¯ä¸ªRAM8ä½¿ç”¨6ä½åœ°å€ä¸­çš„ä½ä¸‰ä½ï¼Œç„¶åä»ä¸­å®šä½åˆ°ç›®æ ‡åœ°å€å¯„å­˜å™¨&lt;/li&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbeg2r9r8oj30wu0loaab.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼šRAM64&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * Memory of 64 registers, each 16 bit-wide. Out holds the value
 * stored at the memory location specified by address. If load==1, then 
 * the in value is loaded into the memory location specified by address 
 * (the loaded value will be emitted to out from the next time step onward).
 */

CHIP RAM64 {
    IN in[16], load, address[6];
    OUT out[16];

    PARTS:
    DMux8Way(in=true, sel[0]=address[3], sel[1]=address[4], sel[2]=address[5], a=a, b=b, c=c, d=d, e=e, f=f, g=g, h=h);

    And(a=a, b=load, out=load0);
    And(a=b, b=load, out=load1);
    And(a=c, b=load, out=load2);
    And(a=d, b=load, out=load3);
    And(a=e, b=load, out=load4);
    And(a=f, b=load, out=load5);
    And(a=g, b=load, out=load6);
    And(a=h, b=load, out=load7);

    RAM8(in=in, load=load0, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R0);
    RAM8(in=in, load=load1, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R1);
    RAM8(in=in, load=load2, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R2);
    RAM8(in=in, load=load3, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R3);
    RAM8(in=in, load=load4, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R4);
    RAM8(in=in, load=load5, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R5);
    RAM8(in=in, load=load6, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R6);
    RAM8(in=in, load=load7, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R7);

    Mux8Way16(a=R0, b=R1, c=R2, d=R3, e=R4, f=R5, g=R6, h=R7, sel[0]=address[3], sel[1]=address[4], sel[2]=address[5], out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;HDLå®ç°ï¼šRAM4K&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * Memory of 4K registers, each 16 bit-wide. Out holds the value
 * stored at the memory location specified by address. If load==1, then 
 * the in value is loaded into the memory location specified by address 
 * (the loaded value will be emitted to out from the next time step onward).
 */

CHIP RAM4K {
    IN in[16], load, address[12];
    OUT out[16];

    PARTS:
    DMux8Way(in=true, sel[0..2]=address[9..11], a=a, b=b, c=c, d=d, e=e, f=f, g=g, h=h);

    And(a=a, b=load, out=load0);
    And(a=b, b=load, out=load1);
    And(a=c, b=load, out=load2);
    And(a=d, b=load, out=load3);
    And(a=e, b=load, out=load4);
    And(a=f, b=load, out=load5);
    And(a=g, b=load, out=load6);
    And(a=h, b=load, out=load7);

    RAM512(in=in, load=load0, address[0..8]=address[0..8], out=R0);
    RAM512(in=in, load=load1, address[0..8]=address[0..8], out=R1);
    RAM512(in=in, load=load2, address[0..8]=address[0..8], out=R2);
    RAM512(in=in, load=load3, address[0..8]=address[0..8], out=R3);
    RAM512(in=in, load=load4, address[0..8]=address[0..8], out=R4);
    RAM512(in=in, load=load5, address[0..8]=address[0..8], out=R5);
    RAM512(in=in, load=load6, address[0..8]=address[0..8], out=R6);
    RAM512(in=in, load=load7, address[0..8]=address[0..8], out=R7);

    Mux8Way16(a=R0, b=R1, c=R2, d=R3, e=R4, f=R5, g=R6, h=R7, sel[0..2]=address[9..11], out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬äº†è§£äº†RAMä¸­å†…å­˜è®¿é—®çš„æ–¹å¼ã€‚åœ¨RAMä¸­çš„å­˜å‚¨å•å…ƒå¯ä»¥é€šè¿‡è§£æåœ°å€ä¿¡å·æ¥è¿›è¡Œéšæœºçš„è®¿é—®ï¼Œè€Œä¸ä¼šå—é™äºå­˜å‚¨å•å…ƒçš„ä½ç½®ï¼Œè®¿é—®ä»»ä½•ä½ç½®çš„å­˜å‚¨å•å…ƒçš„é€Ÿåº¦éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä¾‹å¦‚è®¿é—®å†…å­˜ä¸­ä¸€ä¸ªæ•°ç»„ä¸­ä»»æ„ä¸‹æ ‡çš„æ•°æ®çš„é€Ÿåº¦éƒ½æ˜¯ç›¸ç­‰çš„ã€‚è¿™ä¹Ÿæ˜¯Random Access Memoryæ¦‚å¿µçš„ç”±æ¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è®¡æ•°å™¨&quot;&gt;è®¡æ•°å™¨&lt;/h3&gt;
&lt;p&gt;è®¡æ•°å™¨ä¹Ÿæ˜¯CPUä¸­ä¸€ä¸ªé‡è¦çš„åŸä»¶ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨å°†è¦æ‰§è¡ŒæŒ‡ä»¤çš„å†…å­˜åœ°å€ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè®¡æ•°å™¨æ¯ä¸ªå‘¨æœŸç®€å•çš„è¿›è¡Œ+1æ“ä½œï¼Œè¿™æ—¶è®¡ç®—æœºèƒ½å¤Ÿè·å–ä¸‹ä¸€æ¡åœ°å€ï¼Œè¿™å’ŒCPUé¡ºåºæ‰§è¡ŒæŒ‡ä»¤çš„æ¨¡å¼ç›¸ç¬¦ï¼ŒåŒæ—¶CPUä¹Ÿæ”¯æŒç›´æ¥è·³è½¬åˆ°ç¼–å·ä¸ºnçš„æŒ‡ä»¤å»æ‰§è¡Œï¼Œå› æ­¤è®¡æ•°å™¨è¦æ”¯æŒå°†å…¶å€¼è®¾ç½®ä¸ºnçš„èƒ½åŠ›ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è®¡æ•°å™¨çš„æ¥å£è®¾è®¡ï¼šè®¡æ•°å™¨èŠ¯ç‰‡æœ‰2ä¸ªé™„åŠ æ§åˆ¶ä½resetå’Œincï¼Œå½“inc=1æ—¶ï¼Œè®¡æ•°å™¨åœ¨æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸè‡ªåŠ 1ï¼Œå…¶è¾“å‡ºå€¼ä¸ºout(t)=out(t-1)+1ï¼›å¦‚æœæƒ³è¦å°†è®¡æ•°å™¨ç½®ä¸º0ï¼Œå°±å°†resetç½®ä¸º1ã€‚å¦‚æœæƒ³è¦å°†è®¡æ•°å™¨è®¾ç½®ä¸ºæŸä¸ªå€¼ï¼Œåˆ™å°†loadç½®ä¸º1ï¼Œå¹¶å°†æ•°å€¼ä»inè¾“å…¥ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbeis1709vj30l007it8p.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;ä¸‹å›¾æ˜¯æˆ‘å¯¹è®¡æ•°å™¨çš„å®ç°é€»è¾‘&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;resetï¼Œincï¼Œloadç”¨ä¸€ä¸ªOr8wayè¾“å‡ºï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªä¸º1ï¼Œé‚£ä¹ˆregisterçš„loadä¸ºå°±ä¸º1ï¼Œregisterçš„å€¼ä¼šè¢«æ›´æ–°&lt;/li&gt;
  &lt;li&gt;3ä¸ªMuxä¸²è”ç”¨äºé€‰æ‹©è‡ªå¢1ã€inçš„è¾“å…¥å€¼ã€é‡ç½®0è¿™ä¸‰ç§æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbejy994vbj317g0ra3z0.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼šè®¡æ•°å™¨&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * A 16-bit counter with load and reset control bits.
 * if      (reset[t] == 1) out[t+1] = 0
 * else if (load[t] == 1)  out[t+1] = in[t]
 * else if (inc[t] == 1)   out[t+1] = out[t] + 1  (integer addition)
 * else                    out[t+1] = out[t]
 */

CHIP PC {
    IN in[16],load,inc,reset;
    OUT out[16];

    PARTS:
    Or8Way(in[0]=inc, in[1]=reset, in[2]=load, in[3..7]=false, out=ReLoad);

    Mux16(a=outBack, b=outPlus, sel=inc, out=loadIN);
    Mux16(a=loadIN, b=in, sel=load, out=resetIN);
    Mux16(a=resetIN, b=false, sel=reset, out=ReIn);

    Register(in=ReIn, load=ReLoad, out=out, out=outBack);
    Inc16(in=outBack, out=outPlus);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹è®¡æ•°å™¨æ˜¯å¦‚ä½•åœ¨æ—¶é’Ÿç³»ç»Ÿä¸‹å˜åŒ–æ•°å€¼çš„ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1gbdrw718d4j31be0hiaat.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;

&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†hack CPUæ‰€éœ€çš„æ‰€æœ‰èŠ¯ç‰‡ã€‚ç»„åˆé€»è¾‘èŠ¯ç‰‡ä¸»è¦è´Ÿè´£ç®—æ•°è¿ç®—ã€é€»è¾‘è¿ç®—ã€é€‰æ‹©é€»è¾‘ï¼Œå¹¶ä¸”é€šè¿‡é€‚å½“çš„ç»„åˆå¯ä»¥ç”¨æ¥å®ç°æŒ‡ä»¤è§£æå’ŒæŸäº›åŠŸèƒ½æ§åˆ¶ï¼›æ—¶åºèŠ¯ç‰‡ä¸»è¦è´Ÿè´£å­˜å‚¨æ•°æ®ã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šç”¨è¿™äº›èŠ¯ç‰‡æ­å»ºä¸€ä¸ªç®€å•ä½†å®ç”¨çš„CPUã€‚&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">ä¸Šä¸€ç¯‡æˆ‘ä»¬å®ç°äº†ä¸€ç³»åˆ—ç»„åˆé€»è¾‘èŠ¯ç‰‡å’ŒCPUçš„è¿ç®—å¤§è„‘ï¼šALUï¼Œä½†æ˜¯ç»„åˆé€»è¾‘èŠ¯ç‰‡æ˜¯ä¸€ä¸ªå®æ—¶ç³»ç»Ÿï¼Œåªè¦è¾“å…¥å€¼æ”¹å˜äº†è¾“å‡ºå€¼ä¹Ÿé©¬ä¸Šè·Ÿç€æ”¹å˜ï¼Œä¸Šä¸€ç§’è¾›è‹¦è®¡ç®—å‡ºæ¥çš„å€¼ï¼Œä¸‹ä¸€ç§’å°±æ¶ˆå¤±ä¸è§äº†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…·å¤‡â€è®°å¿†åŠŸèƒ½â€çš„åŸä»¶ï¼Œç”¨äºå­˜å‚¨æ•°æ®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æœ¬ç¯‡è¦ä»‹ç»çš„ï¼šæ—¶åºé€»è¾‘èŠ¯ç‰‡ã€‚ åé¦ˆç”µè·¯ã€æ—¶é’Ÿç³»ç»Ÿã€Dè§¦å‘å™¨ ç»„åˆé€»è¾‘èŠ¯ç‰‡ä¹‹æ‰€ä»¥æ— æ³•è®°ä½ä¸Šä¸€æ¬¡è®¡ç®—çš„å€¼ï¼Œæ˜¯å› ä¸ºç”µæµä¿¡æ¯çš„æµå‘æ˜¯å•å‘çš„ï¼Œå®ƒæ€»æ˜¯å‘å‰æµåŠ¨ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•ä¸¤æ¬¡è¸å…¥åŒä¸€æ¡æ²³æµã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å¼•ä¸€æ¡å¯¼çº¿è®©æ•°æ®å›æµï¼Œå½¢æˆä¸€ä¸ªç¯è·¯å³å¯ï¼ˆå³å½¢æˆåé¦ˆï¼‰ã€‚ä¸‹å›¾å°±æ˜¯ç”¨ORé—¨åŠ ä¸Šä¸€è·¯ç¯è·¯æ„æˆçš„ä¸€ä½å­˜å‚¨å™¨ï¼Œä½†ä»–çš„ç¼ºç‚¹æ˜¯åªèƒ½è®°å¿†ä¸€æ¬¡1çš„è¾“å…¥ï¼Œåç»­æ— è®ºè¾“å…¥å¦‚ä½•æ”¹å˜ï¼Œè¾“å‡ºæ€»æ˜¯ä¸º1ã€‚å¦‚æœæƒ³è¦å®ç°åŠŸèƒ½æ›´å¼ºå¤§çš„è®°å¿†èŠ¯ç‰‡å°±éœ€è¦æ›´å¤æ‚çš„ç”µè·¯è®¾è®¡ï¼Œä½†ä»ç„¶æ˜¯åŸºäºé—¨çš„è¾“å‡ºå†é‡æ–°ä½œä¸ºè¾“å…¥çš„åŸç†ã€‚ æåˆ°â€è®°å¿†â€å°±ä¸èƒ½ä¸æ¶‰åŠåˆ°â€æ—¶é—´â€ï¼Œè®¡ç®—æœºä¸­çš„æ—¶é—´æ˜¯åŸºäºéœ‡è¡æ—¶é’Ÿç³»ç»Ÿçš„ï¼Œéœ‡è¡æ—¶é’Ÿæä¾›è¿ç»­çš„äº¤å˜ä¿¡å·ï¼ˆé«˜ä½ç”µå¹³ï¼‰ä»è€Œå½¢æˆç¦»æ•£çš„æ—¶é—´å‘¨æœŸã€‚æ—¶é’Ÿå‘¨æœŸæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­å„å…ƒå™¨ä»¶èƒ½æ•´é½åˆ’ä¸€ï¼Œåè°ƒåŒæ­¥çš„å·¥ä½œçš„åŸºç¡€ã€‚å½“ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸåˆ°æ¥æ—¶ï¼Œè®¡ç®—æœºçš„å„ä¸ªå…ƒå™¨ä»¶å¿…é¡»æŠ“ç´§åœ¨æœ¬æ¬¡å‘¨æœŸå†…å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç„¶ååœä¸‹æ¥å®‰é™ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸçš„æ¥ä¸´ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ—¶é’Ÿé¢‘ç‡é€šå¸¸è¢«å½“åšè¡¡é‡è®¡ç®—æœºæ€§èƒ½çš„é‡è¦æŒ‡æ ‡ï¼Œå› ä¸ºé¢‘ç‡è¶Šé«˜ï¼Œå•ä½æ—¶é—´å†…è®¡ç®—æœºå®Œæˆçš„å·¥ä½œæ­¥éª¤å°±è¶Šå¤šï¼‰ã€‚ä¾‹å¦‚åªæœ‰å½“æ—¶é’Ÿä¸Šå‡æ²¿åˆ°æ¥æ—¶ï¼Œå„æ—¶åºèŠ¯ç‰‡æ‰ä¼šç¬é—´æ”¹å˜çŠ¶æ€ï¼Œå…¶ä½™æ—¶é—´ä¿æŒçŠ¶æ€é”å®šã€‚å¦‚æœæŠŠCPUã€å†…å­˜ã€è¾“å…¥è¾“å‡ºè®¾å¤‡æ¯”ä½œä¹å›¢ä¸­å„ä¸ªä¹å™¨çš„ä¹æ‰‹ï¼Œé‚£ä¹ˆæ—¶é’Ÿç³»ç»Ÿå°±æ˜¯è®¡ç®—æœºä¹å›¢çš„ä¹é˜ŸæŒ‡æŒ¥ã€‚ åœ¨æ­å»ºhackçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€å…±ç”¨åˆ°äº†ä¸¤ä¸ªåŸºæœ¬èŠ¯ç‰‡ï¼ˆå³ä¸ç”¨è‡ªå·±å®ç°çš„èŠ¯ç‰‡ï¼‰ï¼Œä¸€ä¸ªæ˜¯ä¸Šä¸€ç¯‡ç”¨äºæ­å»ºç»„åˆé€»è¾‘èŠ¯ç‰‡ç³»ç»Ÿçš„Nandï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯æœ¬ç‰‡ç”¨äºæ­å»ºæ—¶åºé€»è¾‘èŠ¯ç‰‡çš„DFFï¼ˆdata Flip-Flopï¼šDè§¦å‘å™¨ï¼‰ã€‚DFFçš„ç»“æ„ç”±R-Sé”å­˜å™¨æ´¾ç”Ÿè€Œæ¥ã€‚ï¼ˆDFFçš„å®ç°ç›¸å¯¹å¤æ‚ï¼Œå¦‚æœå¯¹é”å­˜å™¨å’ŒDFFæ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒã€Šç¼–ç çš„å¥¥ç§˜ã€‹Charles Petzoldï¼‰ã€‚ è¾¹æ²¿è§¦å‘çš„Då‹è§¦å‘å™¨ DFFåŒ…å«1bitçš„è¾“å…¥å’Œ1bitçš„è¾“å‡ºï¼Œå¦å¤–DFFæœ‰ä¸€ä¸ªæ—¶é’Ÿè¾“å…¥ï¼ˆå›¾ä¸­çš„å°ä¸‰è§’ä»£è¡¨æ—¶é’Ÿè¾“å…¥ï¼‰ï¼ŒDFFæ ¹æ®æ•°æ®è¾“å…¥ä½å’Œæ—¶é’Ÿè¾“å…¥ä½çš„è¾“å…¥å®ç°äº†out(t)=in(t-1)ï¼Œå³DFFç®€å•çš„å°†å‰ä¸€ä¸ªæ—¶é—´å‘¨æœŸçš„è¾“å…¥å€¼ä½œä¸ºå½“å‰æ—¶é—´å‘¨æœŸçš„è¾“å‡ºå€¼ã€‚è¿™æ˜¯DFFå…·å¤‡è®°å¿†åŠŸèƒ½çš„è¡¨ç°ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åç»­å®ç°16bitå¯„å­˜å™¨ï¼Œ16Kã€64Kã€256Kç­‰RAMçš„åŸºç¡€ã€‚ 1ä½å¯„å­˜å™¨å’Œ16ä½å¯„å­˜å™¨ æœ‰äº†DFFçš„è®°å¿†åŠŸèƒ½ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å…ˆå®ç°æœ€ç®€å•1bitå¯„å­˜å™¨å’Œ16bitå¯„å­˜å™¨ã€‚1bitå¯„å­˜å™¨çš„æ¥å£åŒ…æ‹¬ï¼šinè¾“å…¥ç®¡è„šï¼Œè´Ÿè´£ä¼ è¾“è¾“å…¥æ•°æ®ï¼›loadç®¡è„šï¼Œloadç®¡è„šæ˜¯æ§åˆ¶ä½ï¼Œåªæœ‰å½“loadä¸º1çš„æ—¶å€™ï¼Œæ‰ä¼šå­˜å‚¨inçš„è¾“å…¥æ•°æ®ï¼›outç®¡è„šè¾“å‡ºå½“å‰å­˜å‚¨çš„å€¼ã€‚æ¥å£å¦‚ä¸‹æ‰€ç¤ºï¼š 1bitèŠ¯ç‰‡å¾ˆå¥½å®ç°ï¼Œä¸»è¦æ˜¯å®ç°loadä½çš„æ§åˆ¶åŠŸèƒ½å³å¯ï¼Œæ ¹æ®èŠ¯ç‰‡æè¿°å¯ä»¥æŠŠèŠ¯ç‰‡è®¾è®¡ä¸ºï¼šloadä¸º1æ—¶é€‰æ‹©è¾“å…¥inçš„æ•°æ®ï¼Œloadä¸º0æ—¶é€‰æ‹©è¾“å…¥ä¸Šä¸€æ¬¡å¯„å­˜å™¨ä¿å­˜çš„æ•°æ®ã€‚è¿™ç§é€‰æ‹©åŠŸèƒ½æ­£å¥½æ˜¯ä¸Šä¸€ç¯‡æˆ‘ä»¬å®ç°çš„MultiplexorèŠ¯ç‰‡ï¼ˆåé¢åœ¨å®ç°RAMçš„æ—¶å€™ï¼ŒMultiplexoråœ¨åœ°å€é€‰æ‹©ä¸­çš„ä½œç”¨ä½“ç°å¾—æ›´åŠ æ˜æ˜¾ï¼‰ã€‚1bitå¯„å­˜å™¨å†…éƒ¨å®ç°å¦‚ä¸‹ï¼š ç„¶åæˆ‘ä»¬ç”¨ç¡¬ä»¶æè¿°è¯­è¨€ï¼ˆHDLï¼‰å®ç°ï¼š /** * 1-bit register: * If load[t] == 1 then out[t+1] = in[t] * else out does not change (out[t+1] = out[t]) */ CHIP Bit { IN in, load; OUT out; PARTS: Mux(a=outBack, b=in, sel=load, out=dffIn); DFF(in=dffIn, out=out, out=outBack); } æœ‰1bitå¯„å­˜å™¨ï¼Œ16bitå¯„å­˜å™¨å¯ä»¥çœ‹åšæ˜¯16ä¸ª1bitå¯„å­˜å™¨çš„ç»„åˆï¼š HDLå®ç°ï¼š16bitå¯„å­˜å™¨ /** * 16-bit register: * If load[t] == 1 then out[t+1] = in[t] * else out does not change */ CHIP Register { IN in[16], load; OUT out[16]; PARTS: Mux(a=outBack0, b=in[0], sel=load, out=dffIn0); DFF(in=dffIn0, out=out[0], out=outBack0); Mux(a=outBack1, b=in[1], sel=load, out=dffIn1); DFF(in=dffIn1, out=out[1], out=outBack1); Mux(a=outBack2, b=in[2], sel=load, out=dffIn2); DFF(in=dffIn2, out=out[2], out=outBack2); Mux(a=outBack3, b=in[3], sel=load, out=dffIn3); DFF(in=dffIn3, out=out[3], out=outBack3); Mux(a=outBack4, b=in[4], sel=load, out=dffIn4); DFF(in=dffIn4, out=out[4], out=outBack4); Mux(a=outBack5, b=in[5], sel=load, out=dffIn5); DFF(in=dffIn5, out=out[5], out=outBack5); // ...6åˆ°15 } RAM æ¥ç€æˆ‘ä»¬æ¥å®ç°è®¡ç®—æœºä¸­å¦ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼šRAMã€‚åˆšæ‰çœ‹åˆ°ï¼Œ16bitå¯„å­˜å™¨å¯ä»¥ç”±16ä¸ª1bitçš„å¯„å­˜å™¨ç»„åˆè€Œæˆï¼ŒåŒç†ä¸€ä¸ªmKBçš„RAMï¼Œå¯ä»¥ç”±nä¸ª16ä½å¯„å­˜å™¨ç»„åˆè€Œæˆï¼Œ16ä½å¯„å­˜å™¨å°±æ˜¯RAMä¸­çš„åŸºæœ¬å­˜å‚¨å•å…ƒï¼Œå¯„å­˜å™¨çš„å®½åº¦ï¼ˆæ­¤å¤„æ˜¯16ä½ï¼‰å°±æ˜¯RAMâ€å­—â€ï¼ˆWORDï¼‰çš„å®½åº¦ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œéœ€è¦é€šè¿‡åœ°å€æ¥è®¿é—®RAMï¼ŒRAMä¸­æ¯ä¸ªå¯„å­˜å™¨éƒ½ç»‘å®šåˆ°ä¸€ä¸ªå”¯ä¸€åœ°å€ã€‚ä¸‹å›¾æ˜¯RAMçš„æ¥å£è®¾è®¡ï¼ŒRAMæœ‰ä¸‰ç§è¾“å…¥ï¼šæ•°æ®è¾“å…¥ï¼Œåœ°å€è¾“å…¥å’ŒåŠ è½½ä½ã€‚åœ°å€æŒ‡å®šäº†å½“å‰å‘¨æœŸRAMä¸­å“ªä¸€ä¸ªå¯„å­˜å™¨è¢«è®¿é—®ï¼Œå½“è¿›è¡Œè¯»æ“ä½œæ—¶ï¼ˆload=0ï¼‰ï¼ŒRAMç«‹å³è¾“å‡ºè¢«é€‰ä¸­çš„å¯„å­˜å™¨çš„å€¼ï¼Œå½“è¿›è¡Œå†™æ“ä½œæ—¶ï¼ˆload=1ï¼‰ï¼Œè¢«é€‰ä¸­çš„å¯„å­˜å™¨è¢«èµ‹äºˆæ–°çš„å€¼ï¼Œä»ä¸‹ä¸ªå‘¨æœŸå¼€å§‹RAMå°†å¼€å§‹å‘å‡ºæ–°çš„å€¼ã€‚è¾“å…¥å’Œè¾“å‡ºçš„æ•°æ®å®½åº¦å°±æ˜¯RAMâ€å­—â€çš„å®½åº¦ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®ç°RAM8ï¼ŒRAM64ï¼ŒRAM512ï¼ŒRAM4Kï¼ŒRAM16Kå‡ ç§å†…å­˜å®¹é‡çš„RAMã€‚RAMnä¸­çš„nå³ä»£è¡¨RAMä¸­æœ‰nä¸ªå¯„å­˜å™¨ã€‚ä¾‹å¦‚RAM16Kä¸­æœ‰16Kä¸ª16ä½å¯„å­˜å™¨ï¼Œé‚£ä¹ˆä»–çš„å†…å­˜å®¹é‡å°±æ˜¯16K*(16/2)byte=32Kbyteã€‚æƒ³è¦å®ç°ä¸€ä¸ªRAMnèŠ¯ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨RAMnèŠ¯ç‰‡ä¸­é›†æˆnä¸ªå¯„å­˜å™¨ï¼Œå¤–åŠ ä¸€äº›åˆ—æ§åˆ¶é€»è¾‘ï¼ˆå¤„ç†loadï¼‰å’Œåœ°å€é€‰æ‹©é€»è¾‘ï¼Œé‚£ä¹ˆæ¶‰åŠåˆ°é€‰æ‹©é€»è¾‘è‡ªç„¶å°‘ä¸äº†Multiplexorå’ŒDMultiplexorã€‚é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬ä»¥RAM8ä¸ºä¾‹è®²ä¸€ä¸‹æˆ‘è‡ªå·±çš„å®ç°æ–¹å¼ï¼š RAM8ä¸­æœ‰8ä¸ªå¯„å­˜å™¨ 8ä¸ªå¯„å­˜å™¨æœ‰8ä¸ªåœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åœ°å€ä½éœ€è¦2^n=8, n=3ä½ DMuxç”¨äºè§£æå†™å…¥æ—¶çš„åœ°å€ï¼Œç”¨3ä½selåˆ†ç¦»å‡ºéœ€è¦å†™å…¥çš„é‚£ä¸€è·¯ï¼Œå†å’Œloadåšä¸æ“ä½œåä½œä¸ºå¯„å­˜å™¨çš„loadä½è¾“å…¥ï¼Œæœ€ç»ˆé€šè¿‡loadä½æ¥å†³å®šå“ªä¸€ä¸ªå¯„å­˜å™¨è¢«å†™å…¥Inã€‚ Muxç”¨äºè§£æè¯»å–æ—¶çš„åœ°å€ï¼Œç”¨3ä½selåœ¨8ä¸ªå¯„å­˜å™¨ä¸­é€‰æ‹©æƒ³è¦è¯»å–çš„é‚£ä¸€è·¯æ•°æ® HDLå®ç°ï¼šRAM8 /** * Memory of 8 registers, each 16 bit-wide. Out holds the value * stored at the memory location specified by address. If load==1, then * the in value is loaded into the memory location specified by address * (the loaded value will be emitted to out from the next time step onward). */ CHIP RAM8 { IN in[16], load, address[3]; OUT out[16]; PARTS: DMux8Way(in=true, sel=address, a=a, b=b, c=c, d=d, e=e, f=f, g=g, h=h); And(a=a, b=load, out=load0); And(a=b, b=load, out=load1); And(a=c, b=load, out=load2); And(a=d, b=load, out=load3); And(a=e, b=load, out=load4); And(a=f, b=load, out=load5); And(a=g, b=load, out=load6); And(a=h, b=load, out=load7); Register(in=in, load=load0, out=R0); Register(in=in, load=load1, out=R1); Register(in=in, load=load2, out=R2); Register(in=in, load=load3, out=R3); Register(in=in, load=load4, out=R4); Register(in=in, load=load5, out=R5); Register(in=in, load=load6, out=R6); Register(in=in, load=load7, out=R7); Mux8Way16(a=R0, b=R1, c=R2, d=R3, e=R4, f=R5, g=R6, h=R7, sel=address, out=out); } æœ‰äº†RAM8ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨8ä¸ªRAM8çš„ç»„åˆå®ç°RAM64ï¼Œä»¥æ­¤ç±»æ¨å®ç°åé¢å®¹é‡æ›´å¤§çš„RAMã€‚ å®ç°RAM64çš„æŠ€å·§æ˜¯å¯¹åœ°å€ä½çš„æ‹†åˆ†ï¼ŒRAM64éœ€è¦6ä¸ªåœ°å€ä½ï¼ŒæŠŠ6ä¸ªåœ°å€ä¸ºæ‹†åˆ†ä¸º3+3 å’Œå®ç°RAM8çš„æ—¶å€™ç±»ä¼¼ï¼Œéœ€è¦å¼•å…¥ä¸€ç»„Muxå’ŒDMuxï¼Œè¿™ç»„é€‰æ‹©èŠ¯ç‰‡ä½¿ç”¨6ä½åœ°å€ä¸­çš„é«˜ä¸‰ä½ï¼Œé€šè¿‡é«˜3ä½æŠŠåœ°å€åˆæ­¥åˆ’åˆ†ä¸º8ä¸ªåœ°å€æ®µï¼Œæ¯ä¸ªåœ°å€æ®µçš„å®¹é‡å³RAM8ä¸­å¯„å­˜å™¨çš„æ•°é‡ æ¯ä¸ªRAM8ä½¿ç”¨6ä½åœ°å€ä¸­çš„ä½ä¸‰ä½ï¼Œç„¶åä»ä¸­å®šä½åˆ°ç›®æ ‡åœ°å€å¯„å­˜å™¨ HDLå®ç°ï¼šRAM64 /** * Memory of 64 registers, each 16 bit-wide. Out holds the value * stored at the memory location specified by address. If load==1, then * the in value is loaded into the memory location specified by address * (the loaded value will be emitted to out from the next time step onward). */ CHIP RAM64 { IN in[16], load, address[6]; OUT out[16]; PARTS: DMux8Way(in=true, sel[0]=address[3], sel[1]=address[4], sel[2]=address[5], a=a, b=b, c=c, d=d, e=e, f=f, g=g, h=h); And(a=a, b=load, out=load0); And(a=b, b=load, out=load1); And(a=c, b=load, out=load2); And(a=d, b=load, out=load3); And(a=e, b=load, out=load4); And(a=f, b=load, out=load5); And(a=g, b=load, out=load6); And(a=h, b=load, out=load7); RAM8(in=in, load=load0, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R0); RAM8(in=in, load=load1, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R1); RAM8(in=in, load=load2, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R2); RAM8(in=in, load=load3, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R3); RAM8(in=in, load=load4, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R4); RAM8(in=in, load=load5, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R5); RAM8(in=in, load=load6, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R6); RAM8(in=in, load=load7, address[0]=address[0], address[1]=address[1], address[2]=address[2], out=R7); Mux8Way16(a=R0, b=R1, c=R2, d=R3, e=R4, f=R5, g=R6, h=R7, sel[0]=address[3], sel[1]=address[4], sel[2]=address[5], out=out); } HDLå®ç°ï¼šRAM4K /** * Memory of 4K registers, each 16 bit-wide. Out holds the value * stored at the memory location specified by address. If load==1, then * the in value is loaded into the memory location specified by address * (the loaded value will be emitted to out from the next time step onward). */ CHIP RAM4K { IN in[16], load, address[12]; OUT out[16]; PARTS: DMux8Way(in=true, sel[0..2]=address[9..11], a=a, b=b, c=c, d=d, e=e, f=f, g=g, h=h); And(a=a, b=load, out=load0); And(a=b, b=load, out=load1); And(a=c, b=load, out=load2); And(a=d, b=load, out=load3); And(a=e, b=load, out=load4); And(a=f, b=load, out=load5); And(a=g, b=load, out=load6); And(a=h, b=load, out=load7); RAM512(in=in, load=load0, address[0..8]=address[0..8], out=R0); RAM512(in=in, load=load1, address[0..8]=address[0..8], out=R1); RAM512(in=in, load=load2, address[0..8]=address[0..8], out=R2); RAM512(in=in, load=load3, address[0..8]=address[0..8], out=R3); RAM512(in=in, load=load4, address[0..8]=address[0..8], out=R4); RAM512(in=in, load=load5, address[0..8]=address[0..8], out=R5); RAM512(in=in, load=load6, address[0..8]=address[0..8], out=R6); RAM512(in=in, load=load7, address[0..8]=address[0..8], out=R7); Mux8Way16(a=R0, b=R1, c=R2, d=R3, e=R4, f=R5, g=R6, h=R7, sel[0..2]=address[9..11], out=out); } è‡³æ­¤ï¼Œæˆ‘ä»¬äº†è§£äº†RAMä¸­å†…å­˜è®¿é—®çš„æ–¹å¼ã€‚åœ¨RAMä¸­çš„å­˜å‚¨å•å…ƒå¯ä»¥é€šè¿‡è§£æåœ°å€ä¿¡å·æ¥è¿›è¡Œéšæœºçš„è®¿é—®ï¼Œè€Œä¸ä¼šå—é™äºå­˜å‚¨å•å…ƒçš„ä½ç½®ï¼Œè®¿é—®ä»»ä½•ä½ç½®çš„å­˜å‚¨å•å…ƒçš„é€Ÿåº¦éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä¾‹å¦‚è®¿é—®å†…å­˜ä¸­ä¸€ä¸ªæ•°ç»„ä¸­ä»»æ„ä¸‹æ ‡çš„æ•°æ®çš„é€Ÿåº¦éƒ½æ˜¯ç›¸ç­‰çš„ã€‚è¿™ä¹Ÿæ˜¯Random Access Memoryæ¦‚å¿µçš„ç”±æ¥ã€‚ è®¡æ•°å™¨ è®¡æ•°å™¨ä¹Ÿæ˜¯CPUä¸­ä¸€ä¸ªé‡è¦çš„åŸä»¶ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨å°†è¦æ‰§è¡ŒæŒ‡ä»¤çš„å†…å­˜åœ°å€ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè®¡æ•°å™¨æ¯ä¸ªå‘¨æœŸç®€å•çš„è¿›è¡Œ+1æ“ä½œï¼Œè¿™æ—¶è®¡ç®—æœºèƒ½å¤Ÿè·å–ä¸‹ä¸€æ¡åœ°å€ï¼Œè¿™å’ŒCPUé¡ºåºæ‰§è¡ŒæŒ‡ä»¤çš„æ¨¡å¼ç›¸ç¬¦ï¼ŒåŒæ—¶CPUä¹Ÿæ”¯æŒç›´æ¥è·³è½¬åˆ°ç¼–å·ä¸ºnçš„æŒ‡ä»¤å»æ‰§è¡Œï¼Œå› æ­¤è®¡æ•°å™¨è¦æ”¯æŒå°†å…¶å€¼è®¾ç½®ä¸ºnçš„èƒ½åŠ›ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è®¡æ•°å™¨çš„æ¥å£è®¾è®¡ï¼šè®¡æ•°å™¨èŠ¯ç‰‡æœ‰2ä¸ªé™„åŠ æ§åˆ¶ä½resetå’Œincï¼Œå½“inc=1æ—¶ï¼Œè®¡æ•°å™¨åœ¨æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸè‡ªåŠ 1ï¼Œå…¶è¾“å‡ºå€¼ä¸ºout(t)=out(t-1)+1ï¼›å¦‚æœæƒ³è¦å°†è®¡æ•°å™¨ç½®ä¸º0ï¼Œå°±å°†resetç½®ä¸º1ã€‚å¦‚æœæƒ³è¦å°†è®¡æ•°å™¨è®¾ç½®ä¸ºæŸä¸ªå€¼ï¼Œåˆ™å°†loadç½®ä¸º1ï¼Œå¹¶å°†æ•°å€¼ä»inè¾“å…¥ã€‚ ä¸‹å›¾æ˜¯æˆ‘å¯¹è®¡æ•°å™¨çš„å®ç°é€»è¾‘ resetï¼Œincï¼Œloadç”¨ä¸€ä¸ªOr8wayè¾“å‡ºï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªä¸º1ï¼Œé‚£ä¹ˆregisterçš„loadä¸ºå°±ä¸º1ï¼Œregisterçš„å€¼ä¼šè¢«æ›´æ–° 3ä¸ªMuxä¸²è”ç”¨äºé€‰æ‹©è‡ªå¢1ã€inçš„è¾“å…¥å€¼ã€é‡ç½®0è¿™ä¸‰ç§æ“ä½œ HDLå®ç°ï¼šè®¡æ•°å™¨ /** * A 16-bit counter with load and reset control bits. * if (reset[t] == 1) out[t+1] = 0 * else if (load[t] == 1) out[t+1] = in[t] * else if (inc[t] == 1) out[t+1] = out[t] + 1 (integer addition) * else out[t+1] = out[t] */ CHIP PC { IN in[16],load,inc,reset; OUT out[16]; PARTS: Or8Way(in[0]=inc, in[1]=reset, in[2]=load, in[3..7]=false, out=ReLoad); Mux16(a=outBack, b=outPlus, sel=inc, out=loadIN); Mux16(a=loadIN, b=in, sel=load, out=resetIN); Mux16(a=resetIN, b=false, sel=reset, out=ReIn); Register(in=ReIn, load=ReLoad, out=out, out=outBack); Inc16(in=outBack, out=outPlus); } æˆ‘ä»¬ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹è®¡æ•°å™¨æ˜¯å¦‚ä½•åœ¨æ—¶é’Ÿç³»ç»Ÿä¸‹å˜åŒ–æ•°å€¼çš„ã€‚ æ€»ç»“ è‡³æ­¤ï¼Œæˆ‘ä»¬å®ç°äº†hack CPUæ‰€éœ€çš„æ‰€æœ‰èŠ¯ç‰‡ã€‚ç»„åˆé€»è¾‘èŠ¯ç‰‡ä¸»è¦è´Ÿè´£ç®—æ•°è¿ç®—ã€é€»è¾‘è¿ç®—ã€é€‰æ‹©é€»è¾‘ï¼Œå¹¶ä¸”é€šè¿‡é€‚å½“çš„ç»„åˆå¯ä»¥ç”¨æ¥å®ç°æŒ‡ä»¤è§£æå’ŒæŸäº›åŠŸèƒ½æ§åˆ¶ï¼›æ—¶åºèŠ¯ç‰‡ä¸»è¦è´Ÿè´£å­˜å‚¨æ•°æ®ã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šç”¨è¿™äº›èŠ¯ç‰‡æ­å»ºä¸€ä¸ªç®€å•ä½†å®ç”¨çš„CPUã€‚</summary></entry><entry><title type="html">ä»0åˆ°1æ„å»ºè®¡ç®—æœº(3/12)â€“ç»„åˆé€»è¾‘èŠ¯ç‰‡ï¼šé€»è¾‘é—¨ã€åŠ æ³•å™¨ã€ALU</title><link href="/2019/12/16/%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91%E8%8A%AF%E7%89%87-%E9%80%BB%E8%BE%91%E9%97%A8-%E5%8A%A0%E6%B3%95%E5%99%A8-ALU.html" rel="alternate" type="text/html" title="ä»0åˆ°1æ„å»ºè®¡ç®—æœº(3/12)--ç»„åˆé€»è¾‘èŠ¯ç‰‡ï¼šé€»è¾‘é—¨ã€åŠ æ³•å™¨ã€ALU" /><published>2019-12-16T00:00:00+08:00</published><updated>2019-12-16T00:00:00+08:00</updated><id>/2019/12/16/%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91%E8%8A%AF%E7%89%87:%E9%80%BB%E8%BE%91%E9%97%A8%E3%80%81%E5%8A%A0%E6%B3%95%E5%99%A8%E3%80%81ALU</id><content type="html" xml:base="/2019/12/16/%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91%E8%8A%AF%E7%89%87-%E9%80%BB%E8%BE%91%E9%97%A8-%E5%8A%A0%E6%B3%95%E5%99%A8-ALU.html">&lt;p&gt;ä¸Šç¯‡è¯´åˆ°ï¼šé€šè¿‡ä½¿ç”¨Nandé—¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä»»ä½•é€»è¾‘é—¨ï¼Œè¿›è€Œå®ç°å¯ä»¥ä¸€ä¸ªCPUã€‚åé¢æˆ‘ä»¬å°±ä¼šæ­å»ºä¸€ä¸ªéº»é›€è™½å°ä½†äº”è„ä¿±å…¨çš„è®¡ç®—æœºå¹³å°ï¼šhackã€‚æœ¬ç¯‡æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€æ­¥ï¼Œå®ç°æ­å»ºhackæ‰€éœ€çš„ä¸€ç»„èŠ¯ç‰‡ï¼šç»„åˆé€»è¾‘èŠ¯ç‰‡&lt;/p&gt;

&lt;h3 id=&quot;ç»„åˆé€»è¾‘èŠ¯ç‰‡&quot;&gt;ç»„åˆé€»è¾‘èŠ¯ç‰‡&lt;/h3&gt;

&lt;p&gt;ä¸€ä¸ªæœ€åŸºæœ¬çš„CPUä¸»è¦ç”±ä¸¤ç±»èŠ¯ç‰‡ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ç»„åˆé€»è¾‘èŠ¯ç‰‡ï¼ˆCombinational Chipsï¼‰ï¼šä¸ã€æˆ–ã€éé—¨ï¼ŒåŠ æ³•å™¨ï¼ŒALUèŠ¯ç‰‡ç­‰ã€‚è¿™äº›èŠ¯ç‰‡ä¸»è¦è´Ÿè´£é€»è¾‘è®¡ç®—&lt;/li&gt;
  &lt;li&gt;æ—¶åºèŠ¯ç‰‡ï¼ˆSequential Chipsï¼‰ï¼šå¯„å­˜å™¨ï¼Œè®¡æ•°å™¨ï¼ŒRAMç­‰ã€‚è¿™äº›èŠ¯ç‰‡ä¸»è¦è´Ÿè´£æš‚å­˜æ•°æ®&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç»„åˆé€»è¾‘èŠ¯ç‰‡ï¼ˆä¸‹é¢ç®€ç§°é€»è¾‘èŠ¯ç‰‡ï¼‰å¯ä»¥ç±»æ¯”ä¸ºä¸€ä¸ªå¸ƒå°”å‡½æ•°ï¼Œå®ƒä»…è´Ÿè´£å¤„ç†é€»è¾‘è¿ç®—ï¼šè¾“å‡ºç»“æœä»…ä¾èµ–äºå…¶è¾“å…¥å˜é‡çš„æ’åˆ—ç»„åˆã€‚é€»è¾‘èŠ¯ç‰‡æ˜¯æ²¡æœ‰è®°å¿†èƒ½åŠ›çš„ï¼Œå®ƒä»¬ä¸èƒ½ç»´æŒè‡ªèº«çš„çŠ¶æ€ï¼Œå½“é€»è¾‘èŠ¯ç‰‡çš„è¾“å…¥å€¼æ”¹å˜çš„æ—¶å€™ï¼Œå®ƒä»¬çš„è¾“å‡ºå€¼ä¹Ÿä¼šå®æ—¶åœ°æ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;hackæ‰€éœ€è¦çš„é€»è¾‘èŠ¯ç‰‡æœ‰ä»¥ä¸‹å››ç§ï¼šåŸºæœ¬é€»è¾‘é—¨ã€å¤šé€šé“é€»è¾‘é—¨ã€åŠ æ³•å™¨ã€ALUï¼ˆç®—æ•°é€»è¾‘å•å…ƒï¼‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åŸºæœ¬é€»è¾‘é—¨&quot;&gt;åŸºæœ¬é€»è¾‘é—¨&lt;/h3&gt;
&lt;p&gt;åŸºæœ¬é€»è¾‘é—¨æ˜¯ä¸€äº›ç®€å•çš„å¸ƒå°”å‡½æ•°çš„å®ç°ï¼Œæˆ‘ä»¬éœ€è¦çš„åŸºæœ¬é€»è¾‘é—¨å¦‚ä¸‹ï¼Œæœ‰1ä½å’Œå¤šä½ï¼ˆ16ä½ï¼‰ä¹‹åˆ†ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1g9yzjn8lngj30qe0mgwew.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;èŠ¯ç‰‡åˆ—è¡¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;æˆ‘ä»¬æ‰€æœ‰ç»„åˆé€»è¾‘èŠ¯ç‰‡éƒ½æ˜¯åŸºäºNandå®ç°çš„ï¼Œä¸‹é¢æ˜¯Nandçš„çœŸå€¼è¡¨ï¼šåªæœ‰å½“ä¸¤ä¸ªè¾“å…¥éƒ½ä¸º1æ—¶è¾“å‡ºä¸º0ï¼Œå…¶ä½™è¾“å‡ºä¸º1åï¼Œç„¶åè¾“å‡ºã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga16e7ws5tj30b007s3yd.jpg&quot; width=&quot;300&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;NandçœŸå€¼è¡¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬ç”¨Nandå®ç°ä¸€ä¸ªNotã€‚Notå¾ˆç®€å•ï¼Œå¯¹å…¶è¾“å…¥å–åï¼Œç„¶åè¾“å‡ºã€‚ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga21uf1wocj30s609e3yh.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;Notç”µè·¯å›¾&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;HDLå®ç°ï¼šç¡¬ä»¶æè¿°è¯­è¨€å®ç°ã€‚&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * Not HDLå®ç°
 * Not gate:
 * out = not in
 */

CHIP Not {
    IN in;
    OUT out;

    PARTS:
    Nand(a=in, b=in, out=out); 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬ç»§ç»­ç”¨åˆšåˆšå®ç°çš„Notå’ŒNandç»„åˆä½¿ç”¨ï¼Œå†å®ç°ä¸€ä¸ªAndã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga221fwwf3j310m08mgll.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;Andç”µè·¯å›¾&lt;/figcaption&gt;&lt;/center&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * And gate: 
 * out = 1 if (a == 1 and b == 1)
 *       0 otherwise
 */

CHIP And {
    IN a, b;
    OUT out;

    PARTS:
    Nand(a=a, b=b, out=nandOut);
    Not(in=nandOut, out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¤šä½åŸºæœ¬é€»è¾‘é—¨æ˜¯1ä½åŸºæœ¬é€»è¾‘é—¨çš„ç®€å•ç»„åˆï¼Œä»¥16ä½Andä¸ºä¾‹ï¼Œç”¨16ä¸ª1ä½Andç»„åˆæˆ16ä½And.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * 16-bit bitwise And:
 * for i = 0..15: out[i] = (a[i] and b[i])
 */

CHIP And16 {
    IN a[16], b[16];
    OUT out[16];

    PARTS:
    And(a=a[0], b=b[0], out=out[0]);
    And(a=a[1], b=b[1], out=out[1]);
    And(a=a[2], b=b[2], out=out[2]);
    And(a=a[3], b=b[3], out=out[3]);
    And(a=a[4], b=b[4], out=out[4]);
    And(a=a[5], b=b[5], out=out[5]);
    And(a=a[6], b=b[6], out=out[6]);
    And(a=a[7], b=b[7], out=out[7]);
    And(a=a[8], b=b[8], out=out[8]);
    And(a=a[9], b=b[9], out=out[9]);
    And(a=a[10], b=b[10], out=out[10]);
    And(a=a[11], b=b[11], out=out[11]);
    And(a=a[12], b=b[12], out=out[12]);
    And(a=a[13], b=b[13], out=out[13]);
    And(a=a[14], b=b[14], out=out[14]);
    And(a=a[15], b=b[15], out=out[15]);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ­¥æ­¥å®ç°å…¶ä»–æ‰€æœ‰åŸºæœ¬é€»è¾‘é—¨ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;åŠ æ³•å™¨&quot;&gt;åŠ æ³•å™¨&lt;/h3&gt;
&lt;p&gt;æœ‰äº†ä¸Šé¢å®ç°çš„è¿™äº›åŸºæœ¬é€»è¾‘é—¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°CPUä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºæœ¬èŠ¯ç‰‡ï¼šåŠ æ³•å™¨ã€‚å®ç°åŠ æ³•å™¨çš„é¡ºåºæ˜¯ï¼šåŠåŠ å™¨-&amp;gt;å…¨åŠ å™¨-&amp;gt;16ä½åŠ æ³•å™¨&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga2cyn6tzgj30va0d8glt.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;èŠ¯ç‰‡åˆ—è¡¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ï¼šå®ç°ä¸€ä¸ªåŠåŠ å™¨ï¼ŒåŠåŠ å™¨è´Ÿè´£è®¡ç®—ä¸¤ä¸ªä¸€ä½äºŒè¿›åˆ¶ç›¸åŠ ï¼Œè¾“å‡ºsumå’Œcarryï¼ˆè¿›ä½ï¼‰ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1xb8b2xej30sc09m74d.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;åŠåŠ å™¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;è™½ç„¶åŠåŠ å™¨çœ‹ä¸Šå»è·³å‡ºäº†å¸ƒå°”è¿ç®—ï¼Œå‡çº§åˆ°çš„å°å­¦æ•°å­¦ï¼Œä½†å…¶ä»ç„¶å¯ä»¥ç”¨çœŸå€¼è¡¨è¡¨ç¤ºï¼Œæ‰€ä»¥ä¹Ÿå°±å¯ä»¥ç”¨åŸºæœ¬é€»è¾‘é—¨å®ç°ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªXorå’ŒAndå°±å¯ä»¥å®ç°åŠåŠ å™¨ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga2c9rhu5bj30sa0ge3yo.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;åŠåŠ å™¨ç”µè·¯å›¾&lt;/figcaption&gt;&lt;/center&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * åŠåŠ å™¨
 * Computes the sum of two bits.
 */

CHIP HalfAdder {
    IN a, b;    // 1-bit inputs
    OUT sum,    // Right bit of a + b 
        carry;  // Left bit of a + b

    PARTS:
    Xor(a=a, b=b, out=sum);
    And(a=a, b=b, out=carry);
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åŠåŠ å™¨åªèƒ½è®¡ç®—ä¸¤ä¸ªä¸€ä½äºŒè¿›åˆ¶æ•°ç›¸åŠ ï¼Œæ¥ç€æˆ‘ä»¬åœ¨è¾“å…¥ç«¯å†åŠ å…¥ä¸€ä¸ªè¿›ä½ç®¡è„šï¼ˆä»£è¡¨ä½ä½åšåŠ æ³•æ—¶è¿›è¿‡æ¥çš„è¿›ä½ï¼‰ï¼Œå°±æˆä¸ºäº†ä¸€ä¸ªå…¨åŠ å™¨ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1xom01j9j30u80de0sv.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;å…¨åŠ å™¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga2cemdwywj318g0gu0t1.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;å…¨åŠ å™¨ç”µè·¯å›¾&lt;/figcaption&gt;&lt;/center&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * å…¨åŠ å™¨
 * Computes the sum of three bits.
 */

CHIP FullAdder {
    IN a, b, c;  // 1-bit inputs
    OUT sum,     // Right bit of a + b + c
        carry;   // Left bit of a + b + c

    PARTS:
    HalfAdder(a=a, b=b, carry=carryA, sum=sumA);
    HalfAdder(a=sumA, b=c, carry=carryB, sum=sum);
    Or(a=carryA, b=carryB, out=carry);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ€åæˆ‘ä»¬åˆ©ç”¨å…¨åŠ å™¨å®ç°16ä½åŠ æ³•å™¨ï¼Œæœ‰äº†16ä½åŠ æ³•å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œ2ä¸ªä¸å¤§äº2^16çš„æ•´æ•°çš„åŠ æ³•äº†ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1xrljwy9j30te06sdfv.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;16ä½åŠ æ³•å™¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * 16ä½åŠ æ³•å™¨
 * Adds two 16-bit values.
 * The most significant carry bit is ignored.
 */

CHIP Add16 {
    IN a[16], b[16];
    OUT out[16];

    PARTS:
    FullAdder(a=a[0], b=b[0], c=false, sum=out[0], carry=ca0);
    FullAdder(a=a[1], b=b[1], c=ca0, sum=out[1], carry=ca1);
    FullAdder(a=a[2], b=b[2], c=ca1, sum=out[2], carry=ca2);
    FullAdder(a=a[3], b=b[3], c=ca2, sum=out[3], carry=ca3);
    FullAdder(a=a[4], b=b[4], c=ca3, sum=out[4], carry=ca4);
    FullAdder(a=a[5], b=b[5], c=ca4, sum=out[5], carry=ca5);
    FullAdder(a=a[6], b=b[6], c=ca5, sum=out[6], carry=ca6);
    FullAdder(a=a[7], b=b[7], c=ca6, sum=out[7], carry=ca7);
    FullAdder(a=a[8], b=b[8], c=ca7, sum=out[8], carry=ca8);
    FullAdder(a=a[9], b=b[9], c=ca8, sum=out[9], carry=ca9);
    FullAdder(a=a[10], b=b[10], c=ca9, sum=out[10], carry=ca10);
    FullAdder(a=a[11], b=b[11], c=ca10, sum=out[11], carry=ca11);
    FullAdder(a=a[12], b=b[12], c=ca11, sum=out[12], carry=ca12);
    FullAdder(a=a[13], b=b[13], c=ca12, sum=out[13], carry=ca13);
    FullAdder(a=a[14], b=b[14], c=ca13, sum=out[14], carry=ca14);
    FullAdder(a=a[15], b=b[15], c=ca14, sum=out[15], carry=ignorCa); 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ‰äº†åŠ æ³•å™¨ï¼Œæˆ‘ä»¬å†å®ç°ä¸€ä¸ªç´¯åŠ å™¨ï¼Œå®ƒå¯¹è¾“å…¥æ•°æ®è¿›è¡ŒåŠ 1ï¼Œç„¶åè¾“å‡ºã€‚ç´¯åŠ å™¨æ˜¯åé¢CPUä¸­ç¨‹åºè®¡æ•°å™¨çš„é‡è¦éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * ç´¯åŠ å™¨
 * 16-bit incrementer:
 * out = in + 1 (arithmetic addition)
 */

CHIP Inc16 {
    IN in[16];
    OUT out[16];

    PARTS:
    Add16(a=in, b[0]=true, b[1]=false, b[2]=false, b[3]=false, b[4]=false, b[5]=false, b[6]=false, b[7]=false, b[8]=false, b[9]=false, b[10]=false, b[11]=false, b[12]=false, b[13]=false, b[14]=false, b[15]=false, out=out);
}     
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å¤šé€šé“é€»è¾‘é—¨&quot;&gt;å¤šé€šé“é€»è¾‘é—¨&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°åŸºæœ¬é€»è¾‘é—¨è´Ÿè´£è®¡ç®—å¸ƒå°”è¿ç®—ï¼Œä½†å…¶åªèƒ½æ ¹æ®è¾“å…¥è®¡ç®—å‡ºè¾“å‡ºï¼Œç¼ºå°‘æ§åˆ¶èƒ½åŠ›ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»çš„å¤šé€šé“é€»è¾‘é—¨åˆ™åœ¨é€»è¾‘æ§åˆ¶æ–¹é¢æ‰®æ¼”äº†é‡è¦è§’è‰²ï¼Œå› ä¸ºå¤šé€šé“é€»è¾‘é—¨å…·æœ‰&lt;strong&gt;é€‰æ‹©åŠŸèƒ½&lt;/strong&gt;ã€‚å¤šé€šé“é€»è¾‘é—¨åœ¨CPUå’ŒRAMä¸­èµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚å¤šé€šé“é€»è¾‘é—¨åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Multiplexor:&lt;/strong&gt; æœ‰å¤šè·¯è¾“å…¥ï¼Œä¸€è·¯è¾“å‡ºï¼Œé€‰æ‹©è¾“å…¥ä¸­çš„ä¸€è·¯ä½œä¸ºè¾“å‡º&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;DMultiplexor:&lt;/strong&gt; æœ‰ä¸€è·¯è¾“å…¥ï¼Œå¤šè·¯è¾“å‡ºï¼Œåœ¨è¾“å‡ºè·¯ä¸­é€‰æ‹©ä¸€è·¯é™è¾“å…¥å€¼è¾“å‡º&lt;/li&gt;
&lt;/ul&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga2cyl836uj30v60meaaw.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;èŠ¯ç‰‡åˆ—è¡¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1y8t42i3j30p60dq0sv.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;Multiplexor&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&amp;lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1y9h0fixj30me08mjrd.jpg&quot; width=&quot;600&amp;gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;DMultiplexor&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ª2è·¯1ä½çš„Muxã€‚aï¼Œbæ˜¯ä¸¤è·¯1ä½ä¿¡å·è¾“å…¥ï¼Œselæ˜¯é€‰æ‹©ä½ã€‚å¦‚æœsel == 0ï¼Œoutç®¡è„šè¾“å‡ºaçš„å€¼ï¼Œå¦åˆ™è¾“å‡ºbçš„å€¼ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1zhhi4a2j30rm0kuq36.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;2è·¯1ä½Muxç”µè·¯å›¾&lt;/figcaption&gt;&lt;/center&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/** 
 * 2è·¯1ä½Mux
 * Multiplexor:
 * out = a if sel == 0
 *       b otherwise
 */

CHIP Mux {
    IN a, b, sel;
    OUT out;

    PARTS:
    Not(in= sel, out=NotSel);
    And(a=a, b=NotSel, out=AndAOut);
    And(a=b, b=sel, out=AndBOut);
    Or(a=AndAOut, b=AndBOut, out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å½“ç„¶é™¤äº†2è·¯é€‰æ‹©å™¨ï¼Œè¿˜æœ‰4è·¯ã€8è·¯ã€16è·¯ç­‰å¤šè·¯é€‰æ‹©å™¨ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1yd61q3mj30ze09at8v.jpg&quot; width=&quot;800&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;å¤šè·¯Mux&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;ä¸‹é¢æ˜¯4è·¯16ä½é€‰æ‹©å™¨çš„ä¸€ç§å®ç°æ–¹å¼&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * 4-way 16-bit multiplexor:
 * out = a if sel == 00
 *       b if sel == 01
 *       c if sel == 10
 *       d if sel == 11
 */

CHIP Mux4Way16 {
    IN a[16], b[16], c[16], d[16], sel[2];
    OUT out[16];

    PARTS:
    Mux16(a=a, b=b, sel=sel[0], out=outA);
    Mux16(a=c, b=d, sel=sel[0], out=outB);
    Mux16(a=outA, b=outB, sel=sel[1], out=out);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;alu&quot;&gt;ALU&lt;/h3&gt;
&lt;p&gt;æœ‰äº†å¤šé€šé“é€»è¾‘é—¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›ä¸€æ­¥å®ç°ä¸€ä¸ªæ›´ä¸ºå¤æ‚çš„èŠ¯ç‰‡ï¼šALUã€‚ALUæ˜¯CPUçš„ä¸‰å¤§åŸºæœ¬æ¨¡å—ä¹‹ä¸€ï¼ˆALUã€å¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨ï¼‰ã€‚åŸºæœ¬é€»è¾‘é—¨åªèƒ½è®¡ç®—ä¸€ç§å¸ƒå°”é€»è¾‘ï¼Œè€ŒALUå¯ä»¥é€šè¿‡æ”¹å˜æ§åˆ¶ä½è¾“å…¥å˜é‡çš„ç»„åˆï¼ˆzx,nz,zy,ny,f,noï¼‰ï¼Œå¯ä»¥æ§åˆ¶å®ç°å¤šç§è®¡ç®—é€»è¾‘ã€‚è¿™ç±»ä¼¼äºä¸€ä¸ªCPUå¯ä»¥æ‰§è¡ŒæŒ‡ä»¤é›†ä¸­çš„ä¼—å¤šæŒ‡ä»¤ä¸€æ ·ï¼ˆå½“ç„¶è¿™å…¶ä¸­å°±ä¾èµ–äºALUï¼‰ã€‚&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga2cylk4d8j30uo05i3yg.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;èŠ¯ç‰‡åˆ—è¡¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1yf3rz82j30pi0i0dg1.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;ALU&lt;/figcaption&gt;&lt;/center&gt;

&lt;center&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1yf94f4ej314x0u0jsn.jpg&quot; width=&quot;600&quot; /&gt;&lt;/center&gt;
&lt;center&gt;&lt;figcaption&gt;ALUçœŸå€¼è¡¨&lt;/figcaption&gt;&lt;/center&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å°±ç”¨ä¸Šé¢å®ç°çš„èŠ¯ç‰‡æ¥å®ç°ä¸€ä¸‹ALUï¼ˆç”±äºæ¯”è¾ƒå¤æ‚ï¼Œå°±å…ˆä¸ç”»ç”µè·¯å›¾äº†ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * The ALU (Arithmetic Logic Unit).
 * Computes one of the following functions:
 * x+y, x-y, y-x, 0, 1, -1, x, y, -x, -y, !x, !y,
 * x+1, y+1, x-1, y-1, x&amp;amp;y, x|y on two 16-bit inputs, 
 * according to 6 input bits denoted zx,nx,zy,ny,f,no.
 * In addition, the ALU computes two 1-bit outputs:
 * if the ALU output == 0, zr is set to 1; otherwise zr is set to 0;
 * if the ALU output &amp;lt; 0, ng is set to 1; otherwise ng is set to 0.
 */

// Implementation: the ALU logic manipulates the x and y inputs
// and operates on the resulting values, as follows:
// if (zx == 1) set x = 0        // 16-bit constant
// if (nx == 1) set x = !x       // bitwise not
// if (zy == 1) set y = 0        // 16-bit constant
// if (ny == 1) set y = !y       // bitwise not
// if (f == 1)  set out = x + y  // integer 2's complement addition
// if (f == 0)  set out = x &amp;amp; y  // bitwise and
// if (no == 1) set out = !out   // bitwise not
// if (out == 0) set zr = 1
// if (out &amp;lt; 0) set ng = 1

CHIP ALU {
    IN  
        x[16], y[16],  // 16-bit inputs        
        zx, // zero the x input?
        nx, // negate the x input?
        zy, // zero the y input?
        ny, // negate the y input?
        f,  // compute out = x + y (if 1) or x &amp;amp; y (if 0)
        no; // negate the out output?

    OUT 
        out[16], // 16-bit output
        zr, // 1 if (out == 0), 0 otherwise
        ng; // 1 if (out &amp;lt; 0),  0 otherwise

    PARTS:
    Mux16(a=x, b=false, sel=zx, out=zSelX);
    Not16(in=zSelX, out=notZSelx);
    Mux16(a=zSelX, b=notZSelx, sel=nx, out=outX);

    Mux16(a=y, b=false, sel=zy, out=zSelY);
    Not16(in=zSelY, out=notZSelY);
    Mux16(a=zSelY, b=notZSelY, sel=ny, out=outY);

    Add16(a=outX, b=outY, out=outAdd); // X+Y
    And16(a=outX, b=outY, out=outAnd); // X&amp;amp;Y

    Mux16(a=outAnd, b=outAdd, sel=f, out=outF);
    Not16(in=outF, out=notF);

    Mux16(a=outF, b=notF, sel=no, out=out, out[0..7]=outZrA, out[8..15]=outZrB, out[15]=outMSB);

    Or8Way(in=outZrA, out=zrL);
    Or8Way(in=outZrB, out=zrH);
    Or(a=zrL, b=zrH, out=notZr);
    Not(in=notZr, out=zr);

    And(a=true, b=outMSB, out=ng);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;è¡¥ç &quot;&gt;è¡¥ç &lt;/h3&gt;
&lt;p&gt;æœ€åæˆ‘ä»¬å†æ¥è°ˆä¸€ä¸‹è¡¥ç ï¼Œä¸Šé¢æˆ‘ä»¬æåˆ°çš„åŠ æ³•å™¨éƒ½æ²¡æœ‰è€ƒè™‘æ­£è´Ÿç¬¦å·çš„é—®é¢˜ï¼Œå¦‚æœå¼•å…¥ç¬¦å·ï¼Œé‚£ä¹ˆç”µè·¯ä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚é€šè¿‡ä½¿ç”¨è¡¥ç å¯ä»¥å¾ˆå¥½çš„è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¡¥ç æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§ï¼š&lt;strong&gt;ä»»ä½•ä¸¤ä¸ªç”¨è¡¥ç è¡¨ç¤ºçš„æœ‰ç¬¦å·æ•°çš„åŠ æ³•å’Œæ­£æ•°çš„åŠ æ³•å®Œå…¨ç›¸åŒ&lt;/strong&gt;ï¼Œä¾‹å¦‚ç”¨æ­£æ•°åŠ æ³•æ“ä½œï¼ˆ-2ï¼‰+ï¼ˆ-3ï¼‰ï¼Œæ‰€å¾—çš„ç»“æœæ­£å¥½æ˜¯ï¼ˆ-5ï¼‰çš„è¡¥ç ï¼›è¡¥ç çš„å‡æ³•å¯ä»¥ç”¨åŠ æ³•æ¥ä»£æ›¿å®ç°ï¼Œä¾‹å¦‚x-y == x+(-y)ã€‚&lt;/p&gt;</content><author><name>Your Name</name></author><category term="è®¡ç®—æœºåŸºç¡€" /><category term="ä»0åˆ°1æ„å»ºè®¡ç®—æœº" /><summary type="html">ä¸Šç¯‡è¯´åˆ°ï¼šé€šè¿‡ä½¿ç”¨Nandé—¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä»»ä½•é€»è¾‘é—¨ï¼Œè¿›è€Œå®ç°å¯ä»¥ä¸€ä¸ªCPUã€‚åé¢æˆ‘ä»¬å°±ä¼šæ­å»ºä¸€ä¸ªéº»é›€è™½å°ä½†äº”è„ä¿±å…¨çš„è®¡ç®—æœºå¹³å°ï¼šhackã€‚æœ¬ç¯‡æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€æ­¥ï¼Œå®ç°æ­å»ºhackæ‰€éœ€çš„ä¸€ç»„èŠ¯ç‰‡ï¼šç»„åˆé€»è¾‘èŠ¯ç‰‡ ç»„åˆé€»è¾‘èŠ¯ç‰‡ ä¸€ä¸ªæœ€åŸºæœ¬çš„CPUä¸»è¦ç”±ä¸¤ç±»èŠ¯ç‰‡ç»„æˆï¼š ç»„åˆé€»è¾‘èŠ¯ç‰‡ï¼ˆCombinational Chipsï¼‰ï¼šä¸ã€æˆ–ã€éé—¨ï¼ŒåŠ æ³•å™¨ï¼ŒALUèŠ¯ç‰‡ç­‰ã€‚è¿™äº›èŠ¯ç‰‡ä¸»è¦è´Ÿè´£é€»è¾‘è®¡ç®— æ—¶åºèŠ¯ç‰‡ï¼ˆSequential Chipsï¼‰ï¼šå¯„å­˜å™¨ï¼Œè®¡æ•°å™¨ï¼ŒRAMç­‰ã€‚è¿™äº›èŠ¯ç‰‡ä¸»è¦è´Ÿè´£æš‚å­˜æ•°æ® ç»„åˆé€»è¾‘èŠ¯ç‰‡ï¼ˆä¸‹é¢ç®€ç§°é€»è¾‘èŠ¯ç‰‡ï¼‰å¯ä»¥ç±»æ¯”ä¸ºä¸€ä¸ªå¸ƒå°”å‡½æ•°ï¼Œå®ƒä»…è´Ÿè´£å¤„ç†é€»è¾‘è¿ç®—ï¼šè¾“å‡ºç»“æœä»…ä¾èµ–äºå…¶è¾“å…¥å˜é‡çš„æ’åˆ—ç»„åˆã€‚é€»è¾‘èŠ¯ç‰‡æ˜¯æ²¡æœ‰è®°å¿†èƒ½åŠ›çš„ï¼Œå®ƒä»¬ä¸èƒ½ç»´æŒè‡ªèº«çš„çŠ¶æ€ï¼Œå½“é€»è¾‘èŠ¯ç‰‡çš„è¾“å…¥å€¼æ”¹å˜çš„æ—¶å€™ï¼Œå®ƒä»¬çš„è¾“å‡ºå€¼ä¹Ÿä¼šå®æ—¶åœ°æ”¹å˜ã€‚ hackæ‰€éœ€è¦çš„é€»è¾‘èŠ¯ç‰‡æœ‰ä»¥ä¸‹å››ç§ï¼šåŸºæœ¬é€»è¾‘é—¨ã€å¤šé€šé“é€»è¾‘é—¨ã€åŠ æ³•å™¨ã€ALUï¼ˆç®—æ•°é€»è¾‘å•å…ƒï¼‰ã€‚ åŸºæœ¬é€»è¾‘é—¨ åŸºæœ¬é€»è¾‘é—¨æ˜¯ä¸€äº›ç®€å•çš„å¸ƒå°”å‡½æ•°çš„å®ç°ï¼Œæˆ‘ä»¬éœ€è¦çš„åŸºæœ¬é€»è¾‘é—¨å¦‚ä¸‹ï¼Œæœ‰1ä½å’Œå¤šä½ï¼ˆ16ä½ï¼‰ä¹‹åˆ†ã€‚ èŠ¯ç‰‡åˆ—è¡¨ æˆ‘ä»¬æ‰€æœ‰ç»„åˆé€»è¾‘èŠ¯ç‰‡éƒ½æ˜¯åŸºäºNandå®ç°çš„ï¼Œä¸‹é¢æ˜¯Nandçš„çœŸå€¼è¡¨ï¼šåªæœ‰å½“ä¸¤ä¸ªè¾“å…¥éƒ½ä¸º1æ—¶è¾“å‡ºä¸º0ï¼Œå…¶ä½™è¾“å‡ºä¸º1åï¼Œç„¶åè¾“å‡ºã€‚ NandçœŸå€¼è¡¨ é¦–å…ˆæˆ‘ä»¬ç”¨Nandå®ç°ä¸€ä¸ªNotã€‚Notå¾ˆç®€å•ï¼Œå¯¹å…¶è¾“å…¥å–åï¼Œç„¶åè¾“å‡ºã€‚ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„å®ç°æ–¹å¼ï¼š Notç”µè·¯å›¾ HDLå®ç°ï¼šç¡¬ä»¶æè¿°è¯­è¨€å®ç°ã€‚ /** * Not HDLå®ç° * Not gate: * out = not in */ CHIP Not { IN in; OUT out; PARTS: Nand(a=in, b=in, out=out); } ç„¶åæˆ‘ä»¬ç»§ç»­ç”¨åˆšåˆšå®ç°çš„Notå’ŒNandç»„åˆä½¿ç”¨ï¼Œå†å®ç°ä¸€ä¸ªAndã€‚ Andç”µè·¯å›¾ /** * And gate: * out = 1 if (a == 1 and b == 1) * 0 otherwise */ CHIP And { IN a, b; OUT out; PARTS: Nand(a=a, b=b, out=nandOut); Not(in=nandOut, out=out); } å¤šä½åŸºæœ¬é€»è¾‘é—¨æ˜¯1ä½åŸºæœ¬é€»è¾‘é—¨çš„ç®€å•ç»„åˆï¼Œä»¥16ä½Andä¸ºä¾‹ï¼Œç”¨16ä¸ª1ä½Andç»„åˆæˆ16ä½And. /** * 16-bit bitwise And: * for i = 0..15: out[i] = (a[i] and b[i]) */ CHIP And16 { IN a[16], b[16]; OUT out[16]; PARTS: And(a=a[0], b=b[0], out=out[0]); And(a=a[1], b=b[1], out=out[1]); And(a=a[2], b=b[2], out=out[2]); And(a=a[3], b=b[3], out=out[3]); And(a=a[4], b=b[4], out=out[4]); And(a=a[5], b=b[5], out=out[5]); And(a=a[6], b=b[6], out=out[6]); And(a=a[7], b=b[7], out=out[7]); And(a=a[8], b=b[8], out=out[8]); And(a=a[9], b=b[9], out=out[9]); And(a=a[10], b=b[10], out=out[10]); And(a=a[11], b=b[11], out=out[11]); And(a=a[12], b=b[12], out=out[12]); And(a=a[13], b=b[13], out=out[13]); And(a=a[14], b=b[14], out=out[14]); And(a=a[15], b=b[15], out=out[15]); } ä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ­¥æ­¥å®ç°å…¶ä»–æ‰€æœ‰åŸºæœ¬é€»è¾‘é—¨ã€‚ åŠ æ³•å™¨ æœ‰äº†ä¸Šé¢å®ç°çš„è¿™äº›åŸºæœ¬é€»è¾‘é—¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°CPUä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºæœ¬èŠ¯ç‰‡ï¼šåŠ æ³•å™¨ã€‚å®ç°åŠ æ³•å™¨çš„é¡ºåºæ˜¯ï¼šåŠåŠ å™¨-&amp;gt;å…¨åŠ å™¨-&amp;gt;16ä½åŠ æ³•å™¨ èŠ¯ç‰‡åˆ—è¡¨ ç¬¬ä¸€æ­¥ï¼šå®ç°ä¸€ä¸ªåŠåŠ å™¨ï¼ŒåŠåŠ å™¨è´Ÿè´£è®¡ç®—ä¸¤ä¸ªä¸€ä½äºŒè¿›åˆ¶ç›¸åŠ ï¼Œè¾“å‡ºsumå’Œcarryï¼ˆè¿›ä½ï¼‰ã€‚ åŠåŠ å™¨ è™½ç„¶åŠåŠ å™¨çœ‹ä¸Šå»è·³å‡ºäº†å¸ƒå°”è¿ç®—ï¼Œå‡çº§åˆ°çš„å°å­¦æ•°å­¦ï¼Œä½†å…¶ä»ç„¶å¯ä»¥ç”¨çœŸå€¼è¡¨è¡¨ç¤ºï¼Œæ‰€ä»¥ä¹Ÿå°±å¯ä»¥ç”¨åŸºæœ¬é€»è¾‘é—¨å®ç°ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªXorå’ŒAndå°±å¯ä»¥å®ç°åŠåŠ å™¨ã€‚ åŠåŠ å™¨ç”µè·¯å›¾ /** * åŠåŠ å™¨ * Computes the sum of two bits. */ CHIP HalfAdder { IN a, b; // 1-bit inputs OUT sum, // Right bit of a + b carry; // Left bit of a + b PARTS: Xor(a=a, b=b, out=sum); And(a=a, b=b, out=carry); } åŠåŠ å™¨åªèƒ½è®¡ç®—ä¸¤ä¸ªä¸€ä½äºŒè¿›åˆ¶æ•°ç›¸åŠ ï¼Œæ¥ç€æˆ‘ä»¬åœ¨è¾“å…¥ç«¯å†åŠ å…¥ä¸€ä¸ªè¿›ä½ç®¡è„šï¼ˆä»£è¡¨ä½ä½åšåŠ æ³•æ—¶è¿›è¿‡æ¥çš„è¿›ä½ï¼‰ï¼Œå°±æˆä¸ºäº†ä¸€ä¸ªå…¨åŠ å™¨ã€‚ å…¨åŠ å™¨ å…¨åŠ å™¨ç”µè·¯å›¾ /** * å…¨åŠ å™¨ * Computes the sum of three bits. */ CHIP FullAdder { IN a, b, c; // 1-bit inputs OUT sum, // Right bit of a + b + c carry; // Left bit of a + b + c PARTS: HalfAdder(a=a, b=b, carry=carryA, sum=sumA); HalfAdder(a=sumA, b=c, carry=carryB, sum=sum); Or(a=carryA, b=carryB, out=carry); } æœ€åæˆ‘ä»¬åˆ©ç”¨å…¨åŠ å™¨å®ç°16ä½åŠ æ³•å™¨ï¼Œæœ‰äº†16ä½åŠ æ³•å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œ2ä¸ªä¸å¤§äº2^16çš„æ•´æ•°çš„åŠ æ³•äº†ã€‚ 16ä½åŠ æ³•å™¨ /** * 16ä½åŠ æ³•å™¨ * Adds two 16-bit values. * The most significant carry bit is ignored. */ CHIP Add16 { IN a[16], b[16]; OUT out[16]; PARTS: FullAdder(a=a[0], b=b[0], c=false, sum=out[0], carry=ca0); FullAdder(a=a[1], b=b[1], c=ca0, sum=out[1], carry=ca1); FullAdder(a=a[2], b=b[2], c=ca1, sum=out[2], carry=ca2); FullAdder(a=a[3], b=b[3], c=ca2, sum=out[3], carry=ca3); FullAdder(a=a[4], b=b[4], c=ca3, sum=out[4], carry=ca4); FullAdder(a=a[5], b=b[5], c=ca4, sum=out[5], carry=ca5); FullAdder(a=a[6], b=b[6], c=ca5, sum=out[6], carry=ca6); FullAdder(a=a[7], b=b[7], c=ca6, sum=out[7], carry=ca7); FullAdder(a=a[8], b=b[8], c=ca7, sum=out[8], carry=ca8); FullAdder(a=a[9], b=b[9], c=ca8, sum=out[9], carry=ca9); FullAdder(a=a[10], b=b[10], c=ca9, sum=out[10], carry=ca10); FullAdder(a=a[11], b=b[11], c=ca10, sum=out[11], carry=ca11); FullAdder(a=a[12], b=b[12], c=ca11, sum=out[12], carry=ca12); FullAdder(a=a[13], b=b[13], c=ca12, sum=out[13], carry=ca13); FullAdder(a=a[14], b=b[14], c=ca13, sum=out[14], carry=ca14); FullAdder(a=a[15], b=b[15], c=ca14, sum=out[15], carry=ignorCa); } æœ‰äº†åŠ æ³•å™¨ï¼Œæˆ‘ä»¬å†å®ç°ä¸€ä¸ªç´¯åŠ å™¨ï¼Œå®ƒå¯¹è¾“å…¥æ•°æ®è¿›è¡ŒåŠ 1ï¼Œç„¶åè¾“å‡ºã€‚ç´¯åŠ å™¨æ˜¯åé¢CPUä¸­ç¨‹åºè®¡æ•°å™¨çš„é‡è¦éƒ¨åˆ†ã€‚ /** * ç´¯åŠ å™¨ * 16-bit incrementer: * out = in + 1 (arithmetic addition) */ CHIP Inc16 { IN in[16]; OUT out[16]; PARTS: Add16(a=in, b[0]=true, b[1]=false, b[2]=false, b[3]=false, b[4]=false, b[5]=false, b[6]=false, b[7]=false, b[8]=false, b[9]=false, b[10]=false, b[11]=false, b[12]=false, b[13]=false, b[14]=false, b[15]=false, out=out); } å¤šé€šé“é€»è¾‘é—¨ æˆ‘ä»¬çœ‹åˆ°åŸºæœ¬é€»è¾‘é—¨è´Ÿè´£è®¡ç®—å¸ƒå°”è¿ç®—ï¼Œä½†å…¶åªèƒ½æ ¹æ®è¾“å…¥è®¡ç®—å‡ºè¾“å‡ºï¼Œç¼ºå°‘æ§åˆ¶èƒ½åŠ›ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»çš„å¤šé€šé“é€»è¾‘é—¨åˆ™åœ¨é€»è¾‘æ§åˆ¶æ–¹é¢æ‰®æ¼”äº†é‡è¦è§’è‰²ï¼Œå› ä¸ºå¤šé€šé“é€»è¾‘é—¨å…·æœ‰é€‰æ‹©åŠŸèƒ½ã€‚å¤šé€šé“é€»è¾‘é—¨åœ¨CPUå’ŒRAMä¸­èµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚å¤šé€šé“é€»è¾‘é—¨åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š Multiplexor: æœ‰å¤šè·¯è¾“å…¥ï¼Œä¸€è·¯è¾“å‡ºï¼Œé€‰æ‹©è¾“å…¥ä¸­çš„ä¸€è·¯ä½œä¸ºè¾“å‡º DMultiplexor: æœ‰ä¸€è·¯è¾“å…¥ï¼Œå¤šè·¯è¾“å‡ºï¼Œåœ¨è¾“å‡ºè·¯ä¸­é€‰æ‹©ä¸€è·¯é™è¾“å…¥å€¼è¾“å‡º èŠ¯ç‰‡åˆ—è¡¨ Multiplexor &amp;lt;img src=&quot;https://tva1.sinaimg.cn/large/006tNbRwly1ga1y9h0fixj30me08mjrd.jpg&quot; width=&quot;600&amp;gt; DMultiplexor è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ª2è·¯1ä½çš„Muxã€‚aï¼Œbæ˜¯ä¸¤è·¯1ä½ä¿¡å·è¾“å…¥ï¼Œselæ˜¯é€‰æ‹©ä½ã€‚å¦‚æœsel == 0ï¼Œoutç®¡è„šè¾“å‡ºaçš„å€¼ï¼Œå¦åˆ™è¾“å‡ºbçš„å€¼ã€‚ 2è·¯1ä½Muxç”µè·¯å›¾ /** * 2è·¯1ä½Mux * Multiplexor: * out = a if sel == 0 * b otherwise */ CHIP Mux { IN a, b, sel; OUT out; PARTS: Not(in= sel, out=NotSel); And(a=a, b=NotSel, out=AndAOut); And(a=b, b=sel, out=AndBOut); Or(a=AndAOut, b=AndBOut, out=out); } å½“ç„¶é™¤äº†2è·¯é€‰æ‹©å™¨ï¼Œè¿˜æœ‰4è·¯ã€8è·¯ã€16è·¯ç­‰å¤šè·¯é€‰æ‹©å™¨ã€‚ å¤šè·¯Mux ä¸‹é¢æ˜¯4è·¯16ä½é€‰æ‹©å™¨çš„ä¸€ç§å®ç°æ–¹å¼ /** * 4-way 16-bit multiplexor: * out = a if sel == 00 * b if sel == 01 * c if sel == 10 * d if sel == 11 */ CHIP Mux4Way16 { IN a[16], b[16], c[16], d[16], sel[2]; OUT out[16]; PARTS: Mux16(a=a, b=b, sel=sel[0], out=outA); Mux16(a=c, b=d, sel=sel[0], out=outB); Mux16(a=outA, b=outB, sel=sel[1], out=out); } ALU æœ‰äº†å¤šé€šé“é€»è¾‘é—¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›ä¸€æ­¥å®ç°ä¸€ä¸ªæ›´ä¸ºå¤æ‚çš„èŠ¯ç‰‡ï¼šALUã€‚ALUæ˜¯CPUçš„ä¸‰å¤§åŸºæœ¬æ¨¡å—ä¹‹ä¸€ï¼ˆALUã€å¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨ï¼‰ã€‚åŸºæœ¬é€»è¾‘é—¨åªèƒ½è®¡ç®—ä¸€ç§å¸ƒå°”é€»è¾‘ï¼Œè€ŒALUå¯ä»¥é€šè¿‡æ”¹å˜æ§åˆ¶ä½è¾“å…¥å˜é‡çš„ç»„åˆï¼ˆzx,nz,zy,ny,f,noï¼‰ï¼Œå¯ä»¥æ§åˆ¶å®ç°å¤šç§è®¡ç®—é€»è¾‘ã€‚è¿™ç±»ä¼¼äºä¸€ä¸ªCPUå¯ä»¥æ‰§è¡ŒæŒ‡ä»¤é›†ä¸­çš„ä¼—å¤šæŒ‡ä»¤ä¸€æ ·ï¼ˆå½“ç„¶è¿™å…¶ä¸­å°±ä¾èµ–äºALUï¼‰ã€‚ èŠ¯ç‰‡åˆ—è¡¨ ALU ALUçœŸå€¼è¡¨ ä¸‹é¢æˆ‘ä»¬å°±ç”¨ä¸Šé¢å®ç°çš„èŠ¯ç‰‡æ¥å®ç°ä¸€ä¸‹ALUï¼ˆç”±äºæ¯”è¾ƒå¤æ‚ï¼Œå°±å…ˆä¸ç”»ç”µè·¯å›¾äº†ï¼‰ã€‚ /** * The ALU (Arithmetic Logic Unit). * Computes one of the following functions: * x+y, x-y, y-x, 0, 1, -1, x, y, -x, -y, !x, !y, * x+1, y+1, x-1, y-1, x&amp;amp;y, x|y on two 16-bit inputs, * according to 6 input bits denoted zx,nx,zy,ny,f,no. * In addition, the ALU computes two 1-bit outputs: * if the ALU output == 0, zr is set to 1; otherwise zr is set to 0; * if the ALU output &amp;lt; 0, ng is set to 1; otherwise ng is set to 0. */ // Implementation: the ALU logic manipulates the x and y inputs // and operates on the resulting values, as follows: // if (zx == 1) set x = 0 // 16-bit constant // if (nx == 1) set x = !x // bitwise not // if (zy == 1) set y = 0 // 16-bit constant // if (ny == 1) set y = !y // bitwise not // if (f == 1) set out = x + y // integer 2's complement addition // if (f == 0) set out = x &amp;amp; y // bitwise and // if (no == 1) set out = !out // bitwise not // if (out == 0) set zr = 1 // if (out &amp;lt; 0) set ng = 1 CHIP ALU { IN x[16], y[16], // 16-bit inputs zx, // zero the x input? nx, // negate the x input? zy, // zero the y input? ny, // negate the y input? f, // compute out = x + y (if 1) or x &amp;amp; y (if 0) no; // negate the out output? OUT out[16], // 16-bit output zr, // 1 if (out == 0), 0 otherwise ng; // 1 if (out &amp;lt; 0), 0 otherwise PARTS: Mux16(a=x, b=false, sel=zx, out=zSelX); Not16(in=zSelX, out=notZSelx); Mux16(a=zSelX, b=notZSelx, sel=nx, out=outX); Mux16(a=y, b=false, sel=zy, out=zSelY); Not16(in=zSelY, out=notZSelY); Mux16(a=zSelY, b=notZSelY, sel=ny, out=outY); Add16(a=outX, b=outY, out=outAdd); // X+Y And16(a=outX, b=outY, out=outAnd); // X&amp;amp;Y Mux16(a=outAnd, b=outAdd, sel=f, out=outF); Not16(in=outF, out=notF); Mux16(a=outF, b=notF, sel=no, out=out, out[0..7]=outZrA, out[8..15]=outZrB, out[15]=outMSB); Or8Way(in=outZrA, out=zrL); Or8Way(in=outZrB, out=zrH); Or(a=zrL, b=zrH, out=notZr); Not(in=notZr, out=zr); And(a=true, b=outMSB, out=ng); } è¡¥ç  æœ€åæˆ‘ä»¬å†æ¥è°ˆä¸€ä¸‹è¡¥ç ï¼Œä¸Šé¢æˆ‘ä»¬æåˆ°çš„åŠ æ³•å™¨éƒ½æ²¡æœ‰è€ƒè™‘æ­£è´Ÿç¬¦å·çš„é—®é¢˜ï¼Œå¦‚æœå¼•å…¥ç¬¦å·ï¼Œé‚£ä¹ˆç”µè·¯ä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚é€šè¿‡ä½¿ç”¨è¡¥ç å¯ä»¥å¾ˆå¥½çš„è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¡¥ç æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§ï¼šä»»ä½•ä¸¤ä¸ªç”¨è¡¥ç è¡¨ç¤ºçš„æœ‰ç¬¦å·æ•°çš„åŠ æ³•å’Œæ­£æ•°çš„åŠ æ³•å®Œå…¨ç›¸åŒï¼Œä¾‹å¦‚ç”¨æ­£æ•°åŠ æ³•æ“ä½œï¼ˆ-2ï¼‰+ï¼ˆ-3ï¼‰ï¼Œæ‰€å¾—çš„ç»“æœæ­£å¥½æ˜¯ï¼ˆ-5ï¼‰çš„è¡¥ç ï¼›è¡¥ç çš„å‡æ³•å¯ä»¥ç”¨åŠ æ³•æ¥ä»£æ›¿å®ç°ï¼Œä¾‹å¦‚x-y == x+(-y)ã€‚</summary></entry></feed>