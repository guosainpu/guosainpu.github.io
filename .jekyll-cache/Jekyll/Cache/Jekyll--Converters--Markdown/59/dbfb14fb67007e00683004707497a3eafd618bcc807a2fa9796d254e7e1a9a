I"ÅE<h3 id="nodejsçš„ä¼˜ç¼ºç‚¹">node.jsçš„ä¼˜ç¼ºç‚¹</h3>

<p>ä¼˜åŠ¿ï¼š</p>
<ul>
  <li>é«˜å¹¶å‘èƒ½åŠ›ï¼šäº‹ä»¶é©±åŠ¨ï¼Œéé˜»å¡I/Oæ¨¡å¼</li>
  <li>é«˜æ€§èƒ½ï¼šåŸºäºChrome V8 JavaScriptå¼•æ“</li>
  <li>ç»Ÿä¸€çš„æŠ€æœ¯æ ˆï¼šä½¿ç”¨ js ä¸€é—¨è¯­è¨€å°±å¯ä»¥å¼€å‘webçš„å‰åç«¯</li>
</ul>

<p>ç¼ºç‚¹ï¼š</p>
<ul>
  <li>éš¾ä»¥æ”¯æŒCPUå¯†é›†å‹çš„ä»»åŠ¡</li>
  <li>ä»£ç è‡ªç”±åº¦é«˜ï¼Œè§„èŒƒæ€§å·®</li>
</ul>

<h3 id="nodejsçš„åŸç†">node.jsçš„åŸç†</h3>
<ul>
  <li>
    <p>Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨ï¼Œ éé˜»å¡I/O æ¨¡å‹ï¼Œéå¸¸é€‚åˆè¿è¡Œæ•°æ®å¯†é›†å‹çš„åº”ç”¨ã€‚</p>
  </li>
  <li>
    <p>åŸºäº Chrome V8ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨ C++ å†™çš„è¶…å¿«çš„è§£é‡Šå™¨ã€‚</p>
  </li>
  <li>
    <p>Node.js çš„è¿è¡Œæ˜¯ä¸€ä¸ªLoopï¼Œåœ¨æ¯ä¸ªLoopä¸­è´Ÿè´£åˆ†å‘å’Œå¤„ç†å„ç§äº‹ä»¶ï¼Œè€Œè€—æ—¶çš„I/Oäº‹ä»¶è¢«åˆ†å‘åˆ°å¼‚æ­¥I/Oçº¿ç¨‹ä¸­ã€‚Nodeçš„ä¸»çº¿ç¨‹ç±»ä¼¼ä¸€ä¸ªå‰å°æ¥å¾…ï¼Œè´Ÿè´£æ¥å¾…ä»å¤§é—¨è¿›æ¥çš„æ‰€æœ‰æ¥è®¿å®¢æˆ·ï¼Œç„¶ååˆ†å‘ç»™ä¸åŒçš„åå°äººå‘˜å»ç»§ç»­è·Ÿè¿›å¤„ç†ã€‚</p>
  </li>
  <li>
    <p>Node..js æœ¬èº«å¹¶ä¸è‡ªå¸¦webæ¡†æ¶ï¼ˆç”¨httpæ¨¡å—å¯ä»¥æ”¯æŒç®€å•çš„webå¼€å‘ï¼‰ï¼Œéœ€è¦å¼•ç”¨å…¶ä»–åŸºäºNode.jsçš„webå¼€å‘æ¡†ï¼Œä¾‹å¦‚expressï¼Œkoaã€‚</p>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">});</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="express">express</h3>
<p>expressæ˜¯ä¸€æ¬¾æœ€åŸºç¡€çš„åŸºäºnode.jsçš„webå¼€å‘æ¡†æ¶ï¼Œå»ºç«‹åœ¨node.jså†…ç½®çš„httpæ¨¡å—ä¸Šï¼Œå®ƒæä¾›å¦‚ä¸‹APIï¼š</p>
<ul>
  <li>ç›‘å¬ç«¯å£ï¼š</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ç¤ºä¾‹åº”ç”¨æ­£åœ¨ç›‘å¬ 3000 ç«¯å£!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>æ³¨å†Œå¯¹httpè¯·æ±‚ï¼ˆgetï¼Œpostï¼Œputï¼Œdeleteï¼‰çš„å“åº”å›è°ƒå‡½æ•°ï¼š</li>
  <li>ç»™è¯·æ±‚è€…å‘é€å“åº”æŠ¥æ–‡</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>å¤„ç†è·¯ç”±</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// é¦–é¡µè·¯ç”±</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">ç»´åŸºé¦–é¡µ</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// â€œå…³äºâ€é¡µé¢è·¯ç”±</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/about</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">å…³äºæ­¤ç»´åŸº</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// routerå¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
	<span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>

<span class="c1">// è·¯ç”±æŒ‚è½½éœ€è¦åˆ°æŸç›®å½•ä¸‹</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/app</span><span class="dl">'</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>æ”¯æŒæ·»åŠ ä¸­é—´ä»¶</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">a_middleware_function</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ... è¿›è¡Œä¸€äº›æ“ä½œ</span>
  <span class="nx">next</span><span class="p">();</span> <span class="c1">// è°ƒç”¨ next() ï¼ŒExpress å°†è°ƒç”¨å¤„ç†é“¾ä¸­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚</span>
<span class="p">};</span>

<span class="c1">// ç”¨ use() ä¸ºæ‰€æœ‰çš„è·¯ç”±å’ŒåŠ¨è¯æ·»åŠ è¯¥å‡½æ•°</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="c1">// ç”¨ use() ä¸ºä¸€ä¸ªç‰¹å®šçš„è·¯ç”±æ·»åŠ è¯¥å‡½æ•°</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/someroute</span><span class="dl">'</span><span class="p">,</span> <span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="c1">// ä¸ºä¸€ä¸ªç‰¹å®šçš„ HTTP åŠ¨è¯å’Œè·¯ç”±æ·»åŠ è¯¥å‡½æ•°</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">a_middleware_function</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>æ‰˜ç®¡é™æ€æ–‡ä»¶</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">public</span><span class="dl">'</span><span class="p">));</span>

<span class="nx">ç°åœ¨</span> <span class="dl">'</span><span class="s1">public</span><span class="dl">'</span> <span class="nx">æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å‡å¯é€šè¿‡åœ¨æ ¹</span> <span class="nx">URL</span> <span class="nx">åç›´æ¥æ·»åŠ æ–‡ä»¶åæ¥è®¿é—®äº†</span><span class="err">ï¼Œ</span><span class="nx">ä¾‹å¦‚</span><span class="err">ï¼š</span>
<span class="nx">http</span><span class="p">:</span><span class="c1">//localhost:3000/images/dog.jpg</span>
<span class="nx">http</span><span class="p">:</span><span class="c1">//localhost:3000/css/style.css</span>
<span class="nx">http</span><span class="p">:</span><span class="c1">//localhost:3000/js/app.js</span>
<span class="nx">http</span><span class="p">:</span><span class="c1">//localhost:3000/about.html</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>ä½¿ç”¨æ¨¡æ¿ï¼ŒExpressæ”¯æŒå¤šç§æ¨¡æ¿å¼•æ“
```
// index.pug
html
head
  title= title
body
  h1= message</li>
</ul>

<p>app.get(â€˜/â€™, function (req, res) {
  // res.render(HTMLæ¨¡æ¿ï¼Œå‚æ•°)
  res.render(â€˜indexâ€™, { title: â€˜Heyâ€™, message: â€˜Hello there!â€™ })
})</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
### Koa

Koaæ˜¯ä¸€ä¸ªç±»ä¼¼äºExpressçš„Webå¼€å‘æ¡†æ¶ï¼Œåˆ›å§‹äººä¹Ÿæ˜¯åŒä¸€ä¸ªäººã€‚Koaçš„åŸç†å’Œå†…éƒ¨ç»“æ„å¾ˆåƒExpressï¼Œä½†æ˜¯è¯­æ³•å’Œå†…éƒ¨ç»“æ„è¿›è¡Œäº†å‡çº§ã€‚
</pre></td></tr></tbody></table></code></pre></div></div>
<p>// dome
const Koa = require(â€˜koaâ€™);
const app = new Koa();</p>

<p>app.use(async ctx =&gt; {
  ctx.body = â€˜Hello Worldâ€™;
});</p>

<p>app.listen(3000);</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>- çº§è”ï¼šæŠŠå¤šä¸ªä¸­é—´ä»¶ä¸²è”èµ·æ¥
</pre></td></tr></tbody></table></code></pre></div></div>
<p>app.use(async (ctx, next) =&gt; {
  await next();
  const rt = ctx.response.get(â€˜X-Response-Timeâ€™);
  console.log(<code class="language-plaintext highlighter-rouge">${ctx.method} ${ctx.url} - ${rt}</code>);
});</p>

<p>app.use(async (ctx, next) =&gt; {
  const start = Date.now();
  await next();
  const ms = Date.now() - start;
  ctx.set(â€˜X-Response-Timeâ€™, <code class="language-plaintext highlighter-rouge">${ms}ms</code>);
});</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>
- è®¾ç½®å±æ€§
</pre></td></tr></tbody></table></code></pre></div></div>
<p>const Koa = require(â€˜koaâ€™);
// é€šè¿‡æ„é€ å‡½æ•°
const app = new Koa({ proxy: true });
// åŠ¨æ€è®¾ç½®
app.proxy = false;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>
- contextï¼šKoa çš„ context å°† node çš„ request å’Œ response å¯¹è±¡å°è£…åˆ°å•ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶æä¾›äº†è¯¸å¤šæ“ä½œæ–¹æ³•
</pre></td></tr></tbody></table></code></pre></div></div>
<p>app.use(async ctx =&gt; {
  ctx; // è¿™æ˜¯ Context
  ctx.request; // è¿™æ˜¯ koa Request
  ctx.response; // è¿™æ˜¯ koa Response
});</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>
### Webpack
webpack æ˜¯ä¸€ä¸ª JS çš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ã€‚å®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚
- entryï¼šå…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ã€‚
- outputï¼šoutput å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º ./distã€‚åŸºæœ¬ä¸Šï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºç»“æ„ï¼Œéƒ½ä¼šè¢«ç¼–è¯‘åˆ°ä½ æŒ‡å®šçš„è¾“å‡ºè·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨é…ç½®ä¸­æŒ‡å®šä¸€ä¸ª output å­—æ®µï¼Œæ¥é…ç½®è¿™äº›å¤„ç†è¿‡ç¨‹ï¼š
- loaderï¼šloader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚
- pluginsï¼šæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚

### Vue
Vueä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚

### SSR
server side renderï¼šåœ¨æœåŠ¡ç«¯æŠŠHTMLæ–‡æ¡£è§£æå®Œæˆï¼ˆæˆ–è€…éƒ¨åˆ†è§£æï¼‰åï¼Œå†äº¤ç»™æœåŠ¡ç«¯ï¼Œä»è€Œç¼©çŸ­å®¢æˆ·ç«¯æ¸²æŸ“ç•Œé¢çš„æ—¶é—´ã€‚

### promise
ä¸€ä¸ªpromiseæ˜¯ä¸€ä¸ªå°è£…äº†å¼‚æ­¥ä»»åŠ¡çš„å¯¹è±¡ï¼Œå¤–ç•Œå¯ä»¥ç›‘å¬è¿™ä¸ªpromiseçš„çŠ¶æ€ï¼ŒåŒæ—¶å‘å…¶æ³¨å†Œå›è°ƒå‡½æ•°
</pre></td></tr></tbody></table></code></pre></div></div>
<p>function ajax(URL) {
    return new Promise(function (resolve, reject) {
        var req = new XMLHttpRequest(); 
        req.open(â€˜GETâ€™, URL, true);
        req.onload = function () {
        if (req.status === 200) { 
                resolve(req.responseText);
            } else {
                reject(new Error(req.statusText));
            } 
        };
        req.onerror = function () {
            reject(new Error(req.statusText));
        };
        req.send(); 
    });
}
var URL = â€œ/try/ajax/testpromise.phpâ€; 
ajax(URL).then(function onFulfilled(value){
    document.write(â€˜å†…å®¹æ˜¯ï¼šâ€™ + value); 
}).catch(function onRejected(error){
    document.write(â€˜é”™è¯¯ï¼šâ€™ + error); 
});
```</p>

:ET